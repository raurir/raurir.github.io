<html>
<style>
body { margin:0;padding:0;background: #ccc;}
canvas {/* border:1px solid #444;*/}
</style>
<body>
</body>
<script src="js/dom.js"></script>
<script src="js/colours.js"></script>
<script>
(function() {
	var experiments = [
		["additive"],
		["isometric_cubes"],
		["mining_branches"],
		["oscillate_curtain"],
		["pattern_check", "css/pattern_check"],
		["recursive"],
		["spiral_even"],
		["squaretracer"],
		["tea"],
		["polyhedra","3d"],
		["polyhedra_three","THREE"],
		["voronoi_stripes", "voronoi"],
	];

	function createScript(s) {
		var script = dom.createElement("script");
		script.src = s;
		document.body.appendChild(script);
	}

	function creatStyleSheet(s) {
    var link  = dom.createElement("link");
    // link.id = cssId;
    link.rel = "stylesheet";
    link.type = "text/css";
    link.href = s + ".css";
    // link.media = "all";
    document.head.appendChild(link);
	}

	function loadExperiment(index) {
		var exp = experiments[index];
		for (var i = exp.length - 1; i > -1;i--) {
			var file = exp[i]
			if (/css/.test(file)) {
				creatStyleSheet(file);
			} else {
				var src = "js/" + file +  ".js";
				if (file == "THREE") {
					src = "lib/three/three.min.js";
				}
				createScript(src);
			}
		}

	}
	function showButtons() {
		for(var e in experiments) {
			var button = dom.createElement("button");
			button.addEventListener("click", function(event){
				var index = event.target.index;
				window.location = "?" + index;
			});
			button.index = e;
			button.innerHTML = experiments[e][0];
			document.body.appendChild(button);
		}
	}

	if (window.location.search) {
		var index = window.location.search.split("?")[1];
		loadExperiment(index);
	} else {
		showButtons();
	}

}).call(this);
</script>
</html>