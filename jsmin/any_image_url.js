"use strict";var isNode="undefined"!=typeof module;if(isNode)var con=console,rand=require("./rand.js"),Canvas=require("canvas"),Image=Canvas.Image,dom=require("./dom.js"),http=require("http"),https=require("https");var any_image_url=function(){return function(){var size,sw,sh,cx,cy,allowed={526:{image:"https://blog.funkyvector.com/wp-content/uploads/2016/05/state_of_origin_52_6_22_d5243594_design.png",scale:isNode?1:.5},834199129:{scale:.8}},bmp=dom.canvas(1,1),r=rand.instance(),ctx=bmp.ctx,progress=void 0;return{stage:bmp.canvas,init:function(options){var ok;size=options.size,progress=options.progress,r.setSeed(options.seed),cx=(sw=size)/2,cy=(sh=size)/2,bmp.setSize(sw,sh),(ok=allowed[r.getSeed()])&&ok.image?function(url,scale){function drawToContext(img){var width=img.width,height=img.height;ctx.translate(cx,cy),ctx.scale(scale,scale),ctx.translate(-width/2,-height/2),ctx.drawImage(img,0,0),progress("render:complete",bmp.canvas)}if(isNode)!function(url,fulfill,reject){(/https:\/\//.test(url)?https:http).get(url,function(res){var buffers=[];res.on("data",function(chunk){chunk.length,buffers.push(chunk)}),res.on("end",function(){var loaded=Buffer.concat(buffers);fulfill(loaded)}),res.on("error",function(e){con.log("loadImageURL reject",e),reject(e)})})}(url,function(buffer){var data,fulfill,reject,img;data=buffer,fulfill=function(img){drawToContext(img)},reject=function(err){con.log("renderBMPFromURL - makeImage fail",err)},(img=new Image).src=data,img?fulfill(img):(con.log("makeImage reject"),reject())},function(err){con.log("renderBMPFromURL - loadImageURL fail",err)});else{var img=new Image;img.onload=function(){drawToContext(img)},img.onerror=function(err){con.log("renderBMPFromURL img.onerror error",err)},img.src=url}}(ok.image,ok.scale):(con.warn("Cannot find image:",r.getSeed()),progress("render:complete",null))},update:function(_settings,_seed){},settings:{}}}};isNode?module.exports=any_image_url():define("any_image_url",any_image_url);