"use strict";var focalLength=1200;function calc2D(e,t){for(var n,a,r,o,i,c,s,d,l=[],f=Math.sin(t.x),u=Math.cos(t.x),h=Math.sin(t.y),m=Math.cos(t.y),p=Math.sin(t.z),v=Math.cos(t.z),g=0,b=e.length;g<b;g++)n=e[g].x,n=(v*(c=h*(i=f*(a=e[g].y)+u*(r=e[g].z))+m*n)-p*(o=u*a-f*r))*(d=focalLength/(focalLength+(s=m*i-h*n))),a=(p*c+v*o)*d,l[g]=make2DPoint(n,a,s);return l}function calcNormal(e,t,n){var a={};a.x=t.x-e.x,a.y=t.y-e.y,a.z=t.z-e.z;var r={};r.x=n.x-e.x,r.y=n.y-e.y,r.z=n.z-e.z;var o={};return o.x=a.y*r.z-a.z*r.y,o.y=a.z*r.x-a.x*r.z,o.z=a.x*r.y-a.y*r.x,o}if(make3DPoint=function(e,t,n){var a={};return a.x=e,a.y=t,a.z=n,a},make2DPoint=function(e,t,n){var a={};return a.x=e+sw/2,a.y=t+sh/2,a.z=n,a},cubeAxisRotations=make3DPoint(0,0,0),renderPlanes=function(e,t,n){for(var a=[],r=0,o=t.length;r<o;r++){for(var i=calc2D(t[r],cubeAxisRotations),c=1e6,s=1e6,d=1e6,l=0,f=0,u=0,h=[],m={x:0,y:0},p=i.length,v=0;v<p;v++){var g=i[v];h.push({x:g.x,y:g.y}),g.x<c&&(c=g.x),g.x>l&&(l=g.x),g.y<s&&(s=g.y),g.y>f&&(f=g.y),g.z<d&&(d=g.z),g.z>u&&(u=g.z),m.x=m.x+g.x,m.y=m.y+g.y}m.x=m.x/p,m.y=m.y/p;var b=d+(u-d)/2,y=calcNormal(i[0],i[1],i[2]),x=Math.sqrt(y.x*y.x+y.y*y.y+y.z*y.z),w={x:y.x/x,y:y.y/x,z:y.z/x},M={z:b,o:h};if(n){var E={slope:{x:Math.acos(w.x),y:Math.asin(y.y/x),z:Math.acos(w.z)},bounds:[c,s,l,f],vertices:p};M.params=E}a[r]=M}a.sort(function(e,t){return e.z<t.z?1:-1});for(r=0,o=a.length;r<o;r++){h=a[r].o;n.fillColor&&(e.fillStyle=n.fillColor(a[r].params)),e.beginPath();g=0;for(var T=h.length;g<T;g++){var R=h[g].x,C=h[g].y;0==g?e.moveTo(R,C):e.lineTo(R,C)}e.closePath(),e.fill()}},define(function(e){var t=dom.element("div"),n=dom.button("test1",{style:{color:"white"}}),a=dom.button("test2",{style:{color:"white"}});return t.appendChild(n),t.appendChild(a),dom.on(n,["click"],function e(){con.log("go!!");dom.on(a,["click"],e);dom.off(n,["click"],e)}),con.log("test loaded"),{stage:t,init:function(){},resize:function(){}}}),function(){var i,n,c,a,s,e,d,l;n=console,a=document,i=c=null,l=0,d=[],e=function(){var e,t;for((i=a.createElement("canvas")).width=i.height=400,a.body.appendChild(i),c=i.getContext("2d"),e=t=0;t<4;e=t+=1)d[e]=Math.pow(2,e+1)+10*(2*Math.random()-1);return n.log(d),s()},s=function(){var e,t,n,a,r,o;for(i.width=i.width,l+=1,n=r=0;r<200;n=r+=1){for(e=o=t=0;o<4;e=o+=1)t+=Math.sin((l+n)*d[e]*.01)/Math.pow(2,e+1);a=200+200*t/4,0,c.fillStyle="rgba(0,0,0,1)",c.fillRect(2*n,a,10,10)}return requestAnimationFrame(s)},e()}.call(this),define("aegean_sun",["perlin"],function(e){var t=window.innerWidth,n=window.innerHeight,u=400,i=400,c=e.noise(u,i),s=e.noise(u,i),a=(rand.getInteger(100,300),rand.getInteger(4,10),Math.floor(t*n/200),colours.getRandomPalette()),r=dom.canvas(t,n),h=r.ctx;return{init:function(){var e=colours.getRandomColour();a.splice(a.indexOf(e),1),h.fillStyle=e,h.fillRect(0,0,t,n),h.strokeStyle=colours.getNextColour(),function(e){var d=c.cycle(100*Math.random(),.005),l=s.cycle(100*Math.random(),.004);function t(e,t){for(var n=e.length,a=[],r=0;r<n;r++){var o={x:e[r].x+t.x,y:e[r].y+t.y},i=Math.floor(o.y*u+o.x),c=2*(d[i]-.5),s=0*(l[i]-.5);o.x+=c,o.y+=s,a.push(o)}return f(a),a}function f(e){var t=e.length;h.beginPath();for(var n=0;n<t;n++){var a=e[n];0==n?h.moveTo(a.x,a.y):h.lineTo(a.x,a.y)}h.stroke()}for(var n=function(){for(var e={x:rand.getNumber(.4,.6)*u,y:0*i},t={x:rand.getNumber(.4,.6)*u,y:1*i},n=[],a=0;a<20;a++){var r=geom.lerp(e,t,a/20);n.push(r)}return f(n),n}(),a=n,r=n,o=0;o<40;o++)a=t(a,{x:4,y:0}),r=t(r,{x:-4,y:0})}()},stage:r.canvas}}),isNode="undefined"!=typeof module)var con=console,rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var camera,scene,projector,renderer,alien=function(){var a,t,n,r,o=dom.canvas(1,1),i=o.ctx,s=10,d=10,l=d/2,f=void 0,u=void 0,h=void 0;function c(){var t=function(){function o(e){return~~(Math.random()*e+1)}function e(){for(var e=o(11),t=o(5),n=[],a=0;a<e;){var r=a*t;n.push(r),a&&n.unshift(-r),a++}return n}return{x:e(),y:e()}}();t.x.forEach(function(n,e){t.y.forEach(function(e){var t=function(){var i=[],r=rand.getInteger(0,3);r&&(r=f/r);var c=dom.canvas(u,h);function o(e,t,n,a){var r=void 0;r=l<=t?d-t-1:t;var o=i[e][r];o&&(c.ctx.fillStyle=n,c.ctx.fillRect((1+t)*f-a,(1+e)*f-a,f+2*a,f+2*a))}return function(){for(var e=0;e<s;e++){i[e]=[];for(var t=0;t<l;t++)i[e][t]=(n=t,Math.random()<(n+1)/(l+1))}var n}(),function(){var e=void 0,t=void 0,n=colours.getNextColour(),a=colours.getNextColour();for(t=0;t<s;t++)for(e=0;e<d;e++)o(t,e,n,r);for(t=0;t<s;t++)for(e=0;e<d;e++)o(t,e,a||colours.getNextColour(),0)}(),c.canvas}();i.drawImage(t,a+n*u,a+e*h)}),progress("render:progress",e/t.x.length)}),progress("render:complete",o.canvas)}return{init:function(e){t=e.size,n=e.sw||t,r=e.sh||t,o.setSize(n,r),f=Math.ceil(rand.getInteger(20,60)/d),u=f*(d+2),h=f*(s+2),a=r/2,colours.getRandomPalette(),c()},render:c,stage:o.canvas}};isNode?module.exports=alien():define("alien",alien);var mouse={x:0,y:0},sw=window.innerWidth,sh=window.innerHeight;sw=sh=400;var n,theta=0,h=[],i=0,radius=20;function draw(e){var t=new THREE.MeshLambertMaterial({color:4278198272}),n=new THREE.CylinderGeometry(e.radius,e.radius,e.height,14);return new THREE.Mesh(n,t)}function init(){var e;con.log("init"),scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(70,sw/sh,1,1e4)).position.set(0,300,500),scene.add(camera),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),scene.add(e),(e=new THREE.DirectionalLight(16777215)).position.set(-1,-1,-1).normalize(),scene.add(e),(renderer=new THREE.WebGLRenderer).sortObjects=!1,renderer.setSize(sw,sh);for(var t=0;t<10;t++){var n=1-t/10+.5,a=100*n,r=draw({height:t*a,radius:20*n});r.position.set(0,a,0),r.rotation.set(0,0,.2*t),scene.add(r)}document.body.appendChild(renderer.domElement),document.addEventListener("mousemove",onDocumentMouseMove,!1)}function onDocumentMouseMove(e){e.preventDefault(),mouse.x=e.clientX/sw*2-1,mouse.y=-e.clientY/sh*2+1}function render(){var e=500;camera.position.x=e*Math.sin(theta*Math.PI/360),camera.position.y=130*mouse.y,camera.position.z=e*Math.cos(theta*Math.PI/360),camera.lookAt(scene.position),renderer.render(scene,camera)}function animate(){requestAnimationFrame(animate),render()}if((settings={}).lineScale=1,settings.lineSize=1+10*Math.random()*settings.lineScale,settings.lineGap=2+3*Math.random()*settings.lineScale,settings.baseRotation=0,settings.varyRotation=Math.random()*Math.PI*2,setTimeout(function(){init(),animate()},100),isNode="undefined"!=typeof module){con=console,rand=require("./rand.js");var Image=(Canvas=require("canvas")).Image,http=(dom=require("./dom.js"),require("http")),https=require("https")}var any_image_url=function(){return function(){var n,a,r,s,d,o={526:{image:"https://funkyvector.com/blog/wp-content/uploads/2016/05/state_of_origin_52_6_22_d5243594_design.png",scale:isNode?1:.5},834199129:{scale:.8}},l=dom.canvas(1,1),f=l.ctx;return{stage:l.canvas,init:function(e){var t;n=e.size,s=(a=n)/2,d=(r=n)/2,l.setSize(a,r),(t=o[rand.getSeed()])&&t.image?function(e,a){function o(e){var t=e.width,n=e.height;f.translate(s,d),f.scale(a,a),f.translate(-t/2,-n/2),f.drawImage(e,0,0),progress("render:complete",l.canvas)}if(isNode)r=function(e){var t,n,a,r;t=e,n=function(e){o(e)},a=function(e){con.log("makeImage fail",e)},(r=new Image).src=t,r?n(r):(con.log("makeImage reject"),a())},i=function(e){con.log("loadImageURL fail",e)},c=http,/https:\/\//.test(n=e)&&(c=https),c.get(n,function(e){var t=[];e.on("data",function(e){e.length,t.push(e)}),e.on("end",function(){var e=Buffer.concat(t);r(e)}),e.on("error",function(e){con.log("loadImageURL reject",e),i(e)})});else{var t=new Image;t.onload=function(){o(t)},t.onerror=function(e){con.log("img.onerror error",e)},t.src=e}var n,r,i,c}(t.image,t.scale):con.warn("Cannot find image:",rand.getSeed())}}}};isNode?module.exports=any_image_url():define("any_image_url",any_image_url),define("attractor",function(){var n,a,r=window.innerWidth,o=window.innerHeight,e=(colours.getRandomPalette(),dom.canvas(r,o)),i=e.ctx,c=.19,s=1.3,d=5,l=0,f=40,u=2e4,h={x:0,y:0};function m(e){return(e+.1+e*(c-s)*e)/(1.1+c*(s*s+c*c)*e*e)*1.3}function p(e){requestAnimationFrame(p),i.fillStyle="white",i.fillRect(0,0,r,o),s=h.x/9e3;for(var t=l=d=0;t<u;t++)d=-(n=d)-c+s+m(a=l),l=-n+s*m(n*a),i.fillStyle="rgba(0,0,0,0.3)",i.fillRect(380+d*f,450+l*f,1,1)}return dom.on(window,["mousemove","touchmove"],function(e){var t=e.changedTouches&&e.changedTouches[0]||e;h.x=(t.x||t.pageX)-r/2,h.y=(t.y||t.pageY)-o/2}),{init:function(){p()},stage:e.canvas}});var analyser,AudioContext=window.AudioContext||window.webkitAudioContext,fftSize=128;function WebAudioAnalyser(e,t,n){if(!(this instanceof WebAudioAnalyser))return new WebAudioAnalyser(e,t,n);if(t instanceof AudioContext||(n=t,t=null),n=n||{},this.ctx=t=t||new AudioContext,e instanceof AudioNode||(e=e instanceof Audio||e instanceof HTMLAudioElement?t.createMediaElementSource(e):t.createMediaStreamSource(e)),this.analyser=t.createAnalyser(),this.analyser.fftSize=fftSize,this.stereo=!!n.stereo,this.audible=!1!==n.audible,this.wavedata=null,this.freqdata=null,this.splitter=null,this.merger=null,this.source=e,this.stereo){this.analyser=[this.analyser],this.analyser.push(t.createAnalyser()),this.splitter=t.createChannelSplitter(2),this.merger=t.createChannelMerger(2),this.output=this.merger,this.source.connect(this.splitter);for(var a=0;a<2;a++)this.splitter.connect(this.analyser[a],a,0),this.analyser[a].connect(this.merger,0,a);this.audible&&this.merger.connect(t.destination)}else this.output=this.source,this.source.connect(this.analyser),this.audible&&this.analyser.connect(t.destination)}WebAudioAnalyser.prototype.waveform=function(e,t){return e||(e=this.wavedata||(this.wavedata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount))),(this.stereo?this.analyser[t||0]:this.analyser).getByteTimeDomainData(e),e},WebAudioAnalyser.prototype.frequencies=function(e,t){return e||(e=this.freqdata||(this.freqdata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount))),(this.stereo?this.analyser[t||0]:this.analyser).getByteFrequencyData(e),e},analyse=WebAudioAnalyser;var lastBars=new Uint8Array(fftSize/2),d=document.createElement("div");function createFreqBar(e){var t=document.createElement("div");return t.style.width="100%",t.style.height="100px",t.style.position="absolute",t.style.top=100*e+"px",document.body.appendChild(t),t}document.body.appendChild(d);var lastPeak=[],numBands=8,bands=[];for(i=0;i<numBands;i++)bands[i]=createFreqBar(i),lastPeak[i]=0;var audio=new Audio;function getBand(e,t){for(var n=0,a=fftSize/2/numBands,r=t*a+a,o=t*a;o<r;o++)n+=e[o];return n/=a}audio.crossOrigin="Anonymous",audio.src="exebeche.mp3",audio.loop=!0,audio.addEventListener("canplay",function(){console.log("playing!"),analyser=analyse(audio,{audible:!0,stereo:!1,fftSize:16}),binCount=64,levelBins=Math.floor(binCount/levelsCount),con.log(binCount,levelsCount),audio.play(),audio.currentTime=150,render(0)}),audio.addEventListener("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:alert("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:alert("A network error caused the audio download to fail.");break;case e.target.error.MEDIA_ERR_DECODE:alert("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:alert("The video audio not be loaded, either because the server or network failed or because the format is not supported.");break;default:alert("An unknown error occurred.")}});var freqByteData,timeByteData,levelBins,levelsData=[],levelsCount=32,levelHistory=[],beatCutOff=0,beatTime=0,length=256;for(i=0;i<length;i++)levelHistory.push(0);function render(e){if(analyser){var t=analyser.frequencies();t.length;requestAnimationFrame(render);for(var n=0;n<levelsCount;n++){for(var a=0,r=0;r<levelBins;r++)a+=t[n*levelBins+r];levelsData[n]=a/levelBins/256*1}for(a=0,r=0;r<levelsCount;r++)a+=levelsData[r];level=a/levelsCount,levelHistory.push(level),levelHistory.shift(1);var o=.15;level>beatCutOff&&level>o?(document.body.style.background="#fff",beatCutOff=1.1*level,beatTime=0):(document.body.style.background="#444",beatTime<=50?beatTime++:(beatCutOff*=.98,beatCutOff=Math.max(beatCutOff,o)));var i=[];levelsData.concat([10*level]).forEach(function(e){for(var t=0,n="#";t++<10*e;)n+="#";i.push(n)}),d.innerHTML=i.join("<br>")}}define("ball_and_chain",["lib/schteppe/cannon.0.6.2.min.js","cannon_demo"],function(e,t){function n(){var g=new t;g.create(function(){var c=function(e){var t=e.getWorld();t.gravity.set(0,0,-40),t.broadphase=new CANNON.NaiveBroadphase,t.solver.iterations=10;var n=new CANNON.Plane,a=new CANNON.Body({mass:0});return a.addShape(n),a.position.set(0,0,1),t.addBody(a),e.addVisual(a),t.quatNormalizeFast=!1,t.quatNormalizeSkip=0,t}(g);c.gravity.set(0,0,-20);var e,s=1,d=1,t=new CANNON.Box(new CANNON.Vec3(s,.3,d)),n=new CANNON.Box(new CANNON.Vec3(.3,s,d)),l=.3;function a(e,t,n){var a=.1*s,r=d+l+n,o=new CANNON.PointToPointConstraint(e,new CANNON.Vec3(-a,0,r),t,new CANNON.Vec3(-a,0,-r)),i=new CANNON.PointToPointConstraint(e,new CANNON.Vec3(a,0,r),t,new CANNON.Vec3(a,0,-r));c.addConstraint(o),c.addConstraint(i)}for(var r=0;r<10;r++){var o=1===r,i=9===r,f=(10-r)*(2*d+2*l)+2*d+l;if(0===r){var u=new CANNON.Sphere(4),h=new CANNON.Body({mass:3});h.addShape(u),h.position.set(0,0,f),e=h}else if(i){var m=new CANNON.Cylinder(2,2,3,12),p=new CANNON.Body({mass:.5});p.addShape(m),p.position.set(0,0,f),a(p,e,0),e=p}else{var v=new CANNON.Body({mass:.1});v.addShape(r%2?t:n),v.position.set(0,0,f),v.custom=!0,v.customType="CHAIN_LINK",a(v,e,o?1.8:0),e=v}c.add(e),g.addVisual(e),e.velocity.set(Math.random()-.5,Math.random()-.5,Math.random()-.5),e.linearDamping=.1,e.angularDamping=.1}}),g.start()}!function e(){con.log("check"),"undefined"==typeof THREE?setTimeout(e,10):n()}()});con=console;if(isNode="undefined"!=typeof module){rand=require("./rand.js");var geom=require("./geom.js");dom=require("./dom.js"),colours=require("./colours.js")}var bezier_flow=function(){var x,w,M,d,l,E,T,f,R,u,C={renderlimit:{min:1,max:Number.POSITIVE_INFINITY,cur:1}},S=dom.canvas(100,100),N=S.ctx;function z(e){return E[(l+e)%l]}function h(e){for(var n=e.cx||rand.random(),a=e.cy||rand.random(),t=.7*rand.random()/d,r=[],o=0,i=0;i<d;i++){var c=(.1+rand.random())*t;r[i]=o,o+=c*(f?.1*Math.pow(2,1+.2*i):1)}E.push({index:e.index,cx:n,cy:a,a:null,total:o,gaps:r,angle:function(){var e=z(this.index-1),t=z(this.index+1),n=t.cx-e.cx,a=t.cy-e.cy;this.a=-Math.atan(a/n)-(n<0?0:Math.PI)},move:function(){this.angle()},lines:function(e){var t=r[e]-.2;return[n-Math.sin(this.a)*t,a-Math.cos(this.a)*t]}})}function m(){N.clearRect(0,0,x,w),con.log("render ========================",C.renderlimit.cur);for(var e=0;e<C.renderlimit.cur;e++)for(var t=0,n=E.length;t<n;t++){var a=z(t-1),r=z(t);r.move();var o=-Math.tan(a.a),i=-Math.tan(r.a),c=a.lines(e),s=r.lines(e),d=c[0],l=c[1],f=s[0],u=s[1],h=l-o*d,m=u-i*f,p=-.1*o+h,v=1.1*o+h,g=-.1*i+m,b=1.1*i+m,y=geom.intersectionAnywhere({x:-.1,y:p},{x:1.1,y:v},{x:-.1,y:g},{x:1.1,y:b});N.strokeStyle=T[e].strokeStyle,N.lineWidth=T[e].lineWidth*(R?.1*(e+1):1),N.beginPath(),N.moveTo(d*M,l*M),N.quadraticCurveTo(y.x*M,y.y*M,f*M,u*M),N.stroke()}con.log("render complete called"),progress("render:complete",S.canvas)}return{stage:S.canvas,init:function(e){function t(){return 1+3*rand.random()}con.log("init called",rand.getSeed()),M=e.size,w=x=M,S.setSize(x,w),d=rand.getInteger(100,500),C.renderlimit.max=d,C.renderlimit.cur=d,l=rand.getInteger(3,6),con.log("sections",l),f=.5<rand.random(),R=.5<rand.random(),u=.5<rand.random(),E=[],T=[],colours.getRandomPalette();for(var n=t(),a=0;a<d;a++)T[a]={strokeStyle:colours.getRandomColour(),lineWidth:u?n:t()};for(var r=1e-4+rand.random()*Math.PI,o=1/l*.1,i=0;i<l;i++){var c=.3+.1*rand.random(),s=r+(i/l+rand.getNumber(-o,o))*Math.PI*2;h({index:i,cx:.5+Math.sin(s)*c,cy:.5+Math.cos(s)*c})}for(i=0;i<l;i++)E[i].angle();N.clearRect(0,0,M,M),N.lineCap="round",m()},settings:C,render:m}};isNode?module.exports=bezier_flow():define("bezier_flow",bezier_flow);var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(define("bill_stevens",function(){var s,d,l,f,m,u=document.createElement("div"),h=window.innerWidth,p=window.innerHeight,v=[],g=(Array(Math.pow(4,3)).fill(0),Array(Math.pow(4,3)).fill(0)),b=function(e,t){return e[t]++},y=function(t){return function(e){return{x:e%t,y:Math.floor(e/t)%t,z:Math.floor(e/(t*t))}}},x=function(e){return e.x+4*e.y+4*e.z*4},w=[{id:3,structure:[[[1,1,1,1]]]}].map(function(e){var t=e.structure,n=0,a=0,r=0;return t.forEach(function(e,t){n=Math.max(n,t+1),e.forEach(function(e,t){a=Math.max(a,t+1),e.forEach(function(e,t){r=Math.max(r,t+1)})})}),Object.assign(e,{dimensions:{w:n,h:a,d:r}})}),M=function(e){var t=30*e,n=new THREE.MeshLambertMaterial({color:0}),a=new THREE.BoxGeometry(t,t,t);return new THREE.Mesh(a,n)},t=0,E=function e(){if(function(){var n=g.slice(),e=w[Math.floor(Math.random()*w.length)],t=e.structure,i=function(e){return 30*e},a=colours.getNextColour(),r=colours.mutateColour(a,30),o=Number("0x"+r.substr(1)),c=new THREE.Group,s=new THREE.Group;m.add(c),m.add(s),c.x=rand.getInteger(0,4-e.dimensions.w),c.y=rand.getInteger(0,4-e.dimensions.h),c.z=rand.getInteger(0,4-e.dimensions.d),c.rotation.set(rand.getInteger(-1,1)*Math.PI/2,rand.getInteger(-1,1)*Math.PI/2,rand.getInteger(-1,1)*Math.PI/2),t.forEach(function(e,r){e.forEach(function(e,a){e.forEach(function(e,t){if(e){var n=M(.6);n.position.set(i(r),i(a),i(t)),n.material.color.setHex(o),c.add(n)}})})}),c.position.set(30*c.x,30*c.y,30*c.z),c.updateMatrixWorld();var d={x:10,y:10,z:10},l={x:0,y:0,z:0},f=c.children.map(function(e,t){var n=new THREE.Vector3;n.setFromMatrixPosition(e.matrixWorld);var o={};return Object.entries(n).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1],r=0<a&&a<.001||a<0&&-.001<a?0:a;o[n]=r/30,d[n]=Math.min(d[n],o[n]),l[n]=Math.max(l[n],o[n])}),o}),u=function(e,t,n){return d[n]<0?e[n]=t[n]-d[n]:3<l[n]?e[n]=t[n]-(l[n]-4+1):e[n]=t[n],e},h=f.map(function(e){var t={};return u(t,e,"x"),u(t,e,"y"),u(t,e,"z"),t});if(h.forEach(function(e){var t=x(e);b(n,t)}),n.some(function(e){return 1<e}))return con.log("invalid!");h.forEach(function(e){var t=e.x,n=e.y,a=e.z,r=M(.95);r.position.set(i(t),i(n),i(a)),r.material.color.setHex("0x50ff50"),s.add(r);var o=x(e);b(g,o)})}(),g.every(function(e){return 1===e}))return con.log("we're done here!!",g);10<++t||setTimeout(e,20)},T=function(e){},R=function(){d.update(),s.lookAt(l.position),f.render(l,s)},C=function e(){requestAnimationFrame(e),R()};return{stage:u,init:function(){var e;colours.getRandomPalette(),l=new THREE.Scene,(s=new THREE.PerspectiveCamera(50,h/p,1,1e4)).position.set(0,100,500),l.add(s),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),l.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),l.add(e),(f=new THREE.WebGLRenderer).setSize(h,p),d=new THREE.OrbitControls(s,f.domElement),m=new THREE.Group,l.add(m);for(var t=function(e){return 30*e},n=0;n<Math.pow(5,3);n++){var a=M(.1),r=y(5)(n),o=r.x,i=r.y,c=r.z;a.position.set(t(o)-15,t(i)-15,t(c)-15),a.material.color.setHex(16742144),v.push(a),m.add(a)}u.appendChild(f.domElement),document.addEventListener("keydown",T,!1),R(),C(),E()}}}),define("cannon_demo",function(){var e=function(e){e=e||{};var t=this;this.create=function(e){n=e},this.start=function(){n()};var a=this.settings={stepFrequency:60,quatNormalizeSkip:2,quatNormalizeFast:!0,gx:0,gy:0,gz:0,iterations:3,tolerance:1e-4,k:1e6,d:3,scene:0,paused:!1,rendermode:"solid",constraints:!1,contacts:!1,cm2contact:!1,normals:!1,axes:!1,particleSize:.1,shadows:!1,aabbs:!1,profiling:!1,maxSubSteps:3};if(a.stepFrequency%60!=0)throw new Error("stepFrequency must be a multiple of 60.");var n,r=this.bodies=[],o=this.visuals=[],i=(this.particleGeo=new THREE.SphereGeometry(1,16,8),new THREE.MeshPhongMaterial({color:3157034,emissive:0,specular:5323312,shininess:80}));this.wireframeMaterial=new THREE.MeshLambertMaterial({color:16711680,wireframe:!0}),this.currentMaterial=i;this.particleMaterial=new THREE.MeshLambertMaterial({color:16711680});var c,s,d,l=this.world=new CANNON.World;function f(){for(var e=r.length,t=0;t<e;t++){var n=r[t],a=o[t];a.position.copy(n.position),n.quaternion&&a.quaternion.copy(n.quaternion)}}l.broadphase=new CANNON.NaiveBroadphase;var u,h,m,p,v=512,g=512,b=0,y=window.innerWidth,x=window.innerHeight-2*b,w=5,M=2e3;!function(){if(p=document.getElementById("experiment-holder"),(u=new THREE.PerspectiveCamera(24,y/x,w,M)).position.set(0,-100,50),(s=t.scene=new THREE.Scene).fog=new THREE.Fog(2236962,1e3,M),u.lookAt(s.position),d=new THREE.AmbientLight(2236962),s.add(d),(c=new THREE.SpotLight(16777215)).position.set(30,-100,40),c.target.position.set(0,0,0),c.castShadow=!0,c.shadow.camera.near=10,c.shadow.camera.far=100,c.shadow.mapSize.width=v,c.shadow.mapSize.height=g,s.add(c),s.add(u),(m=new THREE.WebGLRenderer({clearColor:0,clearAlpha:1,antialias:!1})).setSize(y,x),m.domElement.style.position="relative",m.domElement.style.top=b+"px",p.appendChild(m.domElement),document.addEventListener("mousemove",R),window.addEventListener("resize",C),m.shadowMap.enabled=!0,m.shadowMap.type=THREE.PCFSoftShadowMap,e.trackballControls){(h=new THREE.TrackballControls(u,m.domElement)).rotateSpeed=1,h.zoomSpeed=1.2,h.panSpeed=.2,h.noZoom=!1,h.noPan=!1,h.staticMoving=!1,h.dynamicDampingFactor=.3;h.minDistance=0,h.maxDistance=1e5,h.screen.width=y,h.screen.height=x}}(),function e(){requestAnimationFrame(e);f();T();S()}();var E=0;function T(){var e=1/a.stepFrequency,t=Date.now()/1e3;if(!E)return l.step(e),void(E=t);var n=t-E;l.step(e,n,a.maxSubSteps),E=t}function R(e){}function C(e){y=window.innerWidth,x=window.innerHeight,m.setSize(y,x),u.aspect=y/x,u.updateProjectionMatrix(),h&&(h.screen.width=y,h.screen.height=x),u.radius=(y+x)/4}function S(){h&&h.update(),m.clear(),m.render(t.scene,u)}};(e.prototype={constructor:e}).getWorld=function(){return this.world},e.prototype.addVisual=function(e,t){var n;e instanceof CANNON.Body?n=this.shape2mesh(e,t):con.log("custom body!!!",e),n&&(this.bodies.push(e),this.visuals.push(n),e.visualref=n,e.visualref.visualId=this.bodies.length-1,this.scene.add(n))},e.prototype.addVisuals=function(e){for(var t=0;t<e.length;t++)this.addVisual(e[t])},e.prototype.removeVisual=function(e){if(e.visualref){for(var t=this.bodies,n=this.visuals,a=[],r=[],o=t.length,i=0;i<o;i++)a.unshift(t.pop()),r.unshift(n.pop());for(var c=e.visualref.visualId,s=0;s<a.length;s++){if(s!==c)t[i=c<s?s-1:s]=a[s],n[i]=r[s],t[i].visualref=a[s].visualref,t[i].visualref.visualId=i}e.visualref.visualId=null,this.scene.remove(e.visualref),e.visualref=null}},e.prototype.removeAllVisuals=function(){for(;this.bodies.length;)this.removeVisual(this.bodies[0])};var I=0;return e.prototype.shape2mesh=function(i,e){e=e||this.currentMaterial;this.settings.renderMode;var c=new THREE.Object3D;function t(e,t){if(e.receiveShadow=!0,e.castShadow=!0,e.children)for(var n=0;n<e.children.length;n++)if(e.children[n].castShadow=!0,e.children[n].receiveShadow=!0,e.children[n])for(var a=0;a<e.children[n].length;a++)e.children[n].children[a].castShadow=!0,e.children[n].children[a].receiveShadow=!0;var r=i.shapeOffsets[t],o=i.shapeOrientations[t];e.position.set(r.x,r.y,r.z),e.quaternion.set(o.x,o.y,o.z,o.w),c.add(e)}if(i.custom){var n=i.shapes[0],a=new THREE.Object3D;switch(i.customType){case"CHAIN_LINK":for(var r=new THREE.BoxGeometry(2*n.halfExtents.x,2*n.halfExtents.y,2*n.halfExtents.z),o=(new THREE.Mesh(r,this.wireframeMaterial),new THREE.Object3D),s=[],d=n.halfExtents.z,l=0;l<=10;l++){var f=l/10*Math.PI*-2;s.push(new THREE.Vector2(.8+.3*Math.sin(f),.3*Math.cos(f)))}var u=new THREE.LatheBufferGeometry(s,10,0,Math.PI),h=new THREE.Mesh(u,e);h.position.set(0,0,d),h.rotation.set(0,-Math.PI/2,0),o.add(h);var m=new THREE.Mesh(u,e);m.position.set(0,0,-d),m.rotation.set(0,-Math.PI/2,Math.PI),o.add(m);u=new THREE.CylinderBufferGeometry(.3,.3,2*d,10);var p=new THREE.Mesh(u,e);p.rotation.set(Math.PI/2,0,0),p.position.set(.8,0,0),o.add(p);var v=new THREE.Mesh(u,e);v.rotation.set(Math.PI/2,0,0),v.position.set(-.8,0,0),o.add(v),h.receiveShadow=!0,h.castShadow=!0,m.receiveShadow=!0,m.castShadow=!0,p.receiveShadow=!0,p.castShadow=!0,v.receiveShadow=!0,v.castShadow=!0,a.add(o),o.rotation.z=I++%2*Math.PI/2;break;default:throw new Error("need to supply customType!")}return t(a,0),c}for(var g=0;g<i.shapes.length;g++){switch((n=i.shapes[g]).type){case CANNON.Shape.types.SPHERE:var b=new THREE.SphereGeometry(n.radius,18,18);a=new THREE.Mesh(b,e);break;case CANNON.Shape.types.PARTICLE:a=new THREE.Mesh(this.particleGeo,this.particleMaterial);var y=this.settings;a.scale.set(y.particleSize,y.particleSize,y.particleSize);break;case CANNON.Shape.types.PLANE:u=new THREE.PlaneGeometry(10,10,4,4);a=new THREE.Object3D;var x=new THREE.Object3D,w=new THREE.Mesh(u,new THREE.MeshLambertMaterial({color:9474192}));w.scale.set(100,100,100),x.add(w),w.castShadow=!0,w.receiveShadow=!0,a.add(x);break;case CANNON.Shape.types.BOX:r=new THREE.BoxGeometry(2*n.halfExtents.x,2*n.halfExtents.y,2*n.halfExtents.z);a=new THREE.Mesh(r,e);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:var M=new THREE.Geometry;for(l=0;l<n.vertices.length;l++){var E=n.vertices[l];M.vertices.push(new THREE.Vector3(E.x,E.y,E.z))}for(l=0;l<n.faces.length;l++)for(var T=n.faces[l],R=(f=T[0],1);R<T.length-1;R++){var C=T[R],S=T[R+1];M.faces.push(new THREE.Face3(f,C,S))}M.computeBoundingSphere(),M.computeFaceNormals(),a=new THREE.Mesh(M,e);break;case CANNON.Shape.types.HEIGHTFIELD:u=new THREE.Geometry;for(var N=new CANNON.Vec3,z=new CANNON.Vec3,k=new CANNON.Vec3,P=0;P<n.data.length-1;P++)for(var _=0;_<n.data[P].length-1;_++)for(var H=0;H<2;H++){n.getConvexTrianglePillar(P,_,0===H),N.copy(n.pillarConvex.vertices[0]),z.copy(n.pillarConvex.vertices[1]),k.copy(n.pillarConvex.vertices[2]),N.vadd(n.pillarOffset,N),z.vadd(n.pillarOffset,z),k.vadd(n.pillarOffset,k),u.vertices.push(new THREE.Vector3(N.x,N.y,N.z),new THREE.Vector3(z.x,z.y,z.z),new THREE.Vector3(k.x,k.y,k.z));l=u.vertices.length-3;u.faces.push(new THREE.Face3(l,l+1,l+2))}u.computeBoundingSphere(),u.computeFaceNormals(),a=new THREE.Mesh(u,e);break;case CANNON.Shape.types.TRIMESH:for(u=new THREE.Geometry,N=new CANNON.Vec3,z=new CANNON.Vec3,k=new CANNON.Vec3,l=0;l<n.indices.length/3;l++){n.getTriangleVertices(l,N,z,k),u.vertices.push(new THREE.Vector3(N.x,N.y,N.z),new THREE.Vector3(z.x,z.y,z.z),new THREE.Vector3(k.x,k.y,k.z));R=u.vertices.length-3;u.faces.push(new THREE.Face3(R,R+1,R+2))}u.computeBoundingSphere(),u.computeFaceNormals(),a=new THREE.Mesh(u,e);break;default:throw"Visual type not recognized: "+n.type}t(a,g)}return c},e}),isNode="undefined"!=typeof module)con=console,rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var circle_packing=function(){return function(){var i,Y,X,U=2*Math.PI,Q=dom.canvas(1,1);var e={stage:Q.canvas,init:function(e){console.time("process time"),i=e.progress||function(){con.log("circle_packing - no progress defined")};var t=e.size;X=Y=t,Q.setSize(Y,X),colours.getRandomPalette(),Q.ctx.clearRect(0,0,Y,X);var P=0,_=0,H=0,I=rand.getNumber(.001,.02);con.log("gap",I);var A=rand.getNumber(.001,.01),L=rand.getNumber(A+.02,.5),q=rand.getInteger(1,10),D=rand.getInteger(0,2),O=rand.getNumber(.8,3),F=rand.getInteger(0,1);con.log("limitMaxRadius",D),con.log("powerMaxRadius",O),con.log("limitMinRadius",F);var j=.7<rand.getNumber(),W=rand.getInteger(4,20),B=rand.getInteger(2,10),G=.7<rand.getNumber(),a=0,r=.1;function V(e,t){if(P++,t++,a++,c.ctx.fillRect(a/500,0,1,P/50),H%100==0&&i("render:progress",r-=.02*(r-1)),t<5e3){var n=_%100?0:200;n?setTimeout(function(){o(e,t)},n):o(e,t)}else con.log("too many attempt")}function o(e,t,n){var a,r,o,i,c,s,d,l,f,u;if(P--,_++,e){if(!e.sites.length)return;r=e.depth+1;var h=Math.floor(rand.random()*e.sites.length);switch(z=e.sites.splice(h,1)[0],u=z.x,f=z.y,i=e.x-u,c=e.y-f,o=Math.sqrt(i*i+c*c),l=e.r-o-I,D){case 1:L=.01+Math.pow(.5-o,O);break;case 2:L=.01+Math.pow(o,O)}switch(F){case 1:A=.1*L}if(d=rand.random()*l,L<d?d=L:d<A&&(d=A),n&&(n.r&&(d=n.r),n.x&&(u=n.x),n.y&&(f=n.y)),d-I<A)return V(e,t);for(var m=!0,p=0,v=e.children.length;p<v&&m;p++){s=e.children[p],i=u-s.x,c=f-s.y,o=Math.sqrt(i*i+c*c);var g=d+s.r+I;o<g&&(d=o-s.r-I)<A&&(m=!1)}if(!1===m)return V(e,t)}else d=f=u=.5,r=0;if(n&&n.colour)a=n.colour;else for(a=colours.getRandomColour();e&&e.colour==a;)a=colours.getNextColour();G&&(Q.ctx.globalCompositeOperation=(r+1)%2?"destination-out":"source-over"),Q.ctx.beginPath(),Q.ctx.fillStyle=a,Q.ctx.drawCircle(u*Y,f*X,d*Y),Q.ctx.closePath(),Q.ctx.fill();var b=.01,y=Math.ceil(d/b);b=d/y;for(var x=[],w=0;w<y;w++)for(var M=w*b*U,E=Math.ceil(M/b)||6,T=0;T<E;T++){var R=(w+rand.getNumber(0,1))*b,C=(T+rand.getNumber(0,1))/E*U,S=u+Math.sin(C)*R,N=f+Math.cos(C)*R,z={x:S,y:N};j?parseInt(R*W)%B==0&&x.push(z):x.push(z)}var k={colour:a,depth:r,x:u,y:f,r:d,children:[],sites:x};if(H++,e&&e.children&&e.children.push(k),r<q)for(var p=0,v=k.sites.length;p<v;p++)V(k,0)}!function e(){-1==P?(con.log("progressChecker",P),i("render:complete",Q.canvas),!0):setTimeout(e,250)}();o(null,0,{colour:"transparent"})},settings:{}},c=dom.canvas(800,300);return e}};if(isNode?module.exports=circle_packing():define("circle_packing",circle_packing),isNode="undefined"!=typeof module)con=console,dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js");var circle_packing_zoom_loop=function(){var p,v,A=2*Math.PI,L=.5,q=.5,g=dom.canvas(1,1),b={};function a(e){b.amount<b.max||(b.amount=b.max);var t=b,n=t.target,a=(t.scale,t.scaler),r=Math.sqrt(Math.pow(b.target.x,2)+Math.pow(b.target.y,2))*b.max,o=b.amount/b.max,i=(b.target.x,b.amount);g.ctx.save(),g.ctx.clearRect(0,0,p,p);for(var c=0,s=v.circles.length;c<s;c++){var d=v.circles[c],l=d.x,f=d.y,u=d.r;l=.5+(l-.5)*a,f=.5+(f-.5)*a,u*=Math.pow(a,1),g.ctx.fillStyle=c==b.targetIndex?"#f00":"#000",g.ctx.beginPath(),g.ctx.drawCircle(l*p,f*p,u*p),g.ctx.closePath(),g.ctx.fill()}g.ctx.fillStyle="yellow",g.ctx.fillRect(L*p-1,0,2,p),g.ctx.fillRect(0,q*p-1,p,2);i=.5+(n.x-.5)*a;var h=.5+(n.y-.5)*a;g.ctx.strokeStyle="green",g.ctx.beginPath(),g.ctx.moveTo(L*p,q*p),g.ctx.lineTo(i*p,h*p),g.ctx.stroke();var m=geom.lerp({x:L*p,y:q*p},{x:i*p,y:h*p},o);g.ctx.fillRect(m.x,m.y,10,10)}return window.addEventListener("mousemove",function(e){b.amount=1+e.x/p*b.max,a()}),{stage:g.canvas,init:function(e){p=e.size,g.setSize(p,p),v=function(){var e=dom.canvas(p,p),k=rand.getNumber(1e-4,.02),P=rand.getNumber(.001,.01),_=rand.getNumber(P+.02,.5),H=1;function I(e,t){++t<5e3?n(e,t):con.log("too many attempt")}function n(e,t,n){var a,r,o,i,c,s,d,l,f;if(e){if(!e.sites.length)return;a=e.depth+1;var u=Math.floor(rand.random()*e.sites.length);if(N=e.sites.splice(u,1)[0],f=N.x,l=N.y,o=e.x-f,i=e.y-l,r=Math.sqrt(o*o+i*i),d=e.r-r-k,s=rand.random()*d,_<s?s=_:s<P&&(s=P),s-k<P)return I(e,t);for(var h=!0,m=0,p=e.children.length;m<p&&h;m++){c=e.children[m],o=f-c.x,i=l-c.y,r=Math.sqrt(o*o+i*i);var v=s+c.r+k;r<v&&(s=r-c.r-k)<P&&(h=!1)}if(!1===h)return I(e,t)}else f=L,l=q,s=.5,a=0;var g=.01,b=Math.ceil(s/g);g=s/b;for(var y=[],x=0;x<b;x++)for(var w=x*g*A,M=Math.ceil(w/g)||6,E=0;E<M;E++){var T=(x+rand.getNumber(0,1))*g,R=(E+rand.getNumber(0,1))/M*A,C=f+Math.sin(R)*T,S=l+Math.cos(R)*T,N={x:C,y:S};y.push(N)}var z={depth:a,x:f,y:l,r:s,children:[],sites:y};if(e&&e.children&&e.children.push(z),a<H)for(var m=0,p=z.sites.length;m<p;m++)I(z,0);return z}var t=n(null,0);return{canvas:e.canvas,circles:t.children}}(),setTimeout(function(){var e=v;con.log("p0",e);var t=rand.getInteger(0,e.circles.length),n=e.circles[t];b={amount:1,max:.5/n.r,target:n,targetIndex:t},con.log("zoom",b),a()},100)}}};if(isNode?module.exports=circle_packing_zoom_loop():define("circle_packing_zoom_loop",circle_packing_zoom_loop),isNode="undefined"!=typeof module)con=console,rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var circle_sectors=function(){var R,C=2*Math.PI,S=Math.PI/2,N=dom.canvas(1,1);return{stage:N.canvas,init:function(e){R=e.size,N.setSize(R,R),colours.getRandomPalette();var t=rand.getInteger(4,24),n=rand.getInteger(0,t-1),a=rand.getInteger(2,16),r=rand.getInteger(2,3),o=rand.getNumber(0,.01),i=rand.getNumber(.02,.2),c=.8<rand.getNumber(0,1),s=rand.getNumber(.1,.8),d=function(){var e=rand.getInteger(0,2);con.log("colourCycle - mode:",e);var n=-1,a=.6<rand.getNumber(0,1);switch(e){case 0:return function(e,t){return colours.getRandomColour()};case 1:return function(e,t){return colours.getNextColour(e)};case 2:return function(e,t){return e!=n?(n=e,colours.getNextColour(a||rand.getInteger(0,4))):colours.getCurrentColour()}}}();N.ctx.lineWidth=o*R;for(var l=n;l<t;l++)if(!(c&&rand.getNumber(0,1)>s)){for(var f=l/t*.5,u=(l+1)/t*.5,h=C*f,m=a;i<h/m;)m*=r;for(var p=0;p<m;p++){var v=function(){N.ctx.beginPath(),N.ctx.moveTo(y*R,x*R),N.ctx.lineTo(w*R,M*R),N.ctx.arc(.5*R,.5*R,u*R,S-g,S-b,!0),N.ctx.lineTo(E*R,T*R),N.ctx.arc(.5*R,.5*R,f*R,S-b,S-g,!1),N.ctx.closePath()};if(!(c&&rand.getNumber(0,1)>s)){var g=p/m*C,b=(p+1)/m*C,y=.5+Math.sin(g)*f,x=.5+Math.cos(g)*f,w=.5+Math.sin(g)*u,M=.5+Math.cos(g)*u,E=(Math.sin(b),Math.cos(b),.5+Math.sin(b)*f),T=.5+Math.cos(b)*f;N.ctx.globalCompositeOperation="source-over",N.ctx.fillStyle=d(l,p),v(),N.ctx.fill(),N.ctx.globalCompositeOperation="destination-out",v(),N.ctx.stroke()}}}}}};isNode?module.exports=circle_sectors():define("circle_sectors",circle_sectors),define("codevember",["exps_details"],function(t){var s,d,l,f,u,h,m,p,v=10,g=400,b=440,y=50,x=[],n={x:0,y:0,z:0},w=window.innerWidth,M=window.innerHeight;function E(r){function e(e,t,n,a){e.position.set(Math.sin((r+1e4)*t*1e-5),Math.sin((r+1e4)*n*1e-5),Math.sin((r+1e4)*a*1e-5))}x.forEach(function(e){e.shift.position=20*Math.sin(r*e.shift.speed),e.position.z=e.shift.position}),e(u,15,17,12),e(h,14,19,13),e(m,20,18,16),n.x=50*Math.sin(12e-5*r),n.y=50*Math.sin(17e-5*r),n.z=400+300*Math.sin(3e-5*r),d.position.set(n.x,n.y,n.z),d.lookAt(l.position),f.render(l,d),requestAnimationFrame(E)}return{init:function(){!function(){(l=new THREE.Scene).fog=new THREE.FogExp2(0,.002),d=new THREE.PerspectiveCamera(120,w/M,1,2e4),l.add(d),(u=new THREE.DirectionalLight(16769279,.19)).position.set(0,1,.5),l.add(u),(h=new THREE.DirectionalLight(15787425,.15)).position.set(-1,.5,.5),l.add(h),(m=new THREE.DirectionalLight(8453631,.18)).position.set(0,-1,.25),l.add(m),(f=new THREE.WebGLRenderer({antialias:!0})).setSize(w,M),s=new THREE.Group,l.add(s),p=new THREE.AmbientLight(16777215,.2),l.add(p);for(var e=0;e<v*v;e++){var t=(i=new THREE.MeshPhongMaterial({color:18555,specular:10086143,shininess:30}),c=new THREE.BoxGeometry(g,g,y),new THREE.Mesh(c,i));s.add(t);var n=e%v-v/2+.5,a=Math.floor(e/v)-v/2+.5,r=n*b,o=-a*b;t.position.set(r,o,0),t.shift={speed:1e-4*(.1+Math.random()),position:0},x.push(t)}var i,c;document.body.appendChild(f.domElement),E(0)}(),function(){var e=t.getFeature("codevember");document.body.appendChild(dom.element("style",{innerText:["a { color: white; }","a:hover { color: #87d9ff; text-shadow: 0px 0px 16px #fff; }","div { box-sizing: border-box;}",".holder { color: white; display: block; position: absolute; overflow: auto;","top: 20%; left: 10%; height: 50%; border: 1px dashed rgba(255,255,255,0.4);"," transform: rotate3d(0.3, 0.5, 0.9, 8deg); width: 80%; z-index: 50; }",".item { display: block; clear: both; line-height: 25px; }",".day { color: #bcd1d6; display: inline-block; float: left; padding-right: 10px; text-align: right; width: 20%; }",".title { color: #999; display: inline-block; float: left; width: 80%; }",".clickable .title { color: #fff; }"].join(" ")}));var r=dom.element("div",{className:"holder",innerHTML:"<h1>CODEVEMBER</H1>"});e.forEach(function(e){var t=e.link?dom.element("a",{className:"item clickable",href:"/?"+e.link}):dom.element("div",{className:"item"}),n=dom.element("div",{className:"day",innerHTML:"Day "+e.day}),a=dom.element("div",{className:"title",innerHTML:e.title});r.appendChild(t),t.appendChild(n),t.appendChild(a)}),document.body.appendChild(r)}()},resize:function(e,t){f.setSize(e,t),d.aspect=e/t,d.updateProjectionMatrix()}}});con=console;var isNode="undefined"!=typeof module,palettesComplete=(colours=function e(t,n){var r;r=t&&t.random?t.random:Math.random;var o=palettesComplete;"v0"===n?o=palettesComplete.slice(0,10):"v1"===n&&(o=palettesComplete.slice(0,121));var i=-1,c=null,a=0;function s(e){return e&&con.warn("Ensure you call getRandomPalette!"),i=~~(r()*o.length),c=o[i]}function d(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function l(e,t,n){return"#"+d(e)+d(t)+d(n)}function f(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}}function u(e,t,n){var a=Math.round(e+(r()-.5)*t);return a=255<a?255:a<=0?0:a}function h(){null==c&&s(!0);var e=dom.element("div");e.className="palette",e.id="palette-"+i;for(var t=0;t<c.length;t++){var n=c[t],a=dom.element("div",{className:"colour",innerHTML:n,style:{background:n}});e.appendChild(a)}return e}return{getPalette:function(){return c},getRandomPalette:s,getRandomColour:function(){return null==c&&s(!0),a=~~(r()*c.length),c[a]},getCurrentColour:function(){return null==c&&s(!0),c[a]},getNextColour:function(e){return null==c&&s(!0),null!=e?a+=e:a++,a+=c.length,a%=c.length,c[a]},getPalleteIndex:function(){return i},instance:e,setPalette:function(e){c=e},setRandomPalette:function(e){c=o[i=e]},setColourIndex:function(e){a=e},setPaletteRange:function(e){return e>c.length?con.warn("setPaletteRange - current palette has less than",e,"colours!"):c=t.shuffle(c.slice()).splice(0,e)},showPalette:h,showColours:function(){e=[".palette {","\tclear: both;","\theight: 50px;"," margin-bottom: 20px","}",".colour {","\twidth: 100px;","\theight: 50px;","\tfloat: left;","\ttext-align: center;","\tfont-size: 10px;","\tline-height: 50px;","}"].join(""),t=dom.element("style"),t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t),!0;var e,t;for(var n=document.createElement("div"),a=0;a<o.length;a++)c=o[i=a],n.appendChild(h());return document.body.appendChild(n),n},mutateColour:function(e,t){return"#"===e.substr(0,1)&&7===e.length?(n=t,a=f(e),r=a.r,o=a.g,i=a.b,l(r=u(r,n),o=u(o,n),i=u(i,n))):(con.warn("colours.mutateColour unable to mutate that colour:",e),e);var n,a,r,o,i},mixColours:function(e){for(var t={r:0,g:0,b:0},n=0,a=e.length;n<a;n++){var r=f(e[n]);t.r+=r.r,t.g+=r.g,t.b+=r.b}return t.r/=a,t.g/=a,t.b/=a,t.r=parseInt(t.r),t.g=parseInt(t.g),t.b=parseInt(t.b),l(t.r,t.g,t.b)}}},[["#333","#ccc"],["#a0c9d9","#f2f0d0","#735438","#a64941","#0d0d0d"],["#d93d93","#629c27","#dee300","#32393d","#ffffff"],["#36190a","#b2460b","#ff6818","#009aa3","#00ecd2"],["#1b69ff","#002875","#0143c2","#ffb002","#ff781e"],["#ffbe10","#ffae3c","#ff7e49","#e85137","#333c3c"],["#0e1d22","#587077","#555555","#ecebdf"],["#f2385a","#f5a503","#e9f1df","#4ad9d9","#36b1bf"],["#e8463e","#611410","#ffcfcd","#038733","#63f598"],["#4f8499","#c95f5f","#003145","#012914","#fcd457"],["#406874","#84d9d9","#b8d9d3","#35402a","#592c1c"],["#8f8164","#d9d7ac","#4f6373","#293845","#14212b"],["#1c2623","#37a672","#e2ca63","#f2884b","#db3323"],["#ffd7ae","#163a5c","#1d2328","#fe6200","#adb7bd"],["#ffb919","#8c12b2","#c200ff","#14cc83","#09b26f"],["#8c1822","#bf1725","#594f46","#1c8476","#006b5e"],["#cf9cb3","#626161","#debc92","#b68256","#eddfbb"],["#a6442e","#a65644","#bf7665","#d9a79c","#f2f2f2"],["#200101","#421c0c","#c9a860","#4fa35e","#076043"],["#435939","#737268","#d9d4ba","#d9d5c5","#0d0000"],["#467302","#97bf04","#d97904","#a62f03","#590902"],["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#ff9900","#424242","#e9e9e9","#bcbcbc","#3299bb"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#515151","#ffffff","#00b4ff","#eeeeee"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#300030","#480048","#601848","#c04848","#f07241"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#5b527f","#9a8194","#c6a9a3","#ebd8b7","#99bbad"],["#c2412d","#d1aa34","#a7a844","#a46583","#5a1e4a"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#75616b","#bfcff7","#dce4f7","#f8f3bf","#d34017"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#7e5686","#a5aad9","#e8f9a2","#f8a13f","#ba3c3d"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#84b295","#eccf8d","#bb8138","#ac2005","#2c1507"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#b5ac01","#ecba09","#e86e1c","#d41e45","#1b1521"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#379f7a","#78ae62","#bbb749","#e0fbac","#1f1c0d"],["#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#793a57","#4d3339","#8c873e","#d1c5a5","#a38a5f"],["#442333","#ebd17a","#d85a45","#c02848","#42767a"],["#340734","#6f6561","#879677","#a3c68c","#4f3649"],["#dad6a6","#daab92","#ec496a","#e7867a","#c7fcd7"],["#e2d297","#0ec4e8","#471701","#0295bd","#f07f13"],["#fffcbf","#447e96","#fefffc","#f8d783","#cbb24b"],["#716382","#aabb9f","#708b95","#e7eca8","#703d6f"],["#01765d","#91ff16","#00c16c","#014443","#002f34"],["#292445","#250828","#495169","#d8cbb1","#cdbc9d"],["#ffffff","#fffbec","#967c51","#f0efd9","#cfd0d0"],["#5b4d3d","#d8e472","#428d8f","#eaecbf","#c3d329"],["#1e1414","#a3b907","#31c5c8","#d22043","#24b695"],["#536b8c","#4f8a8a","#61385f","#61a17c","#5b4e78"],["#26251b","#a1e7b8","#ea0a43","#f1a83e","#f2633d"],["#fdeaa5","#670960","#9481b7","#fec1ab","#fb5894"],["#725c75","#fcfcec","#c1a19f","#321f2f","#e3cebc"],["#a7311c","#cc9929","#fedd67","#938a40","#352405"],["#fe003d","#01c077","#89c001","#ff8a01","#fabf29"],["#d6b99c","#f3c8a3","#99cabe","#ffaa8d","#162229"],["#e7aa7e","#a79f7f","#e0b99a","#3b1823","#d38574"],["#584332","#a78c6a","#f1e6c9","#9ba657","#f4f5f5"],["#d1024f","#a6016b","#fd3803","#feab04","#fb7f03"],["#c1dcab","#e7a379","#d8c878","#e87374","#6f6667"],["#d2c7b3","#ff6c63","#edcab0","#d5f2dc","#23090f"],["#ec5673","#150f31","#9eae8b","#ccbc93","#fcc598"],["#abcf91","#f0eae5","#383837","#8dba86","#bbdb73"],["#e9ee75","#4b3a47","#ffcd57","#e7efaf","#d6e9d4"],["#ff7d10","#ffb239","#48007e","#ff005c","#090310"],["#f1bd76","#c3ceaf","#f18172","#f3f5df","#4b3d31"],["#ddd1b6","#6e997a","#41272c","#6ba29e","#85aba9"],["#d84e32","#1f8c94","#4b3e4d","#c4ac30","#dbd8a3"],["#fdfad7","#9ec0ae","#08a7a3","#00ccbf","#edecc9"],["#bf1f63","#562f50","#017a7e","#ffa687","#d62958"],["#f30133","#5f0620","#74b9a7","#f3cb68","#f28263"],["#da0e5a","#ff6d28","#341228","#991666","#f34738"],["#001849","#5f4877","#473079","#311861","#916090"],["#d5b4b2","#f97892","#e5e1cd","#231b43","#c7d8c0"],["#ee96a3","#f2b99f","#d34770","#dbccbe","#de5b7f"],["#7b1f49","#9e2152","#561a3c","#111725","#331931"],["#b1e7d2","#76b0a9","#270a33","#3e7b80","#451b3d"],["#9a1619","#690d35","#c21c11","#fb4a29","#280805"],["#f6a498","#fa8076","#000101","#f6c6b8","#b5242a"],["#d0cfd7","#fda887","#fb2750","#fe834b","#f5e6f8"],["#130a13","#3d1c32","#f5931d","#b24722","#612848"],["#f4b9ad","#ef0a5b","#95a032","#c9ce3b","#f5f1dd"],["#d3d6af","#8d7b63","#b6cea5","#70453e","#9dc19d"],["#b3deb4","#cee4b2","#9bd9b4","#d9ce84","#69d1b4"],["#7d1b0c","#e8c483","#b39e69","#a86b4c","#330b0a"],["#658a64","#a6b886","#45695a","#223336","#e0e2ad"],["#439497","#6c5c4e","#faefd3","#e0ceb4","#b0a090"],["#f9a0a0","#f9d7d7","#fdfbd1","#93644b","#fabdbc"],["#823871","#fdddb2","#f98c88","#d75981","#a9bcbe"],["#a69a91","#fff0c1","#e9814d","#493f3e","#f9ce7e"],["#c9d27a","#fdf69c","#92c393","#f1502c","#c32412"],["#cef682","#94dd8f","#ff7756","#6b6c6c","#f8c182"],["#512a3f","#7a0715","#0c0b0c","#faf6ec","#89a0a9"],["#f9d522","#e0f5c5","#aed6bd","#ede574","#79b8b3"],["#cb221f","#b9d8a0","#fdac26","#5a0f0d","#fefdc0"],["#f25d5e","#ffa466","#43232f","#395a4e","#853c42"],["#9e9d93","#ca9f92","#f69c92","#e4b8ac","#d5d3c9"],["#eed38d","#c3c092","#65205d","#666078","#64ad92"],["#f0f8d9","#234c20","#78ab58","#cade89","#377f2d"],["#f6a541","#fbc965","#f55c4b","#ffe4ad","#a0dbb1"],["#c7ea8e","#268f73","#031021","#80d989","#e6f99c"],["#adced1","#d2b9a1","#010000","#ff882f","#ccddde"],["#ff685c","#f5f5c2","#8d315c","#8cc8b5","#ffc491"],["#502c39","#665a4c","#718064","#79a786","#1e1116"],["#342616","#6aacbe","#f1f1af","#9cbdbd","#ff380e"],["#f7f8ed","#01426d","#095584","#afdd2a","#066698"],["#ffefad","#e2b366","#e4db85","#e48b68","#685024"],["#abddad","#dedfae","#ccdead","#bbddad","#efdeac"],["#752465","#fdcfbf","#e33e75","#ffb79f","#5e0c3b"],["#017e81","#fb6901","#00b9bc","#004952","#f63801"],["#cfe779","#8dd29d","#fcb554","#ff5355","#5cabc3"],["#fee2b2","#97b59c","#a9636e","#b8113e","#cecca9"],["#909d9f","#7a8c8a","#7fa7a7","#a78d8c","#ff0e51"],["#7dbdb9","#181619","#e3ddcf","#aaccbc","#e23022"],["#a8be68","#c0df5e","#98a76e","#b4cd6a","#6da679"],["#c7946c","#965d62","#2b222c","#f2d874","#5d4352"],["#8d8770","#f3c0ae","#b7cbc0","#f9a898","#f4dbbe"],["#f4ecb6","#231a2c","#fe0a55","#fec098","#f47476"],["#f06b51","#384340","#e1d673","#fbf4b1","#45aab8"],["#ffb770","#fff4d7","#da6053","#000410","#84bec4"],["#83837e","#94b154","#e0e1df","#bffb36","#bcea07"],["#e96e9d","#c8306c","#90244e","#532638","#4caa8d"],["#e6ead4","#1f0a1d","#334e53","#9acb77","#44936b"],["#ac8c33","#8b5a7b","#dde0d0","#c6be99","#92755f"],["#ec898f","#eee9c6","#e5d0cb","#eca3a5","#ec7c82"],["#321c3a","#a61942","#9a8f7e","#67444e","#c3ccb0"],["#63997a","#aada89","#f0fec8","#3c091a","#71243c"],["#37bba6","#72175f","#fefed9","#8c921a","#0b0d01"],["#fefed8","#f9ac8e","#15302f","#ffd6a2","#fff0b7"],["#5a5152","#efd298","#bf4869","#b49c83","#b7c89d"],["#668c4e","#cdda1a","#326667","#fefe00","#98b332"],["#002035","#010100","#1d5661","#faffcd","#78ae92"],["#7bf49a","#595b59","#b8fe9a","#0de4a8","#14c2a1"],["#cfedeb","#ffefd4","#fefee5","#8b7b5d","#9ed6d3"],["#bbe1ac","#86ae71","#361443","#160132","#563d53"],["#e8e79c","#d7a979","#606179","#79a791","#bfd78f"],["#ff3e00","#076460","#ffbd10","#002d2b","#098380"],["#ac8499","#41202a","#fd125a","#83c1b1","#d64882"],["#fcc5ca","#fefee2","#d0b698","#9f6c4e","#fb8db1"],["#f5dcbc","#ccdfd1","#a18194","#fefad5","#e2b7b2"],["#f1f2c0","#ff7575","#f59a70","#e0e1a9","#c6c67f"],["#4f354d","#909f70","#6b6c6c","#5e4160","#b0ce73"],["#9d0b41","#191518","#cd3e17","#f1981d","#49063c"],["#ff2555","#ff0d70","#d67001","#b98100","#f25600"],["#88a56f","#a00929","#56213c","#f5e6d3","#d65d2b"],["#3d3c3b","#4779a0","#b1daf8","#dde3cb","#7d8071"],["#bd5431","#383b43","#e0b965","#74c8a8","#dee2b7"],["#2c2320","#64b296","#9eaa35","#fff9b2","#a1e5d1"],["#be4d55","#e6d5c1","#fff4e4","#c6b19a","#785d55"],["#1a8899","#d71b58","#e8d94c","#efeac5","#370744"],["#e45c5e","#ffa545","#aa5b53","#6f5845","#f28052"],["#ffab68","#ffdfab","#923e32","#ff6f5f","#9fbac1"],["#7bb0a7","#645275","#a8dbac","#e3f6b1","#522a53"],["#fe6a5f","#d2fcfd","#fdbe98","#fefac2","#affaff"],["#4db3de","#fdf0a0","#8ee1a6","#f37b7c","#dd538d"],["#3a0e2c","#ecac9e","#e1eab4","#acdfb2","#ff4b73"],["#1f6664","#151717","#93b25a","#c94c64","#e7bf4a"],["#df1a71","#f9f6c1","#2b0d1b","#c8ce12","#349e97"],["#f0396d","#8e9825","#adc860","#fe5f82","#f3ffea"],["#f9ecf1","#f4e2e7","#3c363c","#f68f9b","#fcd6d9"],["#b41138","#ffba13","#ff8727","#2ca0a4","#f13914"],["#f7ebdb","#fa8f6f","#4c3c35","#c1d9cd","#eb623c"],["#f68046","#a0b047","#11634d","#f1ca4d","#f14e4d"],["#3d6c47","#ef371b","#b5b479","#f8e5a5","#010000"],["#fef2b4","#ef9480","#f50d4a","#101941","#7f043b"],["#566965","#f3a177","#cd9375","#958a72","#ff7474"],["#ff4846","#e8da5e","#4b4552","#477e77","#93b660"],["#72dcd1","#fef28b","#d0eaa3","#efffdb","#ace4b5"],["#f48823","#010000","#d4c8ac","#f2ece0","#c8ba98"],["#f77b3d","#a3cba6","#50242f","#fde085","#f9b966"],["#ccf491","#f7c51e","#ff013c","#fd9209","#dfe05a"],["#f1e7c4","#616769","#2b869f","#98dab6","#3dc8a7"],["#7eb7b0","#342b27","#c5e55c","#e75a1b","#dc1315"],["#48708a","#89acc2","#c9ff42","#cfdfea","#ecf6f8"],["#eff1d8","#666666","#77cca4","#b4e037","#b5debf"],["#ffab08","#0f8e94","#73ad75","#ead459","#444c52"],["#262c4c","#feb24f","#b73464","#ff6b5b","#82b9a9"],["#ebebdd","#c3ddd5","#e5ded6","#d4ded6","#e5e2ce"],["#a9ac7a","#8bc099","#c4975b","#db825e","#ef6c60"],["#ff704a","#e9ff87","#540044","#c50152","#adffe8"],["#4c1e4d","#ebc387","#1a071e","#04676f","#499c79"],["#ffb968","#3c8b88","#452e3d","#e9f17e","#fe3c59"],["#e15958","#c0f0d1","#e8d7b0","#ffffdc","#384152"],["#d8d3a8","#5b364b","#495f66","#cb3746","#d15c57"],["#420a37","#e5700a","#a50b53","#12766c","#f0b200"],["#95b59d","#5b5947","#c8d0b0","#cb5d4d","#ffffc5"],["#35322f","#cbd0b4","#ab6b6d","#85837f","#f6345a"],["#e35734","#4c538c","#161a1d","#f7a11a","#d60357"],["#a03f16","#88a295","#cb8939","#d0c99a","#312837"],["#e7d3b1","#ecba6f","#ef7867","#2197a3","#f81e6b"],["#89b498","#e39a7c","#e8d4a9","#6e6560","#bcbfa4"],["#565a64","#8e4d65","#c64066","#206663","#ff3466"],["#cd7094","#845d6d","#fedcd8","#f6f1e1","#feb2c1"],["#2e1437","#e8edcf","#cbd0c4","#514360","#958e9a"],["#e5e6c3","#d7d2ae","#e37366","#8a8681","#d8d9c4"],["#e7e3d6","#d2c7b3","#c84549","#fff4da","#6f3e3a"],["#d0e389","#f6e2e3","#badf51","#e14790","#e0b6ee"],["#a7a39d","#8d7a67","#e1dcda","#d8c9b7","#f8f1e9"],["#292522","#d6a592","#eed9b3","#4e6160","#a38f80"],["#529ea3","#72b0a4","#d5e3b6","#c4dab4","#abcdb0"],["#323232","#fcffe4","#9d0b38","#e21c59","#84a300"],["#17f8ff","#015bc6","#022576","#00b3fc","#011448"],["#e1d123","#f08140","#bd364d","#f8f899","#443b37"],["#676365","#b0e0e9","#849bb6","#95d7eb","#f3e4fa"],["#a9e8cb","#24242d","#ca1943","#fbfee5","#97163c"],["#fb9a9a","#f8f4d6","#625062","#fedabe","#e97f86"],["#c2b458","#2d2c27","#f8dfae","#fa748f","#998497"],["#f88864","#ad4147","#fec280","#fee399","#411e2e"],["#a22c28","#394030","#7b8156","#1c090b","#bca775"],["#95d1b7","#f2da42","#fdfbd6","#67bd9a","#ef4058"],["#fff19e","#ffb96a","#b5f3bc","#ff6644","#ffdc89"],["#fe42a0","#ff90aa","#ffccd1","#f60069","#4d494a"],["#e37b5e","#5ab491","#162a3c","#e22e3f","#f0ddaa"],["#047c45","#f7be01","#9bb51b","#01483f","#2b1718"],["#7fcfca","#44b5c4","#c6ede7","#a0ded5","#1593a6"],["#cd2649","#33374d","#003f4f","#992b4b","#66314c"],["#030d50","#e8eeeb","#fc0c05","#ffc62c","#cdebee"],["#e7b29a","#e6cba6","#8b9f9c","#6c7677","#ece4b4"],["#9c736f","#b7ca9d","#c36464","#edb05b","#efe998"],["#54797e","#6a9998","#89b9a7","#c6cba5","#615245"],["#e32691","#302bad","#f7dc16","#f81667","#ac2bac"],["#573a7d","#fda699","#e3859c","#ca719f","#fee4aa"],["#fabf9b","#faf4c7","#bda2a2","#8899a1","#f9d88a"],["#ff0052","#4c490b","#ece64e","#e2de99","#757548"],["#c6be9a","#db5543","#1b0f0d","#9fb490","#70ab86"],["#ffceb7","#37270b","#c7c797","#fdefcf","#97bfa8"],["#3a0132","#eae9aa","#eac688","#0e0a28","#7c2947"],["#faf7d1","#744e77","#8f9a92","#c6d9ab","#300a1d"],["#c0ab8b","#000806","#00262c","#124646","#0b7d7e"],["#ff6501","#7bb590","#fef3af","#000100","#d21900"],["#d5cfa9","#5f2e47","#c75332","#c88934","#7ab6ab"],["#080002","#335f5b","#91a297","#eadfd1","#67472c"],["#e4e5c5","#cd0b30","#d2e5c5","#8d2137","#b9d38c"],["#ddffab","#fedaab","#daacff","#ffabac","#abe5fe"],["#cedac2","#f4555a","#fa9275","#875247","#f6e5c7"],["#ffeb5d","#ff4745","#ffc55e","#ff7360","#37173c"],["#ec4400","#cb9a24","#5d525b","#7a6ed5","#12ce4a"],["#560349","#b80340","#e16639","#ac8709","#e6dd95"],["#fee7b2","#ff2022","#52bc9d","#234341","#a3e3b1"],["#2fb7ab","#92a32a","#046e8c","#edbe14","#2f9393"],["#c8e3c6","#f7f6c5","#9dae9a","#ffc771","#765859"],["#584d42","#97865b","#e3c77b","#e46a6c","#e4a56c"],["#b6c37e","#efda96","#7f5666","#9b917c","#8a696b"],["#c9d297","#c44b2c","#463331","#11b9ac","#d79744"],["#c0d1c1","#2f4448","#fff7d4","#f6df98","#ffb783"],["#f8f6f8","#c9d0d4","#9a1719","#9cd3e0","#3a3836"],["#555074","#68b79d","#548a96","#e44a1d","#ffb627"],["#fdf6c6","#abf1e3","#fd64a1","#746457","#31d5de"],["#b29981","#feff9a","#dacd8c","#663267","#8d6674"],["#b12650","#251b21","#6f1d62","#ec9504","#dd4226"],["#f7eed1","#484743","#c6cec6","#9e9d94","#d98a89"],["#a43854","#ebbe14","#2d2a26","#728d78","#6b6a5f"],["#eb525e","#dfdfa0","#e7a83e","#9b726d","#b1cba2"],["#4b4858","#6ea67b","#77b886","#87c28c","#849988"],["#b12249","#efd543","#84a39e","#f49331","#ffeac0"],["#959b8e","#c0c9c9","#605567","#dcd8b7","#a4b5ab"],["#c9c8b5","#3d423c","#f4f6bd","#dde0c4","#b2b29e"],["#f6a2a3","#fed8d7","#fffddc","#dcf8f2","#815940"],["#f7ebd5","#abbf9b","#d3d0a4","#220b00","#a29d7e"],["#296e79","#7b917c","#4a1239","#c9b280","#3a3f58"],["#506265","#bcc598","#7a8f89","#93a789","#f6de9e"],["#dbdb97","#ef6871","#4c1d36","#eeae54","#967e77"],["#e0c0c6","#f3e7d6","#c6b9c5","#f7d8cc","#f7c8c9"],["#f0edca","#d44c1b","#e4a730","#058888","#4f3e2f"],["#c5ae4c","#3e2b25","#a1a485","#ebc287","#dd413e"],["#51c9c6","#cee791","#e0f6c3","#a6cd2b","#bbdb5e"],["#dac091","#f41441","#dbe8b5","#e0856d","#d5f8db"],["#ffc6a6","#363634","#2b2c2c","#f1e4c6","#e7334c"],["#bbb3a2","#adc0b5","#897f65","#a69a83","#bdd5c8"],["#f1f1d7","#005f60","#017879","#174747","#a8c12f"],["#fce7bd","#a2c4ab","#d21d48","#f3de51","#622f53"],["#c8b949","#bd3001","#6f0a00","#231615","#c96823"],["#378885","#8a044d","#2d0332","#0ba18b","#5ada95"],["#ffddd8","#d8d8d8","#f5dbd9","#e3d9d8","#edd9d9"],["#9f906d","#abb69a","#876ffe","#010101","#9683a3"],["#fa6b64","#7b4d48","#f6e3ba","#9ec5b7","#4a4032"],["#a2c2bd","#f4f3e6","#fefeff","#5a554f","#e1e4d9"],["#f0c695","#111652","#db6378","#ecebcf","#1f7278"],["#b62c00","#a9a17b","#fcf6d1","#8d0004","#444545"],["#f6bd04","#77bdae","#ff703e","#fa2e5a","#edf7bc"],["#a2da5c","#f6efbd","#442434","#1f0410","#abe4aa"],["#f36d4f","#3a88ca","#1b315e","#e9f1f9","#9bc3e4"],["#567dba","#2c4b7e","#dde1e7","#606e81","#1f1f1f"],["#e65541","#f8edc1","#65a9a6","#7a886d"],["#541e13","#010405","#626166","#928273","#cc9d61"],["#d4c097","#e3d6c1","#603612","#f7f6e1","#f8f7e3"],["#e7e7e7","#f5f5f7","#323434","#990201","#b90504"],["#4a3d3c","#ff6162","#f3e8e6","#d8dec2","#f4f9e7"],["#2e1b33","#e3e490","#99bb8a","#ee8779","#f26970"],["#f9b984","#8f407b","#feffe5","#efe197","#ff6963"],["#000000","#ab4a00","#fffeff","#012a2f","#f9f0ae"],["#f23360","#321d2e","#eed26a","#e88361","#ceedcd"],["#bbcaa8","#f3ffcf","#ec9c4e","#687061","#f1d57f"],["#a81a5c","#f0c605","#e7204f","#641467","#f66f2b"],["#8b211c","#efcd4f","#c02923","#d0862f","#a7ac3b"],["#010002","#fe6b2a","#340116","#a0112c","#d53a2e"],["#d16343","#b3ba92","#d8be5e","#f0e7b4","#84555f"],["#6d6268","#b9a273","#422f40","#e9a253","#fff0a8"],["#ffc91b","#b901ff","#b7fe01","#fe0091","#228cff"],["#fdefcc","#eb8776","#d34957","#e9b15d","#4a3730"],["#b9f9fe","#a69784","#7f7363","#e8fcff","#655d49"],["#ece8df","#fffeff","#45739e","#c6d5e1","#bdb8ae"],["#200f19","#efc375","#f99088","#78c2ab","#fcf5d1"],["#785d64","#e4cf9d","#78917c","#aeb08e","#79254b"],["#6c9689","#7d1c14","#e6e0c1","#c0090c","#1e2629"],["#ce5c50","#362731","#554965","#f4a46a","#eadfcd"],["#d5828e","#322636","#d8d8da","#d7acb2","#c5ffec"],["#c1c994","#d4a978","#251912","#e3c88e","#a8bd96"],["#fcca48","#ffa926","#f9862f","#fd570d","#fc6a0b"],["#e0dc8c","#f5aa3e","#6bc3ba","#574436","#ee4b58"],["#fe00ab","#01abfe","#aa01ff","#a9ff01","#ffab00"],["#aab0b4","#030d23","#3f484a","#20293e"],["#fffeff","#e1eef1","#010101","#670049","#7db4b6"],["#185d62","#ede0c3","#8dbcb5","#073940","#3e828b"],["#564334","#758917","#cfb491","#4a2720","#9e9a42"],["#f0a890","#b9d9b5","#af5673","#288c86","#d28f8f"],["#750d48","#4d002b","#b9d8c7","#907082","#fff5df"],["#d0b68c","#88555b","#482d49","#5a5b75","#524360"],["#530c2f","#ba3521","#1d987f","#861d25","#f0dcbd"],["#f1c873","#5b3126","#f5876c","#73af94","#f2e7bd"],["#e6d698","#ef7c18","#fec11a","#039daf","#e22451"],["#25e3bb","#e0ffc4","#afef54","#3e8878","#514541"],["#34454f","#232638","#9d9d72","#5f8172","#e7a06f"],["#c06470","#87596d","#ed6364","#574759","#1b1a1b"],["#d7244e","#ff5375","#fcebaa","#ff8f35","#f7d66a"],["#bbfdc2","#5c4a3d","#7fd3bc","#3b352f","#e5f2b9"],["#474e70","#010000","#767674","#a0ac87","#ffffff"],["#ff1068","#8f8f90","#ecebed","#24020e","#9d1f4c"],["#66245c","#6aa5a5","#e6eaa4","#a9c3a2","#616282"],["#4a4c4c","#7b6f53","#e3ca93","#302c20","#b3a075"],["#928754","#95a782","#d4ce9d","#d8523e","#76362c"],["#8bb2d0","#bed2df","#feffff","#e5ebf1","#4181aa"],["#795c3f","#fb4a00","#1f1e1e","#fbf9fa","#cdbcad"],["#410402","#fd0457","#09acba","#efedcb","#fe8a06"],["#fec998","#76c9a3","#423a3b","#f8f0a3","#b9c99a"],["#67ad91","#631f5f","#eed48e","#c3c093","#695f78"],["#fd857d","#ee9c91","#bdd8bf","#d3b9a2","#e3e8cc"],["#4d6c65","#5a5742","#ec834e","#ece1c6","#eacb6f"],["#2a2625","#09506e","#7ead92","#bbcda3","#008890"],["#aec8ba","#ffe2c9","#fba79d","#988c81","#fbc8b3"]]);if(isNode&&(module.exports=colours(Math)),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var corona_sine=function(){return function(){var f,n,u,h,m,p,c,a,v,g,r,b,y,x=rand.instance(),w=colours.instance(x,"v1"),s=!1,M={layers:{label:"Layers",min:1,max:30,cur:0,type:"Number"},rays:{label:"Rays",min:12,max:312,cur:0,type:"Number"},background:{type:"Boolean",label:"Background",cur:!0}};function d(e,t,n,a,r){if(!(n-t<a/4))if(s){var o=["M",t,",",-a," L",n,-a," C",n+1.6*a,",",-a," ",n+1.6*a,",",a," ",n,",",a," L",n,",",a," L",t,",",a," C",t-1.6*a,",",a," ",t-1.6*a,",",-a," ",t,",",-a].join(""),i=dom.svg("path",{d:o,fill:r,transform:"translate("+[u/2,h/2]+") rotate("+180*e/Math.PI+")"});c.appendChild(i)}else p.save(),p.translate(u/2,h/2),p.rotate(e),p.beginPath(),p.fillStyle=r,p.moveTo(t,-a),p.lineTo(n,-a),p.arc(n,0,a,-Math.PI/2,Math.PI/2,!1),p.lineTo(n,a),p.lineTo(t,a),p.arc(t,0,a,Math.PI/2,-Math.PI/2,!1),p.fill(),p.closePath(),p.restore()}function E(e,t,n,a,r){for(var o=M.layers.cur,i=e*Math.PI*2,c=function(e,t){for(var n=0,a=0;a<b;a++)n+=(Math.sin(y[a].offset+t*y[a].speed+e*y[a].phase)+1)/2;return n/b}(i,t),s=0;s<o;s++){d(i,n+c*a*g[s]+2*r,n+c*a*g[s+1]-2*r,r,v[s])}}function o(o){o||(o=0),w.getRandomPalette(),r=w.getRandomColour();var e=M.layers.cur,i=M.rays.cur;v=[],g=[0];for(var t=0;t<e;t++)v.push(w.getNextColour()),g.push(x.random());g.sort(),g[e]=1,b=~~(1+13*x.random()),y=[];for(var n=0;n<b;n++)y.push({offset:x.random()*Math.PI*2,phase:~~(6*x.random()),speed:.003*x.random()});M.background.cur?(p.fillStyle=r,p.fillRect(0,0,u,h)):p.clearRect(0,0,u,h);var a=h<u?h:u,c=a/2*.2,s=a/2*1-c,d=c*Math.tan(1/i/2*Math.PI*2),l=100;!function e(t){var n=t*l,a=n+l;i<a&&(a=i);for(var r=n;r<a;r++)E(r/i,o,c,s,d);a<i?(f("render:progress",a/i),setTimeout(function(){e(t+1)},100)):f("render:complete",m)}(0)}return"undefined"!=typeof window&&(u=window.innerWidth,h=window.innerHeight),s?(m=dom.svg("svg",{width:u,height:h}),c=dom.svg("g"),m.appendChild(c),a=p=m):(a=dom.canvas(100,100),m=a.canvas,p=a.ctx),{stage:m,render:o,init:function(e){var t=arguments;f=e.progress||function(){console.log("corona_sine - no progress defined",t)},x.setSeed(e.seed),n=e.size,u=e.sw||n,h=e.sh||n,a.setSize(u,h),(new Date).getTime(),M.layers.cur=~~(1+4*x.random()),M.rays.cur=~~(12+300*x.random()),e.settings&&(M=e.settings),f("settings:initialised",M),o(0)},settings:M,update:function(e,t){x.setSeed(t),x.random(),x.random(),M=e,o()}}}};isNode?module.exports=corona_sine():define("corona_sine",corona_sine);con=console;var arachnid=function(){var e={body:{range:0,baserot:0,length:0,offset:0},a2:{range:0,baserot:1.959,length:90,offset:1.368},b2:{range:.333,baserot:1.22,length:105,offset:.7},c2:{range:.4,baserot:.333,length:53,offset:4.99},a1:{range:.2,baserot:-2,length:90,offset:0},b1:{range:.2,baserot:5.433,length:90,offset:1.6},c1:{range:.7,baserot:.4,length:53,offset:1.6},a3:{range:.7020000000000001,baserot:2.994,length:46,offset:2.846},b3:{range:.333,baserot:0,length:58,offset:5.655},c3:{range:.48,baserot:5.803,length:55,offset:3.807}};return{body:[{name:"body",parent:null,movement:e.body,phase:0},{name:"a1",parent:"body",movement:e.a1,phase:0},{name:"b1",parent:"a1",movement:e.b1,phase:0},{name:"c1",parent:"b1",movement:e.c1,phase:0},{name:"a2",parent:"body",movement:e.a2,phase:0},{name:"b2",parent:"a2",movement:e.b2,phase:0},{name:"c2",parent:"b2",movement:e.c2,phase:0},{name:"a3",parent:"body",movement:e.a3,phase:0},{name:"b3",parent:"a3",movement:e.b3,phase:0},{name:"c3",parent:"b3",movement:e.c3,phase:0}],limbs:e}};(isNode="undefined"!=typeof module)?module.exports=arachnid():define("arachnid",arachnid);con=console;var creature=function(){var n=dom.canvas(400,400),a=n.ctx;return require.config({paths:{arachnid:"creature_creator/arachnid",creature_creator:"creature_creator/creature_creator",human:"creature_creator/human"}}),require(["creature_creator","human"],function(e,t){e.init(n,a,t.body,t.limbs)}),{stage:n.canvas,inner:null,resize:function(){},init:function(){},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=creature():define("creature",creature);con=console;if(isNode="undefined"!=typeof module){dom=require("./dom.js");var fs=require("fs")}var creature_creator=function(){var f,u,h=400,m=400,d=150,l=m-50,p=10,v={},g=[];function b(o){var e=o.parent;e&&(o.parent=v[e],e=o.parent);var i={};isNode||(i=dom.element("div",{style:{width:o.movement.length,height:p,background:"rgba(255,0,0,0.5)",transformOrigin:"0 "+p/2+"px",position:"absolute"}}),e&&e.div&&e.div.appendChild(i));var t=function(e){var t=e.parent,n=e.movement.length,a=e.movement.baserot-e.movement.range,r=e.movement.baserot+e.movement.range,o=dom.element("div",{id:e.name,className:"limb"}),i=dom.element("div",{id:e.name+"-joint",className:"joint"});t?t.divJoint.appendChild(o):document.body.appendChild(o),o.appendChild(i);var c=["0% {transform: rotate("+a+"rad);}","50% {transform: rotate("+r+"rad);}","100% {transform: rotate("+a+"rad);}"],s=["0% {transform: translate("+n+"px,0px) rotate("+-a+"rad);}","50% {transform: translate("+n+"px,0px) rotate("+-r+"rad);}","100% {transform: translate("+n+"px,0px) rotate("+-a+"rad);}"],d=-2*(e.movement.offset+e.phase)/(2*Math.PI)-.63,l=e.name+"-animation 2s "+d+"s ease-in-out infinite;",f=e.name+"-joint-animation 2s "+d+"s ease-in-out infinite;";return{divKeyframe:o,divJoint:i,css:["#"+e.name+" {","width: "+e.movement.length+"px;","height: "+p+"px;","animation: "+l,"-webkit-animation: "+l,"};","@keyframes "+e.name+"-animation {",c.join(""),"}","@-webkit-keyframes "+e.name+"-animation {",c.join(""),"}","#"+e.name+"-joint {","animation: "+f,"-webkit-animation: "+f,"};","@keyframes "+e.name+"-joint-animation {",s.join(""),"}","@-webkit-keyframes "+e.name+"-joint-animation {",s.join(""),"}"]}}(o),n=t.css,a=t.divKeyframe,r=t.divJoint;return{name:o.name,options:o,div:i,css:n,divKeyframe:a,divJoint:r,pos:{sx:0,sy:0,ex:0,ey:0},calc:function(e){var t=o.movement.baserot+Math.sin(e+o.movement.offset+o.phase)*o.movement.range;return this.position(t),Math.max(this.pos.sy,this.pos.ey)},position:function(e){this.osc=e;var t={sx:0,sy:0,ex:0+Math.sin(e)*o.movement.length,ey:0+Math.cos(e)*o.movement.length},n=0,a=e;if(o.parent){var r=o.parent;t.sx+=r.pos.ex,t.sy+=r.pos.ey,t.ex+=r.pos.ex,t.ey+=r.pos.ey,n=r.options.movement.length,a=-r.osc+e}this.translationX=n,this.rotationRad=a,this.pos=t},render:function(e,t){if(u.beginPath(),u.lineWidth=3,u.strokeStyle="#090",u.fillStyle="#0a0",u.moveTo(e+this.pos.sx,t+this.pos.sy),u.lineTo(e+this.pos.ex,t+this.pos.ey),u.stroke(),u.closePath(),u.beginPath(),u.drawCircle(e+this.pos.sx,t+this.pos.sy,p/2),u.drawCircle(e+this.pos.ex,t+this.pos.ey,p/2),u.closePath(),u.fill(),!isNode){var n=o.parent,a=n?this.translationX:t,r=n?0:h/2;i.style.transform="translate("+a+"px,"+r+"px)rotate("+this.rotationRad+"rad)"}}}}function y(e){for(var t in g)g[t].newValue&&g[t].newValue!=g[t].value&&(g[t].value-=.1*(g[t].value-g[t].newValue),g[t].dispatchEvent(new Event("change")));var n=isNode?e/50*Math.PI:e*Math.PI/1e3;u.fillStyle="#030",u.fillRect(0,0,h,m),u.fillStyle="#432",u.fillRect(d-h/2,l,h,10);var a=0;for(var r in v)a=Math.max(a,v[r].calc(n));var o,i,c=d,s=l-a-p/2;for(r in v)v[r].render(c,s);isNode?(o=f.canvas,i=e,o.toBuffer(function(e,t){if(e)con.log(e);else{var n=__dirname+"/../export/running_man/runningman"+(10+i)+".png";fs.writeFile(n,t,function(){con.log("writeFile",n)})}}),e<49&&setTimeout(function(){y(++e)},50)):requestAnimationFrame(y)}return{stage:null,inner:null,resize:function(){},init:function(e,t,n,a){for(var r in f=e,u=t,v={},n){var o=n[r];v[o.name]=b(o)}if(con.log(v),!isNode){!function(l){var a=dom.element("div",{id:"editor",style:{color:"white","font-size":"10px",position:"absolute",top:10,left:h}}),e=dom.element("pre",{id:"output",style:{position:"absolute",top:0,left:270}});function f(){e.innerHTML="var limbs = "+JSON.stringify(l,null,"\t")+";"}function t(e,n,a){var r=.001,t=2*Math.PI/r;"length"===a&&(t=200,r=1);var o=l[n][a],i=dom.element("div",{style:{margin:2}}),c=dom.element("div",{innerHTML:n+" "+a+":",style:{display:"inline-block",textAlign:"right",width:100}}),s=dom.element("input",{value:o/r,min:0,max:t,type:"range",style:{width:100}}),d=dom.element("input",{value:o,type:"number",style:{width:50}});return e.appendChild(i),i.appendChild(c),i.appendChild(s),i.appendChild(d),s.addEventListener("change",function(e){var t=parseFloat(e.target.value)*r;l[n][a]=t,d.value=t,f()}),s}for(var n in f(),l){var r=dom.element("div",{style:{background:"#333","margin-bottom":5}});for(var o in a.appendChild(r),l[n])g.push(t(r,n,o))}function i(e,t){var n=dom.element("button",{innerHTML:e});a.appendChild(n),n.addEventListener("click",t)}i("Random",function(e){for(var t in g)g[t].value=g[t].value*(.8+.4*Math.random()),g[t].dispatchEvent(new Event("change"))}),i("Morph",function(e){for(var t in g)g[t].newValue=g[t].value*(.8+.4*Math.random())}),document.body.appendChild(a),a.appendChild(e)}(a);var i=dom.element("div",{id:"nested",style:{position:"absolute",left:0,top:m,width:m,height:h,transform:"rotate(-90deg)scale(-1,1)",background:"rgba(255,0,0,0.2)"}});document.body.appendChild(i),i.appendChild(v.body.div);var c=dom.element("div",{id:"keyframes",style:{position:"absolute",top:2*m,left:0,width:m,height:h,transform:"rotate(-90deg)scale(-1,1)",background:"rgba(0,0,255,0.2)"}});document.body.appendChild(c),c.appendChild(v.body.divKeyframe);var s=document.createElement("style"),d=["body {","overflow: auto;","}","#body {","left: "+m/2+"px;","top: "+h/2+"px;","}",".limb {","background: rgba(0,0,200,0.8);","position: absolute;","transform-origin: center left;","transform-style: preserve-3d;","}",".joint {","background: rgba(0,0,255,0.9);","height: 0;","position: absolute;","transform-origin: center center;","width: 0;","}"];for(var l in v)d=d.concat(v[l].css);s.innerText=d.join(" "),document.head.appendChild(s)}y(0)},kill:function(){}}};isNode?module.exports=creature_creator():define("creature_creator",creature_creator);con=console;function human(){var e={body:{range:0,baserot:0,length:0,offset:0},torso:{range:0,baserot:3.141592653589793,length:100,offset:0},thigh:{range:1,baserot:.3,length:90,offset:0},calf:{range:-.6,baserot:-.9,length:90,offset:1.6},foot:{range:.5,baserot:1.4,length:25,offset:0},bicep:{range:.9,baserot:-.5,length:70,offset:0},forearm:{range:1.5,baserot:1.5,length:60,offset:-.3}};return{body:[{name:"body",parent:null,movement:e.body,phase:0},{name:"torso",parent:"body",movement:e.torso,phase:0},{name:"thigh1",parent:"body",movement:e.thigh,phase:0},{name:"calf1",parent:"thigh1",movement:e.calf,phase:0},{name:"foot1",parent:"calf1",movement:e.foot,phase:0},{name:"thigh2",parent:"body",movement:e.thigh,phase:Math.PI},{name:"calf2",parent:"thigh2",movement:e.calf,phase:Math.PI},{name:"foothigh2",parent:"calf2",movement:e.foot,phase:Math.PI},{name:"bicep1",parent:"torso",movement:e.bicep,phase:0},{name:"forearm1",parent:"bicep1",movement:e.forearm,phase:0},{name:"bicep2",parent:"torso",movement:e.bicep,phase:Math.PI},{name:"forearm2",parent:"bicep2",movement:e.forearm,phase:Math.PI}],limbs:e}}(isNode="undefined"!=typeof module)?module.exports=human():define("human",human),define("cube_fractal_zoom",function(){var t,n,a,p,r,i,c,l,f,v=200,u=1.2*v,o=window.innerWidth,s=window.innerHeight,h={};function g(e,t){return{xi:e%t-t/2+.5,yi:Math.floor(e/t)%t-t/2+.5,zi:Math.floor(e/t/t)-t/2+.5}}function d(e){var t=[],n=new THREE.Group;p.add(n);var a,r,o=new THREE.Group;n.add(o);for(var i=0;i<e*e*e;i++){var c=(void 0,a=new THREE.MeshPhongMaterial({color:9470064,specular:16777215,shininess:50}),r=new THREE.BoxGeometry(v,v,v),new THREE.Mesh(r,a));o.add(c);var s=g(i,e),d=s.xi,l=s.yi,f=s.zi,u=d*v,h=l*v,m=f*v;c.position.set(u,h,m),t.push(c)}return{group:n,inner:o,num:e,grid:t}}function m(){l.group.scale.set(.001,.001,.001);var e=f.num;TweenMax.to(f.group.scale,2.5,{x:e,y:e,z:e,ease:Quad.easeInOut});var t=.5*u,n=.5*u,a=.5*u;TweenMax.to(f.inner.position,2,{x:t,y:n,z:a,ease:Quad.easeInOut}),f.grid.forEach(function(e,t){var n=g(t,f.num),a=n.xi,r=n.yi,o=n.zi,i=a*u,c=r*u,s=o*u;TweenMax.to(e.position,1.5,{x:i,y:c,z:s,ease:Quad.easeInOut,delay:1})}),h={x:rand.getNumber(-Math.PI,Math.PI),y:rand.getNumber(-Math.PI,Math.PI),z:rand.getNumber(-Math.PI,Math.PI)},TweenMax.to(f.group.rotation,2.5,{x:h.x,y:h.y,z:h.z,ease:Quad.easeInOut,onComplete:b})}function b(){l.group.scale.set(1,1,1),l.group.rotation.set(h.x,h.y,h.z);var d=4*u;f.grid.forEach(function(e,t){var n=g(t,f.num),a=n.xi,r=n.yi,o=n.zi,i=a*d,c=r*d,s=o*d;0!=t&&(TweenMax.to(e.position,2.5,{x:i,y:c,z:s,ease:Quad.easeIn}),TweenMax.to(e.rotation,2.5,{x:rand.getNumber(-2,2),y:rand.getNumber(-2,2),z:rand.getNumber(-2,2),ease:Quint.easeIn})),TweenMax.to(e.scale,2.5,{x:0,y:0,z:0,ease:Quint.easeIn})}),TweenMax.to({},2.5,{onComplete:e})}function e(){var e=f;f=l,(l=e).group.scale.set(.001,.001,.001),l.inner.position.set(0,0,0),l.grid.forEach(function(e,t){var n=g(t,l.num),a=n.xi,r=n.yi,o=n.zi,i=a*v,c=r*v,s=o*v;e.position.set(i,c,s),e.rotation.set(0,0,0),e.scale.set(1,1,1)}),setTimeout(m,1e3)}function y(o){function e(e,t,n,a){var r=o+1e4;e.position.set(Math.sin(r*t*4e-5),Math.sin(r*n*4e-5),Math.sin(r*a*4e-5))}e(r,15,17,12),e(i,14,19,13),e(c,20,18,16),p.rotation.z+=.005,p.rotation.x+=.001,a.render(n,t),requestAnimationFrame(y)}return{init:function(){n=new THREE.Scene,t=new THREE.PerspectiveCamera(100,o/s,1,2e4),n.add(t),t.position.set(0,0,1500),t.lookAt(n.position),r=new THREE.DirectionalLight(16711680,1),n.add(r),i=new THREE.DirectionalLight(12623872,1),n.add(i),c=new THREE.DirectionalLight(16750848,1),n.add(c),(a=new THREE.WebGLRenderer({antialias:!0})).setSize(o,s),p=new THREE.Group,n.add(p);var e=new THREE.AmbientLight(16769248,.2);n.add(e),f=d(2),l=d(2),document.body.appendChild(a.domElement),y(0),setTimeout(m,1500)}}}),define("cube_pixelator",[],function(){var m,p,v,g,b=48,y=8,x=10,t={x:0,y:0,z:0},w=window.innerWidth,M=window.innerHeight,E=[],r=[],s=[],n=0;function o(e,i){var c=new Image;c.onload=function(){if(c.width!=c.height)throw new Error("squares only mate!");var e=b/c.width,t=dom.canvas(b,b).ctx;t.scale(e,e),t.drawImage(c,0,0);for(var n=[],a=t.getImageData(0,0,b,b).data,r=0;r<a.length;r+=4){var o=a[r];n.push({rotation:o/255})}s.push(n),progress("render:progress",s.length/4),setTimeout(i,100)},c.src="./assets/"+e+".jpg"}function i(){p=new THREE.Scene,m=new THREE.PerspectiveCamera(90,w/M,1,2e4),p.add(m);var e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,.5),p.add(e);var t=new THREE.DirectionalLight(15787425,.5);t.position.set(-1,.5,.5),p.add(t);var n,a,r,o,i,c=new THREE.DirectionalLight(3158064,.2);c.position.set(0,-1,.25),p.add(c),(v=new THREE.WebGLRenderer({antialias:!0})).setSize(w,M),g=new THREE.Group,p.add(g);for(var s=0;s<b*b;s++){var d=(a=n=y,r=16777215,void 0,o=new THREE.PlaneGeometry(n,a,1),i=new THREE.MeshLambertMaterial({color:r}),new THREE.Mesh(o,i));g.add(d);var l=s%b-b/2+.5,f=Math.floor(s/b)-b/2+.5,u=l*x,h=-f*x;d.position.set(u,h,0),d.rotateSpeed=Math.random()-.5,E.push(d)}document.body.appendChild(v.domElement),R(0),setInterval(T,6e3),progress("render:complete",v.domElement)}var T=function(){n++,n%=s.length,con.log("toggleImage",n);for(var e=s[n].slice(),t=0;t<b*b;t++)TweenMax.to(r[t],3,{rotation:e[t].rotation,easing:Back.easeInOut,delay:.001*t})};function R(e){E.forEach(function(e,t){e.rotation.x=Math.PI/4-r[t].rotation*Math.PI/3}),t.x=0+50*Math.sin(12e-5*e),t.y=0+50*Math.sin(17e-5*e),t.z=400+300*Math.sin(1e-4*e),m.position.set(t.x,t.y,t.z),m.lookAt(p.position),v.render(p,m),requestAnimationFrame(R)}return{init:function(){for(var e=0;e<b*b;e++)r.push({rotation:Math.random()});var t=function(){return o("marilyn",n)},n=function(){return o("hicks",a)},a=function(){setTimeout(i,200)};o("cash",t)}}});con=console,isNode="undefined"!=typeof module;var createCanvas=void 0;isNode&&(createCanvas=require("canvas").createCanvas);var setProps=function(e,t){for(var n in t)if("style"==n)for(var a in t[n])e[n][a]=t[n][a];else e[n]=t[n];return e},setAttributes=function(e,t){for(var n in t)e.setAttribute(n,t[n]);return e},element=function(e,t){var n=document.createElement(e);return setProps(n,t),n.setSize=function(e,t){n.style.width=e+"px",n.style.height=t+"px"},n},button=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.innerHTML&&con.warn("Specify button text as 1st param"),t.innerHTML=e,element("button",t)},svg=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return setAttributes(n,t),n.setSize=function(e,t){n.setAttribute("width",e),n.setAttribute("height",t)},n.clearRect=function(){},n.fillRect=function(){con.warn("svg.fillRect not implemented")},n},on=function(t,e,n){e.forEach(function(e){t.addEventListener(e,n)})},off=function(t,e,n){e.forEach(function(e){t.removeEventListener(e,n)})},trigger=function(t,e){e.forEach(function(e){t.dispatchEvent(e)})};dom={button:button,canvas:canvas=function(e,t){var a=void 0;isNode?a=createCanvas(e,t):((a=element("canvas")).width=e,a.height=t);var r=a.getContext("2d"),o=2*Math.PI;r.drawCircle=function(e,t,n){r.arc(e,t,n,0,o,!1)};return{setSize:function(e,t,n){n?a.setSize(e,t):(a.width=e,a.height=t)},canvas:a,ctx:r}},element:element,off:off,on:on,setProps:setProps,setAttributes:setAttributes,svg:svg,trigger:trigger};isNode&&(module.exports=dom);var experiment_template=function(){Math.PI;var t,n,a,r=dom.canvas(1,1),o=r.ctx;var e={stage:r.canvas,init:function(e){size=e.size,t=e.sw||size,sh=e.sh||size,r.setSize(t,sh),n=t/2,a=sh/2,o.clearRect(0,0,t,sh),o.fillStyle="#0f0",o.fillRect(n-20,a-20,40,40)}};return progress("render:complete",r.canvas),e};(isNode="undefined"!=typeof module)?module.exports=experiment_template():define("experiment_template",experiment_template);var progressBar,experiment_template_babel=function(){var t=dom.canvas(1,1),e=t.canvas,n=t.ctx,a=void 0,r=void 0,o=void 0,i=function(e){o=e.size,a=e.sw||o,r=e.sh||o,t.setSize(a,r),colours.getRandomPalette(),c()},c=function(){n.fillRect(0,0,a,r);for(var e=[];e.length<4;)e.push({x:rand.getNumber(.1,.9),y:rand.getNumber(.1,.9)});var t=geom.intersectionBetweenPoints.apply(null,e);t&&e.push(t),e.forEach(function(e){n.fillStyle=colours.getNextColour(),n.beginPath(),n.drawCircle(e.x*a,e.y*r,15),n.fill()})};return progress("render:complete",e),{init:i,render:c,settings:{},stage:e,update:function(e){i({size:o,settings:e})}}};(isNode="undefined"!=typeof module)?module.exports=experiment_template_babel():define("experiment_template_babel",experiment_template_babel);var progress=function(e,t){switch(con.log("experiments progress",e,t),e){case"render:progress":progressBar.style.width=100*t+"%",progressBar.style.height="10px";break;case"render:complete":progressBar.style.height="0px"}},exps=function(y){var x=y.list;return function(){var o,n,i,c=!1,s=!1;progressBar=dom.element("div",{id:"progress",style:{width:0,height:0}}),document.body.appendChild(progressBar);var t=dom.element("div",{id:"experiment-holder"});document.body.appendChild(t);var d=dom.element("div",{className:"exps-buttons"});document.body.appendChild(d);var l=dom.button("X",{className:"exps-button"});d.appendChild(l),dom.on(l,["click","touchend"],function(){window.location="/"+(s?"?src":"")});var f=dom.button("?",{className:"exps-button"});d.appendChild(f),dom.on(f,["click","touchend"],p);var e=dom.element("div",{className:"exps-info"}),a=dom.element("div",{className:"exps-info-details"}),r=dom.element("div",{className:"exps-buttons interacted"}),u=dom.button("X",{className:"exps-button"});dom.on(u,["click","touchend"],v),document.body.appendChild(e),e.appendChild(r),r.appendChild(u),e.appendChild(a);var h=function(e){var r="css:",t=x[e];t.toString().includes(r)&&(t=t.filter(function(e){var t,n,a=e.includes(r);return a&&(t=e.replace(r,""),(n=dom.element("link")).rel="stylesheet",n.type="text/css",n.href="css/"+t+".css",document.head.appendChild(n)),!a})),require(t,function(e){e?b(e):con.warn("require loaded... but experiment is null",e)})},m=function(){for(var e in l.style.display="none",f.style.display="none",x){var t=dom.element("button",{className:"exp"});dom.on(t,["click"],function(e){window.location="?"+e.target.key+(s?"&src":"")});var n=x[e][0],a=n,r=y.getDetails(n);r&&r.title&&(a=r.title),t.key=n,t.innerHTML=a,document.body.appendChild(t)}},p=function(){!0,e.classList.add("displayed"),a.innerHTML="\n<h4>Experimental Graphics</h4>\n<h1>"+o.title+"</h1>\n"+o.description+"\n<p><a href='https://github.com/raurir/experimental-graphics/blob/master/js/"+o.key+".js' target='_blank'>SRC on Github</a></p>"},v=function(){e.classList.remove("displayed"),!1},g=function(){var e=window.innerWidth,t=window.innerHeight;n.resize&&n.resize(e,t)},b=function(e){(n="function"==typeof e?e():e).stage?t.appendChild(n.stage):con.warn("experimentLoaded, but no stage:",n.stage),dom.on(window,["resize"],g),n.init({progress:progress,seed:i,size:800}),g()};return function(){if(window.location.search){var e=window.location.search.split("?")[1].split("&"),t=e[0],n=0,a=!1,r=t.split(",");if((s=e.filter(function(e){return"src"===e}).length)&&con.log("`src` in url: Experimental graphics in SRC mode..."),"src"===t)return m();for(r[1]&&(t=r[0],i=r[1],rand.setSeed(i),con.log("found key, seed",rand));n<x.length&&0==a;)x[n][0]==t?a=!0:n++;h(n),(o=y.getDetails(t))?o.key=t:d.removeChild(f),dom.on(document.body,["click","touchstart"],function(){c||(c=!0,d.classList.add("interacted"))})}else m()}(),{load:h,experiments:x}}};define("exps",["exps_details"],exps),define("exps_details",function(){var t={ball_and_chain:{title:"Ball and Chain",description:"<p>In the celebration of the <a href='http://www.abc.net.au/news/2017-11-15/australia-reacts-to-the-same-sex-marriage-survey-results/9151826' target='_blank'>Yes</a> Vote, started making this ball and chain in THREE + Cannon. Took a bit longer than expected, hopefully I can make a rainbow happy one for legalisation day.</p><p>Something along the lines of \"It's raining ball and chains\"</p>"},cube_fractal_zoom:{title:"Cube Fractal Zoom",description:"<p>Zooming into a cube that subdivides into muliple cubes.</p><p>Envisioned version is for each subdivision to be variable slice amounts rather than 2x2x2. Someday.</p><p>Also would like some kind of infinite shader, potentially perlin noise.</p>"},cube_pixelator:{title:"Cube pixelator",description:"<p>Should be called 'Plane pixelator' since they are planes, not cubes.</p><p>Planes are distributed through a 2 dimensional grid with each plane representing a pixel.</p><p>Each plane is exactly the same colour and this colour never changes. Instead, each plane rotates accordingly to catch the lighting within the scene and by doing so adapts its apparent shade, and thereby creates an image.</p>"},frame_inverse:{title:"Frame Inverse",description:"<p>Drawing rectangles, aye...</p><p>listen to <a href='https://youngerbrothermusic.bandcamp.com/album/the-last-days-of-gravity' target='_blank'>Younger Brother - Last Days of Gravity</a>.</p>"},fur:{title:"Fur",description:"<p>2 channels of perlin noise affect x and y lean of each hair of fur.</p>"},hex_rounded:{title:"Hex Rounded",description:"<p>Hex Rounded? Some title, but that's what it's been dubbed since inception in 2014 or so. Never worked properly, so fixed it up for Codevember 2017.</p>"},infinite_scrolling_cogs:{title:"Infinite Scrolling Cogs",description:"<p>Remake of <a href='https://codepen.io/raurir/pen/eknLg' target='_blank'>an old experiment</a> this time it's scrolling, non ineractive and more of a toon rendering style.</p><p>The thing I liked the best about the original, and this algorithm, is the cogs are very close to mathematically correct; not only do they animate in a life like fashion on screen, I am confident a 3D print of the geometry involved would result in a smoothly running friction free machine.</p><p>This algorithm continually creates canvases with no garbage collection. It will crash the browser eventually, I imagine, but you'd be bored after a minute anyway?</p>"},infinite_stairs:{title:"Infinite Stairs",description:"<p>Work in progress</p><p>Trying to make an infinite staircase, potentially spooky.</p>"},isometric_words:{title:"Isometric Words",description:"<p>Muddling up cubes by using the simplicity of Isometric projection.</p><p>Randomly offset the objects along the same axis the camera is looking down.</p>"},lego_stack:{title:"Lego Stack",description:"<p>Important scientifically realistic simulation to study how high lego can be stacked.</p>"},recursive_circle:{title:"Recursive Circle",description:"<p>Recursive rendering. Managed to not crash my browser creating this! Life achievement.</p>"},seven_four_sevens:{title:"Seven Four Sevens",description:"<p>An old flash experiment remade in javascript.</p><p>Thanks to the demise of flash I will lose heaps of graphical experiments, some irretrievably lost due to inability to open .FLAs - luckily this one had the source in a .as file.</p>"},synth_ambient:{title:"Synth Ambient",description:"<h2>This will be loud!</h2><p>A quick trip into audio synthesis in the browser.</p><p>That's the thing about synthesis, you can create out of control waveforms quite easily, hence the volume.</p><p>Using <a href='https://github.com/Tonejs/Tone.js' target='_blank'>Tone.js</a> for all the audio generation, this experiment creates a number of randomised effects, a bunch of randomised synthesizers, and with those creates a randomised drum track, randomised chords and a ranomised arpeggio.</p>"},triangles:{title:"Triangles",description:"<p>A plane of triangles fall away as they zoom towards the screen.</p><p>Probably a bit heavy for phones.</p>"}};return{list:[["additive"],["aegean_sun"],["alien"],["anemone_three","THREE"],["any_image_url"],["attractor"],["ball_and_chain","THREE"],["bill_stevens","THREE","TweenMax","lib/three/OrbitControls.js"],["bezier_flow"],["box","maze"],["circle_packing"],["circle_packing_zoom_loop"],["circle_sectors"],["codevember","THREE","TweenMax"],["corona_sine"],["creature"],["cube_fractal_zoom","THREE","TweenMax"],["cube_pixelator","THREE","TweenMax"],["fool","css:fool"],["fur"],["frame_inverse"],["hexagon_tile"],["hex_rounded","THREE"],["infinite_scrolling_cogs"],["infinite_stairs","THREE"],["isometric_cubes"],["isometric_words","THREE","TweenMax"],["lego_stack","THREE"],["linked_line"],["mandala"],["maze"],["maze_cube","linked_line","THREE"],["meandering_polygons"],["mining_branches"],["molecular_three","THREE"],["nested_rotating_polygon","ease"],["oscillate_curtain"],["oscillator"],["overflow"],["pattern_check","css:pattern_check"],["pattern_circles"],["perlin_grid","THREE","TweenMax"],["perlin_leaves"],["perlin_noise"],["polygon_slice"],["polyhedra","3d"],["polyhedra_three","THREE","../lib/stemkoski/polyhedra"],["pine_three","THREE"],["race_lines_three","THREE","TweenMax"],["rainbow_particles"],["rectangular_fill"],["recursive"],["recursive_circle"],["recursive_polygon"],["reddit_proc_gen"],["seven_four_sevens"],["spiral_even"],["squaretracer"],["synth_ambient","Tone"],["tea"],["tentacle"],["tetris_cube","THREE","TweenMax"],["text_grid"],["triangles","THREE","TweenMax"],["tunnel_tour_three","THREE","TweenMax"],["typography"],["voronoi_stripes","voronoi"],["zoned_particles"]],getDetails:function(e){return t[e]||!1},getFeature:function(e){return{codevember:[{day:1,title:t.cube_pixelator.title,link:"cube_pixelator"},{day:2,title:t.synth_ambient.title,link:"synth_ambient"},{day:3,title:"Refactored Experiments"},{day:4,title:"Made Codevember"},{day:5,title:"fail :("},{day:6,title:t.isometric_words.title,link:"isometric_words"},{day:7,title:"fail ..."},{day:8,title:t.cube_fractal_zoom.title,link:"cube_fractal_zoom"},{day:9,title:t.infinite_scrolling_cogs.title,link:"infinite_scrolling_cogs"},{day:10,title:"nope :|"},{day:11,title:t.infinite_stairs.title,link:"infinite_stairs"},{day:12,title:"much fail."},{day:13,title:t.seven_four_sevens.title,link:"seven_four_sevens"},{day:14,title:t.triangles.title,link:"triangles"},{day:15,title:"very..."},{day:16,title:"...lame!"},{day:17,title:t.ball_and_chain.title,link:"ball_and_chain"},{day:18,title:t.fur.title,link:"fur"},{day:19,title:t.recursive_circle.title,link:"recursive_circle"},{day:20,title:t.lego_stack.title,link:"lego_stack"},{day:21,title:t.hex_rounded.title,link:"hex_rounded"},{day:22,title:"faily McFail O'clock"},{day:23,title:t.frame_inverse.title,link:"frame_inverse"}]}[e]||!1}}});sw=window.innerWidth,sh=window.innerHeight;var navOpen=!0;function navClass(){return"nav"+(navOpen?" open":"")}var container=dom.element("div",{className:"container",style:{width:sw+"px",height:sh+"px"}}),nav=dom.element("div",{className:navClass()}),navMenu=dom.element("div",{className:"menu"}),navTab=dom.element("div",{className:"tab"}),navIcon=dom.element("ul",{className:"icon",innerHTML:["first","second","third"].map(function(e,t){return"<li class='"+e+"'></li>"}).join("")}),space=dom.element("div",{innerHTML:"Hello World!",className:"space"});container.appendChild(nav),nav.appendChild(navMenu),nav.appendChild(navTab),navTab.appendChild(navIcon),container.appendChild(space),document.body.appendChild(container),navTab.addEventListener("click",function(){navOpen=!navOpen,nav.className=navClass()});var options=[{label:"Hello",items:[{label:"A"},{label:"B"}]},{label:"World"},{label:"There",items:[{label:"May or"},{label:"May not"},{label:"Exist"},{label:"A"},{label:"Situation"}]},{label:"Is",items:[{label:"A Computer"},{label:"Behind you"}]}],itemHeight=20;function navY(e){return(e+options.length)/2*-itemHeight+"px"}function createOption(t){var e=dom.element("div",{className:"main"}),n=dom.element("div",{className:"option",innerHTML:t.label});if(navMenu.appendChild(e),e.appendChild(n),t.items){var a=dom.element("div",{className:"sub-options"});e.appendChild(a);for(var r=0;r<t.items.length;r++){var o=t.items[r],i=dom.element("div",{className:"sub-option",innerHTML:o.label});a.appendChild(i)}n.addEventListener("click",function(e){if(lastSub){if(lastSub==a)return;lastSub.style.height=0}setTimeout(function(){a.style.height=t.items.length*itemHeight+"px"},400),lastSub=a,navMenu.style.marginTop=navY(t.items.length)})}else n.addEventListener("click",function(e){navMenu.style.marginTop=navY(0),lastSub&&(lastSub.style.height=0,lastSub=null)})}var lastSub=null;for(i=0;i<options.length;i++)createOption(options[i]);navMenu.style.marginTop=navY(0),window.addEventListener("resize",function(){sw=window.innerWidth,sh=window.innerHeight,container.setSize(sw,sh)}),define("frame_inverse",function(){var d=window.innerWidth,l=window.innerHeight,f=rand.getInteger(100,300),u=rand.getInteger(4,10),t=Math.floor(d*l/200),h=colours.getRandomPalette(),n=dom.canvas(d,l),m=n.ctx,p=[],v=0,a=0,e=rand.getNumber(0,1),g=null,b=1,y=2,x=3;.9<e?g=b:.8<e?g=y:.7<e&&(g=x);for(var r=0;r<d;){p[r]=[];for(var o=0;o<l;)p[r][o]=0,o++;r++}function w(e,t){return p[e][t]}function i(){if(v<t)if(a%20){requestAnimationFrame(i);for(var e=0;e<2e3;e++)c()}else progress("render:progress",v/t),setTimeout(i,200);else progress("render:complete",n.canvas);a++}function c(){var e=rand.getInteger(0,d-1),t=rand.getInteger(0,l-1),n=w(e,t),a=rand.getNumber(u,f),r=rand.getNumber(1,u),o=a,i=r;switch(g){case y:break;case b:o=r,i=a;break;case x:i=o=a;break;default:.5<rand.getNumber(0,1)&&(o=r,i=a)}if(!(d<e+o||l<t+i)){for(var c=e;c<e+o;){for(var s=t;s<t+i;){if(w(c,s)!=n)return!1;s++}c++}if(i-=2,1<=(o-=2)&&1<=i)(function(e,t,n,a,r){m.fillStyle=r,m.fillRect(e,t,n,a);for(var o=e+n,i=t+a,c=e;c<o;){for(var s=t;s<i;)p[c][s]=r,s++;c++}v++})(e+1,t+1,o,i,h[parseInt(5*Math.random())])}}return{init:function(){var e=colours.getRandomColour();h.splice(h.indexOf(e),1),m.fillStyle=e,m.fillRect(0,0,d,l),i()},stage:n.canvas}}),define("fur",["perlin"],function(e){for(var u=4,h=20,m=160,p=160,v=m*u,g=p*u,n=dom.canvas(v,g),b=n.ctx,y=e.noise(m,p),x=e.noise(m,p),w=[],t=0,a=m*p;t<a;t++){var r=rand.getInteger(125,145),o=rand.getInteger(105,125),i=rand.getInteger(75,95);w.push({x:4*rand.getNumber(-1,1),y:4*rand.getNumber(-1,1),colour:"rgba("+r+","+o+","+i+",0.5)"})}function M(e){requestAnimationFrame(M);var t=.002*e,n=y.cycle(t,.004),a=x.cycle(t,.004);b.fillStyle="black",b.fillRect(0,0,v,g);for(var r=0,o=m*p;r<o;r++){var i=r%m,c=Math.floor(r/m),s=n[r]-.5,d=a[r]-.5,l=(w[r].x+i+.5)*u,f=(w[r].y+c+.5)*u;b.strokeStyle=w[r].colour,b.beginPath(),b.moveTo(l,f),b.lineTo(l+15+s*h,f+5+d*h),b.stroke()}}return{resize:function(e,t){n.setSize(e,t,!0)},init:function(){M(0)},stage:n.canvas}}),define("box",function(){con.log("define box");var s,d={up:!1,down:!1,left:!1,right:!1},l=400,f=400,u=40,h=l/u,m=f/u,p=u/2,v=dom.canvas(l,f),a=dom.element("div"),r=dom.element("div",{style:{color:"white"}}),g={x:l/2,y:f/2};function o(e,t){g.x+=t,g.y+=e}function b(){d.left&&(g.x-=1),d.right&&(g.x+=1),d.up&&(g.y-=1),d.down&&(g.y+=1),g.x<0&&(g.x=0),g.x>l&&(g.x=l),g.y<0&&(g.y=0),g.y>f&&(g.y=f);var e=Math.floor((g.x-p/2)/u),t=Math.floor((g.y-p/2)/u),n=Math.floor((g.x+p/2)/u),a=Math.floor((g.y+p/2)/u),r=!0,o=20;"#"===y[t][e]&&(r=!1),"#"===y[a][n]&&(r=!1),!1===r&&(o=60,g.x=s.x,g.y=s.y),s.x=g.x,s.y=g.y;for(var i=0;i<m;i++)for(var c=0;c<h;c++)"#"===y[i][c]&&(v.ctx.fillStyle="rgba("+o+","+o+","+o+",1)",v.ctx.fillRect(c*u,i*u,u,u));v.ctx.fillStyle="rgba(0,0,0,0.4)",v.ctx.fillRect(0,0,l,f),v.ctx.fillStyle="#444",v.ctx.fillRect(g.x-p/2,g.y-p/2,p,p),requestAnimationFrame(b)}var y=null;return{init:function(){con.log("maze init",maze),maze.init(function(){y=maze.getMaze(),con.log("maze",y),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(){o(event.beta,event.gamma)},!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(){o(2*event.acceleration.x,2*event.acceleration.y)},!0):window.addEventListener("MozOrientation",function(){o(50*orientation.x,50*orientation.y)},!0);for(var e=null;null==e;){for(var t=0;t<m;t++)for(var n=0;n<h;n++)"#"!==y[t][n]&&.99995<Math.random()&&(e=!0,s={x:(g={x:n*u+u/2,y:t*u+u/2}).x,y:g.y});con.log("iteration")}!function(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}(["keydown","keyup"],function(e){var t="keydown"===e.type;switch(e.which){case 37:case 100:d.left=t;break;case 38:case 104:d.up=t;break;case 39:case 102:d.right=t;break;case 40:case 98:d.down=t}}),document.body.appendChild(a),a.appendChild(v.canvas),a.appendChild(r),con.log("render"),b()},h,m)},stage:a,resize:function(){}}});con=con||console;var intersectionBetweenPoints=function(e,t,n,a){var r,o,i,c,s,d,l=e.x,f=e.y,u=t.x,h=t.y,m=n.x,p=n.y,v=a.x,g=a.y;return l==m&&f==p?null:l==v&&f==g?null:u==m&&h==p?null:u==v&&h==g?null:(d=((i=v-m)*(f-p)-(c=g-p)*(l-m))/(-i*(o=h-f)+(r=u-l)*c),0<=(s=(-o*(l-m)+r*(f-p))/(-i*o+r*c))&&s<=1&&0<=d&&d<=1?{x:l+d*r,y:f+d*o}:null)},linearEquationFromPoints=function(e,t){var n=t.x-e.x,a=t.y-e.y;if(0==n||-1e-6<n&&n<1e-6)return{c:null,m:0<a?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,x:e.x};var r=a/n;return{c:e.y-r*e.x,m:r}},intersectionAnywhere=function(e,t,n,a){var r,o,i=linearEquationFromPoints(e,t),c=linearEquationFromPoints(n,a),s=null===i.c,d=null===c.c;if(s&&d)return null;if(s)r=i.x,o=c.m*r+c.c;else if(d)r=c.x,o=i.m*r+i.c;else{if(i.m-c.m==0)return null;r=(c.c-i.c)/(i.m-c.m),o=i.m*r+i.c}return{x:r,y:o}},pointInPolygon=function(e,t){var n=e.length;if(n&&3<=n&&void 0!==t.x&&void 0!==t.y){var a,r,o=t.x,i=t.y,c=!1;for(a=0,r=n-1;a<n;r=a++){var s=e[a].x,d=e[a].y,l=e[r].x,f=e[r].y;i<d!=i<f&&o<(l-s)*(i-d)/(f-d)+s&&(c=!c)}return c}return n<3?con.warn("pointInPolygon error - polygon has less than 3 points",e):con.warn("pointInPolygon error - invalid data vertices:",n,"polygon:",e,"point:",t),null},polygonArea=function(i){var c=i.length,e=i.reduce(function(e,t,n){var a=t.x,r=t.y,o=i[(n+1)%c];return e+(o.x+a)*(o.y-r)},0);return Math.abs(e)/2},polygonPerimeter=function(s){var d=s.length;return s.reduce(function(e,t,n){var a=t.x,r=t.y,o=s[(n+1)%d],i=o.x,c=o.y;return e+Math.hypot(a-i,r-c)},0)},linearInterpolate=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}},perpendincularPoint=function(e,t,n){var a={x:e.x-t.x,y:e.y-t.y},r={x:-a.y,y:a.x},o=Math.sqrt(r.x*r.x+r.y*r.y);return r.x/=o,r.y/=o,{x:n*r.x,y:n*r.y}},parallelPoints=function(e,t,n){var a=perpendincularPoint(e,t,n);return[{x:e.x+a.x,y:e.y+a.y},{x:t.x+a.x,y:t.y+a.y}]},insetPoints=function(e,t){for(var n=[],a=[],r=0,o=e.length;r<o;r++){var i=e[r],c=e[(r+1)%o];n.push(parallelPoints(i,c,t))}for(r=0,o=n.length;r<o;r++){var s=n[r],d=n[(r+1)%o],l=intersectionAnywhere(s[0],s[1],d[0],d[1]);if(!pointInPolygon(e,l))return null;a.push(l)}return a.unshift(a.pop()),a},deltaBetweenPoints=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},polygonsSimilar=function(e,t){if(e.length!=t.length)return con.warn("geom.polygonsSimilar invalid arrays, not equal in length!",e,t),!1;for(var n=0,a=e.length;n<a;n++){var r=e[n],o=e[(n+1)%a],i=t[n],c=t[(n+1)%a],s=deltaBetweenPoints(r,o),d=deltaBetweenPoints(i,c);if(s.x<0&&d.x<0);else if(0<s.x&&0<d.x);else if(0!=s.x||0!=d.x)return!1;if(s.y<0&&d.y<0);else if(0<s.y&&0<d.y);else if(0!=s.y||0!=d.y)return!1}return!0},polygonSelfIntersecting=function(e){for(var t=e.length,n=0;n<t-1;n++)for(var a=n+1,r=e[n],o=e[a],i=a;i<t;i++){var c=(i+1)%t,s=e[i],d=e[c];if(intersectionBetweenPoints(r,o,s,d))return!0}return!1};geom={insetPoints:insetPoints,intersectionAnywhere:intersectionAnywhere,intersectionBetweenPoints:intersectionBetweenPoints,lerp:linearInterpolate,linearEquationFromPoints:linearEquationFromPoints,linearInterpolate:linearInterpolate,parallelPoints:parallelPoints,perpendincularPoint:perpendincularPoint,pointInPolygon:pointInPolygon,polygonArea:polygonArea,polygonSelfIntersecting:polygonSelfIntersecting,polygonPerimeter:polygonPerimeter,polygonsSimilar:polygonsSimilar};if("undefined"!=typeof module&&(module.exports=geom),define("hex_rounded",function(){var T,R,C=500,S=500;return{init:function(){var n=!1,a={x:0,y:0},r=new THREE.Scene;r.fog=new THREE.Fog(0,100,5e3);var o={x:0,y:0,z:0};(T=new THREE.PerspectiveCamera(100,C/S,1,2e4)).position.x=0,T.position.z=-5e3;var e=new THREE.PointLight(16777215,1,1e4);r.add(e),e.position.set(0,0,-5e3);var z=new THREE.Object3D;r.add(z),(R=new THREE.WebGLRenderer).setSize(C,S),document.body.appendChild(R.domElement);var i=[],t=[],c=[],k=600,s=121,d=2*k*-Math.cos(30*Math.PI/180),l=3*k*Math.sin(30*Math.PI/180),f=5.5*-d,u=5.5*-l,h=10;function P(e){return(Math.random()-.5)*e}function m(e,t,n,a){for(var r,o,i,c,s,d,l,f,u,h,m,p,v,g,b,y=.1*k,x=.8*(k-y),w=new THREE.Shape,M=0;M<6;M++)i=(r=M)/(o=6)*Math.PI*2,c=(r+1)/o*Math.PI*2,s=(r+2)/o*Math.PI*2,d=Math.sin(i)*x,l=Math.cos(i)*x,f=Math.sin(c)*x,u=Math.cos(c)*x,h=d+.2*(f-d),m=l+.2*(u-l),p=f-.2*(f-d),v=u-.2*(u-l),g=f+.2*(Math.sin(s)*x-f),b=u+.2*(Math.cos(s)*x-u),0==r&&w.moveTo(h,m),w.lineTo(p,v),w.quadraticCurveTo(f,u,g,b);var E=100+Math.random()*k,T=.9*k<E?9453568:5263440,R={amount:E,bevelEnabled:!0,bevelSegments:1,steps:1,bevelThickness:y},C=w.extrude(R),S=new THREE.MeshPhongMaterial({color:T}),N=new THREE.Mesh(C,S);return z.add(N),N.move=function(){this.undecided+=P(.5),this.kindadecided-=.1*(this.kindadecided-this.undecided),this.dir-=.1*(this.dir-this.kindadecided),this.position.z+=this.dir},N.reset=function(){N.undecided=P(.5),N.kindadecided=P(.5),N.dir=N.kindadecided,N.position.set(e,t,n-E)},N.reset(),N}for(var p=0;p<s;p++){var v=Math.floor(p/11),g=p%11+(v%2==0?.5:0),b=g<2||8.5<g||v<2||8.5<v,y=m(f+g*d,u+v*l,0);i.push(y),b||t.push(y)}function x(){var e=new THREE.Object3D;z.add(e);var t=.7<Math.random();function n(){return 160+P(96)}var a=n()<<16|n()<<8|n(),n=(new THREE.BoxGeometry(200,200,200),new THREE.MeshPhongMaterial({color:a,shininess:1,shading:THREE.SmoothShading}),new THREE.PointLight(a,5,2e3));return e.add(n),e.position.set(P(1e3),P(1e3),t?200:-2e3+P(1e3)),e.v=20+P(10),e.vx=P(10),e.vy=P(10),e.vz=P(10),e.undecided=P(Math.PI),e.kindadecided=P(Math.PI),e.dir=e.kindadecided,e.move=function(){this.undecided+=P(.5),this.kindadecided-=.1*(this.kindadecided-this.undecided),this.dir-=.1*(this.dir-this.kindadecided),this.ax=Math.sin(this.dir)*this.v,this.ay=Math.cos(this.dir)*this.v,this.position.x+=this.ax,this.position.y+=this.ay;var e=4e3;this.position.x<-e&&(this.position.x=e),this.position.x>e&&(this.position.x=-e),this.position.y<-e&&(this.position.y=e),this.position.y>e&&(this.position.y=-e)},e}for(p=0;p<h;p++)c[p]=x();function w(){return t[~~(Math.random()*t.length)]}var M=w(),E=0;dom.on(window,["mousemove","touchmove"],function(e){if(n){var t=e.changedTouches&&e.changedTouches[0]||e;t.x=t.x||t.pageX,t.y=t.y||t.pageY,a.x=t.x-C/2,a.y=t.y-S/2}}),dom.on(window,["mousedown","touchstart"],function(e){n=!0}),dom.on(window,["mouseup","touchend"],function(e){n=!1}),function e(t){if(requestAnimationFrame(e),E<Math.floor(t/4e3)){E++,M=w(),z.position.z=2e3;for(var n=0;n<s;n++)i[n].reset(t,n)}for(n=0;n<h;n++)c[n].move(t,n);for(n=0;n<s;n++)i[n].move(t,n);T.position.x-=.02*(T.position.x-M.position.x),T.position.y-=.02*(T.position.y-M.position.y),o.x-=.2*(o.x-5*a.x),o.y-=.2*(o.y-5*a.y),T.lookAt(new THREE.Vector3(T.position.x-o.x,T.position.y-o.y,0)),z.position.z-=35,M.position.z+=40,R.render(r,T)}(0)},resize:function(e,t){C=e,S=t,R.setSize(e,t),T.aspect=e/t,T.updateProjectionMatrix()}}}),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var hexagon_tile=function(){return function(){var m,p,v=rand.instance(),g=colours.instance(v,"v1");function b(){return p+=1.89127398,(Math.sin(p)+Math.cos(2.12387891*p))/2*.1}var y,x,w,M,E,T,R,C,S,N,z=100,k=!1,P=z,_=z,H=2*Math.PI/6,I=1e3,A=0,L={spread:{type:"Number",label:"Spread",min:1,max:10,cur:10},background:{type:"Boolean",label:"Background",cur:!0}};function n(e){m=e.progress||function(){console.log("hexagon_tile - no progress defined")},v.setSeed(e.seed),p=v.getSeed(),z=e.size,P=e.sw||z,_=e.sh||z,T.setSize(P,_),L.spread.cur=10,L.background.cur=!0,e.settings&&(L=e.settings),m("settings:initialised",L),g.getRandomPalette();var t=g.getRandomColour();if(y=(5+25*v.random())/1e3,x=v.random()*v.random()*v.random()*y,w=y-x+.01*x,M=.01+10*v.random(),k){for(;R.firstChild;)R.removeChild(R.firstChild);T.setAttribute("style","background-color:"+t)}else L.background.cur&&(T.ctx.fillStyle=t,T.ctx.fillRect(0,0,z,z));for(var n=[],a=[],r=0;r<6;r++){var o=r*H,i=w*Math.cos(o),c=w*Math.sin(o);n[r]=(0===r?"M":"L")+i+","+c,a[r]={x:i,y:c}}n.push("Z");var s=y*Math.sin(H),d=Math.ceil(1/y/3)+1,l=Math.ceil(1/s)+1;for(C=d*l,S=[],r=0;r<C;r++){var f,u=Math.floor(r/d);if(i=(r%d+(u%2==0?.5:0))*y*3,c=u*s,k){var h=dom.svg("g");h.setAttribute("transform","translate("+i+","+c+")"),R.appendChild(h),f=dom.svg("path",{d:n.join(" ")}),h.appendChild(f)}else f=a;S[r]={index:r,hex:f,x:i,y:c,colour:null,rendered:!1}}E=v.shuffle(S.slice()),D()}function q(){var e=L.spread.cur/L.spread.max*10,t=A*I,n=t+I;C<n&&(n=C);for(var a=t;a<n;a++){for(var r,o,i,c=E[a].index,s=S[c],d=[],l=0;l<C;l++)if(l!=a){var f=E[l];f.rendered&&(r=s.x-f.x,o=s.y-f.y,Math.sqrt(r*r+o*o)<y*M&&d.push(f.colour))}if(i=0<d.length?g.mixColours(d):g.getNextColour(),k)s.hex.setAttribute("style","fill:"+i);else if(r=s.x-.5+b(),o=s.y-.5+b(),Math.round(10*Math.sqrt(r*r+o*o))<e){for(T.ctx.fillStyle=i,T.ctx.beginPath(),l=0;l<6;l++){var u=(s.x+s.hex[l].x)*z,h=(s.y+s.hex[l].y)*z;0===l?T.ctx.moveTo(u,h):T.ctx.lineTo(u,h)}T.ctx.closePath(),T.ctx.fill()}S[c].rendered=!0,S[c].colour=i}++A==N?m("render:complete",O.stage):(m("render:progress",A/N),setTimeout(q,25))}function D(){N=Math.ceil(C/I),A=0,q()}k?(T=dom.svg("svg",{width:P,height:_}),R=dom.svg("g"),T.appendChild(R)):T=dom.canvas(P,_);var O={init:n,render:D,settings:L,stage:k?T:T.canvas,update:function(e,t){n({progress:m,size:z,settings:e,seed:t})}};return O}};isNode?module.exports=hexagon_tile():define("hexagon_tile",hexagon_tile),define("infinite_scrolling_cogs",function(){var o=window.innerWidth,i=window.innerHeight;function G(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}var c=G(o,i);return{init:function(){var R,C=c.getContext("2d"),S=5,N=[],z=3.14159265,k=2*z,P=-1,_=.5*o,H=0,I=0,A=0,L=.02,q=0,D={fillStyle:"#000",lineWidth:0},O=1.7;function F(e,t){return Math.random()*(t-e)+e}function j(e,t){return~~F(e,t+1)}function W(e){var t={darkest:0,lightest:255,alpha:1};for(var n in e)t[n]=e[n];var a=t.white?t.white:j(t.darkest,t.lightest);return"rgba("+a+","+a+","+a+","+t.alpha+")"}function B(e,t,n,a,r,o,i){e.moveTo(t+a,n),null==o&&(o=!1);var c={fillStyle:"#fff",lineWidth:0,strokeStyle:"#000"};for(var s in r)c[s]=r[s];e.fillStyle=c.fillStyle,e.lineWidth=c.lineWidth,e.strokeStyle=c.strokeStyle,i&&e.beginPath(),e.arc(t,n,a,0,k,o),i&&(e.closePath(),c.fillStyle&&e.fill(),c.lineWidth&&e.stroke())}function t(e,t){var f,n;if(R=N[q-1],e&&t&&R){var a=t-R.yp,r=e-R.xp;A=Math.atan(a/r),A+=r<0?z:0,r=Math.abs(r),a=Math.abs(a),r-=Math.abs(R.size),a-=Math.abs(R.size),n=Math.sqrt(r*r+a*a)}else A=F(0,k),n=F(60,100);if(!(n<50||400<n)){var u=~~(n/10);P*=-1,q&&(_+=(I+=n-10)*Math.cos(A),H+=I*Math.sin(A)),I=n-10;for(var o,i,c=n-25,s=n,d=[],l=k/(4*u),h=0,m=0,p=(s-c)/O+c,v=0;v<4*u;v++){var g=v*l,b=~~h%2,y=b*(s-c)+c;h+=.5,m+=1;var x=g-l/2;o=y*Math.cos(x),i=y*Math.sin(x);var w=void 0;w=m%2==0?{tb:b,ex:o,ey:i}:{tb:b,mp:!0,ex:o,ey:i,mx:p*Math.cos(g-l),my:p*Math.sin(g-l)},d.push(w)}var M={index:q,size:n,rotation:F(0,k),teeth:u,dir:P,xp:_,yp:H,canvas:null};q&&(R=N[q-1],M.rotation=R.teeth/M.teeth*-R.rotation+A*(R.teeth+M.teeth)/M.teeth,M.teeth%2==0&&(M.rotation+=k/(2*M.teeth))),M.render=function(){var e=2*(this.size+S);this.canvas=G(e,e),(f=this.canvas.getContext("2d")).save(),f.translate(this.size+S,this.size+S),f.shadowBlur=2,f.shadowColor="#000",f.beginPath(),n=d[0],f.moveTo(n.ex,n.ey);for(var t=1;t<d.length;t++){var n=d[t];n.mp?f.quadraticCurveTo(n.mx,n.my,n.ex,n.ey):f.lineTo(n.ex,n.ey)}n=d[0],f.quadraticCurveTo(n.mx,n.my,n.ex,n.ey);var a=.2*c;B(f,0,0,.2*c,D,!0),T(a+.1*c,.9*c),f.closePath(),f.fillStyle=W({darkest:70,lightest:200,alpha:1}),f.fill(),f.stroke(),.5<Math.random()&&B(f,0,0,.16*c,D,!0,!0),f.globalCompositeOperation="source-atop",E(a,a+.1*c),E(.9*c,c)},M.draw=function(){M.canvas||M.render(),C.save(),C.translate(this.xp,this.yp),C.rotate(this.rotation),C.drawImage(this.canvas,-this.size-S,-this.size-S),C.restore()},M.rotate=function(){this.rotation+=k/this.teeth*this.dir*L,this.draw()},N[q]=M,q++}function E(e,t){if(!(F(0,1)<.3)){var n=t-e;B(f,0,0,(t+e)/2,{fillStyle:null,strokeStyle:W({darkest:0,lightest:40,alpha:.5}),lineWidth:n},!1,!0)}}function T(e,t){var n=(t+e)/2,a=t-e;0==j(0,1)?function(e,t){var n=t/2*F(.6,.9),a=~~(F(.5,.9)*k*e/n/2);n*=F(.5,.9);for(var r=0;r<a;r++){var o=r/a*k;B(f,e*Math.cos(o),e*Math.sin(o),n,D,!0)}}(n,a):function(e,t){for(var n=0==j(0,1),a=1+~~Math.pow(u,1/j(2,n?4:3)),r=F(.5,.8)*t,o=(k/a-(Math.asin(r/e)*n?1:.5))*F(.5,.9),i=e-r/2,c=e+r/2,s=0;s<a;s++){var d=s/a*k,l=d+o;f.moveTo(Math.cos(d)*i,Math.sin(d)*i),f.arc(0,0,i,d,l,!1),n?f.arc(Math.cos(l)*e,Math.sin(l)*e,r/2,l+z,l,!0):f.lineTo(Math.cos(l)*c,Math.sin(l)*c),f.arc(0,0,c,l,d,!0),n?f.arc(Math.cos(d)*e,Math.sin(d)*e,r/2,d,d+z,!0):f.lineTo(Math.cos(d)*i,Math.sin(d)*i)}}(n,a)}}var n=0,a=0;function r(){var e=(_<o/2?F(0,3):F(-3,0))*o/12;t(_+e,a),a=H+F(0,200)}for(var e=0;e<5;e++)r();document.body.appendChild(c),function e(){requestAnimationFrame(e),--n-i-200<-H&&r(),C.fillStyle="#ddd",C.fillRect(0,0,o,i),C.save(),C.translate(0,n);for(var t=0;t<N.length;t++)N[t].rotate();C.restore()}()},stage:c}}),define("infinite_stairs",function(){var t,n,a,r,o=window.innerWidth,i=window.innerHeight,l=300,f=40,u=30,h={};function c(e){requestAnimationFrame(c),a.render(n,t)}return{init:function(){!function(e){for(var t=new THREE.TextureLoader,n=0;n<e.length;n++){var a=e[n];h[a]=t.load("/assets/"+a)}}(["wood-dark.jpg"]),n=new THREE.Scene,t=new THREE.PerspectiveCamera(100,o/i,1,2e4),n.add(t),t.position.set(0,250,-100),t.position.set(1500,1600,-1e3),t.lookAt(new THREE.Vector3(0,250,100)),new THREE.OrbitControls(t),(a=new THREE.WebGLRenderer({antialias:!0})).setSize(o,i),a.shadowMap.enabled=!0,a.shadowMap.type=THREE.PCFSoftShadowMap,r=new THREE.Group,n.add(r),function(e){var t=1.25*f,o=(Math.floor(l/t),new THREE.Group);r.add(o);var i=new THREE.MeshPhongMaterial({map:h["wood-dark.jpg"]});function c(e){for(var t=e.faceVertexUvs[0].length,n=0;n<t;n+=2){var a=rand.getNumber(0,.75),r=a+rand.getNumber(.1,.25),o=rand.getNumber(0,.75),i=o+rand.getNumber(.1,.25);e.faceVertexUvs[0][n]=[new THREE.Vector2(a,i),new THREE.Vector2(a,o),new THREE.Vector2(r,i)],e.faceVertexUvs[0][n+1]=[new THREE.Vector2(a,o),new THREE.Vector2(r,o),new THREE.Vector2(r,i)]}return e}var n=6*f*2.3*4,s=6*u*2*4,d=Math.floor(n/100);function a(e){var t=new THREE.Group;o.add(t),t.position.set(e*l/2,0,0);for(var n=0;n<d;n++){var a=c(new THREE.BoxGeometry(5,s,100)),r=new THREE.Mesh(a,i);r.position.set(0,0,105*n),r.castShadow=!0,r.receiveShadow=!0,t.add(r)}return t}0==e&&(a(-1),a(1))}(0);var e=new THREE.AmbientLight(16777215,1);n.add(e),document.body.appendChild(a.domElement),c()}}});sw=400,sh=400;var ctx=(bmp=dom.canvas(sw,sh)).ctx,cx=sw/2,cy=sh/2,frame=0;function newLine(){ctx.clearRect(0,0,sw,sh);var e,g,b=70,t=9,n=13,a=100,r=frame%(a*4),o=Math.floor(r/a);switch(r=(r-o*a)/a,o){case 0:e=1-r,g=1;break;case 1:e=0,g=1-r;break;case 2:e=r,g=0;break;case 3:e=1,g=r}var i=30*g/360*Math.PI*2,y=b*Math.cos(i),x=b*Math.sin(i);function c(e,t,n){var a=e,r=t,o=e+y*g,i=t-x,c=e+y+y*g,s=t,d=c,l=t+b,f=e+y,u=t+x+b,h=e,m=t+b,p=f,v=t+x;switch(ctx.beginPath(),n){case 0:ctx.fillStyle="#444",ctx.moveTo(a,r),ctx.lineTo(p,v),ctx.lineTo(f,u),ctx.lineTo(h,m);break;case 1:ctx.fillStyle="#666",ctx.moveTo(p,v),ctx.lineTo(c,s),ctx.lineTo(d,l),ctx.lineTo(f,u);break;case 2:ctx.fillStyle="#888",ctx.moveTo(a,r),ctx.lineTo(p,v),ctx.lineTo(c,s),ctx.lineTo(o,i)}ctx.closePath(),ctx.fill()}for(var s=.4+.6*e,d=s,l=0;l<t;l++)for(var f=l*y*2*s-10,u=n-1;-1<u;u--){var h=u*b*2*d-300+l*x*2*d;c(f,h,1),c(f,h,2),c(f,h,0)}frame+=.5,requestAnimationFrame(newLine)}document.body.appendChild(bmp.canvas),newLine(),define("isometric_words",[],function(){var o,i,c,l=10;var e,t,f,u={x:-(e=1)*(t=1e3*e),y:1*t,z:1*t},h=window.innerWidth,m=window.innerHeight;function p(){return 1*(Math.random()-.5)}var n=!0;function v(){var e=(n=!n)?1:0;TweenMax.to(f.rotation,5,{x:e*p(),y:e*p(),z:e*p(),ease:Quint.easeInOut,onComplete:v})}function g(e){c.render(i,o),requestAnimationFrame(g)}return{init:function(){colours.getRandomPalette(),i=new THREE.Scene,o=new THREE.OrthographicCamera(h/-2,h/2,m/2,m/-2,1,2e4),i.add(o),o.position.set(u.x,u.y,u.z),o.lookAt(i.position);var e=new THREE.DirectionalLight(16765136,1);e.position.set(0,1,0),i.add(e);var t=new THREE.DirectionalLight(13696976,1);t.position.set(1,0,0),i.add(t);var n=new THREE.DirectionalLight(13684991,1);n.position.set(0,0,1),i.add(n);var a=new THREE.AmbientLight(6316128);i.add(a),(c=new THREE.WebGLRenderer({antialias:!0})).setSize(h,m),f=new THREE.Group,i.add(f),f.rotation.set(p(),p(),p());var r="\n                     \n           \n               \n                   \n                   \n                   \n                   \n               \n           \n                     \n\n".split("\n"),s=r.reduce(function(e,t){return Math.max(e,t.length)},0),d=r.length;r.forEach(function(e,c){e.split("").forEach(function(e,t){if(""===e){var n=(r=colours.getNextColour(),o=new THREE.MeshLambertMaterial({color:r}),i=new THREE.BoxGeometry(l,l,l),new THREE.Mesh(i,o));f.add(n);var a=rand.getInteger(-10,10);n.position.set((t-s/2+a)*l,(d/2-c-a)*l,-a*l)}var r,o,i})}),document.body.appendChild(c.domElement),g(),v()}}}),define("lego_stack",["lib/schteppe/cannon.0.6.2.min.js","cannon_demo"],function(e,a){!function e(){con.log("check"),"undefined"==typeof THREE?setTimeout(e,10):function(){var h=new a({trackballControls:!0}),m=function(e){var t=e.getWorld();t.gravity.set(0,0,-40),t.broadphase=new CANNON.NaiveBroadphase,t.solver.iterations=10;var n=new CANNON.Plane,a=new CANNON.Body({mass:0});return a.addShape(n),a.position.set(0,0,1),t.addBody(a),e.addVisual(a),t.quatNormalizeFast=!1,t.quatNormalizeSkip=0,t}(h);m.gravity.set(0,0,-10);var p=[];function t(){var e=2*rand.getInteger(1,4),t=rand.getInteger(1,2),n=new CANNON.Cylinder(.5,.5,.5,12),a=new CANNON.Box(new CANNON.Vec3(2,e,.2)),r=new CANNON.Box(new CANNON.Vec3(2,.2,t)),o=new CANNON.Box(new CANNON.Vec3(.2,e,t)),i=new CANNON.Box(new CANNON.Vec3(2,.2,t)),c=new CANNON.Box(new CANNON.Vec3(.2,e,t)),s=new CANNON.Body({mass:.1});s.addShape(a,new CANNON.Vec3(0,0,t)),s.addShape(r,new CANNON.Vec3(0,e-.2,0)),s.addShape(o,new CANNON.Vec3(1.8,0,0)),s.addShape(i,new CANNON.Vec3(0,.2-e,0)),s.addShape(c,new CANNON.Vec3(-1.8,0,0));for(var d=0;d<2;d++)for(var l=0;l<e;l++){var f=new CANNON.Vec3(2*(d-1+.5),2*(l-e/2+.5),t+.25);s.addShape(n,f)}s.position.set(0,0,10+5*p.length);var u=[14483456,17408,16759552,2237166][rand.getInteger(0,3)];m.add(s),h.addVisual(s,new THREE.MeshPhongMaterial({color:u})),s.linearDamping=.1,s.angularDamping=.1,p.push(s)}function n(e){requestAnimationFrame(n),p.length<100&&p.length<Math.floor(e/1e3)&&t()}h.create(function(){t(),n()}),h.start()}()}()});var linked_line=function(){var h=2*Math.PI,m=function(z,k){var P=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(u,e){if(Math.round(z/2)===z/2||Math.round(z)!==z)return alert("linked_line - invalid size, needs to be odd integer - you supplied: "+z),con.warn("linked_line - invalid size, needs to be odd integer - you supplied:",z);var i=0,c=z,s=z,h=2*(c+.5),m=2*(s+.5),p=2*(c+.5)*4,v=2*(s+.5)*4,d=dom.canvas(h,m),t=dom.canvas(p,v),n=dom.canvas(p,v),a=dom.canvas(p,v),g=d.ctx,l=t.ctx,b=n.ctx,y=a.ctx;P&&(document.body.appendChild(d.canvas),document.body.appendChild(t.canvas),document.body.appendChild(n.canvas),document.body.appendChild(a.canvas));var f,x={array:[],oneD:[]},w={},o=function(e){var t={x:e.x,y:e.y,type:"NULL"};x.oneD[E(t.x,t.y)]=t,x.array.push(t)},M=function(e){var t=null==e.x?rand.random():e.x,n=null==e.y?rand.random():e.y,a={x:t,y:n,type:"TUNNEL",surrounded:!1,prev:e.prev,next:e.next};return x.oneD[E(t,n)]=a,x.array.push(a),a},E=function(e,t){return t*c+e},T=function(e,t,n){switch(n){case 0:t--;break;case 1:e++;break;case 2:t++;break;case 3:e--}var a=E(e,t);return{ok:0<=e&&e<c&&0<=t&&t<s&&-1===x.oneD[a],x:e,y:t}},R=function(){var e=rand.getInteger(0,x.array.length-1),t=x.array[e];t&&(function(e){for(var t=-1;t<2;t++)for(var n=-1;n<2;n++){var a=e.x+t,r=e.y+n;if(0<=a&&a<c&&0<=r&&r<s){var o=E(a,r);if(-1===x.oneD[o])return!1}}return e.surrounded=!0}(t)?x.array.splice(e,1):t&&t.next&&t.prev&&r(t))},r=function(e){w.array=x.array.slice(),w.oneD=x.oneD.slice();var t=e,n=e.next,a=e.x,r=e.y,o=rand.getInteger(0,3),i=rand.getInteger(0,3),c=T(a,r,o),s=T(c.x,c.y,i),d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0,r=t.length-1;a<r;a++){var o=t[a],i=t[a+1];if(0!==Math.abs(o.x-i.x)&&0!==Math.abs(o.y-i.y))return!1}return!(t[0].x===t[1].x&&t[1].x===t[2].x||t[0].y===t[1].y&&t[1].y===t[2].y)}(t,c,s,n);if(c.ok&&s.ok&&d){var l=M({x:c.x,y:c.y}),f=M({x:s.x,y:s.y});(t.next=l).prev=t,(l.next=f).prev=l,(f.next=n).prev=f}else x.array=w.array.slice(),x.oneD=w.oneD.slice()};l.scale(4,4),l.imageSmoothingEnabled=!1,b.scale(4,4),b.imageSmoothingEnabled=!1;var C=0,S=0,N=function e(t){i++,g.fillStyle="#fff",g.fillRect(0,0,h,m);for(var n=0;n<40;n++)R();g.beginPath(),g.lineWidth=.25;for(var a=f;a;){var r=2*(a.x+.75),o=2*(a.y+.75);a==f?g.moveTo(r-2,o):a.next?g.lineTo(r,o):(g.lineTo(r,o),g.lineTo(r,o+2)),a=a.next}g.stroke();for(n=0;n<x.array.length;n++){a=x.array[n];g.fillStyle="NULL"==a.type?"#f00":"#00ff00",g.fillRect(2*a.x+1,2*a.y+1,1,1)}l.drawImage(d.canvas,0,0),C===x.array.length?S++:(C=x.array.length,S=0),S<300?i%50==0?(con.log("having a breather... ",S),setTimeout(e,20)):e():function(){var e=g.getImageData(0,0,h,m).data;b.fillStyle="#fff",b.fillRect(0,0,h,m);for(var t,n=[],a=0,r=0,o=e.length;a<o;a+=4,r++){var i={x:(t=r)%h,y:Math.floor(t/h)};255==e[a]&&(b.fillStyle="#f00",b.fillRect(i.x,i.y,1,1),n.push(i))}var c,s=[],d=-1;for(a=0,o=n.length;a<o;a++)d!=(c=n[a]).y?(d=c.y,s.push({x:c.x,y:c.y,w:1,h:1})):n[a-1].x==c.x-1?s[s.length-1].w++:s.push({x:c.x,y:c.y,w:1,h:1});for(a=0,o=s.length;a<o;a++){var l=s[a];for(r=a+1;r<o;r++){var f=s[r];l&&f&&l.x==f.x&&l.w==f.w&&l.y+l.h==f.y&&(s[a].h++,s[r]=null)}}for(s=s.filter(function(e){return e}),y.fillStyle="#fff",y.fillRect(0,0,p,v),a=0,o=s.length;a<o;a++)(c=s[a])&&(y.beginPath(),y.rect(4*c.x+2,4*c.y+2,4*c.w-4,4*c.h-4),y.lineWidth=1,y.lineStyle="rgba(0,0,0,0.00)",y.closePath(),y.stroke());u({walls:n,wallrects:s})}()};!function(){for(var e=0;e<s;e++)for(var t=0;t<c;t++)x.oneD.push(-1),g.fillRect(2*t-2+1,2*e-2+1,4,4);var n,a;k&&k.forEach(o);for(var r=0;r<s;r++)e=r<s/2?(t=r,s/2-.5):(t=c/2-.5,r),0==r?(n=M({x:t,y:e}),f=n):(n=M({x:t,y:e,prev:a}),a.next=n),a=n;n,N(0)}()})};return{generate:m,init:function(e){var t=[],n=function(e,t,n,a){for(var r=[],o=0;o<a;o++){var i=o/a*h;r.push({x:39*e+39*Math.cos(i)*n,y:39*t+39*Math.sin(i)*n})}return function(e,t){return geom.pointInPolygon(r,{x:e,y:t})}},a=function(n,a,r){return n*=39,a*=39,r*=39,function(e,t){return Math.hypot(e-n,t-a)<r}},r=n(.5,.5,.4,3),o=n(.5,.5,.25,5),i=n(.5,.5,.4,6),c=a(.75,.25,.2),s=a(.25,.75,1/6),d=void 0;switch(rand.getInteger(0,3)){case 0:d=function(e,t){return c(e,t)||s(e,t)};break;case 1:d=function(e,t){return r(e,t)};break;case 2:d=function(e,t){return o(e,t)};break;case 3:d=function(e,t){return i(e,t)};break;case 4:d=function(e,t){return!1}}for(var l=0;l<1521;l++){var f=l%39,u=Math.floor(l/39);d(f,u)&&t.push({x:f,y:u})}m(39,t,!0).then(function(e){e.walls,e.wallrects})}}};define("linked_line",linked_line);var mandala=function(){return function(){var n,s,d,l,f,u,g={spread:{type:"Number",label:"Spread",min:1,max:10,cur:10}},b=2*Math.PI,y=dom.canvas(1,1);y.ctx;function t(e){n=e.progress||function(){con.log("mandala - no progress defined")},s=e.size,d=e.sw||s,l=e.sh||s,y.setSize(d,l),f=l/2;var t=colours.getRandomPalette();con.log("Mandala init",t),u=2*rand.getInteger(2,40),g.spread.cur=10,e.settings&&(g=e.settings),n("settings:initialised",g),a(),n("render:complete",y.canvas)}function a(){var e=g.spread.cur/g.spread.max;con.log("spread",e);var h=1/u*b,t=Math.sqrt(.5),m=t*s,n=colours.getRandomColour(),a=dom.canvas(d,l);a.ctx.translate(2,2),a.ctx.lineCap="flat",a.ctx.beginPath(),a.ctx.moveTo(0,0),a.ctx.lineTo(Math.sin(0)*m,Math.cos(0)*m),a.ctx.lineTo(Math.sin(h)*m,Math.cos(h)*m),a.ctx.lineTo(0,0),a.ctx.fillStyle="red",a.ctx.strokeStyle="red",a.ctx.lineWidth=2,a.ctx.stroke();var p=dom.canvas(d,l);p.ctx.translate(2,2),p.ctx.beginPath(),p.ctx.moveTo(0,0),p.ctx.lineTo(Math.sin(0)*m,Math.cos(0)*m),p.ctx.lineTo(Math.sin(h)*m,Math.cos(h)*m),p.ctx.lineTo(0,0),p.ctx.fillStyle=n,p.ctx.strokeStyle=n,p.ctx.lineWidth=2,p.ctx.stroke(),p.ctx.fill(),document.body.appendChild(a.canvas),document.body.appendChild(p.canvas);var r=7;function v(e,t){return e<t?-1:1}var o=rand.getInteger(0,r);r-=o;var i=r-=2;con.log(o,2,i),function(){for(var e={left:[],right:[]},t=0;t<2;t++)e.left.push(rand.random()),e.right.push(rand.random());for(e.left.sort(v),e.right.sort(v),t=0;t<1;t++){p.ctx.fillStyle=colours.getNextColour();var n=Math.sin(0)*e.left[t],a=Math.cos(0)*e.left[t],r=Math.sin(h)*e.right[t],o=Math.cos(h)*e.right[t],i=Math.sin(h)*e.right[t+1],c=Math.cos(h)*e.right[t+1],s=Math.sin(0)*e.left[t+1],d=Math.cos(0)*e.left[t+1];p.ctx.beginPath(),p.ctx.moveTo(n*m,a*m),p.ctx.lineTo(r*m,o*m),p.ctx.lineTo(i*m,c*m),p.ctx.lineTo(s*m,d*m),p.ctx.closePath(),p.ctx.fill(),p.ctx.strokeStyle="black",p.ctx.stroke();var l=[{x:n,y:a},{x:r,y:o},{x:i,y:c},{x:s,y:d}],f=geom.insetPoints(l,-.01);if(con.log("duble",l,f),f){for(p.ctx.beginPath(),p.ctx.fillStyle=colours.getNextColour(),t=0;t<f.length;t++){var u=f[t];p.ctx[0==t?"moveTo":"lineTo"](u.x*m,u.y*m)}p.ctx.fill()}}}();for(var c=0;c<u;c++)y.ctx.save(),c%2==1?(y.ctx.scale(-1,1),y.ctx.translate(-f,f),y.ctx.rotate((c-1)*h)):(y.ctx.translate(f,f),y.ctx.rotate(c*h)),y.ctx.drawImage(p.canvas,-2,-2),y.ctx.restore()}return{init:t,render:a,settings:g,stage:y.canvas,update:function(e){t({size:s,settings:e})}}}};(isNode="undefined"!=typeof module)?module.exports=mandala():define("mandala",mandala),function(){var e,a,r,o,i,c,s,d,l,t,n,f,u,h,m,p,v,g,b,y,x,w,M,E,T,R,C,S,N,z,k;for(i=console,s=document,c=null,a=s.createElement("canvas"),0,16,Math.random(),w={randint:function(e,t){return parseInt(e+Math.random()*(t-e))},shuffle:function(e){var t,n,a;for(n=e.length;n;)t=Math.floor(Math.random()*n--),a=e[n],e[n]=e[t],e[t]=a;return e}},y=function(){var e,t,n,a,r;for(e="",n=a=0;a<16;n=++a){for(t=r=0;r<16;t=++r)e+=f[n][t];e+="\n"}return i.log(e)},f=[],T=C=0;C<16;T=++C){for(M=[],E=S=0;S<16;E=++S)M.push("?");f.push(M)}for(h=[],r=function(e,t){var n,a,r,o,i;for(n=[],f[e][t]=".",0<t&&"?"===f[e][t-1]&&(f[e][t-1]=",",n.push([e,t-1])),t<15&&"?"===f[e][t+1]&&(f[e][t+1]=",",n.push([e,t+1])),0<e&&"?"===f[e-1][t]&&(f[e-1][t]=",",n.push([e-1,t])),e<15&&"?"===f[e+1][t]&&(f[e+1][t]=",",n.push([e+1,t])),i=[],r=0,o=(n=w.shuffle(n)).length;r<o;r++)a=n[r],i.push(h.push(a));return i},m=function(e,t){return f[e][t]="#"},o=function(e,t,n){var a;if(null==n&&(n=!0),(a=0)<t&&"."===f[e][t-1]&&(a+=1),t<15&&"."===f[e][t+1]&&(a+=2),0<e&&"."===f[e-1][t]&&(a+=4),e<15&&"."===f[e+1][t]&&(a+=8),n){if(1===a){if(t<15){if(0<e&&"."===f[e-1][t+1])return!1;if(e<15&&"."===f[e+1][t+1])return!1}return!0}if(2===a){if(0<t){if(0<e&&"."===f[e-1][t-1])return!1;if(e<15&&"."===f[e+1][t-1])return!1}return!0}if(4===a){if(e<15){if(0<t&&"."===f[e+1][t-1])return!1;if(t<15&&"."===f[e+1][t+1])return!1}return!0}if(8!==a)return!1;if(0<e){if(0<t&&"."===f[e-1][t-1])return!1;if(t<15&&"."===f[e-1][t+1])return!1}return!0}return-1!==[1,2,4,8].indexOf(a)},60,n=[],n=[8,52],T=N=e=0;N<16;T=++N)for(E=z=0;z<16;E=++z)if(0===E||0===T||15===E||15===T){if(-1===n.indexOf(e))m(T,E);else for(0,r(T,E),s=0===T?1:-1,t=k=1;k<=4;t=++k)m(R=T+t*s,E-2),m(R,E-1),m(R,E+1),m(R,E+2);e++}y(),l=Math.E,v=0,p=function(e,t,n){return a.width=256,a.height=256,c=a.getContext("2d"),console.log("maze.coffee init",e),d(e)},b=function(){return 2<h.length&&v<1e10},g=function(){var e,t,n;return b()&&(n=Math.random(),(1<=(n=Math.pow(n,Math.pow(l,-10)))||n<0)&&console.log(n),t=Math.floor(n*h.length),e=h[t],o(e[0],e[1])?r(e[0],e[1]):m(e[0],e[1]),h.splice(t,1)),v++},u=function(){var n,a,e,t;for(t=[],T=e=0;e<16;T=++e)t.push(function(){var e,t;for(t=[],E=e=0;e<16;E=++e)n=f[T][E],a={"#":50,".":150,"?":200,",":200}[n],c.fillStyle="rgba("+a+","+a+","+a+",1)",t.push(c.fillRect(16*E,16*T,16,16));return t}());return t},d=function(r){var o;return(o=function(){var e,t,n,a;for(.5,s=t=0;t<=10;s=++t)g();if(b())console.log("drawing"),requestAnimationFrame(o);else{for(console.log("done"),T=n=0;n<16;T=++n)for(E=a=0;a<16;E=++a)"?"!==(e=f[T][E])&&","!==e||(f[T][E]="#");"function"==typeof r&&r()}return u()})()},x={getMaze:function(){return f},init:p,stage:a,resize:function(){return console.log("resize maze not implemented!")},kill:function(){return console.log("kill maze not implemented!")}},window.maze=x,define("maze",window.maze)}.call(this),define("maze_cube",["linked_line"],function(a){var o,i,c,s,d=11,l=1512,f=l/d,u={x:0,y:0,toggle:!0},t={x:0,y:0,z:0},h=window.innerWidth,m=window.innerHeight;function p(e,t,n,a){var r=new THREE.Group,o=new THREE.MeshPhongMaterial({color:a,emissive:8400896,specular:10518656,shininess:40}),i=new THREE.BoxGeometry(e,t,n),c=new THREE.Mesh(i,o);return c.castShadow=!0,c.receiveShadow=!0,r.add(c),r}function v(e){u.toggle&&(s.rotation.x+=.005*Math.PI,s.rotation.z-=.002*Math.PI),t.z=5e3,o.position.set(t.x,t.y,t.z),o.lookAt(i.position),c.render(i,o),requestAnimationFrame(v)}return{init:function(){var t=[],e=function(e){return a.generate(d,e)},n=function(e){con.log("adding walls:",t.length,e.wallrects.length),t.push(e.wallrects),progress("render:progress",t.length/6)};perf.start("gen"),e().then(n).then(function(){return e([{x:1,y:2},{x:1,y:3},{x:3,y:3}])}).then(n).then(e).then(n).then(e).then(n).then(e).then(n).then(e).then(n).then(function(){con.log("success"),perf.end("gen"),function(e){(i=new THREE.Scene).fog=new THREE.FogExp2(0,2e-4),o=new THREE.PerspectiveCamera(90,h/m,1,2e4),i.add(o);var t=new THREE.DirectionalLight(9474192,1.5);t.castShadow=!0,t.position.set(0,200,0),i.add(t),(c=new THREE.WebGLRenderer).setSize(h,m),c.shadowMap={type:THREE.BasicShadowMap,enabled:!0},s=new THREE.Group,i.add(s);var n=p(2*l-f,2*l-f,2*l-f,4206624);s.add(n);var a=function(e){var o=new THREE.Group;s.add(o),e.maze.forEach(function(e){var t=(e.x+e.w/2-d-.5)*f,n=(e.y+e.h/2-d-.5)*f,a=l+1,r=p(e.w*f,e.h*f,f,9474192);r.position.set(t,n,a),o.add(r)}),e.rotation.x&&(o.rotation.x=e.rotation.x*Math.PI),e.rotation.y&&(o.rotation.y=e.rotation.y*Math.PI),e.rotation.z&&(o.rotation.z=e.rotation.z*Math.PI)};function r(){u.toggle=!u.toggle}a({maze:e[0],rotation:{x:0},colour:16711680}),a({maze:e[1],rotation:{x:1,z:1.5},colour:65280}),a({maze:e[2],rotation:{x:.5,z:.5},colour:255}),a({maze:e[3],rotation:{x:1.5,z:1},colour:16776960}),a({maze:e[4],rotation:{y:.5,z:1.5},colour:16711935}),a({maze:e[5],rotation:{y:1.5,z:1},colour:65535}),document.body.appendChild(c.domElement),progress("render:complete",c.domElement),v(),window.addEventListener("click",r),window.addEventListener("touchstart",r)}(t)}).catch(function(e){con.warn("fail",e)})}}});var meandering_polygons=function(){var y=1e3,x=1e3,w=(colours.getNextColour(),24),M=[],n=dom.canvas(y,x),E=n.ctx,T=.2;function d(){var e=~~(230+25*Math.random());return"rgba("+e+","+e+","+e+","+Math.round(100*(.7+.3*Math.random()))/100+")"}var R=[];function C(e,t){return e*(e-1)/2+t}for(var e=0;e<w;e++)for(var t=0;t<e;t++)R[C(e,t)]={points:[e,t],lineWidth:0,colour:d(),dashes:~~(5*Math.random())};function S(){E.fillStyle="rgba(180,180,200,1)",E.fillRect(0,0,y,x);for(var e=0;e<w;e++){var t=M[e];t.move(),t.draw();for(var n=0;n<e;n++){var a=C(e,n),r=M[n],o=t.x-r.x,i=t.y-r.y,c=(g=Math.sqrt(o*o+i*i))<T;(r.x<0||1<r.x||r.y<0||1<r.y)&&(c=!1),c?(t.force(r,g,o,i),r.force(t,g,o,i),R[a].lineWidth-=.01*(R[a].lineWidth-3)):(R[a].lineWidth*=.9,R[a].lineWidth<.1&&(R[a].lineWidth=0))}}for(var s=0,d=R.length;s<d;s++){var l=R[s],f=l.points,u=M[f[0]],h=M[f[1]];if(l.lineWidth){for(n=0;n<s;n++){var m=R[n];if(m.lineWidth){var p=m.points,v=M[p[0]],g=M[p[1]],b=geom.intersectionBetweenPoints(u,h,v,g);b&&z(b,l.colour)}}N(u,h,l)}}requestAnimationFrame(S)}function N(e,t,n){0<n.lineWidth&&(E.save(),E.beginPath(),E.lineWidth=n.lineWidth,E.strokeStyle=n.colour,2<n.dashes&&E.setLineDash([n.dashes]),E.lineCap="round",E.moveTo(e.x*y,e.y*x),E.lineTo(t.x*y,t.y*x),E.stroke(),E.restore())}function z(e,t){E.beginPath(),E.fillStyle=t,E.drawCircle(e.x*y,e.y*x,3),E.fill()}return{stage:n.canvas,resize:function(e,t){y=e,x=t,n.canvas.width=y,n.canvas.height=x},init:function(){for(var e=0;e<w;)M[e]={x:Math.random(),y:Math.random(),fx:0,fy:0,vx:.001*Math.random(),vy:.001*Math.random(),dir:Math.random()*Math.PI*2,dirFloat:0,rotation:0,rotationFloat:0,type:~~(2*Math.random()),bmp:null,size:0,generate:function(){this.size=6+~~(20*Math.random());var e=dom.canvas(this.size,this.size),t=e.ctx;switch(this.type){case 0:var n=2*Math.random(),a=this.size/2-n;t.beginPath(),t.lineWidth=n,t.strokeStyle=d(),t.drawCircle(this.size/2,this.size/2,a),t.stroke(),a*=Math.random(),t.beginPath(),t.fillStyle=d(),t.drawCircle(this.size/2,this.size/2,a),t.fill();break;case 1:var r=3+~~(7*Math.random());t.beginPath(),t.lineWidth=2,t.strokeStyle=d(),t.drawCircle(this.size/2,this.size/2,a-1);for(var o=0;o<r;o++){var i=o/r*Math.PI*2,c=this.size/2+this.size/2*.8*Math.cos(i),s=this.size/2+this.size/2*.8*Math.sin(i);0==o?t.moveTo(c,s):t.lineTo(c,s)}t.closePath(),t.stroke()}this.bmp=e},draw:function(){null==this.bmp&&this.generate(),E.save(),E.translate(this.x*y,this.y*x),E.rotate(this.rotation),E.drawImage(this.bmp.canvas,-this.size/2,-this.size/2),E.restore()},attraction:-1e-5,speed:1e-4,friction:.9,move:function(){this.rotationFloat+=.5*(.5<Math.random()?-1:1),this.rotation-=.01*(this.rotation-this.rotationFloat),this.dirFloat+=.1*(.5<Math.random()?-1:1),this.dir-=.01*(this.dir-this.dirFloat),this.vx+=Math.sin(this.dir)*this.speed+this.fx,this.vy+=Math.cos(this.dir)*this.speed+this.fy,this.vx*=this.friction,this.vy*=this.friction,this.x+=this.vx,this.y+=this.vy,this.x<-.2&&(this.x=1.2),1.2<this.x&&(this.x=-.2),this.y<-.2&&(this.y=1.2),1.2<this.y&&(this.y=-.2)},force:function(e,t,n,a){this.fx=n/t*this.attraction,this.fy=a/t*this.attraction}},e++;S();var c=!1,s=null;addEventListener("mousedown",function(e){c=!0;for(var t=e.x/y,n=e.y/x,a=0;a<w;a++){var r=M[a],o=r.x-t,i=r.y-n;if(Math.sqrt(o*o+i*i)<.1){E.beginPath(),E.fillStyle="red",E.drawCircle(r.x*y,r.y*x,20),E.fill(),s=a;break}}}),addEventListener("mouseup",function(e){c=!1,s=null}),addEventListener("mousemove",function(e){if(c&&null!=s){var t=e.x/y,n=e.y/x;M[s].x=t,M[s].y=n}})},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=meandering_polygons():define("meandering_polygons",meandering_polygons);var mining_branches=function(){var t,o,n,T,R,a,i=200;var c=dom.element("div");return{stage:c,resize:function(e,t){},init:function(e){for(n=e.size;c.childNodes.length;)c.removeChild(c.childNodes[0]);colours.getRandomPalette(),t=colours.getRandomColour(),o=colours.getNextColour(),function(h){R=T=n*h,(a=dom.canvas(T,R)).canvas.setSize(T/h,R/h);var s,e,d,m=a.ctx,l=(Math.PI,.5),f=.5,u=[],p=[[]],v=0,g=.01,b=.01,y=0,x=0,w={increaseMutation:.5<rand.random(),drawNodes:.5<rand.random(),straight:.5<rand.random(),megaNodes:.5<rand.random(),megaSubNodes:.5<rand.random(),constantMegaNodeSize:.5<rand.random(),constantMegaSubNodeSize:.5<rand.random()};function M(e,t){t.index=e,d=t,u[e]=t,p[v].push(t)}function E(e){var t={x:l+Math.sin(y)*g+.05*(rand.random()-.5),y:f+Math.cos(y)*g+.05*(rand.random()-.5),rotation:y,distance:g},n=!0,a=1e7;for(s=u.length-1;-1<s&&n;){var r=u[s],o=t.x-r.x,i=t.y-r.y,c=Math.sqrt(o*o+i*i);c<.04?n=!1:(a=Math.min(c,a))==c&&(t.closest=u[s]),s--}t.x==d.x&&t.y==d.y&&(n=!1),n?(x=0,w.increaseMutation?t.mutationRate=1.04*t.closest.mutationRate:t.mutationRate=.9*t.closest.mutationRate,t.colour=colours.mutateColour(t.closest.colour,t.mutationRate),M(e,t)):(x<40?y+=20*rand.random()+Math.atan(1/g):(p[++v]=[],g+=rand.random()*b+.0025),x++,E(e))}function r(e,t,n){var a=e.closest,r=a?a.colour:e.colour,o=1-e.distance;if(w.drawNodes){var i=o*h*5;m.beginPath(),m.fillStyle=r,m.drawCircle(e.x*T,e.y*R,i),m.fill()}if(a){if(m.beginPath(),m.lineWidth=Math.pow(1.1,6*o)*h,m.strokeStyle=r,m.lineCap="round",m.moveTo(t*T,n*R),w.straight)m.lineTo(a.x*T,a.y*R);else if(a.closest){var c=a.x+(a.closest.x-a.x)/2,s=a.y+(a.closest.y-a.y)/2,d=a.x+(a.x-c),l=a.y+(a.y-s);m.quadraticCurveTo(d*T,l*R,a.x*T,a.y*R)}else{var f=a.x+(t-a.x)/2,u=a.y+(n-a.y)/2;m.quadraticCurveTo(f*T,u*R,a.x*T,a.y*R)}m.stroke()}}for(M(0,{x:l,y:f,distance:0,rotation:0,colour:t,mutationRate:10}),e=1;e<i;)E(e),e++;!function(){m.fillStyle=o,m.fillRect(0,0,T,R);for(var e=u.length-1;-1<e;)r(t=u[e],t.x,t.y),e--;if(w.megaNodes)for(e=u.length-1;-1<e;){var t;n=t=u[e],t.x,t.y,a=(1-n.distance)*h*5,w.megaNodes&&(m.beginPath(),m.fillStyle=o,m.drawCircle(n.x*T,n.y*R,.7*a*(w.constantMegaNodeSize?1:rand.random())),m.fill(),w.megaSubNodes&&.5<rand.random()&&(m.beginPath(),m.fillStyle=n.colour,m.drawCircle(n.x*T,n.y*R,.9*a*(w.constantMegaSubNodeSize?1:rand.random())),m.fill())),e--}var n,a}(),c.appendChild(a.canvas)}(1)}}};isNode?module.exports=mining_branches():define("mining_branches",mining_branches);var render,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},centre=(con=console,dom=require("./dom.js"),fs=require("fs"),(size=300)/2),gridY=12,gridX=4*gridY,thirty=Math.PI/6,sinThirty=Math.sin(thirty),cosThirty=Math.cos(thirty),c=dom.canvas(size,size),unit=(ctx=c.ctx,90),saveFile=function(e,t,n){var a="/../export/"+(1==String(t).length?"0":"")+t+".png";e.toBuffer(function(e,t){e?con.log("saveFile err",e):fs.writeFile(__dirname+a,t,function(){con.log("saveFile success",void 0===t?"undefined":_typeof(t),__dirname+a),n()})})},draw=function(t,n){var e=function(e){ctx.save(),ctx.translate(t,n),ctx.rotate(e),ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(sinThirty*unit,cosThirty*unit),ctx.lineTo(0,cosThirty*unit*2),ctx.lineTo(-sinThirty*unit,cosThirty*unit),ctx.closePath(),ctx.fill(),ctx.restore()};e(1*thirty),e(5*thirty),e(9*thirty)},frames=32,loops=3;(render=function e(t){var n=Math.sin(t/frames*Math.PI*2-Math.PI/2)+1.98;unit=51;var a=Math.floor(t/frames)*Math.PI*2/3/4;ctx.fillStyle="#000",ctx.fillRect(0,0,size,size),ctx.fillStyle="#d11",ctx.save(),ctx.translate(centre,centre),ctx.rotate(a),ctx.translate(-centre,-centre);for(var r=0;r++<gridX;)for(var o=0;o++<gridY;){draw(centre+(r-gridX/2)*cosThirty*unit*n,centre+(r%2*3+6*(o-gridY/2))*sinThirty*unit*n)}ctx.restore(),saveFile(c.canvas,t,function(){++t<frames*loops&&e(t)})})(0);var molecular_three=function(){var h,m,p,v={x:0,y:0},t={x:0,y:0,z:0},g=window.innerWidth,b=window.innerHeight;function y(e,t){return Math.random()*(t-e)+e}var x,w,M=0,E=50,T=y(4,15),R=T*y(1,3),C=y(0,10),S=[],N=!1,z=0;function k(e){var t=new THREE.MeshLambertMaterial({color:e.colour}),n=new THREE.SphereGeometry(e.radius,10,10);return new THREE.Mesh(n,t)}function P(e){var t=new THREE.Group,n=new THREE.MeshLambertMaterial({color:e.colour}),a=new THREE.CylinderGeometry(e.radius,e.radius,e.height,15),r=new THREE.Mesh(a,n);return r.position.y=e.height/2,t.add(r),{colour:e.colour,group:t,object:r}}function _(e){var t=e.object.geometry.vertices.length,n=e.object.geometry.vertices[t-2];return new THREE.Vector3(n.x+e.object.position.x,n.y+e.object.position.y,n.z+e.object.position.z)}function H(e){N&&(w.rotation.y+=.01),t.z=1e3,h.position.set(t.x,t.y,t.z),h.lookAt(m.position),p.render(m,h),requestAnimationFrame(H)}return{init:function(){colours.getRandomPalette(),(m=new THREE.Scene).fog=new THREE.FogExp2(0,.0015),h=new THREE.PerspectiveCamera(80,g/b,1,1e4),m.add(h);var e=new THREE.DirectionalLight(16777215,1.5);e.position.set(0,200,100),m.add(e);var t=new THREE.DirectionalLight(16777215,4);function s(e){var t=new THREE.Vector3;t.setFromMatrixPosition(e.matrixWorld);for(var n=(new Date).getTime(),a=!0,r=0,o=S.length;r<o&&a;r++)t==S[r]&&con.log("same one",t,S[r]),t.distanceTo(S[r])<E-5&&(a=!1);var i=(new Date).getTime()-n;return 3<i&&con.warn("proc time = ",i),{vector:t,ok:a}}function o(e,t){var n=colours.mutateColour(e.colour,50),a=P({radius:T,height:E,colour:n});a.group.position.set(t.x,t.y,t.z),a.group.rotation.z=2*y(-.5,.5)*Math.PI*z/300*C,a.group.rotation.y=y(0,2)*Math.PI;var r=_(a),o=k({radius:3,colour:16711680});o.position.set(r.x,r.y,r.z),a.group.add(o),e.group.add(a.group),e.group.updateMatrixWorld();var i=s(o);if(a.group.remove(o),i.ok){S.push(i.vector);var c=k({radius:R,colour:n});return c.position.set(i.vector.x,i.vector.y,i.vector.z),w.add(c),a}return a.group.remove(o),e.group.remove(a.group),null}function i(e){if(E=50*(2-++z/300)/2,z<300){progress("render:progress",z/300);for(var t=_(e),n=parseInt(y(1,3)),a=0;a<n;a++){var r=o(e,t);r&&(x=(new Date).getTime(),function(e,t){setTimeout(function(){N?con.log("wanted to created another, but time out..."):i(t)},10*z)}(0,r))}}else N=!0,progress("render:complete",p.domElement)}t.position.set(-100,0,100),m.add(t),(p=new THREE.WebGLRenderer({antialias:!0})).setSize(g,b),w=new THREE.Group,m.add(w),M=setInterval(function(){3e3<(new Date).getTime()-x&&(con.log("more than 3 seconds... bailing!"),N=!0,progress("render:complete",p.domElement),clearInterval(M))},500);for(var n=parseInt(y(10,50)),a=colours.getRandomColour(),r=0;r<n;r++){var c=P({radius:T,height:E,colour:a});c.group.rotation.set(y(0,2)*Math.PI,y(0,2)*Math.PI,y(0,2)*Math.PI),w.add(c.group);var d=_(c),l=k({radius:R,colour:a});l.position.set(d.x,d.y,d.z),c.group.add(l),c.group.updateMatrixWorld();var f=s(l);f.ok?(S.push(f.vector),i(c)):(c.group.remove(l),w.remove(c.group))}function u(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(p.domElement),u(["resize"],function(e){g=window.innerWidth,b=window.innerHeight,h.aspect=g/b,h.updateProjectionMatrix(),p.setSize(g,b)}),u(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),v.x=e.clientX/g*2-1,v.y=-e.clientY/b*2+1}),H()},resize:function(){}}};define("molecular_three",molecular_three);var posJump;_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},isNode="undefined"!=typeof module;posJump=isNode?(con=console,dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js"),Ease=require("../lib/robertpenner/ease.js"),progress=function(){return fs=require("fs")},saveFile=function(e,t,n){var a="/../export/"+(1==String(t).length?"0":"")+t+".png";e.toBuffer(function(e,t){e?con.log("saveFile err",e):fs.writeFile(__dirname+a,t,function(){con.log("saveFile success",void 0===t?"undefined":_typeof(t),__dirname+a),n()})})},.02):.005;var nested_rotating_polygon=function(){var u,h,m,p=2*Math.PI,t=dom.canvas(1,1),v=t.ctx,g=0,b=0,y="#000",x="#fff",e=0;function n(){e++,v.fillStyle=m%2?y:x,v.fillRect(0,0,u,u),function e(t){var n=t.depth+1;var a=[];if(t.points){var r=Ease.easeInOutQuart(g,0,1,1)+b;for(f=0;f<h;f++){var o=t.points[f],i=t.points[(f+1)%h],c=geom.lerp({x:o.x,y:o.y},{x:i.x,y:i.y},r/2),s=c.x,d=c.y;a.push(c)}}else for(f=0;f<h;f++){var l=f/h*p+p/4,s=u/2+u/2*.98*Math.cos(l),d=u/2+u/2*.98*Math.sin(l);a.push({x:s,y:d})}v.fillStyle=n%2?y:x;v.strokeStyle=v.fillStyle;v.lineWidth=2;v.beginPath();v.strokeStyle="0";for(var f=0;f<h;f++){var s=a[f].x,d=a[f].y;0==f?v.moveTo(s,d):v.lineTo(s,d)}v.closePath();n===m&&v.stroke();v.fill();n<m&&e({depth:n,points:a})}({depth:0}),1<=(g+=posJump)&&(g=0,b++,b%=2),isNode?saveFile(t.canvas,e,function(){e<1/posJump*2?n():con.log("stopping - frame:",e,"pos:",g)}):requestAnimationFrame(n)}return{stage:t.canvas,init:function(e){u=e.size,t.setSize(u,u),h=3,m=6,progress("render:complete",t.canvas),n()}}};isNode?(module.exports=exp=nested_rotating_polygon(),con.log(exp),exp.init({size:700})):define("nested_rotating_polygon",nested_rotating_polygon);sw=600,sh=600;function genRan(e,t){return Math.random()*(t-e)+e}var o,oscs=[],oscillators=15;for(o=0;o<oscillators;o++)oscs[o]=[],oscs[o][0]=genRan(0,.1),oscs[o][1]=genRan(0,.1),oscs[o][2]=genRan(0,.1),oscs[o][3]=genRan(0,.1);function getOsc(e,t,n){var a=0;for(o=0;o<oscillators;o++)a+=Math.sin(e*oscs[o][t])*n;return a/=oscillators}var bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);h=0;var xRange=30,yRange=30,xGap=sw/xRange*1,yGap=sh/yRange*1,xHalf=xRange/2,yHalf=yRange/2;frame=0;function newLine(){bmp.ctx.clearRect(0,0,sw,sh);for(var e=0;e<yRange;e++)for(var t=0;t<xRange;t++){0;var n=t+e,a=frame+n,r=15,o=(t+.5)*xGap+getOsc(a,2,r),i=(e+.5)*yGap+getOsc(a,3,r);bmp.ctx.fillStyle="#000",bmp.ctx.fillText(Math.round(n),o-2,i-2)}(frame+=1)<5e9&&requestAnimationFrame(newLine)}newLine(),define("oscillator",function(){var l,f,u=window.innerWidth,h=window.innerHeight,m=(colours.getRandomPalette(),colours.getRandomColour()),p=colours.getNextColour(),e=dom.canvas(u,h),v=e.ctx,g=1,b=10,y=Math.ceil(200),x=u/y,w=h/y,o=[],i=10;function M(e,t,n){for(var a=0,r=0;r<i;r++)0,a+=Math.sin(e*o[r][t])*n;return a}var E=rand.getInteger(0,1e6);return{init:function(){!function(){for(var e=0;e<i;e++)o[e]=[],o[e][0]=rand.getNumber(0,.1),o[e][1]=rand.getNumber(0,.1),o[e][2]=rand.getNumber(0,.1),o[e][3]=rand.getNumber(0,.1)}(),function(e){v.fillStyle=m,v.fillRect(0,0,u,h),v.fillStyle=p,l=.02*e;for(var t=f=0;t<y;){for(var n=0;n<y;n++){var a=E+n,r=M(a,0,b),o=M(a,1,b),i=M(a+l,2,b),c=M(a-l,3,b),s=i+r+x*n,d=c+o+f;v.beginPath(),v.drawCircle(s,d,g),v.fill()}l+=.4,f+=w,t++}}(0)},stage:e.canvas}});var overflow=function(){var t,i,c,d=2*Math.PI,n=dom.canvas(1,1),s=n.ctx,l=[];function a(){for(var e={colour:colours.getRandomColour(),points:[]},t=rand.getInteger(3,17),n=rand.getNumber(.1,.4),a=rand.getNumber(0,1),r=rand.getNumber(0,1),o=0;o<t;o++){var i=o/t*d,c=a+Math.sin(i)*n,s=r+Math.cos(i)*n;e.points.push({x:c,y:s})}l.push(e)}var e={stage:n.canvas,init:function(e){t=e.size,i=e.sw||t,c=e.sh||t,n.setSize(i,c),colours.getRandomPalette(),a(),a(),l.forEach(function(e){s.strokeStyle=e.colour,s.beginPath(),e.points.forEach(function(e,t){var n=e.x,a=e.y,r=n*i,o=a*c;t?s.lineTo(r,o):s.moveTo(r,o),con.log(r,o)}),s.closePath(),s.stroke()})}};return progress("render:complete",n.canvas),e};(isNode="undefined"!=typeof module)?module.exports=overflow():define("overflow",overflow);sw=window.innerWidth,sh=window.innerHeight,ctx=(bmp=dom.canvas(sw,sh)).ctx;var patternMonochrome,patternColoured,widths,pallete,palette,palettePreview,preview,title,dot=2,rotation=0;container=dom.element("div",{className:"container",style:{width:sw+"px",height:sh+"px"}});function newSize(){size=10*Math.ceil(10*Math.random())}function newStripes(){var e=2+~~(5*Math.random());for(widths=[0];widths.length<e;)widths.push(2*Math.ceil(1+Math.random()*(size-1)/2));widths.push(size);var n=[];widths.map(function(e,t){widths.indexOf(e)==t&&n.push(e)}),widths=n.sort(function(e,t){return e<t?-1:1})}function newPalette(){colours.getRandomPalette(),palettePreview&&(container.removeChild(palettePreview),palettePreview.removeEventListener("click",changePalette)),(palettePreview=colours.showPalette()).addEventListener("click",changePalette),container.appendChild(palettePreview)}function newColours(){palette=[];for(var e=0;palette.length<widths.length-1;){var t=colours.getRandomColour();(-1==palette.indexOf(t)||100<e)&&palette.push(t),e++}}function reset(){newSize(),newStripes(),newPalette(),newColours(),render()}function changeStripes(){newStripes(),newColours(),render()}function changeSize(e){dot=e,render()}function changeRotation(){rotation+=Math.PI/4,render()}function changePalette(){newPalette(),newColours(),render()}function render(){patternColoured=dom.canvas(size*dot,size*dot),patternMonochrome&&patternDetails.removeChild(patternMonochrome.canvas),patternMonochrome=dom.canvas(size*dot,size*dot);for(var e=[["#666","#aaa"],["#333","#888"]],t=0;t<widths.length-1;t++)for(var n=widths[t],a=widths[t+1]-n,r=palette[t],o=e[0][t%2],i=0;i<widths.length-1;i++)for(var c=widths[i],s=widths[i+1]-c,d=palette[i],l=e[1][i%2],f=0;f<a;f++)for(var u=0;u<s;u++)patternColoured.ctx.fillStyle=(f+u)%2==0?r:d,patternColoured.ctx.fillRect((n+f)*dot,(c+u)*dot,dot,dot),patternMonochrome.ctx.fillStyle=(f+u)%2==0?o:l,patternMonochrome.ctx.fillRect((n+f)*dot,(c+u)*dot,dot,dot);patternDetails.appendChild(patternMonochrome.canvas),ctx.save(),ctx.rect(0,0,sw,sh),ctx.rotate(rotation),ctx.fillStyle=ctx.createPattern(patternColoured.canvas,"repeat"),ctx.fill(),ctx.restore()}document.body.appendChild(container),container.appendChild(bmp.canvas);var buttonsTop=dom.element("div",{className:"buttons top"});container.appendChild(buttonsTop);var buttonsBottom=dom.element("div",{className:"buttons bottom"});container.appendChild(buttonsBottom);var patternDetails=dom.element("div",{className:"pattern"});container.appendChild(patternDetails),patternDetails.addEventListener("click",changeStripes);var buttonExport=dom.button("get css",{className:"button export"});function save(e,t){var n=e.toDataURL("image/jpeg"),a="check_"+t+"_"+(1e9*Math.random()<<0).toString(16)+"-.jpg";dom.element("a",{href:n,download:a}).click()}buttonExport.addEventListener("click",function(e){var t=patternColoured.canvas.toDataURL("image/jpeg");if(void 0===preview){preview=dom.element("div",{className:"preview"});var n=dom.element("div",{className:"title",innerHTML:"And the CSS..."});preview.appendChild(n);var a=dom.button("close",{className:"close"});a.addEventListener("click",function(e){container.removeChild(preview)}),preview.appendChild(a),preview.css=dom.element("div",{className:"css"}),preview.appendChild(preview.css)}container.appendChild(preview);var r="rotate("+rotation+"rad)",o=["background-image: url("+t+");","background-repeat: repeat;","-webkit-transform: "+r+";","-moz-transform: "+r+";","-ms-transform: "+r+";","-o-transform: "+r+";","transform: "+r+";"];preview.css.innerHTML=o.join("<br>")}),buttonsTop.appendChild(buttonExport);var buttonSaveOne=dom.button("pattern image",{className:"button"});buttonSaveOne.addEventListener("click",function(e){save(patternColoured.canvas,"pattern")}),buttonsTop.appendChild(buttonSaveOne);var buttonSaveTiled=dom.button("tiled image",{className:"button"});buttonSaveTiled.addEventListener("click",function(e){save(bmp.canvas,"tiled")}),buttonsTop.appendChild(buttonSaveTiled);var sizes=[1,2,3,4];for(var s in sizes){var size=sizes[s],buttonSize=dom.button(size+"x",{className:"button",size:size});buttonSize.addEventListener("click",function(){changeSize(this.size)}),buttonsBottom.appendChild(buttonSize)}var buttonRotation=dom.button("rotation",{className:"button"});buttonRotation.addEventListener("click",function(){changeRotation()}),buttonsBottom.appendChild(buttonRotation),bmp.canvas.addEventListener("click",reset),window.addEventListener("resize",function(){bmp.canvas.width=sw=window.innerWidth,bmp.canvas.height=sh=window.innerHeight,container.setSize(sw,sh),render()}),reset();var pattern_circles=function(){var u,h,m,p,v,g=dom.canvas(1,1),b=g.ctx;return{stage:g.canvas,init:function(e){a=e.size;var t=(u=a)/2,n=(h=a)/2;g.setSize(u,h),b.clearRect(0,0,u,h),b.fillRect(t-2,n-2,4,4),v=Math.random()*Math.PI/2;for(var a=10+~~(50*Math.random()),r=2+~~(5*Math.random()),o=[];o.length<r;)o.push(Math.ceil(Math.random()*a));o.push(a);var i=[];o.map(function(e,t){o.indexOf(e)==t&&i.push(e)}),o=i.sort(function(e,t){return e<t?-1:1}),colours.getRandomPalette();for(var c=[];c.length<o.length;)c.push(colours.getRandomColour());p=colours.getRandomColour(),con.log("colourBG",p);var s=a+a*Math.random();m=dom.canvas(s,s),document.body.appendChild(m.canvas);for(var d=o.length-1;-1<d;d--){var l=o[d],f=c[d];m.ctx.beginPath(),m.ctx.fillStyle=f,m.ctx.drawCircle(a/2,a/2,l/2),m.ctx.fill(),m.ctx.closePath(),con.log(d)}con.log("render"),b.save(),b.fillStyle=p,b.rect(0,0,u,h),b.fill(),b.rotate(v),b.fillStyle=b.createPattern(m.canvas,"repeat"),b.fill(),b.restore(),progress("render:complete",g.canvas)}}};(isNode="undefined"!=typeof module)?module.exports=pattern_circles():define("pattern_circles",pattern_circles);var perlin=function(){return{noise:function(b,y){var x,w,M,t=Math.random;function E(t,n,e,a){var r=.5-e*e-a*a;try{var o=r<0?0:Math.pow(r,4)*(x[n%8][0]*e+x[n%8][1]*a)}catch(e){con.log(e,n,t)}return o}return function(){x=[],w=[],M=[];for(var e=0;e<8;e++)x.push([]),M.push([t(),t()]);for(e=0;e<262;e++)w.push(~~(256*t()))}(),{cycle:function(e,t){for(var n=0;n<8;n++)x[n][0]=Math.sin(M[n][0]*e),x[n][1]=Math.cos(M[n][1]*e);for(var a,r,o,i,c,s,d,l,f,u,h,m=[],p=(n=0,b*y);n<p;n++){var v=n%b*t,g=Math.floor(n/b)*t;m.push((o=void 0,s=(a=v)-((i=~~(a+(o=.3*(a+(r=g)))))-(o=.2*(i+(c=~~(r+o))))),l=(d=r-(c-o))<s,f=i+w[c],u=i+l+w[c+!l],h=i+1+w[c+1],38*(E(f,w[f],s,d)+E(u,w[u],s-l+.2,d-!l+.2)+E(h,w[h],s-.6,d-.6))+.5))}return m}}}}};define("perlin",perlin);var vertexShader="varying vec2 vUv;\nvoid main()\n{\n  vUv = uv;\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader="\nuniform float r;\nuniform float g;\nuniform float b;\nuniform float distance;\nuniform float pulse;\nuniform float rows;\nuniform float cols;\nvarying vec2 vUv;\nfloat checkerRows = 1.5;\nfloat checkerCols = 2.0;\nvoid main( void ) {\n  vec2 position = abs(-1.0 + 2.0 * vUv);\n\n  float edging = abs((pow(position.y, 5.0) + pow(position.x, 5.0)) / 1.0);\n\n  float perc = 0.25 + distance * edging * 0.75;\n  vec2 checkPosition = vUv;\n  \n  float checkerX = mod(checkPosition.x, 1.0 / rows) * rows; // loop of 0 to 1 per row: /|/|/|//\n  checkerX = abs(checkerX - 0.5) * 2.0; // make up and down: /// \n  checkerX = pow(checkerX, 3.0); // power to sharpen edges: __/__/\n\n  float checkerY = mod(checkPosition.y, 1.0 / cols) * cols;\n  checkerY = abs(checkerY - 0.5) * 2.0;\n  checkerY = pow(checkerY, 3.0);\n\n  float checkerMod = 0.0;\n  if (rows > 1.0 && floor(checkPosition.x * rows) == checkerMod) {\n    perc = 2.0;\n  }\n  if (cols > 1.0 && floor(checkPosition.y * cols) == checkerMod) {\n    perc = 2.0;\n  }\n\n  // float checker = (checkerX * checkerY) * 2.0;\n  float checker = (checkerX + checkerY) * 0.5;\n  float r1 = r * checker + 0.1;\n  float g1 = g * checker + 0.05;\n  float b1 = b * checker + 0.2;\n  float red = r1 * perc + pulse;\n  float green = g1 * perc + pulse;\n  float blue = b1 * perc + pulse + 0.05;\n\n  // float red = r;\n  // float green = g;\n  // float blue = b;\n\n  gl_FragColor = vec4(red, green, blue, 1.0);\n}",perlin_grid=function(e){var t,n,a=document.createElement("div"),r={x:0,y:0},o=window.innerWidth,i=window.innerHeight;Math.random();function c(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}return c(["resize"],function(e){o=window.innerWidth,i=window.innerHeight,t.aspect=o/i,t.updateProjectionMatrix(),n.setSize(o,i)}),c(["mousedown","touchstart"],function(e){e.preventDefault(),isMouseDown=!0}),c(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),r.x=e.clientX/o*2-1,r.y=-e.clientY/i*2+1}),c(["mouseup","touchend"],function(e){e.preventDefault(),isMouseDown=!1}),{init:function(){},stage:a}};define("perlin_grid",["noise"],perlin_grid);var perlin_leaves=function(e){t=console,n={},a=function(){return(new Date).getTime()};var t,n,a,l=10,f=40,u=40,r=(Math.random,document.createElement("canvas"));r.width=f*l,r.height=u*l;var h=r.getContext("2d"),o=document.createElement("div");document.body.appendChild(o);var m=e.noise(f,u),p=1e3*Math.random();function v(e){for(var t=m.cycle(p+.01*e,.01),n=0,a=f*u;n<a;n++){var r=n%f,o=Math.floor(n/f),i=r-f/2,c=o-u/2,s=f/2-Math.sqrt(i*i+c*c),d=~~(255*t[n]*s);h.fillStyle="rgb("+d+","+d+","+d+")",h.fillRect(r*l,o*l,l,l)}requestAnimationFrame(v)}return{init:function(){v(0)},stage:r}};define("perlin_leaves",["perlin"],perlin_leaves);var perlin_noise=function(e){var s=20,d=30,l=30,t=dom.canvas(d*s,l*s),f=t.ctx,u=e.noise(d,l),h=(e.noise(d,l),e.noise(d,l));var n,a,m=(n=0,a=1,function(e){return e<n?n:a<e?a:e});function p(e){f.clearRect(0,0,d*s,l*s);for(var t=.005*e,n=u.cycle(.11*t,.016),a=h.cycle(.7*t,.009),r=0,o=d*l;r<o;r++){var i=r%d,c=Math.floor(r/d);f.fillStyle="rgba(20,50,120,1)",f.beginPath(),f.drawCircle(i*s,c*s,m(n[r])*s/2),f.closePath(),f.fill(),f.fillStyle="rgba(200,245,255,1)",f.beginPath(),f.drawCircle(i*s,c*s,m(a[r])*s/2),f.closePath(),f.fill()}requestAnimationFrame(p)}return{init:function(){p(0)},stage:t.canvas}};define("perlin_noise",["perlin"],perlin_noise);var pine_three=function(){var f,u,h,t={x:0,y:0,z:0},m=window.innerWidth,p=window.innerHeight;e=0,n=10,Math.random();var e,n,v,a=!1;function g(e){a&&(v.rotation.y+=.01),t.z=1e3,f.position.set(t.x,t.y,t.z),f.lookAt(u.position),h.render(u,f),requestAnimationFrame(g)}return{init:function(){colours.getRandomPalette(),u=new THREE.Scene,f=new THREE.PerspectiveCamera(80,m/p,1,1e4),u.add(f);var e=new THREE.DirectionalLight(16777215,1.5);e.position.set(0,200,100),u.add(e);var t=new THREE.DirectionalLight(16777215,4);t.position.set(-100,0,100),u.add(t),(h=new THREE.WebGLRenderer({antialias:!0})).setSize(m,p),v=new THREE.Group,u.add(v);var n,a,r,o,i,c,s,d,l=colours.getRandomColour();new THREE.Vector3(0,0,0),n={colour:l,group:v},s=colours.mutateColour(n.colour,50),a={radius:10,height:50,colour:s},r=new THREE.Group,o=new THREE.MeshLambertMaterial({color:a.colour}),i=new THREE.CylinderGeometry(a.radius,a.radius,a.height,15),(c=new THREE.Mesh(i,o)).position.y=a.height/2,r.add(c),d={colour:a.colour,group:r,object:c},n.group.add(d.group),n.group.updateMatrixWorld(),document.body.appendChild(h.domElement),g()},resize:function(){}}};if(define("pine_three",pine_three),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js"),geom=require("./geom.js");var getRotationRange=function(e){return 3*(90-180*(e-2)/e||45)/180*Math.PI},polygon_slice=function(){return function(){var m=rand.instance(),r=colours.instance(m),o=2*Math.PI,n=dom.canvas(1,1),i=n.ctx,c=void 0,s=void 0,d=void 0,p=void 0,l=void 0,f=void 0,u=void 0,h=void 0,v=void 0,g=void 0,b=void 0,y={rotation:{type:"Number",label:"Rotation",min:0,max:9,cur:0},maxDepth:{type:"Number",label:"Max Depth",min:2,max:8,cur:2},background:{type:"Boolean",label:"Background",cur:!1}},x=function(e,t){var n=t.lineWidth,a=t.strokeStyle,r=t.fillStyle;e&&(i.beginPath(),e.forEach(function(e,t){i[0==t?"moveTo":"lineTo"](e.x*b,e.y*h)}),i.closePath(),n&&a&&(i.strokeStyle=a,i.lineWidth=n*v,i.stroke()),r&&(i.fillStyle=r,i.fill()))},w=function n(e,a){var t=function(e){for(var t=m.getInteger(0,e.length-1),n=(t+m.getInteger(1,e.length-1))%e.length,a=Math.min(t,n),r=Math.max(t,n),o=e[a],i=e[(a+1)%e.length],c=e[r],s=e[(r+1)%e.length],d=geom.lerp(o,i,p?.5:m.getNumber(.1,.9)),l=geom.lerp(c,s,p?.5:m.getNumber(.1,.9)),f=[],u=[],h=0;h<e.length;)h<=a?f.push(e[h]):a<h&&h<=r?(f.push(d,l),h=r):f.push(e[h]),h++;for(h=a+1,u.push(l,d);h<r+1;)u.push(e[h]),h++;return[f,u]}(e);a++,t.forEach(function(e){if(a<y.maxDepth.cur&&(0===f||geom.polygonArea(e)>f))n(e,a);else{var t=geom.insetPoints(e,d);if(!t)return;if(!geom.polygonsSimilar(e,t))return;if(geom.polygonSelfIntersecting(t))return;x(t,function(){var e={},t=void 0,n=0,a=0;switch(m.getInteger(0,8)){case 0:e.lineWidth=.001,e.strokeStyle=r.getRandomColour();break;case 1:case 2:0===m.getInteger(0,1)?n=2*u:a=2*u,(t=i.createLinearGradient(.5-u,.5-u,n*b,a*h)).addColorStop(0,r.getRandomColour()),t.addColorStop(1,r.getRandomColour()),e.fillStyle=t;break;default:e.fillStyle=r.getRandomColour()}return e}())}})},a=function(e){s=e.progress||function(){console.log("polygon_slice - no progress defined")},m.setSeed(e.seed),v=e.size,b=e.sw||v,h=e.sh||v,r.getRandomPalette(),n.setSize(b,h),d=-m.getNumber(.002,.01),u=m.getNumber(.3,.5),p=.2<m.getNumber(0,1),f=0===m.getInteger(0,1)?0:m.getNumber(.05,.8*u),l=m.getInteger(2,8),y.rotation.cur=m.getInteger(0,9),y.maxDepth.cur=l,y.background.cur=3<m.getInteger(0,4),e.settings&&(y=e.settings),s("settings:initialised",y);var a=m.getInteger(3,7);g=y.rotation.cur/y.rotation.max*getRotationRange(a);var t=new Array(a).fill().map(function(e,t){var n=t/a*-o;return{x:Math.sin(n)*u,y:Math.cos(n)*u}});c=r.getRandomColour(),y.background.cur?(i.fillStyle=c,i.fillRect(0,0,b,h)):i.clearRect(0,0,b,h),i.save(),i.translate(.5*b,.5*h),i.rotate(g),x(t,{strokeStyle:r.getNextColour(),lineWidth:.001}),w(geom.insetPoints(t,d),0),s("render:complete",n.canvas),i.restore()};return{stage:n.canvas,init:a,settings:y,update:function(e,t){a({progress:s,seed:t,size:v,settings:e})}}}};isNode?module.exports=polygon_slice():define("polygon_slice",polygon_slice);sw=600,sh=600,bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);frame=0;var t=(1+Math.sqrt(5))/2,CodedIcosahedron={name:"CodedIcosahedron",vertex:[[-1,t,0],[1,t,0],[-1,-t,0],[1,-t,0],[0,-1,t],[0,1,t],[0,-1,-t],[0,1,-t],[t,0,-1],[t,0,1],[-t,0,-1],[-t,0,1]],face:[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]]},planesArray=[];function createPlanes(e,t,n){null==n&&(n=make3DPoint(0,0,0));for(var a=e.face.length,r=0;r<a;r++){for(var o=e.face[r],i=[],c=0,s=o.length;c<s;c++){var d=o[c],l=e.vertex[d];point=make3DPoint(n.x+l[0]*t,n.y+l[1]*t,n.z+l[2]*t),i[c]=point}planesArray.push(i)}}function animation(){bmp.ctx.clearRect(0,0,sw,sh),renderPlanes(bmp.ctx,planesArray,{fillColor:function(e){var t=255*(e.slope.y/Math.PI+1);return"rgba("+[Math.round(.23*t),Math.round(.62*t),Math.round(.9*t),1].join(",")+")"}}),frame++,cubeAxisRotations.x-=.01,cubeAxisRotations.y+=.01}createPlanes(CodedIcosahedron,100),con.log(planesArray),animation(),window.addEventListener("keydown",function(){animation()});var polyhedra_three=function(){var o,i,c,s=document.createElement("div"),t={x:0,y:0},d=window.innerWidth,l=window.innerHeight;d=l=400;var f,e=0,n={};function u(e){e.preventDefault(),t.x=e.clientX/d*2-1,t.y=-e.clientY/l*2+1}function h(){e+=4*t.x,f.rotation.y=.1*e,o.lookAt(i.position),c.render(i,o)}function m(){requestAnimationFrame(m),h()}return n.lineScale=1,n.lineSize=1+10*Math.random()*n.lineScale,n.lineGap=2+3*Math.random()*n.lineScale,n.baseRotation=0,n.varyRotation=Math.random()*Math.PI*2,{stage:s,init:function(){var e,t=(new Date).getTime();i=new THREE.Scene,(o=new THREE.PerspectiveCamera(70,d/l,1,1e4)).position.set(0,100,500),i.add(o),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),i.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),i.add(e),(c=new THREE.WebGLRenderer).setSize(d,l);var n=POLYHEDRA.Icosidodecahedron;f=function(e){var t,n,a=[],r=[],o=0;e.face.map(function(e){for(t=0,n=e.length-2;t<n;t++)a.push(e[0],e[t+1],e[t+2]);o+=n,r.push(o)});var i=[];e.vertex.map(function(e){e.map(function(e){i.push(e)})});var c=[];for(t=0,n=e.face.length;t<n;t++){var s=Math.round(255*Math.random())<<16|Math.round(255*Math.random())<<8|Math.round(255*Math.random()),d=new THREE.MeshLambertMaterial({color:s});c.push(d)}var l=new THREE.PolyhedronGeometry(i,a,200,0);con.log("geometry",l);var f=0;for(t=0,n=l.faces.length;t<n;t++)-1<r.indexOf(t)&&f++,l.faces[t].materialIndex=f;return d=new THREE.MeshFaceMaterial(c),new THREE.Mesh(l,d)}(n),i.add(f),s.appendChild(c.domElement),document.addEventListener("mousemove",u,!1);var a=(new Date).getTime();h();var r=(new Date).getTime();con.log("times",a-t,r-a),m()}}};define("polyhedra_three",polyhedra_three);var race_lines_three=function(){var u,v,h,m=!1,g="emptySlot",b="planeTop",y="planeBottom",p={x:0,y:0},x={x:0,y:0,z:10},i=window.innerWidth,c=window.innerHeight,w=20,M=16,E=20,T={width:100,height:30,depth:150},R=250,C=M*(T.depth+E),S=w*(T.depth+E),N=4,z=34,k=N,P={planeBottom:[],planeTop:[]},_=[];function H(e,t){return Math.random()*(t-e)+e}function I(e,t,n){var a=P[t][n][e];if(a!==g&&(a.position.x=a.offset.x,a.position.z=a.offset.z+a.posZ,0<a.position.z&&(a.posZ-=C),!a.isWarping&&.999<Math.random())){var r=Math.floor(5*Math.random()),o=e,i=n,c=t,s=0,d=0,l=0;switch(r){case 0:o++,d=1;break;case 1:o--,d=-1;break;case 2:i++,l=1;break;case 3:i--,l=-1;break;case 4:c=t===b?y:b,s=t===b?-1:1}P[c][i]&&P[c][i][o]===g&&(P[t][n][e]=g,a.isWarping=!0,P[c][i][o]=a,4===r?TweenMax.to(a.position,.5,{y:s*R}):TweenMax.to(a.offset,.5,{x:a.offset.x+d*(T.width+E),z:a.offset.z+l*(T.depth+E)}),TweenMax.to(a.offset,.6,{onComplete:function(){a.isWarping=!1}}))}}function A(e){var t;k-=.05*(k-(m?z:N));for(var n=0,a=_.length;n<a;n++){(t=_[n]).posZ+=k;var r=1-((C-t.posZ)/C-1);t.material.uniforms.distanceZ.value=r;var o=1-Math.abs(t.position.x)/(S/3);t.material.uniforms.distanceX.value=o;var i=m?t.colours.fast:t.colours.slow;t.material.uniforms.r.value-=.1*(t.material.uniforms.r.value-i.r),t.material.uniforms.g.value-=.1*(t.material.uniforms.g.value-i.g),t.material.uniforms.b.value-=.1*(t.material.uniforms.b.value-i.b);var c=(k-N)/(z-N);t.material.uniforms.speed.value=c,Math.random()>.99995-.005*c&&(t.material.uniforms.pulse.value=1),t.material.uniforms.pulse.value-=.1*t.material.uniforms.pulse.value/(c+1)}for(var s=0,d=M;s<d;s++)for(var l=0,f=w;l<f;l++)I(l,y,s),I(l,b,s);x.x-=.02*(x.x-400*p.x),x.y-=.05*(x.y-150*p.y),x.z=-100,u.position.set(x.x,x.y,x.z),u.rotation.y=x.x/-1e3,u.rotation.x=x.y/1e3,u.rotation.z=(x.x-400*p.x)/2e3,h.render(v,u),requestAnimationFrame(A)}var L=["varying vec2 vUv;","void main()","{","  vUv = uv;","  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","  gl_Position = projectionMatrix * mvPosition;","}"].join(""),q=["uniform float r;","uniform float g;","uniform float b;","uniform float distanceZ;","uniform float distanceX;","uniform float pulse;","uniform float speed;","varying vec2 vUv;","void main( void ) {","  vec2 position = abs(-1.0 + 2.0 * vUv);","  float edging = abs((pow(position.y, 5.0) + pow(position.x, 5.0)) / 2.0);","  float perc = (0.2 * pow(speed + 1.0, 2.0) + edging * 0.8) * distanceZ * distanceX;","  float red = r * perc + pulse;","  float green = g * perc + pulse;","  float blue = b * perc + pulse;","  gl_FragColor = vec4(red, green, blue, 1.0);","}"].join("");return{init:function(){v=new THREE.Scene,u=new THREE.PerspectiveCamera(100,i/c,1,1e4),v.add(u),(h=new THREE.WebGLRenderer({antialias:!0})).setSize(i,c);for(var e=0,t=M;e<t;e++){P.planeBottom[e]=[],P.planeTop[e]=[];for(var n=0,a=w;n<a;n++)P.planeBottom[e][n]=g,P.planeTop[e][n]=g}function r(){var e,t,n,a,r,o,i=Math.floor(Math.random()*w),c=i,s=.5<Math.random()?1:-1,d=-1===s?y:b,l=Math.floor(Math.random()*M),f=l,u=(i-w/2)*(T.width+E),h=s*R,m=l*(T.depth+E);if(P[d][f][c]===g){var p=(e=T,t={slow:{r:H(0,.2),g:H(.5,.9),b:H(.3,.7)},fast:{r:H(.9,1),g:H(.1,.7),b:H(.2,.5)}},n={r:{type:"f",value:t.slow.r},g:{type:"f",value:t.slow.g},b:{type:"f",value:t.slow.b},distanceX:{type:"f",value:1},distanceZ:{type:"f",value:1},pulse:{type:"f",value:0},speed:{type:"f",value:k}},a=new THREE.ShaderMaterial({uniforms:n,vertexShader:L,fragmentShader:q}),r=new THREE.BoxGeometry(e.width,e.height,e.depth),(o=new THREE.Mesh(r,a)).colours=t,o);p.position.y=h,p.isWarping=!1,p.offset={x:u,z:0},p.posZ=m,P[d][f][c]=p,_.push(p),v.add(p)}}for(n=0,a=M*w;n<a;n++)r();function o(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(h.domElement),o(["resize"],function(e){i=window.innerWidth,c=window.innerHeight,u.aspect=i/c,u.updateProjectionMatrix(),h.setSize(i,c)}),o(["mousedown","touchstart"],function(e){e.preventDefault(),m=!0}),o(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),p.x=e.clientX/i*2-1,p.y=-e.clientY/c*2+1}),o(["mouseup","touchend"],function(e){e.preventDefault(),m=!1}),A()},resize:function(){}}};define("race_lines_three",race_lines_three);con=console,sw=window.innerWidth,sh=window.innerHeight;(bmp=document.createElement("canvas")).width=sw,bmp.height=sh,document.body.appendChild(bmp);ctx=bmp.getContext("2d");var circleRads=2*Math.PI,numCurrent=numInitial=15,numMax=30,particles=[],deaths=[];function moveParticle(e){e.dying&&e.age++,e.dirFloat+=(Math.random()-.5)*Math.PI*.5,e.dir-=.01*(e.dir-e.dirFloat),e.vx=Math.cos(e.dir)*e.speed,e.vy=Math.sin(e.dir)*e.speed,e.x+=e.vx,e.y+=e.vy;var t=100;e.x>sw+t&&(e.x-=sw+2*t),e.x<-t&&(e.x+=sw+2*t),e.y>sh+t&&(e.y-=sh+2*t),e.y<-t&&(e.y+=sh+2*t),e.angle=Math.atan(e.vy/e.vx);var n=-e.angle;e.vx<=0&&(n+=Math.PI);for(var a=0;a<e.lines;a++){ctx.fillStyle=e.palette[a];var r=3;e.dying&&(r/=1+.01*e.age);var o=(a-e.lines/2+.5)*r*2,i=e.x+Math.sin(n)*o,c=e.y+Math.cos(n)*o;ctx.beginPath(),ctx.arc(i,c,r,0,circleRads,!1),ctx.closePath(),ctx.fill()}e.dying&&500<e.age?killParticle(e):0==e.children&&numCurrent<numMax&&.99<Math.random()&&spawnParticle(e)}function killParticle(e){var t=particles.indexOf(e);particles.splice(t,1),numCurrent--,deaths.push({anim:0,lines:e.lines,x:e.x,y:e.y})}function animateDeath(e){e.anim++;if(50<e.anim){var t=deaths.indexOf(e);deaths.splice(t,1)}else for(var n=.4*e.anim,a=(50-e.anim)/50,r=0;r<e.lines;r++){var o=r/e.lines*Math.PI*2,i=e.x+Math.sin(o)*n,c=e.y+Math.cos(o)*n,s=a+.01;ctx.fillStyle="rgba(255,255,255,"+a+")",ctx.beginPath(),ctx.arc(i,c,s,0,circleRads,!1),ctx.closePath(),ctx.fill()}}function generateParticle(e){if(e)return{age:0,children:0,dir:e.dir,dirFloat:e.dirFloat,dying:!1,lines:e.lines,palette:e.palette,speed:e.speed,vx:e.vx,vy:e.vy,x:e.x,y:e.y};for(var t=3+parseInt(6*Math.random()),n=[],a=0;a<t;a++)n.push("hsl("+a/t*360+",50%,50%)");return{age:0,children:0,dir:Math.random()*Math.PI*2,dirFloat:0,dying:!1,lines:t,palette:n,speed:1.5*Math.random()+.5,vx:0,vy:0,x:Math.random()*sw,y:Math.random()*sh}}function spawnParticle(e){e.dying=!0,e.children++,particles[numCurrent]=generateParticle(e),numCurrent++}function generate(){for(var e=0;e<numInitial;e++)particles[e]=generateParticle()}function render(e){ctx.fillStyle="rgba(0,0,0,0.04)",ctx.fillRect(0,0,sw,sh);for(var t=0;t<deaths.length;t++)animateDeath(deaths[t]);for(t=0;t<numCurrent;t++)moveParticle(particles[t]);requestAnimationFrame(render)}window.addEventListener("resize",function(){bmp.width=sw=window.innerWidth,bmp.height=sh=window.innerHeight}),generate(),render(0);con=console,rand=function n(e){var t,a,r=0,o={},i=4294967296,c=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=1013904223*e.charCodeAt(n),t%=i;return t};return{setSeed:function(e){e=e||0===e?/[^\d]/.test(e)?c(e):Number(e):Math.round(Math.random()*i),a=t=e},getSeed:function(){return t},random:function(){return void 0===a?(con.warn("no seed set"),null):(a=(1664525*a+1013904223)%i)/i},getLastRandom:function(){return a/i},getNumber:function(e,t){return e+this.random()*(t-e)},getInteger:function(e,t){return Math.floor(this.getNumber(e,t+1))},shuffle:function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(this.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e},alphaToInteger:c,instance:function(e){r++;var t=n(!0);return"number"!=typeof e&&"string"!=typeof e||t.setSeed(e),o[r]=t},getInstanceById:function(e){var t=o[e];return e&&t?t:"Can't find that rand instance, available ids are: "+Object.keys(o)}}};"undefined"!=typeof module&&(module.exports=rand(!1));con=console;if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var rectangular_fill=function(){var p,v,g=30,b=20,y=[],x=[],w=[],n=0,a=dom.canvas(1,1);var r=0,o=0;function i(){var e=17;if(5e3<++r)e=1;else if(1e4<r)return c(),con.warn("bailing!",r);if(r%100==0){var t=(n-x.length)/n;o!==t&&progress("render:progress",t),o=t}!function(e){var t=Math.ceil(rand.random()*e),n=Math.ceil(rand.random()*e),a=colours.getRandomColour(),r=Math.floor(x.length*rand.random()),o=x[r],i=o%g,c=Math.floor(o/g),s=!0,d=c+t;b<d&&(t=(d=b)-c);var l=i+n;g<l&&(n=(l=g)-i);for(var f=c;f<d&&s;f++)for(var u=i;u<l&&s;u++)y[f][u]&&(s=!1);if(s){for(f=c;f<d&&s;f++)for(u=i;u<l&&s;u++){y[f][u]=a;var h=f*g+u,m=x.indexOf(h);x.splice(m,1)}w.push({colour:a,x:c*p+v,y:i*p+v,w:t*p-2*v,h:n*p-2*v})}}(e),x.length?(r+1)%1e3==0?setTimeout(i,100):i():c()}function c(){a.ctx.setTransform(1,.2*rand.random()-.1,.2*rand.random()-.1,1,0,0);for(var e=0,t=w.length;e<t;e++){var n=w[e];a.ctx.fillStyle=n.colour,a.ctx.fillRect(n.x,n.y,n.w,n.h)}progress("render:complete",a.canvas)}return{name:"Rectangular Fill",stage:a.canvas,resize:function(e,t){a.setSize(e,t,!0)},init:function(){colours.getRandomPalette(),p=Math.round(20*(.2+.8*rand.random())),v=p*(.1+rand.random())*.4,a.setSize(p*b,p*g);for(var e=0;e<b;e++){y[e]=[];for(var t=0;t<g;t++)y[e][t]=0,x.push(e*g+t)}n=b*g,i()},kill:function(){}}};isNode?module.exports=rectangular_fill():define("rectangular_fill",rectangular_fill),function(){var e,t,x,f,w,u,M;console,f=document,x=e=null,Math.PI,M={},(t=function(n,e,t,a,r){var o,i,c,s,d,l;return null==r&&(r=1),c=f.createElement("div"),(d=f.createElement("label")).innerHTML=n+":",(s=f.createElement("input")).type="text",s.value=a,(l=f.createElement("input")).type="range",l.min=e/r,l.max=t/r,l.name=n,l.value=a/r,c.appendChild(d),c.appendChild(l),c.appendChild(s),f.body.appendChild(c),o=function(e){var t;return t=e.target.value*r,M[n]=Number(t),s.value=t,u()},i=function(e){var t;return t=e.target.value,M[n]=Number(t),l.value=t/r,u()},s.addEventListener("change",i),l.addEventListener("change",o),l.addEventListener("input",o),M[n]=a})("items",1,10,2),t("maxRecursion",1,10,5),t("angleSpiral",0,2,1,.01),t("angleSpread",0,2,Math.PI/2,.01),t("symmetry",-1,1,0,.01),t("scale",0,10,1,.01),u=function(){return e.width=e.width,w(300,50,0,0)},w=function(e,t,n,a){var r,o,i,c,s,d,l,f,u,h,m,p,v,g,b,y;for(a++,l=M.items,u=M.maxRecursion,o=M.angleSpiral,i=M.angleSpread,r=1-a/u,y=[],f=b=0;0<=l?b<l:l<b;f=0<=l?++b:--b)c=1-(f-(d=(l-1)/2))/d*M.symmetry,g=30*(v=M.scale/a*c),s=100*v,p=i*(f-d)+n*o,x.save(),x.translate(e,t),x.rotate(p),0,x.fillStyle="rgba(0,0,0,"+r+")",x.fillRect(1*-g/2,0,1*g,1*s),x.restore(),h=e+s*-Math.sin(p),m=t+s*Math.cos(p),a<u?y.push(w(h,m,p,a,f)):y.push(void 0);return y},function(){(e=f.createElement("canvas")).width=e.height=600,f.body.appendChild(e),x=e.getContext("2d"),u()}()}.call(this),define("recursive_circle",function(){var g=2*Math.PI,b=600,t=b,y=4,e=dom.canvas(b,t),x=e.ctx;function n(e){var m=3e-4*e,p=2/3,v=6;x.globalCompositeOperation="source-over",x.clearRect(0,0,b,t),function e(t,n,a,r){var o=Math.sin(m)*g/v*t;0;for(var i=r/2,c=i*p/2,s=(i-c)/2,d=c+s,l=0;l<v;l++){var f=o+l/v*g,u=n+Math.sin(f)*d,h=a+Math.cos(f)*d;t<y?e(t+1,u,h,i*p):(x.fillStyle="#fff",x.globalCompositeOperation="source-over",x.beginPath(),x.drawCircle(u*b,h*b,s*b),x.fill(),x.fillStyle="#000",x.globalCompositeOperation="destination-out",x.beginPath(),x.drawCircle(u*b,h*b,s*p/2*b),x.fill())}}(1,.5,.5,1),requestAnimationFrame(n)}return{resize:function(e,t){},init:function(){n(0)},stage:e.canvas}});_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(isNode="undefined"!=typeof module)colours=require("./colours.js"),dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js");var splitPolygon=function(e,t,n){var a=e.slice(),r=a.slice(0,t+1),o=a.splice(n,e.length-n),i=e.slice().splice(t,n-t+1);return[r.concat(o),i]},recursive_polygon=(getRotationRange=function(e){return 3*(90-180*(e-2)/e||45)/180*Math.PI},function(){return function(){var n,y,x,i,c,s,d,l,w,f,u,r,M,E,T,R,C=rand.instance(),h=colours.instance(C),m=500,a=m,o=m,S={rotation:{type:"Number",label:"Rotation",min:0,max:9,cur:0},background:{type:"Boolean",label:"Background",cur:!0}},N=dom.canvas(a,o),p=N.ctx,v=function(e){var t=e.depth+1;if(!(w<t||1e4<++y)){var n=e.points.slice(),a=n.length,r=void 0,o=void 0;if(3<a){var i=C.getInteger(0,a),c=n.splice(0,i);n=n.concat(c),r=0,o=C.getInteger(2,a-2)}else if(R){var s=geom.lerp(n[0],n[1],T?C.getNumber(.4,.6):.5),d=geom.lerp(n[1],n[2],T?C.getNumber(.4,.6):.5),l=geom.lerp(n[2],n[0],T?C.getNumber(.4,.6):.5),f=[s,d,l];S.background.cur?k(f,{fillStyle:x}):(N.ctx.globalCompositeOperation="destination-out",k(f,{fillStyle:"black"}),N.ctx.globalCompositeOperation="source-over"),z(e,[n[0],s,l],t),z(e,[n[1],d,s],t),z(e,[n[2],l,d],t)}else{var u=E?P(n):C.getInteger(0,2),h=M||C.getNumber(.1,.9),m=void 0;switch(u){case 0:m=geom.lerp(n[0],n[1],h),n.splice(1,0,m),r=1,o=3;break;case 1:m=geom.lerp(n[1],n[2],h),n.splice(2,0,m),r=0,o=2;break;case 2:m=geom.lerp(n[2],n[0],h),n.push(m),r=1,o=3}}if(!R){var p=splitPolygon(n,r,o),v=_slicedToArray(p,2),g=v[0],b=v[1];z(e,g,t),z(e,b,t)}}},z=function(e,t,n){var a=u&&C.random()<u?h.mutateColour(e.colour,f):h.getRandomColour(),r=c?s:C.random()>d;if(k(t,{fillStyle:a,strokeStyle:a,lineWidth:0}),r){var o=geom.insetPoints(t,i);if(o)geom.polygonsSimilar(t,o)&&(S.background.cur?k(o,{fillStyle:x}):(p.globalCompositeOperation="destination-out",k(o,{fillStyle:"black"}),p.globalCompositeOperation="source-over"))}(l||.2<C.random())&&v({points:t,colour:a,depth:n})},k=function(e,t){var n,a,r,o;p.beginPath(),e.forEach(function(e,t){var n=e.x,a=e.y;p[0==t?"moveTo":"lineTo"](n*m,a*m)}),p.closePath(),a=(n=t).lineWidth,r=n.strokeStyle,o=n.fillStyle,a&&r&&(p.strokeStyle=r,p.lineWidth=a,p.stroke()),o&&(p.fillStyle=o,p.fill())},P=function(e){for(var t,n,a,r,o=0,i=null,c=0,s=e.length;c<s;c++){var d=e[c],l=e[(c+1)%s],f=(n=l,void 0,a=(t=d).x-n.x,r=t.y-n.y,Math.hypot(a,r));o<f&&(o=f,i=c)}return i},g=function(e){y=0,n=e.progress||function(){console.log("recursive_polygon - no progress defined")},m=e.size,a=e.sw||m,o=e.sh||m,C.setSeed(e.seed),h.getRandomPalette(),N.setSize(a,o),S.rotation.cur=C.getInteger(0,9),S.background.cur=3<C.getInteger(0,4),e.settings&&(S=e.settings),n("settings:initialised",S),3===(r=3+Math.round(C.random()*C.random()*C.random()*28))&&(R=.8<C.random()),r<5&&(T=.8<C.random()),i=C.getNumber(.001,.02),u=C.getInteger(0,1)&&C.getNumber(0,1),f=C.getNumber(5,30),w=C.getInteger(1,8),l=.5<C.getNumber(0,1),E=.5<C.random(),M=.5<C.random()&&.5,(c=.5<C.random())?s=.5<C.random():d=.5*C.random();var t=S.rotation.cur/S.rotation.max*getRotationRange(r);x=h.getRandomColour(),S.background.cur?(p.fillStyle=x,p.fillRect(0,0,a,o)):p.clearRect(0,0,a,o),p.save(),p.translate(.5*a,.5*o),p.rotate(t),function(){for(var e=h.getRandomColour(),t=0,n=[];n.length<r;)n.push(t/r*Math.PI*2),t++;var a=n.map(function(e){var t=T?C.getNumber(.4,.45):.45;return{x:Math.sin(e)*t,y:Math.cos(e)*t}});v({points:a,colour:e,depth:0})}(),n("render:complete",N.canvas),p.restore()};return{init:g,settings:S,stage:N.canvas,update:function(e,t){g({progress:n,seed:t,size:m,settings:e})}}}});isNode?module.exports=recursive_polygon():define("recursive_polygon",recursive_polygon);var innerHTML="\n<style>\ndiv#stage {\n\tpadding: 20px;\n}\ndiv#stage a {\n\tcolor: white;\n}\n</style>\n<div id='stage'>\n\t<a href='/?polygon_slice'>This experiment has been renamad to PolygonSlice... Click here to go there.</a>\n</div>";define("reddit_proc_gen",function(){var t=document.createElement("div");return{stage:t,init:function(e){t.innerHTML=innerHTML,progress("render:complete",t)}}}),define("seven_four_sevens",function(){var R=900,C=600,S=dom.canvas(R,C),N=[],d=[],e=dom.element("div",{innerText:"Click to make a new waypoint, shift click to add multiple",style:{color:"white"}}),t=dom.button("Add planes",{className:"button"});document.body.appendChild(e),document.body.appendChild(t),dom.on(S.canvas,["click"],function(e){e.shiftKey||(z.holdingpattern=[]),z.holdingpattern.push({_x:e.x,_y:e.y})}),dom.on(t,["click"],function(e){d.push(l())});var z={holdingpattern:[{_x:rand.getNumber(0,R),_y:rand.getNumber(0,C)},{_x:rand.getNumber(0,R),_y:rand.getNumber(0,C)},{_x:rand.getNumber(0,R),_y:rand.getNumber(0,C)}],createSmoke:function(){}};function l(){var a,r,o,i,c,s,d,l=Math.PI,f=2*Math.PI,u={},h=0,m=0,p={gotoAndStop:function(e){p._currentframe=e},_currentframe:1,_rotation:0},v=Math.random()*R,g=Math.random()*C,b=Math.random()*f,y=.4*Math.random()+2,x=(y-1)/2;con.log(y,x);var w,M=(w=.03*Math.random()+.01)/20,E=Math.floor(Math.random()*z.holdingpattern.length),T=z.holdingpattern[E];return function(){T||(E=Math.floor(Math.random()*z.holdingpattern.length),T=z.holdingpattern[E]),a=v-T._x,r=g-T._y,(c=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)))<75&&(++E>=z.holdingpattern.length&&(E=0),T=z.holdingpattern[E]),u._xscale=u._yscale=c/5,o=Math.atan(r/a),s=b-(i=a<0?.5*l-o:1.5*l-o),Math.abs(s)>l&&(s<0?(s=s%l+l,b+=f):(s=s%l-l,b-=f)),d=p._currentframe,.1<s?(h<w?h+=M:h=w,p.gotoAndStop(58-(Math.round(h/w*29)+28))):s<-.1?(-w<h?h-=M:h=-w,p.gotoAndStop(58-(Math.round(h/w*29)+28))):(h=s/50,d<28?p.gotoAndStop(d+1):28<d&&p.gotoAndStop(d-1)),b-=h,u._rotation=180*-i/l,p._rotation=-b,v+=Math.sin(b)*y,g+=Math.cos(b)*y,S.ctx.save(),S.ctx.translate(v,g),S.ctx.rotate(p._rotation);var e=!1,t=Math.floor(p._currentframe/3.1);9<t&&(e=!0,t=19-t);var n=N[t].masked.canvas;S.ctx.scale((e?-1:1)*x,x),S.ctx.translate(-n.width/2,-n.height/2),S.ctx.drawImage(n,0,0),S.ctx.restore(),3<++m&&(m=0,z.createSmoke(this))}}return{init:function(){var c=10,s=0;function e(){if(++s==2*c){for(var e=0;e<c;e++){var t,n=N[e].mask;(t=dom.canvas(n.width,n.height)).ctx.drawImage(n,0,0);for(var a=t.ctx.getImageData(0,0,n.width,n.height),r=0;r<a.data.length;){var o=a.data[r++]+a.data[r++]+a.data[r++];a.data[r++]=255-o/3}t.ctx.putImageData(a,0,0);var i=dom.canvas(n.width,n.height);i.ctx.drawImage(N[e].plane,0,0),i.ctx.globalCompositeOperation="destination-out",i.ctx.drawImage(t.canvas,0,0),i.ctx.globalCompositeOperation="source-over",N[e].masked=i}d=[l()],function e(){requestAnimationFrame(e),S.ctx.fillStyle="#1a4859",S.ctx.fillRect(0,0,R,C);for(var t=0;t<z.holdingpattern.length;t++){var n=z.holdingpattern[t];S.ctx.beginPath(),S.ctx.drawCircle(n._x,n._y,20),S.ctx.closePath(),S.ctx.fillStyle="#259bc6",S.ctx.fill(),S.ctx.beginPath(),S.ctx.fillStyle="white",S.ctx.font="18px Helvetica",S.ctx.fillText(t+1,n._x-5,n._y+5),S.ctx.fill()}for(t=0;t<d.length;t++){var a=d[t];a()}}()}}for(var t=0;t<c;t++){var n=new Image;n.onload=e,n.src="/assets/seven_four_sevens/Image "+(t+1)+" at frame 0.jpg";var a=new Image;a.onload=e,a.src="/assets/seven_four_sevens/Image "+(t+1)+" alpha channel at frame 0.png",N[t]={plane:n,mask:a,masked:null}}},stage:S.canvas}});sw=600,sh=600,bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);h=0,cx=sw/2,cy=sh/2,frame=0;function newLine(){bmp.ctx.clearRect(0,0,sw,sh);var e,t,n,a=10+4*Math.sin(4e-4*frame),r=20+4*Math.sin(.001*frame);bmp.ctx.beginPath(),bmp.ctx.strokeStyle="red",bmp.ctx.lineWidth=.7*r;for(var o=0;o<25*a;o++){var i=(void 0,t=(e=(o-1)/a)*Math.PI*2,n=e*r,{x:cx+Math.sin(t)*n,y:cy+Math.cos(t)*n});0==o?bmp.ctx.moveTo(i.x,i.y):bmp.ctx.lineTo(i.x,i.y)}bmp.ctx.stroke(),(frame+=1)<50&&requestAnimationFrame(newLine)}newLine(),function(){var f,t,a,e,u;console,t=document,f=null,u=0,e=function(){var e;return(e=t.createElement("canvas")).width=e.height=640,t.body.appendChild(e),f=e.getContext("2d"),setInterval(function(){var e,t,n;for(u+=1,u%=2e3,f.clearRect(0,0,640,640),n=[],e=t=0;t<20;e=t+=1)n.push(a(e));return n},1e3/60)},a=function(e){var t,n,a,r,o,i,c,s,d,l;for(n=2*e,l=[],a=s=0;s<4;a=s+=1){for(f.save(),f.translate(320,320),f.rotate(a*Math.PI/2),t=d=0;d<=n;t=d+=1)i=16*(-e-.5),c=16*(-t+e-.5)+function(e,t,n,a){var r;return t+n*(-2*((r=(e/=a)*e)*e)+3*r)}((r=(o=20*(e+1))+300)<u?1:o<u?(u-o)/(r-o):0,0,16,1),0,f.fillStyle="rgba(0,0,0,1)",6,f.fillRect(i-3,c-3,6,6);l.push(f.restore())}return l},e()}.call(this);con=console;if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js");var state_of_origin_52_6=function(){return function(){var t,h,m="NSW",p="180px helvetica",v="#f00",g=200,s=dom.canvas(1,1),b={},y={NSW:0,QLD:0},x={NSW:!1,QLD:!1};function n(l,e,t,n,a){var r=0,o=150*a,d=dom.canvas(g,g),f=dom.canvas(g,g);function i(){var e,t=0*g,n=.1*g;return{x:t+rand.random()*(g-2*t),y:n+rand.random()*(g-2*n),size:(e=r,.75+4*rand.random()*(.001+o-e)/o)}}function u(e,t,n,a){var r,o=a?h/2:1,i=2*t.size/g*o,c=(t.x-t.size)*o,s=(t.y-t.size)*o;if(a){c+=g*o/2,l===m&&(s+=g*o*.8);var d=rand.getInteger(200,254);r="rgb("+d+","+d+","+d+")"}else r=v;e.save(),e.translate(c,s),e.scale(i,i),e.font=p,e.fillStyle=r,e.fillText(l,0,0),e.restore()}function c(){var e=i();(function(e){d.ctx.globalCompositeOperation="source-over",d.ctx.drawImage(f.canvas,0,0),d.ctx.globalCompositeOperation="source-in",u(d.ctx,e,0,!1);var t=2*Math.ceil(e.size+20),n=Math.ceil(e.size+20),a=Math.floor(e.x-t),r=Math.floor(e.y-2*n);t*=2,n*=2;for(var o=d.ctx.getImageData(a,r,t,n).data,i=!0,c=0;c<t&&i;c++)for(var s=0;s<n&&i;s++)i=0===o[4*(s*t+c)];return d.ctx.globalCompositeOperation="source-over",d.ctx.fillStyle=i?"rgba(0, 0, 255, 0.25)":"rgba(255, 0, 0, 0.25)",d.ctx.fillRect(a,r,t,n),i})(e)&&(r++,u(s.ctx,e,0,!0),u(f.ctx,e,0,!1))}f.ctx.clearRect(0,0,g,g),f.ctx.fillStyle=v,f.ctx.fillRect(0,0,g,g),f.ctx.globalCompositeOperation="destination-out",f.ctx.save(),f.ctx.translate(g*t,g*n),f.ctx.font=p,f.ctx.fillText(e,0,0),f.ctx.restore(),f.ctx.globalCompositeOperation="source-over",b[l]=function(){if(r<o){for(var e=0;e<100&&r<o;e++)c(),c();y[l]=r/o}else x[l]=!0}}function a(){b.NSW(),b.QLD(),x.NSW&&x.QLD?t("render:complete",s.canvas):(t("render:progress",(y.NSW+y.QLD)/2),setTimeout(a,1))}return{stage:s.canvas,init:function(e){t=e.progress||function(){con.log("state_of_origin_52_6 - no progress defined")},h=e.size/g,con.log("state of origin init",e,h),s.setSize(g*h,g*h),n("QLD",52,-.02,.9,3),n(m,6,.23,.9,2),a()}}}};isNode?module.exports=state_of_origin_52_6():define("state_of_origin_52_6",state_of_origin_52_6);var synth_ambient=function(k){return{init:function(){var e=dom.element("h1",{innerHTML:"Beware your speakers!"});document.body.appendChild(e);var t=dom.button("Load another permutation",{style:{border:"1px solid black",borderRadius:"5px",display:"inline-block",padding:"5px"}});document.body.appendChild(t),dom.on(t,["click"],function(){window.location="?synth_ambient,"+Math.round(1e10*Math.random())}),k.Transport.bpm.value=rand.getInteger(80,115);var n=[["b2","g2","c3","b3","g3","c4"],["c#3","g#3","c#4","g#4","c#5"],["g3","b3","f#4","g4","b4","f#5","g5","b5"],["A3","C4","E4","A4","C5","E5","A5","C6","E6"],["e3","a#4","e4","a#5","e5"]];function a(e,t){return Math.pow(2,rand.getInteger(e,t))+"n"}n=n[rand.getInteger(0,n.length-1)],new k.PingPongDelay({delayTime:"6n",feedback:.9,wet:.2}).toMaster();var r=new k.FeedbackDelay({delayTime:a(2,4),feedback:.9,wet:.4}).toMaster(),o=new k.Filter({frequency:rand.getNumber(6e3,2e4)}).toMaster(),i=(new k.Freeverb).toMaster();i.dampening.value=rand.getNumber(10,5e3);var c=new k.Phaser({frequency:rand.getNumber(10,3e3),octaves:rand.getInteger(1,7),baseFrequency:rand.getNumber(1e3,2e3)}).toMaster(),s=new k.BitCrusher(rand.getInteger(2,6)).toMaster(),d=new k.Chorus(rand.getNumber(2,6),rand.getNumber(1,3),rand.getNumber(.2,1)).toMaster();function l(e){return.7<rand.random()?e.connect(i):.7<rand.random()?e.connect(r):.6<rand.random()?e.connect(o):.5<rand.random()?e.connect(c):.5<rand.random()?e.connect(d):.5<rand.random()?e.connect(s):e}var f=a(1,2),u=l(new k.MembraneSynth({envelope:{sustain:0,attack:.02,decay:.8},octaves:10})),h=(new k.Loop(function(e){u.triggerAttackRelease("C2","1n",e)},f).start(0),l(new k.NoiseSynth({volume:-5,envelope:{attack:.001,decay:.7,sustain:0},filterEnvelope:{attack:.001,decay:.6,sustain:0}}))),m=(new k.Loop(function(e){h.triggerAttack(e)},"2n").start("4n"),l(new k.NoiseSynth({volume:-9,envelope:{attack:.001,decay:.1,sustain:0},filterEnvelope:{attack:.001,decay:.01,sustain:0}}))),p=l(new k.NoiseSynth({volume:-10,filter:{Q:1},envelope:{attack:.01,decay:.3},filterEnvelope:{attack:.01,decay:.03,baseFrequency:14e3,octaves:-2.5,exponent:4}})),v=a(2,4),g=0,b=(new k.Loop(function(e){m.triggerAttack(e),(g+2)%4==0&&p.triggerAttack(e),g++},v).start(0),l(new k.DuoSynth));b.voice0.oscillator.type="sine",b.voice1.oscillator.type="square";var y=l(new k.PolySynth(6,k.Synth,{oscillator:{partials:[0,2,3,4]},envelope:{attack:.3,decay:.05,sustain:0,release:.02}})),x=l(new k.MonoSynth({volume:-10,envelope:{attack:.1,decay:.3,release:2},filterEnvelope:{attack:.001,decay:.01,sustain:.5,baseFrequency:200,octaves:2.6}})),w=a(2,4),M=n.slice(0,rand.getInteger(1,2));new k.Sequence(function(e,t){x.triggerAttackRelease(t,w,e)},M).start(0).probability=.9;var E=l(new k.Noise({volume:-20,type:["white","brown","pink"][rand.getInteger(0,2)]})),T=rand.getNumber(0,.4);.02<T&&(E.start(),k.Master.volume.rampTo(0,T));var R=n.slice(0,rand.getInteger(2,6)),C=0,S=Math.pow(2,rand.getInteger(4,8));k.Transport.scheduleRepeat(function(e){var t=R[C%R.length];C<R.length&&b.triggerAttackRelease(t,"16n",e),C++,C%=S},"16n");var N=a(1,4),z=n.slice(0,rand.getInteger(2,6));k.Transport.scheduleRepeat(function(e){y.triggerAttackRelease(z,"8n")},N),k.Transport.start()},resize:function(){}}};define("synth_ambient",["Tone"],synth_ambient),(isNode="undefined"!=typeof module)&&(Canvas=require("canvas"));con=console;var w=500,sum=1e3,v0=0,v1=0;function createCanvas(e,t){var n;isNode?n=new Canvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t);var a=n.getContext("2d");return{canvas:n,ctx:a}}var pixels=(bmp=createCanvas(w,w)).ctx.getImageData(0,0,w,w);document.body.appendChild(bmp.canvas);for(i=0;i<w*w;i++){v1+=2911926141+((v0+=2738958700+(v1<<4)^v1+(sum+=2654435769)^3355524772+(v1>>5))<<4)^v0+sum^2123724318+(v0>>5);var index=4*i,r=Math.abs(v0)%255,g=0,b=Math.abs(v1)%255;pixels.data[index+0]=r,pixels.data[index+1]=g,pixels.data[index+3]=b,pixels.data[index+4]=255}bmp.ctx.putImageData(pixels,0,0),"undefined"!=typeof module&&(module.exports={generate:generate}),define("tentacle",function(){var r,o,d,l,f=2*Math.PI,i=dom.canvas(1,1),u=i.ctx,h=7,c=[],m=30;function s(n,a){var r=0,o=0,i=20*a,c=0,s=2+.3*(m-a);return{pos:r,rot:c,x:o,y:i,move:function(e,t){return r+=.01,c=n/h*f+.24*Math.sin(r)*(a+1),o=e+10*Math.sin(c),i=t+10*Math.cos(c),u.fillStyle="rgba(200, 160, 130, 0.3)",u.beginPath(),u.drawCircle(d+o,l+i,s),u.fill(),{x:o,y:i}}}}function p(e){e<1e4&&requestAnimationFrame(p),u.fillStyle="black",u.rect(0,0,r,o),u.fill();for(var t=0;t<h;t++)for(var n={x:0,y:0},a=0;a<m;a++){n=c[t][a].move(n.x,n.y)}}return{stage:i.canvas,init:function(e){d=(r=400)/2,l=(o=400)/2,i.setSize(r,o);for(var t=0;t<h;t++){for(var n=[],a=0;a<m;a++)n.push(s(t,a));c.push(n)}p(0)}}});var tetris_cube=function(){var f,u,w,M,E=document.createElement("div"),t={x:0,y:0},T=window.innerWidth,R=window.innerHeight,e=0,n=0,C=40,S=[],N=[],z=[];function k(e){e.preventDefault(),t.x=e.clientX/T*2-1,t.y=-e.clientY/R*2+1}function P(){n+=4*t.y,M.rotation.x=.1*n,M.rotation.y=.1*e,f.lookAt(u.position),w.render(u,f)}function _(){requestAnimationFrame(_),P()}return{stage:E,init:function(){var e,t,n;function a(e){return(e-2+.5)*C}function h(e){return{x:e%4,y:Math.floor(e/4)%4,z:Math.floor(e/16)}}u=new THREE.Scene,(f=new THREE.PerspectiveCamera(70,T/R,1,1e4)).position.set(0,100,500),u.add(f),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),u.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),u.add(e),(w=new THREE.WebGLRenderer).setSize(T,R),M=new THREE.Group,u.add(M);for(var r=0;r<64;r++){var o=(t=new THREE.MeshLambertMaterial({color:0}),n=new THREE.BoxGeometry(C,C,C),new THREE.Mesh(n,t)),i=h(r),c=i.x,s=i.y,d=i.z;z.push(r),o.position.set(a(c),a(s),a(d)),o.groupId=0,S.push(o),M.add(o)}var m=1,p=[],v="MODE_GROUP_EXPAND",g="MODE_LONER_UNITE",b=v;function y(e){var t,n,a,r,o=h(e),i=o.x,c=o.y,s=o.z,d=0,l=[];function f(e){l.push(e)}0===i?f({x:i+1,y:c,z:s}):3===i?f({x:i-1,y:c,z:s}):(f({x:i-1,y:c,z:s}),f({x:i+1,y:c,z:s})),0===c?f({x:i,y:c+1,z:s}):3===c?f({x:i,y:c-1,z:s}):(f({x:i,y:c-1,z:s}),f({x:i,y:c+1,z:s})),0===s?f({x:i,y:c,z:s+1}):3===s?f({x:i,y:c,z:s-1}):(f({x:i,y:c,z:s-1}),f({x:i,y:c,z:s+1})),rand.shuffle(l);for(var u=0;u<l.length;u++)t=l[u],n=void 0,a=(n=t).x+4*n.y+4*n.z*4,b===v&&0===S[a].groupId?(x(a,S[e].groupId),d++):b===g&&0<S[a].groupId&&(x(e,S[a].groupId),d++);0===d&&p.push(e),b===v&&(r=Math.floor(z.length*Math.random()),z.length?(x(r=z[r],++m),y(r)):(con.log("all done...",N),setTimeout(function(){N.forEach(function(e,t){var n={x:(t%4-2)*C*4,y:Math.floor(t/4-1)*C*4,z:0};e.forEach(function(e){TweenMax.to(e.position,.5,{x:e.position.x+n.x,y:e.position.y+n.y,z:e.position.z+n.z,delay:.1*t})})})},1700)))}function x(e,t){var n=b===g?6:4;if(N[t]||(N[t]=[]),N[t].length!==n){var a=S[e];N[t].push(a),a.groupId=t;var r=z.indexOf(e);z.splice(r,1)}}for(x(0,m),y(0),con.log(p),rand.shuffle(p),con.log(p),b=g,r=0;r<p.length;r++)y(p[r]);for(r=0;r<S.length;r++){var l=25700|20*(o=S[r]).groupId%255<<16;o.material.color.setHex(l)}E.appendChild(w.domElement),document.addEventListener("mousemove",k,!1),P(),_()}}};define("tetris_cube",tetris_cube);con=console;if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var text_grid=function(){var c,t,n,s,d,o,i,l,a={boxes:{label:"Boxes",min:2,max:64,cur:7,type:"Number"},phrase:{label:"Phrase",cur:"D Q36RUCN    FGVNFVGQax6q2 b",type:"String"},background:{type:"Boolean",label:"Background",cur:!0}},f=dom.canvas(100,100),u=f.ctx,r=.6;function h(e,t,n){u.save(),u.translate(t*s,n*d);try{!function(e){var t=l[e],n=0,a=.8*d,r=.2*c;u.font=r+"px Helvetica";var o=u.createLinearGradient(0,-d,0,0);o.addColorStop(0,colours.getRandomColour()),o.addColorStop(1,colours.getRandomColour()),u.fillStyle=o;var i=u.measureText(t).width;n=(s-i)/2,u.translate(n,a),u.fillText(t,0,0)}(e)}catch(e){con.log("err drawText",e)}u.restore()}function m(e){c=e.size,n=t=c,e.settings&&(a=e.settings),progress("settings:initialised",a),l=a.phrase.cur,i=a.boxes.cur,o=Math.floor(l.length/i),s=Math.ceil(1/i*c),d=Math.ceil(s/r),f.setSize(t,n),u.clearRect(0,0,t,n),colours.getRandomPalette(),colours.setPaletteRange(3),p()}function p(){a.background.cur,function e(t){var n=o*i;var a=t%i;var r=Math.floor(t/i);h(t,a,r);t<n-1?(progress("render:progress",t/n),setTimeout(function(){e(t+1)},1)):progress("render:complete",f.canvas)}(0)}return{stage:f.canvas,init:m,render:p,settings:a,update:function(e){m({size:c,settings:e})}}};isNode?module.exports=text_grid():define("text_grid",text_grid),define("triangles",function(){var c,s,d,l,f,u,h,m,a,p=window.innerWidth,v=window.innerHeight,g=[],o=2*Math.PI,b=48,e=1/6*Math.PI,i=130/Math.cos(e),t=i*Math.sin(e),n=(i+t)/2;function y(){a=a||function(){for(var e=new THREE.Shape,t=.99*i,n=0;n<4;n++){var a=n/3*o,r={x:Math.sin(a)*t,y:Math.cos(a)*t};0==n?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e}();var e=.98<Math.random()?1376239:.99<Math.random()?16716933:4274759,t=new THREE.ShapeGeometry(a),n=new THREE.MeshPhongMaterial({color:e,side:THREE.DoubleSide,specular:16777215,shininess:rand.getNumber(40,60)});return{mesh:new THREE.Mesh(t,n),falling:!1}}function x(e){p=window.innerWidth,v=window.innerHeight,c.aspect=p/v,c.updateProjectionMatrix(),d.setSize(p,v)}function w(e){return e*n+(e%2?0:n-t)}function r(e){var n;e.falling=!0,TweenMax.to(e.mesh.position,2.4,{y:-5e3,ease:Quint.easeIn}),TweenMax.to(e.mesh.scale,.5,{x:.1,y:.1,z:.1,delay:2,ease:Quint.easeIn}),TweenMax.to(e.mesh.rotation,2.5,{x:rand.getNumber(-2,2),y:rand.getNumber(-2,2),z:rand.getNumber(-2,2),ease:Quint.easeIn,onComplete:(n=e,function(){var e=n.origin.pos,t=n.origin.rot;n.rowIndex-=b,e.z=n.mesh.position.z-w(b)+45,n.mesh.scale.set(1,1,1),n.mesh.position.set(e.x,e.y,e.z),n.mesh.rotation.set(t.x,t.y,t.z),n.falling=!1})})}function M(o){requestAnimationFrame(M),l.rotation.z=.05*Math.sin(5e-4*o);var n=-1e3-750*Math.sin(3e-4*o);function e(e,t,n,a){var r=3e-5*(o+1e4);e.position.set(5*Math.sin(t*r),1,Math.sin(a*r)-1)}g.forEach(function(e,t){e.mesh.position.z+=15,e.mesh.position.z>n&&0==e.falling&&.9<Math.random()&&r(e)}),e(f,15,0,12),e(u,14,0,13),e(h,20,0,16),d.render(s,c)}return{init:function(){(s=new THREE.Scene).fog=new THREE.FogExp2(0,5e-4),(c=new THREE.PerspectiveCamera(100,p/v,1,2e4)).position.set(0,1e3,1300),c.lookAt(s.position),s.add(c),f=new THREE.DirectionalLight(16761024,.8),s.add(f),u=new THREE.DirectionalLight(16761087,.8),s.add(u),h=new THREE.DirectionalLight(12632319,.8),s.add(h),m=new THREE.AmbientLight(16777215,.8),s.add(m),(d=new THREE.WebGLRenderer({antialias:!0})).setSize(p,v),l=new THREE.Group,s.add(l);for(var e=0;e<b*b;e++){var t=y();l.add(t.mesh);var n=e%b-b/2+.5,a=Math.floor(e/b),r=a%2,o={x:2*n*130+(r^Math.floor(a/2)%2?-130:0),y:0,z:-5e3+w(a)},i={x:Math.PI/2,y:0,z:r*Math.PI};t.rowIndex=a,t.mesh.position.set(o.x,o.y,o.z),t.mesh.rotation.set(i.x,i.y,i.z),t.origin={pos:o,rot:i},g.push(t)}document.body.appendChild(d.domElement),dom.on(window,["resize"],x),M(0)}}});var tunnel_tour_three=function(){var r,m,o,i={x:0,y:0},t={x:0,y:0,z:0},c=window.innerWidth,s=window.innerHeight;var n=0,a=200,d=10;function l(e){var t=new THREE.Group;t.position.set(e.x,e.y,e.z);for(var n,a,r,o,i,c={width:20,height:20,depth:100},s=0,d=parseInt((n=3,a=15,Math.random()*(a-n)+n));s<d;s++){var l=s/d*Math.PI*2,f=200*Math.sin(l),u=200*Math.cos(l),h=(r=c,void 0,o=new THREE.MeshLambertMaterial({color:10526880}),i=new THREE.BoxGeometry(r.width,r.height,r.depth),new THREE.Mesh(i,o));h.position.set(f,u,0),h.rotation.set(0,0,-l),t.add(h)}m.add(t)}function f(e){l({x:0,y:0,z:e*-a})}function u(e){t.x=100*i.x,t.y=100*i.y,t.z-=20,t.z%a==0&&(n=-Math.floor(t.z/a),f(d+n)),r.position.set(t.x,t.y,t.z),o.render(m,r),requestAnimationFrame(u)}return{init:function(){m=new THREE.Scene,r=new THREE.PerspectiveCamera(100,c/s,1,1e4),m.add(r);var e=new THREE.DirectionalLight(16777215,.5);e.position.set(0,200,100),m.add(e),(o=new THREE.WebGLRenderer({antialias:!0})).setSize(c,s);for(var t=0,n=d;t<n;t++)f(t);function a(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(o.domElement),a(["resize"],function(e){c=window.innerWidth,s=window.innerHeight,r.aspect=c/s,r.updateProjectionMatrix(),o.setSize(c,s)}),a(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),i.x=e.clientX/c*2-1,i.y=-e.clientY/s*2+1}),u()},resize:function(){}}};if(define("tunnel_tour_three",tunnel_tour_three),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var typography=function(){return function(){var o,l,t,n,f,u=rand.instance(),h=colours.instance(u,"v1"),a={boxes:{label:"Boxes",min:2,max:64,cur:4,type:"Number"},background:{type:"Boolean",label:"Background",cur:!1}},i=dom.canvas(100,100),m=i.ctx,c=4,s=4;function p(e,t){return Math.round(u.getNumber(e,t))}var d="0";function v(e,t){if(m.save(),m.translate(e*f,t*f),.6<u.random()){var n=p(1,3),a=p(1,3);m.fillStyle=h.getRandomColour(),m.fillRect(0,0,f*n,f*a)}try{.8<u.random()&&(r=.1*f,m.fillStyle=h.getRandomColour(),m.fillRect(r,r,f-2*r,f-2*r))}catch(e){console.log("err drawInnerBlock",e)}var r,o,i,c,s;try{.9<u.random()&&function(){for(var e=Math.pow(2,Math.ceil(3*u.random())),t=f/e,n=0;n<e*e;n++){var a=n%e,r=Math.floor(n/e);m.fillStyle=h.getRandomColour(),m.fillRect(a*t,r*t,t,t)}}()}catch(e){console.log("err drawSubdivion",e)}try{.9<u.random()&&function(){var e=Math.round(4*u.random())/4*Math.PI,t=Math.round((2+Math.floor(8*u.random()))*l/1e3),n=dom.canvas(t,2*t);m.save(),m.beginPath(),m.rect(0,0,f,f),m.rotate(e),n.ctx.fillStyle=h.getNextColour();for(var a=0;a<f/t*4;a++)n.ctx.fillRect(0,a*t*2,f*t,t);m.fillStyle=m.createPattern(n.canvas,"repeat"),m.fill(),m.restore()}()}catch(e){console.log("err drawPattern",e)}try{.8<u.random()&&function(){m.save();var e=Math.floor(4*u.random())/4;m.rotate(e*Math.PI*2);var t=Math.pow(2,p(1,4)),n=p(1,4),a=p(5,10)*l/400,r=a*u.getNumber(.2,.8);m.fillStyle=h.getRandomColour();for(var o=1*l/300,i=0;i<t;i++){var c=i/t*f;m.fillRect(c,0,o,a);for(var s=0;s<n;s++){var d=c+s/n*f/t;m.fillRect(d,0,o,r)}}m.restore()}()}catch(e){console.log("err drawRuler",e)}try{.4<u.random()&&(o=Math.floor(4*u.random())/4,i=u.random()*f,c=u.random()*f,s=Math.round(Math.pow(2,2+6*u.random())*l/400),m.rotate(o*Math.PI*2),m.translate(i,c),m.font=s+"px Helvetica",m.fillStyle=h.getRandomColour(),m.fillText(function(){var e=["Typography",d],t=e[Math.floor(u.random()*e.length)],n=Math.round(u.random()*t.length),a=n+Math.round(u.random()*(t.length-n));switch(t=t.substr(n,a),Math.floor(3*u.random())){case 0:t=t.toLowerCase();break;case 1:t=t.toUpperCase()}return t}(),0,0))}catch(e){console.log("err drawText",e)}m.restore()}function r(e){console.log("typography",e),o=e.progress||function(){console.log("typography - no progress defined")},u.setSeed(e.seed),l=e.size,n=t=l,a.background.cur=!1,a.boxes.cur=4,e.settings&&(a=e.settings),o("settings:initialised",a),s=a.boxes.cur,c=a.boxes.cur,f=Math.ceil(1/s*l),i.setSize(t,n),m.clearRect(0,0,t,n),h.getRandomPalette(),h.setPaletteRange(3),g()}function g(){a.background.cur&&(m.fillStyle=h.getCurrentColour(),m.fillRect(0,0,t,n)),function e(t){var n=c*s;var a=t%s;var r=Math.floor(t/s);v(a,r);t<n?(o("render:progress",t/n),setTimeout(function(){e(t+1)},5)):o("render:complete",i.canvas)}(0)}return{stage:i.canvas,init:r,render:g,settings:a,update:function(e,t){r({progress:o,size:l,settings:e,seed:t})}}}};isNode?module.exports=typography():define("typography",typography);con=console;var unknown=function(){var n=dom.canvas(800,800),g=n.ctx;return{stage:n.canvas,resize:function(e,t){n.canvas.setSize(e,t)},init:function(){var e=-10;colours.getRandomPalette();for(var t=rand.getNumber(0,2),n=rand.getNumber(1,2),a=rand.getNumber(1.01,1.5),r=rand.getNumber(-2,2),o=rand.getNumber(8e3,1e4),i=rand.getNumber(.4,.6),c=rand.getNumber(-2,2),s=rand.getNumber(1.2,2),d=rand.getNumber(1.2,1.6),l=rand.getNumber(2,3),f=0;f<10;f++){var u=Math.pow((t+10-f)*n,a),h=Math.pow((r+10-f)*o,i);e+=Math.pow((c+10-f)*s,d)*l,g.fillStyle=colours.getNextColour();for(var m=f+1,p=0;p<m;p++){var v=400+(p-(m-1)/2)/m*h;g.beginPath(),g.drawCircle(v,e,u),g.closePath(),g.fill()}}},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=unknown():define("unknown",unknown);isNode="undefined"!=typeof module;var Canvas,voronoi=function(){var d,l,f,u,h=console,m=[],p=[],v=[];function g(e,t){var n,a,r,o,i=0,c=0;for(n=0;n<l;n++){var s=m[n][0],d=m[n][1];void 0,a=(r=e-s)*r+(o=t-d)*o,(!n||a<c)&&(c=a,i=n)}return i}return{init:function(e){return d=e.dot||1,l=e.sites||10,f=e.sizeX||200,u=e.sizeY||200,{width:f*d,height:u*d}},genMap:function(){var e,t,n=[],a=f*u,r=(new Date).getTime();for(e=0;e<u;e++)for(t=0;t<f;t++)n[i=e*f+t]=g(t,e),i%1e5==0&&h.log("findSites",Math.round(i/a*100)+"%");var o=(new Date).getTime();for(h.log("Found sites",o-r),e=0;e<u;e++)for(t=0;t<f;t++){var i,c=n[i=e*f+t];p[c].push([t,e]),null==v[c][0]?v[c][0]=e:e<v[c][0]&&(v[c][0]=e),null==v[c][1]?v[c][1]=t:t>v[c][1]&&(v[c][1]=t),null==v[c][2]?v[c][2]=e:e>v[c][2]&&(v[c][2]=e),null==v[c][3]?v[c][3]=t:t<v[c][3]&&(v[c][3]=t),i%1e5==0&&h.log("generatingRegion",Math.round(i/a*100)+"%")}var s=(new Date).getTime();h.log("Generated regions",s-o),function(){for(k=0;k<l;k++)v[k]={x:v[k][3]*d,y:v[k][0]*d,width:(v[k][1]-v[k][3])*d,height:(v[k][2]-v[k][0])*d}}()},genPoints:function(e){if(null==e)return h.warn("need to pass in a pointIterator function, which returns an array");for(var t=0;t<l;t++)m[t]=e(t,l),p[t]=[],v[t]=[]},drawRegions:function(e){for(null==e&&h.warn("need to pass in a renderRegion function."),k=0;k<l;k++)e(p[k],v[k]),h.log("drawRegions",Math.round(k/l*100)+"%")},drawRegionBounds:function(e){for(k=0;k<l;k++){e.fillStyle="rgba(0,0,255,0.2)";var t=v[k];e.fillRect(t.x,t.y,t.width,t.height)}},drawSites:function(e){for(k=0;k<l;k++){e.fillStyle="blue";var t=m[k][0]*d,n=m[k][1]*d;e.fillRect(t-1,n-1,2,2)}}}}();isNode&&(module.exports=voronoi),colours=require("./colours.js"),voronoi=require("./voronoi.js"),stripes=require("./voronoi_stripes.js"),stripes.generate(process.argv[2]),(isNode="undefined"!=typeof module)&&(Canvas=require("canvas"),fs=require("fs"));con=console,dot=1;var settings,sizeX=sizeY=isNode?4e3:400,total=10,current=8;function frand(e){return Math.random()*e}function positionPoint(e,t){var n=Math.floor(Math.sqrt(t)),a=e%n+.5,r=Math.floor(e/n)+.5,o=width/n/dot,i=height/n/dot,c=width/2/dot,s=height/2/dot,d=e/t*c,l=e/t*Math.PI*e*(.5+frand(20));return[[frand(sizeX),frand(sizeY)],[c+Math.sin(l)*width/3,s+Math.cos(l)*height/3],[c+Math.sin(l)*d,s+Math.cos(l)*d],[(a-settings.pointBias/2+frand(settings.pointBias))*o,(r-settings.pointBias/2+frand(settings.pointBias))*i]][settings.pointMethod]}function renderRegion(e,t){var n=createPattern((t.width>t.height?t.width:t.height)+10),a=createCanvas(width,height);a.ctx.globalCompositeOperation="source-over",a.ctx.fillStyle="red";for(var r=0;r<e.length;r++){var o=e[r][0],i=e[r][1];a.ctx.fillRect(o*dot,i*dot,dot,dot)}a.ctx.globalCompositeOperation="source-in",a.ctx.drawImage(n,t.x-5,t.y-5),ctx.drawImage(a.canvas,0,0)}function createPattern(e){var t=e/2,n=createCanvas(e,e),a=n.ctx;a.translate(t,t),a.rotate(settings.baseRotation+frand(settings.varyRotation)),a.translate(-t,-t),settings.varyDuotone?(colours.setColourIndex(1),a.fillStyle=colours.getCurrentColour()):a.fillStyle=colours.getRandomColour();var r,o=Math.sqrt(t*t*2)-t;settings.varyPerRegion&&(settings.lineScale=.5+frand(settings.overallScale),settings.lineSize=1+frand(10)*settings.lineScale,settings.lineGap=2+frand(3)*settings.lineScale),settings.varyDuotone&&(r=colours.getNextColour());for(var i=-o;i<e+o;)settings.varyPerLine&&(settings.lineSize=1+frand(10)*settings.lineScale,settings.lineGap=2+frand(3)*settings.lineScale),settings.varyDuotone||(r=colours.getRandomColour()),a.fillStyle=r,a.fillRect(-o,i,e+2*o,settings.lineSize),i+=settings.lineSize+settings.lineGap;return n.canvas}function createCanvas(e,t){var n;isNode?n=new Canvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t);var a=n.getContext("2d");return{canvas:n,ctx:a}}(settings={}).overallScale=50+frand(150),settings.pointMethod=~~(4*Math.random()),settings.pointBias=frand(2),settings.lineScale=settings.overallScale,settings.lineSize=1+frand(100),settings.lineGap=1+frand(100),settings.baseRotation=2*Math.PI,settings.varyRotation=Math.PI*(.5<Math.random()?2:.2),settings.varyPerRegion=!1,settings.varyPerLine=!1,settings.varyDuotone=!1,settings.varyDuotone&&colours.setRandomPalette(0);var v=voronoi.init({dot:dot,sizeX:sizeX,sizeY:sizeY}),width=v.width,height=v.height,canvas=createCanvas(width,height);isNode||document.body.appendChild(canvas.canvas);ctx=canvas.ctx;var q0=createCanvas(width/2,height/2),q1=createCanvas(width/2,height/2),q2=createCanvas(width/2,height/2),q3=createCanvas(width/2,height/2);function drawQuarter(e,t,n){var a=n%2*-width/2,r=Math.floor(n/2)*-height/2;con.log("drawQuarter",n,a,r),t.canvas.width=t.canvas.width,t.ctx.drawImage(e.canvas,a,r);var o=fs.createWriteStream(__dirname+"/../export/shirt"+current+"_"+n+".png"),i=t.canvas.pngStream();i.on("data",function(e){o.write(e)}),i.on("end",function(){console.log("saved png")})}function saveFile(e){isNode?e.toBuffer(function(e,t){e?con.log(e):fs.writeFile(__dirname+"/../export/shirt"+current+".png",t,function(){con.log("writeFile","shirt"+current+".png")})}):con.warn("browser export not written")}function generate(e){current=e,settings.sites=16+frand(20),settings.varyDuotone=.5<Math.random();var t=["sites","overallScale","pointMethod","pointBias","baseRotation","varyRotation","varyDuotone","varyPerRegion","varyPerLine","lineScale","lineSize","lineGap"].map(function(e){return e+":"+settings[e]}).join("\n");isNode&&fs.writeFile(__dirname+"/../export/_shirt"+current+".txt",t),con.log(t),con.log("==================="),canvas.canvas.width=canvas.canvas.width,voronoi.init({dot:dot,sites:settings.sites,sizeX:sizeX,sizeY:sizeY}),colours.setRandomPalette(),con.log("generate",current,total),voronoi.genPoints(positionPoint),voronoi.genMap(),voronoi.drawRegions(renderRegion),saveFile(canvas.canvas)}function next(){if(++current<total){var e=5e3;current%5==0&&(e=5e4),con.log("delaying",e/1e3,"seconds"),setTimeout(generate,e)}}isNode||generate(0),"undefined"!=typeof module&&(module.exports={generate:generate});con=console,sw=window.innerWidth,sh=window.innerHeight,canvas=dom.canvas(sw,sh);var hitpixels,numInitial,hit=dom.canvas(sw,sh),zones=(ctx=canvas.ctx,circleRads=2*Math.PI,numCurrent=numInitial=30,numMax=3*numInitial,particles=[],[]);function moveParticle(e){e.dying&&e.age++,e.dirFloat+=(Math.random()-.5)*Math.PI*.5,e.dir-=.01*(e.dir-e.dirFloat),e.vx=Math.cos(e.dir)*e.speed,e.vy=Math.sin(e.dir)*e.speed,e.x+=e.vx,e.y+=e.vy;e.x>sw+100&&(e.x-=sw+200,e.px=e.x),e.x<-100&&(e.x+=sw+200,e.px=e.x),e.y>sh+100&&(e.y-=sh+200,e.py=e.y),e.y<-100&&(e.y+=sh+200,e.py=e.y);var t=2;e.dying&&(t/=1+.01*e.age);var n=e.x,a=e.y,r=4*(Math.floor(e.x)+Math.floor(e.y)*sw),o=hitpixels.data[r];o||(ctx.lineWidth=t,ctx.strokeStyle=e.palette,ctx.beginPath(),ctx.moveTo(e.px,e.py),ctx.lineTo(n,a),ctx.stroke()),o&&(e.dir=Math.random()*Math.PI*2),e.px=e.x,e.py=e.y,e.dying&&500<e.age?killParticle(e):0==e.children&&numCurrent<numMax&&.99<Math.random()&&spawnParticle(e)}function killParticle(e){var t=particles.indexOf(e);particles.splice(t,1),numCurrent--}function generateParticle(e){if(e)return{age:0,children:0,dir:e.dir,dirFloat:e.dirFloat,dying:!1,palette:colours.mutateColour(e.palette,10),speed:e.speed,vx:e.vx,vy:e.vy,x:e.x,y:e.y,px:e.x,py:e.y};var t=Math.random()*sw,n=Math.random()*sh;return{age:0,children:0,dir:Math.random()*Math.PI*2,dirFloat:0,dying:!1,palette:colours.getNextColour(),speed:2.5*Math.random()+2.5,vx:0,vy:0,x:t,y:n,px:t,py:n}}function spawnParticle(e){e.dying=!0,e.children++,particles[numCurrent]=generateParticle(e),numCurrent++}function generate(){zones.push({x:50,y:50,w:100,h:100}),zones.push({x:100,y:250,w:20,h:100}),zones.push({x:300,y:50,w:100,h:300});for(var e=0;e<zones.length;e++){var t=zones[e];hit.ctx.fillStyle="rgba(50,0,0,1)",hit.ctx.fillRect(t.x,t.y,t.w,t.h)}hitpixels=hit.ctx.getImageData(0,0,sw,sh);for(var n=0;n<numInitial;n++)particles[n]=generateParticle()}function render(e){ctx.fillStyle="rgba(0,0,0,0.04)",ctx.fillRect(0,0,sw,sh),ctx.drawImage(hit.canvas,0,0);for(var t=0;t<numCurrent;t++)moveParticle(particles[t]);requestAnimationFrame(render)}colours.getRandomPalette(),window.addEventListener("resize",function(){return con.warn("resize disabled!")}),generate(),document.body.appendChild(canvas.canvas),render(0);