"use strict";define(function(e){var t=dom.element("div"),n=dom.button("test1",{style:{color:"white"}}),a=dom.button("test2",{style:{color:"white"}});return t.appendChild(n),t.appendChild(a),dom.on(n,["click"],function e(){con.log("go!!");dom.on(a,["click"],e);dom.off(n,["click"],e)}),con.log("test loaded"),{stage:t,init:function(){},resize:function(){}}});var focalLength=1200;function calc2D(e,t){for(var n,a,r,o,i,s,c,l,d=[],f=Math.sin(t.x),u=Math.cos(t.x),h=Math.sin(t.y),m=Math.cos(t.y),v=Math.sin(t.z),p=Math.cos(t.z),g=0,b=e.length;g<b;g++)n=e[g].x,n=(p*(s=h*(i=f*(a=e[g].y)+u*(r=e[g].z))+m*n)-v*(o=u*a-f*r))*(l=focalLength/(focalLength+(c=m*i-h*n))),a=(v*s+p*o)*l,d[g]=make2DPoint(n,a,c);return d}function calcNormal(e,t,n){var a={};a.x=t.x-e.x,a.y=t.y-e.y,a.z=t.z-e.z;var r={};r.x=n.x-e.x,r.y=n.y-e.y,r.z=n.z-e.z;var o={};return o.x=a.y*r.z-a.z*r.y,o.y=a.z*r.x-a.x*r.z,o.z=a.x*r.y-a.y*r.x,o}if(make3DPoint=function(e,t,n){var a={};return a.x=e,a.y=t,a.z=n,a},make2DPoint=function(e,t,n){var a={};return a.x=e+sw/2,a.y=t+sh/2,a.z=n,a},cubeAxisRotations=make3DPoint(0,0,0),renderPlanes=function(e,t,n){for(var a=[],r=0,o=t.length;r<o;r++){for(var i=calc2D(t[r],cubeAxisRotations),s=1e6,c=1e6,l=1e6,d=0,f=0,u=0,h=[],m={x:0,y:0},v=i.length,p=0;p<v;p++){var g=i[p];h.push({x:g.x,y:g.y}),g.x<s&&(s=g.x),g.x>d&&(d=g.x),g.y<c&&(c=g.y),g.y>f&&(f=g.y),g.z<l&&(l=g.z),g.z>u&&(u=g.z),m.x=m.x+g.x,m.y=m.y+g.y}m.x=m.x/v,m.y=m.y/v;var b=l+(u-l)/2,y=calcNormal(i[0],i[1],i[2]),x=Math.sqrt(y.x*y.x+y.y*y.y+y.z*y.z),w={x:y.x/x,y:y.y/x,z:y.z/x},M={z:b,o:h};if(n){var E={slope:{x:Math.acos(w.x),y:Math.asin(y.y/x),z:Math.acos(w.z)},bounds:[s,c,d,f],vertices:v};M.params=E}a[r]=M}a.sort(function(e,t){return e.z<t.z?1:-1});for(r=0,o=a.length;r<o;r++){h=a[r].o;n.fillColor&&(e.fillStyle=n.fillColor(a[r].params)),e.beginPath();g=0;for(var T=h.length;g<T;g++){var S=h[g].x,R=h[g].y;0==g?e.moveTo(S,R):e.lineTo(S,R)}e.closePath(),e.fill()}},function(){var i,n,s,a,c,e,l,d;n=console,a=document,i=s=null,d=0,l=[],e=function(){var e,t;for((i=a.createElement("canvas")).width=i.height=400,a.body.appendChild(i),s=i.getContext("2d"),e=t=0;t<4;e=t+=1)l[e]=Math.pow(2,e+1)+10*(2*Math.random()-1);return n.log(l),c()},c=function(){var e,t,n,a,r,o;for(i.width=i.width,d+=1,n=r=0;r<200;n=r+=1){for(e=o=t=0;o<4;e=o+=1)t+=Math.sin((d+n)*l[e]*.01)/Math.pow(2,e+1);a=200+200*t/4,0,s.fillStyle="rgba(0,0,0,1)",s.fillRect(2*n,a,10,10)}return requestAnimationFrame(c)},e()}.call(this),define("aegean_sun",["perlin"],function(e){var i=rand.instance();i.setSeed(Math.random());var t=colours.instance(i),s=window.innerWidth,c=window.innerHeight,u=s,h=c,m=e.noise(u,h),v=e.noise(u,h),n=(i.getInteger(100,300),i.getInteger(4,10),Math.floor(s*c/200),t.getRandomPalette()),a=dom.canvas(s,c),p=a.ctx;return{init:function(){var e=t.getRandomColour();n.splice(n.indexOf(e),1),p.fillStyle=e,p.fillRect(0,0,s,c),p.strokeStyle=t.getNextColour(),function(e){p.clearRect(0,0,s,c);var l=m.cycle(1e-6*e,.005),d=v.cycle(1e-5*e,.004);function t(e,t){for(var n=e.length,a=[],r=0;r<n;r++){var o={x:e[r].x+t.x,y:e[r].y+t.y},i=Math.floor(o.y*u+o.x),s=2*(l[i]-.5),c=0*(d[i]-.5);o.x+=s,o.y+=c,a.push(o)}return f(a),a}function f(e){var t=e.length;p.beginPath();for(var n=0;n<t;n++){var a=e[n];0==n?p.moveTo(a.x,a.y):p.lineTo(a.x,a.y)}p.stroke()}for(var n=function(){for(var e={x:i.getNumber(.4,.6)*u,y:0*h},t={x:i.getNumber(.4,.6)*u,y:1*h},n=[],a=0;a<20;a++){var r=geom.lerp(e,t,a/20);n.push(r)}return f(n),n}(),a=n,r=n,o=0;o<40;o++)a=t(a,{x:4,y:0}),r=t(r,{x:-4,y:0})}(0)},stage:a.canvas}}),isNode="undefined"!=typeof module)var con=console,rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var camera,scene,projector,renderer,alien=function(){var a=rand.instance();a.setSeed(Math.random());var r,t,n,o,c=colours.instance(a),i=dom.canvas(1,1),s=i.ctx,l=10,d=10,f=d/2,u=void 0,h=void 0,m=void 0;function v(){var t=function(){function o(e){return~~(Math.random()*e+1)}function e(){for(var e=o(11),t=o(5),n=[],a=0;a<e;){var r=a*t;n.push(r),a&&n.unshift(-r),a++}return n}return{x:e(),y:e()}}();t.x.forEach(function(n,e){t.y.forEach(function(e){var t=function(){var i=[],r=a.getInteger(0,3);r&&(r=u/r);var s=dom.canvas(h,m);function o(e,t,n,a){var r=void 0;r=f<=t?d-t-1:t;var o=i[e][r];o&&(s.ctx.fillStyle=n,s.ctx.fillRect((1+t)*u-a,(1+e)*u-a,u+2*a,u+2*a))}return function(){for(var e=0;e<l;e++){i[e]=[];for(var t=0;t<f;t++)i[e][t]=(n=t,Math.random()<(n+1)/(f+1))}var n}(),function(){var e=void 0,t=void 0,n=c.getNextColour(),a=c.getNextColour();for(t=0;t<l;t++)for(e=0;e<d;e++)o(t,e,n,r);for(t=0;t<l;t++)for(e=0;e<d;e++)o(t,e,a||c.getNextColour(),0)}(),s.canvas}();s.drawImage(t,r+n*h,r+e*m)}),progress("render:progress",e/t.x.length)}),progress("render:complete",i.canvas)}return{init:function(e){t=e.size,n=e.sw||t,o=e.sh||t,i.setSize(n,o),u=Math.ceil(a.getInteger(20,60)/d),h=u*(d+2),m=u*(l+2),r=o/2,c.getRandomPalette(),v()},render:v,stage:i.canvas}};isNode?module.exports=alien():define("alien",alien);var mouse={x:0,y:0},sw=window.innerWidth,sh=window.innerHeight;sw=sh=400;var n,theta=0,h=[],i=0,radius=20,settings={};function draw(e){var t=new THREE.MeshLambertMaterial({color:4278198272}),n=new THREE.CylinderGeometry(e.radius,e.radius,e.height,14);return new THREE.Mesh(n,t)}function init(){var e;con.log("init"),scene=new THREE.Scene,(camera=new THREE.PerspectiveCamera(70,sw/sh,1,1e4)).position.set(0,300,500),scene.add(camera),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),scene.add(e),(e=new THREE.DirectionalLight(16777215)).position.set(-1,-1,-1).normalize(),scene.add(e),(renderer=new THREE.WebGLRenderer).sortObjects=!1,renderer.setSize(sw,sh);for(var t=0;t<10;t++){var n=1-t/10+.5,a=100*n,r=draw({height:t*a,radius:20*n});r.position.set(0,a,0),r.rotation.set(0,0,.2*t),scene.add(r)}document.body.appendChild(renderer.domElement),document.addEventListener("mousemove",onDocumentMouseMove,!1)}function onDocumentMouseMove(e){e.preventDefault(),mouse.x=e.clientX/sw*2-1,mouse.y=-e.clientY/sh*2+1}function render(){var e=500;camera.position.x=e*Math.sin(theta*Math.PI/360),camera.position.y=130*mouse.y,camera.position.z=e*Math.cos(theta*Math.PI/360),camera.lookAt(scene.position),renderer.render(scene,camera)}function animate(){requestAnimationFrame(animate),render()}if(settings.lineScale=1,settings.lineSize=1+10*Math.random()*settings.lineScale,settings.lineGap=2+3*Math.random()*settings.lineScale,settings.baseRotation=0,settings.varyRotation=Math.random()*Math.PI*2,setTimeout(function(){init(),animate()},100),isNode="undefined"!=typeof module){con=console,rand=require("./rand.js");var Image=(Canvas=require("canvas")).Image,http=(dom=require("./dom.js"),require("http")),https=require("https")}var any_image_url=function(){return function(){var n,a,r,s,c,o={526:{image:"https://blog.funkyvector.com/wp-content/uploads/2016/05/state_of_origin_52_6_22_d5243594_design.png",scale:isNode?1:.5},834199129:{scale:.8}},l=dom.canvas(1,1),i=rand.instance(),d=l.ctx,f=void 0;return{stage:l.canvas,init:function(e){var t;n=e.size,f=e.progress,i.setSeed(e.seed),s=(a=n)/2,c=(r=n)/2,l.setSize(a,r),(t=o[i.getSeed()])&&t.image?function(e,a){function o(e){var t=e.width,n=e.height;d.translate(s,c),d.scale(a,a),d.translate(-t/2,-n/2),d.drawImage(e,0,0),f("render:complete",l.canvas)}if(isNode)r=function(e){var t,n,a,r;t=e,n=function(e){o(e)},a=function(e){con.log("renderBMPFromURL - makeImage fail",e)},(r=new Image).src=t,r?n(r):(con.log("makeImage reject"),a())},i=function(e){con.log("renderBMPFromURL - loadImageURL fail",e)},(/https:\/\//.test(n=e)?https:http).get(n,function(e){var t=[];e.on("data",function(e){e.length,t.push(e)}),e.on("end",function(){var e=Buffer.concat(t);r(e)}),e.on("error",function(e){con.log("loadImageURL reject",e),i(e)})});else{var t=new Image;t.onload=function(){o(t)},t.onerror=function(e){con.log("renderBMPFromURL img.onerror error",e)},t.src=e}var n,r,i}(t.image,t.scale):(con.warn("Cannot find image:",i.getSeed()),console.log(t),f("render:complete",null))},update:function(e,t){},settings:{}}}};isNode?module.exports=any_image_url():define("any_image_url",any_image_url);var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var log=function(){},aristotle=function(){var V=0<arguments.length&&void 0!==arguments[0]&&arguments[0],X=rand.instance(),Y=colours.instance(X),U=V?dom.svg("svg",{width:1,height:1}):dom.canvas(1,1),Q=V&&dom.svg("g"),J=V&&dom.svg("defs"),Z=2*Math.PI/3,K={time:{type:"Number",label:"Time",min:0,max:20,cur:10},edge:{type:"Boolean",label:"Fill Screen",cur:!0},background:{type:"Boolean",label:"Background",cur:!1}},$=K,ee=!0,te=[],ne=void 0,ae=function(){},re=[],oe=void 0,r=function(e){var t=e.seed,n=[];ne!=t&&(re=[],ee=!0,te=[]),ne=t,e.progress&&(ae=e.progress),e.size&&(oe=e.size),$=JSON.parse(JSON.stringify(e.settings||K)),ae("settings:initialised",$);var a=[];X.setSeed(t);var r=void 0,l=oe/2,d=X.getNumber(0,1),m=X.getNumber(.01,.5),h=X.getNumber(.03,.1),v=6*h,p=h*Math.sin(Z),g=Math.ceil(2*h*oe),b=.5<X.getNumber(0,1)?h*X.getNumber(0,.3):0,o=X.getNumber(0,.01),y=o<h?h-o:h;V?dom.setAttributes(U,{width:oe,height:oe,viewBox:"0 0 "+oe+" "+oe}):U.setSize(oe,oe);var x=void 0,i=(new Date).getTime(),f=300,u=1,w=dom.canvas(f,u),s=function(e,t){var r=X.getNumber(-100,0),n=X.getNumber(100,200),o=n-r,a=Array(2).fill().map(function(e,t){var n=r+t/1*o,a=Y.getRandomColour();return V?'<stop offset="'+n+'%" stop-color="'+a+'"/>':{offset:n,stopColour:a}});if(V)return'<linearGradient id="Gradient'+t+'" x1="0" x2="1" y1="0" y2="0">'+a.join("")+"</linearGradient>";var i=te&&te[e]&&te[e][t];if(i)return i;var s=dom.canvas(f,u),c=s.ctx.createLinearGradient(0,0,f,u);a.forEach(function(e){var t=e.offset,n=e.stopColour;c.addColorStop((t+100)/f,n)}),s.ctx.fillStyle=c,s.ctx.fillRect(0,0,f,u),w.ctx.drawImage(s.canvas,0,11*t);var l=s.ctx.getImageData(0,0,f,u).data,d=a.map(function(e,t){var n,a,r=e.offset;return{offset:t,stopColour:(n=r+100,a=4*Math.floor(n),"rgb("+l[a]+","+l[a+1]+","+l[a+2])}});return{start:r,end:n,stops:d}},M=void 0,c=0;te=Array(3).fill().map(function(e,n){return Y.getRandomPalette(),a[n]=Y.getRandomColour(),Array(16).fill().map(function(e,t){return s(n,t)})});var E=function(){c++,c%=te.length,M=te[c],r=a[c],V&&(J.innerHTML=M)};E();var T=(new Date).getTime();V&&(U.appendChild(J),U.appendChild(Q));var S=function(e,t){var n=e.rotate,a=e.x,r=e.y;V&&e.setAttribute("transform","translate("+a*oe+","+r*oe+") rotate("+n+") scale("+t+")")},R=function(e,t){e.scale=Math.min(t,e.scale),n.push(e)},C=0,N=0,k=0,z=(new Date).getTime(),P=!V&&dom.canvas(g,g);ee||re.forEach(function(){X.getInteger(0,1),X.getInteger(0,1)}),log({generationRequired:ee});var _=function(){if(1e5<++k)throw new Error("bailing because too many iterations");var o=C%2==0,i=N,e=2*h;0===i&&(x=o?0:h/-2);var t=(x+=N%2==o?e:e/2)-v,n=C*p-v;if(1+v<t)return C++,N=0,"continue";if(1+v<n)return C++,N=0,ee=!1,"break";var a=V?dom.svg("g"):dom.canvas(g,g);V&&Q.appendChild(a);var r=Array(3).fill(0).map(function(e,t){var n=((o+i)%2?0:Z/2)+t*Z,a=(y-b)*Math.cos(n),r=(y-b)*Math.sin(n);return V?(0===t?"M":"L")+a*oe+","+r*oe:{tx:a,ty:r}}),s=120*X.getInteger(0,2),c=X.getInteger(0,15);if(V){var l=dom.svg("path",{id:"triangle-"+C+"-"+N,d:r.concat("Z").join(" "),fill:"url(#Gradient"+c+")"});a.appendChild(l)}else{var d=a.ctx,f=d.createLinearGradient(-g,0,g,0);M[c].stops.forEach(function(e){var t=e.offset,n=e.stopColour;f.addColorStop(t,n)}),P.ctx.fillStyle=f,P.ctx.fillRect(0,0,g,g),P.ctx.fill();var u=dom.canvas(g,g);u.ctx.translate(g/2,g/2),u.ctx.fillStyle="green",u.ctx.beginPath(),r.forEach(function(e,t){var n=e.tx,a=e.ty,r=n*oe,o=a*oe;0===t?u.ctx.moveTo(r,o):u.ctx.lineTo(r,o)}),u.ctx.closePath(),u.ctx.lineCap="round",u.ctx.lineJoin="round",u.ctx.lineWidth=b*oe,u.ctx.strokeStyle="green",u.ctx.fill(),u.ctx.stroke(),d.drawImage(P.canvas,0,0),d.globalCompositeOperation="destination-in",d.drawImage(u.canvas,0,0)}a.x=t,a.y=n,a.rotate=s,a.scale=1,a.timeout1=null,S(a,1),N++,re.push(a)};e:for(;ee;){switch(_()){case"continue":continue;case"break":break e}}re.forEach(function(e){return e.scale=1});var I=(new Date).getTime();log(T-i,z-T,I-z);var H=void 0,A=void 0,L=void 0,q=void 0,O=function(){return{o:X.getNumber(-Math.PI,Math.PI),s:X.getNumber(.001,.002)}},D=function(){var e,t;return e=Array(4).fill().map(O),t=_slicedToArray(e,4),H=t[0],A=t[1],L=t[2],q=t[3],e};D();var j=function(){var r=X.getInteger(0,5);return function(e,t){switch(r){case 0:var n=e.x-.5,a=e.y-.5;return t+Math.sqrt(n*n+a*a);case 1:return t+2e3*Math.random();case 2:return t+e.y;case 3:return t+oe-e.y;case 4:return t+e.x;case 5:return t+oe-e.x}}},F=function(e){var a=j();re.forEach(function(e){var t,n;n=a(t=e,.1),clearTimeout(t.timeout1),setTimeout(function(){return S(t,0)},n)}),setTimeout(function(){D(),E()},2500);var r=j();setTimeout(function(){re.forEach(function(e){return n=r(t=e,0),setTimeout(function(){return S(t,1)},n);var t,n})},5e3),setTimeout(function(){W+=12e3,requestAnimationFrame(G)},11500)},B=function(o,d){var e=.001*o,f=.5*(Math.sin(Math.PI+e)+.6),t=function(e,t,n){var a=t.o,r=t.s;return e+Math[n%2?"sin":"cos"](a+o*r)},u=.5*[H,A].reduce(t,0)+.5,h=.5*[L,q].reduce(t,0)+.5;re.forEach(function(e){var t,n,a,r,o,i,s=e.x-u,c=e.y-h,l=Math.sqrt(s*s+c*c);f<l&&l<f+m?V?(i=e,clearTimeout(i.timeout1),S(i,0),i.timeout1=setTimeout(function(){return S(i,1)},600)):(t=e,n=l-f,a=d,r=m/2,o=Math.abs((n-r)/r),R(t,1-(1-o)*a)):V||R(e,1)})},W=0,G=function e(t){t<W+15e3?(requestAnimationFrame(e),B(t)):(W+=15e3,F())};V?setTimeout(function(){return G(0)},500):(B(40*$.time.cur+X.getInteger(0,1e7),X.getNumber(0,1)),B(60*$.time.cur+X.getInteger(0,1e7),X.getNumber(0,1)),n=[],B(80*$.time.cur+X.getInteger(0,1e7),X.getNumber(0,1)),$.background.cur?(U.ctx.fillStyle=r,U.ctx.fillRect(0,0,oe,oe)):U.ctx.clearRect(0,0,oe,oe),$.time.cur||(n=re.map(function(e){return Object.assign(e,{scale:1})})),n.forEach(function(e){var t=e.canvas,n=e.rotate,a=e.scale,r=e.x,o=e.y,i=r-.5,s=o-.5,c=Math.hypot(i,s);0==$.edge.cur&&c>.2+X.getNumber(0,.3)-h||(U.ctx.save(),U.ctx.translate(l,l),U.ctx.rotate(d*Math.PI*2),U.ctx.translate(-l,-l),U.ctx.translate(r*oe,o*oe),U.ctx.scale(a,a),U.ctx.rotate(n/180*Math.PI),U.ctx.translate(-g/2,-g/2),U.ctx.drawImage(t,0,0),U.ctx.restore())})),ae("render:complete",U.canvas)};return{init:r,settings:$,stage:V?U:U.canvas,update:function(e,t){var n=(new Date).getTime();r({settings:e,seed:t});var a=(new Date).getTime();log("update time:",a-n)}}};isNode?module.exports=aristotle:"undefined"!=typeof define&&define("aristotle",function(){return aristotle}),define("attractor",function(){var n,a,r=window.innerWidth,o=window.innerHeight,e=dom.canvas(r,o),i=e.ctx,s=.19,c=1.3,l=5,d=0,f=40,u=2e4,h={x:0,y:0};function m(e){return(e+.1+e*(s-c)*e)/(1.1+s*(c*c+s*s)*e*e)*1.3}function v(e){requestAnimationFrame(v),i.fillStyle="white",i.fillRect(0,0,r,o),c=h.x/9e3;for(var t=d=l=0;t<u;t++)l=-(n=l)-s+c+m(a=d),d=-n+c*m(n*a),i.fillStyle="rgba(0,0,0,0.3)",i.fillRect(380+l*f,450+d*f,1,1)}return dom.on(window,["mousemove","touchmove"],function(e){var t=e.changedTouches&&e.changedTouches[0]||e;h.x=(t.x||t.pageX)-r/2,h.y=(t.y||t.pageY)-o/2}),{init:function(){v()},stage:e.canvas}});var analyser,AudioContext=window.AudioContext||window.webkitAudioContext,fftSize=128;function WebAudioAnalyser(e,t,n){if(!(this instanceof WebAudioAnalyser))return new WebAudioAnalyser(e,t,n);if(t instanceof AudioContext||(n=t,t=null),n=n||{},this.ctx=t=t||new AudioContext,e instanceof AudioNode||(e=e instanceof Audio||e instanceof HTMLAudioElement?t.createMediaElementSource(e):t.createMediaStreamSource(e)),this.analyser=t.createAnalyser(),this.analyser.fftSize=fftSize,this.stereo=!!n.stereo,this.audible=!1!==n.audible,this.wavedata=null,this.freqdata=null,this.splitter=null,this.merger=null,this.source=e,this.stereo){this.analyser=[this.analyser],this.analyser.push(t.createAnalyser()),this.splitter=t.createChannelSplitter(2),this.merger=t.createChannelMerger(2),this.output=this.merger,this.source.connect(this.splitter);for(var a=0;a<2;a++)this.splitter.connect(this.analyser[a],a,0),this.analyser[a].connect(this.merger,0,a);this.audible&&this.merger.connect(t.destination)}else this.output=this.source,this.source.connect(this.analyser),this.audible&&this.analyser.connect(t.destination)}WebAudioAnalyser.prototype.waveform=function(e,t){return e||(e=this.wavedata||(this.wavedata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount))),(this.stereo?this.analyser[t||0]:this.analyser).getByteTimeDomainData(e),e},WebAudioAnalyser.prototype.frequencies=function(e,t){return e||(e=this.freqdata||(this.freqdata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount))),(this.stereo?this.analyser[t||0]:this.analyser).getByteFrequencyData(e),e},analyse=WebAudioAnalyser;var lastBars=new Uint8Array(fftSize/2),d=document.createElement("div");function createFreqBar(e){var t=document.createElement("div");return t.style.width="100%",t.style.height="100px",t.style.position="absolute",t.style.top=100*e+"px",document.body.appendChild(t),t}document.body.appendChild(d);var lastPeak=[],numBands=8,bands=[];for(i=0;i<numBands;i++)bands[i]=createFreqBar(i),lastPeak[i]=0;var audio=new Audio;function getBand(e,t){for(var n=0,a=fftSize/2/numBands,r=t*a+a,o=t*a;o<r;o++)n+=e[o];return n/=a}audio.crossOrigin="Anonymous",audio.src="exebeche.mp3",audio.loop=!0,audio.addEventListener("canplay",function(){console.log("playing!"),analyser=analyse(audio,{audible:!0,stereo:!1,fftSize:16}),binCount=64,levelBins=Math.floor(binCount/levelsCount),con.log(binCount,levelsCount),audio.play(),audio.currentTime=150,render(0)}),audio.addEventListener("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:alert("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:alert("A network error caused the audio download to fail.");break;case e.target.error.MEDIA_ERR_DECODE:alert("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:alert("The video audio not be loaded, either because the server or network failed or because the format is not supported.");break;default:alert("An unknown error occurred.")}});var freqByteData,timeByteData,levelBins,levelsData=[],levelsCount=32,levelHistory=[],beatCutOff=0,beatTime=0,length=256;for(i=0;i<length;i++)levelHistory.push(0);function render(e){if(analyser){var t=analyser.frequencies();t.length;requestAnimationFrame(render);for(var n=0;n<levelsCount;n++){for(var a=0,r=0;r<levelBins;r++)a+=t[n*levelBins+r];levelsData[n]=a/levelBins/256*1}for(a=0,r=0;r<levelsCount;r++)a+=levelsData[r];level=a/levelsCount,levelHistory.push(level),levelHistory.shift(1);var o=.15;level>beatCutOff&&level>o?(document.body.style.background="#fff",beatCutOff=1.1*level,beatTime=0):(document.body.style.background="#444",beatTime<=50?beatTime++:(beatCutOff*=.98,beatCutOff=Math.max(beatCutOff,o)));var i=[];levelsData.concat([10*level]).forEach(function(e){for(var t=0,n="#";t++<10*e;)n+="#";i.push(n)}),d.innerHTML=i.join("<br>")}}define("ball_and_chain",["lib/schteppe/cannon.0.6.2.min.js","cannon_demo"],function(e,t){function n(){var g=new t;g.create(function(){var s=function(e){var t=e.getWorld();t.gravity.set(0,0,-40),t.broadphase=new CANNON.NaiveBroadphase,t.solver.iterations=10;var n=new CANNON.Plane,a=new CANNON.Body({mass:0});return a.addShape(n),a.position.set(0,0,1),t.addBody(a),e.addVisual(a),t.quatNormalizeFast=!1,t.quatNormalizeSkip=0,t}(g);s.gravity.set(0,0,-20);var e,c=1,l=1,t=new CANNON.Box(new CANNON.Vec3(c,.3,l)),n=new CANNON.Box(new CANNON.Vec3(.3,c,l)),d=.3;function a(e,t,n){var a=.1*c,r=l+d+n,o=new CANNON.PointToPointConstraint(e,new CANNON.Vec3(-a,0,r),t,new CANNON.Vec3(-a,0,-r)),i=new CANNON.PointToPointConstraint(e,new CANNON.Vec3(a,0,r),t,new CANNON.Vec3(a,0,-r));s.addConstraint(o),s.addConstraint(i)}for(var r=0;r<20;r++){var o=1===r,i=19===r,f=(20-r)*(2*l+2*d)+2*l+d;if(0===r){var u=new CANNON.Sphere(4),h=new CANNON.Body({mass:3});h.addShape(u),h.position.set(0,0,f),e=h}else if(i){var m=new CANNON.Cylinder(2,2,3,12),v=new CANNON.Body({mass:.5});v.addShape(m),v.position.set(0,0,f),a(v,e,0),e=v}else{var p=new CANNON.Body({mass:.1});p.addShape(r%2?t:n),p.position.set(0,0,f),p.custom=!0,p.customType="CHAIN_LINK",a(p,e,o?1.8:0),e=p}s.add(e),g.addVisual(e),e.velocity.set(Math.random()-.5,Math.random()-.5,Math.random()-.5),e.linearDamping=.1,e.angularDamping=.1}}),g.start()}!function e(){con.log("check"),"undefined"==typeof THREE?setTimeout(e,10):n()}()});con=console;if(isNode="undefined"!=typeof module){rand=require("./rand.js");var geom=require("./geom.js");dom=require("./dom.js"),colours=require("./colours.js")}var bezier_flow=function(){var l=rand.instance(),d=colours.instance(l);console.log("bezier_flow setting seed."),l.setSeed(Math.round(2e8*Math.random()));var x,w,M,f,u,E,T,h,S,m,R={renderlimit:{min:1,max:Number.POSITIVE_INFINITY,cur:1}},C=dom.canvas(100,100),N=C.ctx;function k(e){return E[(u+e)%u]}function v(e){for(var n=e.cx||l.random(),a=e.cy||l.random(),t=.7*l.random()/f,r=[],o=0,i=0;i<f;i++){var s=(.1+l.random())*t;r[i]=o,o+=s*(h?.1*Math.pow(2,1+.2*i):1)}E.push({index:e.index,cx:n,cy:a,a:null,total:o,gaps:r,angle:function(){var e=k(this.index-1),t=k(this.index+1),n=t.cx-e.cx,a=t.cy-e.cy;this.a=-Math.atan(a/n)-(n<0?0:Math.PI)},move:function(){this.angle()},lines:function(e){var t=r[e]-.2;return[n-Math.sin(this.a)*t,a-Math.cos(this.a)*t]}})}function p(){N.clearRect(0,0,x,w),con.log("render ========================",R.renderlimit.cur);for(var e=0;e<R.renderlimit.cur;e++)for(var t=0,n=E.length;t<n;t++){var a=k(t-1),r=k(t);r.move();var o=-Math.tan(a.a),i=-Math.tan(r.a),s=a.lines(e),c=r.lines(e),l=s[0],d=s[1],f=c[0],u=c[1],h=d-o*l,m=u-i*f,v=-.1*o+h,p=1.1*o+h,g=-.1*i+m,b=1.1*i+m,y=geom.intersectionAnywhere({x:-.1,y:v},{x:1.1,y:p},{x:-.1,y:g},{x:1.1,y:b});N.strokeStyle=T[e].strokeStyle,N.lineWidth=T[e].lineWidth*(S?.1*(e+1):1),N.beginPath(),N.moveTo(l*M,d*M),N.quadraticCurveTo(y.x*M,y.y*M,f*M,u*M),N.stroke()}con.log("render complete called"),progress("render:complete",C.canvas)}return{stage:C.canvas,init:function(e){function t(){return 1+3*l.random()}con.log("init called",l.getSeed()),M=e.size,w=x=M,C.setSize(x,w),f=l.getInteger(100,500),R.renderlimit.max=f,R.renderlimit.cur=f,u=l.getInteger(3,6),h=.5<l.random(),S=.5<l.random(),m=.5<l.random(),E=[],T=[],d.getRandomPalette();for(var n=t(),a=0;a<f;a++)T[a]={strokeStyle:d.getRandomColour(),lineWidth:m?n:t()};for(var r=1e-4+l.random()*Math.PI,o=1/u*.1,i=0;i<u;i++){var s=.3+.1*l.random(),c=r+(i/u+l.getNumber(-o,o))*Math.PI*2;v({index:i,cx:.5+Math.sin(c)*s,cy:.5+Math.cos(c)*s})}for(i=0;i<u;i++)E[i].angle();N.clearRect(0,0,M,M),N.lineCap="round",p()},settings:R,render:p}};isNode?module.exports=bezier_flow():define("bezier_flow",bezier_flow);var _bezier=bezier(),init=_bezier.init,stage=_bezier.stage;init({size:2048,seed:fxhash}),document.body.prepend(stage);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(define("bill_stevens",function(){var c,l,d,f,m,u=document.createElement("div"),h=window.innerWidth,v=window.innerHeight,p=[],g=(Array(Math.pow(4,3)).fill(0),Array(Math.pow(4,3)).fill(0)),b=function(e,t){return e[t]++},y=function(t){return function(e){return{x:e%t,y:Math.floor(e/t)%t,z:Math.floor(e/(t*t))}}},x=function(e){return e.x+4*e.y+4*e.z*4},w=[{id:3,structure:[[[1,1,1,1]]]}].map(function(e){var t=e.structure,n=0,a=0,r=0;return t.forEach(function(e,t){n=Math.max(n,t+1),e.forEach(function(e,t){a=Math.max(a,t+1),e.forEach(function(e,t){r=Math.max(r,t+1)})})}),Object.assign(e,{dimensions:{w:n,h:a,d:r}})}),M=function(e){var t=30*e,n=new THREE.MeshLambertMaterial({color:0}),a=new THREE.BoxGeometry(t,t,t);return new THREE.Mesh(a,n)},t=0,E=function e(){if(function(){var n=g.slice(),e=w[Math.floor(Math.random()*w.length)],t=e.structure,i=function(e){return 30*e},a=colours.getNextColour(),r=colours.mutateColour(a,30),o=Number("0x"+r.substr(1)),s=new THREE.Group,c=new THREE.Group;m.add(s),m.add(c),s.x=rand.getInteger(0,4-e.dimensions.w),s.y=rand.getInteger(0,4-e.dimensions.h),s.z=rand.getInteger(0,4-e.dimensions.d),s.rotation.set(rand.getInteger(-1,1)*Math.PI/2,rand.getInteger(-1,1)*Math.PI/2,rand.getInteger(-1,1)*Math.PI/2),t.forEach(function(e,r){e.forEach(function(e,a){e.forEach(function(e,t){if(e){var n=M(.6);n.position.set(i(r),i(a),i(t)),n.material.color.setHex(o),s.add(n)}})})}),s.position.set(30*s.x,30*s.y,30*s.z),s.updateMatrixWorld();var l={x:10,y:10,z:10},d={x:0,y:0,z:0},f=s.children.map(function(e,t){var n=new THREE.Vector3;n.setFromMatrixPosition(e.matrixWorld);var o={};return Object.entries(n).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1],r=0<a&&a<.001||a<0&&-.001<a?0:a;o[n]=r/30,l[n]=Math.min(l[n],o[n]),d[n]=Math.max(d[n],o[n])}),o}),u=function(e,t,n){return l[n]<0?e[n]=t[n]-l[n]:3<d[n]?e[n]=t[n]-(d[n]-4+1):e[n]=t[n],e},h=f.map(function(e){var t={};return u(t,e,"x"),u(t,e,"y"),u(t,e,"z"),t});if(h.forEach(function(e){var t=x(e);b(n,t)}),n.some(function(e){return 1<e}))return con.log("invalid!");h.forEach(function(e){var t=e.x,n=e.y,a=e.z,r=M(.95);r.position.set(i(t),i(n),i(a)),r.material.color.setHex("0x50ff50"),c.add(r);var o=x(e);b(g,o)})}(),g.every(function(e){return 1===e}))return con.log("we're done here!!",g);10<++t||setTimeout(e,20)},T=function(e){},S=function(){l.update(),c.lookAt(d.position),f.render(d,c)},R=function e(){requestAnimationFrame(e),S()};return{stage:u,init:function(){var e;colours.getRandomPalette(),d=new THREE.Scene,(c=new THREE.PerspectiveCamera(50,h/v,1,1e4)).position.set(0,100,500),d.add(c),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),d.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),d.add(e),(f=new THREE.WebGLRenderer).setSize(h,v),l=new THREE.OrbitControls(c,f.domElement),m=new THREE.Group,d.add(m);for(var t=function(e){return 30*e},n=0;n<Math.pow(5,3);n++){var a=M(.1),r=y(5)(n),o=r.x,i=r.y,s=r.z;a.position.set(t(o)-15,t(i)-15,t(s)-15),a.material.color.setHex(16742144),p.push(a),m.add(a)}u.appendChild(f.domElement),document.addEventListener("keydown",T,!1),S(),R(),E()}}}),define("cannon_demo",function(){var e=function(e){e=e||{};var t=this;this.create=function(e){n=e},this.start=function(){n()};var a=this.settings={stepFrequency:60,quatNormalizeSkip:2,quatNormalizeFast:!0,gx:0,gy:0,gz:0,iterations:3,tolerance:1e-4,k:1e6,d:3,scene:0,paused:!1,rendermode:"solid",constraints:!1,contacts:!1,cm2contact:!1,normals:!1,axes:!1,particleSize:.1,shadows:!1,aabbs:!1,profiling:!1,maxSubSteps:3};if(a.stepFrequency%60!=0)throw new Error("stepFrequency must be a multiple of 60.");var n,r=this.bodies=[],o=this.visuals=[],i=(this.particleGeo=new THREE.SphereGeometry(1,16,8),new THREE.MeshPhongMaterial({color:3157034,emissive:0,specular:5323312,shininess:80}));this.wireframeMaterial=new THREE.MeshLambertMaterial({color:16711680,wireframe:!0}),this.currentMaterial=i;this.particleMaterial=new THREE.MeshLambertMaterial({color:16711680});var s,c,l,d=this.world=new CANNON.World;function f(){for(var e=r.length,t=0;t<e;t++){var n=r[t],a=o[t];a.position.copy(n.position),n.quaternion&&a.quaternion.copy(n.quaternion)}}d.broadphase=new CANNON.NaiveBroadphase;var u,h,m,v,p=2048,g=2048,b=0,y=window.innerWidth,x=window.innerHeight-2*b,w=5,M=500;!function(){if(v=document.getElementById("experiment-holder"),(u=new THREE.PerspectiveCamera(24,y/x,w,M)).position.set(0,-100,50),(c=t.scene=new THREE.Scene).fog=new THREE.Fog(0,10,M),u.lookAt(c.position),l=new THREE.AmbientLight(2236962),c.add(l),(s=new THREE.SpotLight(16777215)).position.set(30,-100,40),s.target.position.set(0,0,0),s.castShadow=!0,s.shadow.camera.near=10,s.shadow.camera.far=200,s.shadow.camera.left=-50,s.shadow.camera.right=50,s.shadow.camera.top=50,s.shadow.camera.bottom=-50,s.shadow.bias=-1e-4,s.shadow.mapSize.width=p,s.shadow.mapSize.height=g,c.add(s),c.add(u),(m=new THREE.WebGLRenderer({clearColor:0,clearAlpha:1,antialias:!1})).setSize(y,x),m.domElement.style.position="relative",m.domElement.style.top=b+"px",v.appendChild(m.domElement),document.addEventListener("mousemove",S),window.addEventListener("resize",R),m.shadowMap.enabled=!0,m.shadowMap.type=THREE.PCFSoftShadowMap,e.trackballControls){(h=new THREE.TrackballControls(u,m.domElement)).rotateSpeed=1,h.zoomSpeed=1.2,h.panSpeed=.2,h.noZoom=!1,h.noPan=!1,h.staticMoving=!1,h.dynamicDampingFactor=.3;h.minDistance=0,h.maxDistance=1e5,h.screen.width=y,h.screen.height=x,h.target.set(0,0,10)}}(),function e(){requestAnimationFrame(e);f();T();C()}();var E=0;function T(){var e=1/a.stepFrequency,t=Date.now()/1e3;if(!E)return d.step(e),void(E=t);var n=t-E;d.step(e,n,a.maxSubSteps),E=t}function S(e){}function R(e){y=window.innerWidth,x=window.innerHeight,m.setSize(y,x),u.aspect=y/x,u.updateProjectionMatrix(),h&&(h.screen.width=y,h.screen.height=x),u.radius=(y+x)/4}function C(){h&&h.update(),m.clear(),m.render(t.scene,u)}};(e.prototype={constructor:e}).getWorld=function(){return this.world},e.prototype.addVisual=function(e,t){var n;e instanceof CANNON.Body?n=this.shape2mesh(e,t):con.log("custom body!!!",e),n&&(this.bodies.push(e),this.visuals.push(n),e.visualref=n,e.visualref.visualId=this.bodies.length-1,this.scene.add(n))},e.prototype.addVisuals=function(e){for(var t=0;t<e.length;t++)this.addVisual(e[t])},e.prototype.removeVisual=function(e){if(e.visualref){for(var t=this.bodies,n=this.visuals,a=[],r=[],o=t.length,i=0;i<o;i++)a.unshift(t.pop()),r.unshift(n.pop());for(var s=e.visualref.visualId,c=0;c<a.length;c++){if(c!==s)t[i=s<c?c-1:c]=a[c],n[i]=r[c],t[i].visualref=a[c].visualref,t[i].visualref.visualId=i}e.visualref.visualId=null,this.scene.remove(e.visualref),e.visualref=null}},e.prototype.removeAllVisuals=function(){for(;this.bodies.length;)this.removeVisual(this.bodies[0])};var H=0;return e.prototype.shape2mesh=function(i,e){e=e||this.currentMaterial;this.settings.renderMode;var s=new THREE.Object3D;function t(e,t){if(e.receiveShadow=!0,e.castShadow=!0,e.children)for(var n=0;n<e.children.length;n++)if(e.children[n].castShadow=!0,e.children[n].receiveShadow=!0,e.children[n])for(var a=0;a<e.children[n].length;a++)e.children[n].children[a].castShadow=!0,e.children[n].children[a].receiveShadow=!0;var r=i.shapeOffsets[t],o=i.shapeOrientations[t];e.position.set(r.x,r.y,r.z),e.quaternion.set(o.x,o.y,o.z,o.w),s.add(e)}if(i.custom){var n=i.shapes[0],a=new THREE.Object3D;switch(i.customType){case"CHAIN_LINK":for(var r=new THREE.BoxGeometry(2*n.halfExtents.x,2*n.halfExtents.y,2*n.halfExtents.z),o=(new THREE.Mesh(r,this.wireframeMaterial),new THREE.Object3D),c=[],l=n.halfExtents.z,d=0;d<=10;d++){var f=d/10*Math.PI*-2;c.push(new THREE.Vector2(.8+.3*Math.sin(f),.3*Math.cos(f)))}var u=new THREE.LatheBufferGeometry(c,10,0,Math.PI),h=new THREE.Mesh(u,e);h.position.set(0,0,l),h.rotation.set(0,-Math.PI/2,0),o.add(h);var m=new THREE.Mesh(u,e);m.position.set(0,0,-l),m.rotation.set(0,-Math.PI/2,Math.PI),o.add(m);u=new THREE.CylinderBufferGeometry(.3,.3,2*l,10);var v=new THREE.Mesh(u,e);v.rotation.set(Math.PI/2,0,0),v.position.set(.8,0,0),o.add(v);var p=new THREE.Mesh(u,e);p.rotation.set(Math.PI/2,0,0),p.position.set(-.8,0,0),o.add(p),h.receiveShadow=!0,h.castShadow=!0,m.receiveShadow=!0,m.castShadow=!0,v.receiveShadow=!0,v.castShadow=!0,p.receiveShadow=!0,p.castShadow=!0,a.add(o),o.rotation.z=H++%2*Math.PI/2;break;default:throw new Error("need to supply customType!")}return t(a,0),s}for(var g=0;g<i.shapes.length;g++){switch((n=i.shapes[g]).type){case CANNON.Shape.types.SPHERE:var b=new THREE.SphereGeometry(n.radius,18,18);a=new THREE.Mesh(b,e);break;case CANNON.Shape.types.PARTICLE:a=new THREE.Mesh(this.particleGeo,this.particleMaterial);var y=this.settings;a.scale.set(y.particleSize,y.particleSize,y.particleSize);break;case CANNON.Shape.types.PLANE:u=new THREE.PlaneGeometry(10,10,4,4);a=new THREE.Object3D;var x=new THREE.Object3D,w=new THREE.Mesh(u,new THREE.MeshLambertMaterial({color:9474192}));w.scale.set(100,100,100),x.add(w),w.castShadow=!0,w.receiveShadow=!0,a.add(x);break;case CANNON.Shape.types.BOX:r=new THREE.BoxGeometry(2*n.halfExtents.x,2*n.halfExtents.y,2*n.halfExtents.z);a=new THREE.Mesh(r,e);break;case CANNON.Shape.types.CONVEXPOLYHEDRON:var M=new THREE.Geometry;for(d=0;d<n.vertices.length;d++){var E=n.vertices[d];M.vertices.push(new THREE.Vector3(E.x,E.y,E.z))}for(d=0;d<n.faces.length;d++)for(var T=n.faces[d],S=(f=T[0],1);S<T.length-1;S++){var R=T[S],C=T[S+1];M.faces.push(new THREE.Face3(f,R,C))}M.computeBoundingSphere(),M.computeFaceNormals(),a=new THREE.Mesh(M,e);break;case CANNON.Shape.types.HEIGHTFIELD:u=new THREE.Geometry;for(var N=new CANNON.Vec3,k=new CANNON.Vec3,z=new CANNON.Vec3,P=0;P<n.data.length-1;P++)for(var _=0;_<n.data[P].length-1;_++)for(var I=0;I<2;I++){n.getConvexTrianglePillar(P,_,0===I),N.copy(n.pillarConvex.vertices[0]),k.copy(n.pillarConvex.vertices[1]),z.copy(n.pillarConvex.vertices[2]),N.vadd(n.pillarOffset,N),k.vadd(n.pillarOffset,k),z.vadd(n.pillarOffset,z),u.vertices.push(new THREE.Vector3(N.x,N.y,N.z),new THREE.Vector3(k.x,k.y,k.z),new THREE.Vector3(z.x,z.y,z.z));d=u.vertices.length-3;u.faces.push(new THREE.Face3(d,d+1,d+2))}u.computeBoundingSphere(),u.computeFaceNormals(),a=new THREE.Mesh(u,e);break;case CANNON.Shape.types.TRIMESH:for(u=new THREE.Geometry,N=new CANNON.Vec3,k=new CANNON.Vec3,z=new CANNON.Vec3,d=0;d<n.indices.length/3;d++){n.getTriangleVertices(d,N,k,z),u.vertices.push(new THREE.Vector3(N.x,N.y,N.z),new THREE.Vector3(k.x,k.y,k.z),new THREE.Vector3(z.x,z.y,z.z));S=u.vertices.length-3;u.faces.push(new THREE.Face3(S,S+1,S+2))}u.computeBoundingSphere(),u.computeFaceNormals(),a=new THREE.Mesh(u,e);break;default:throw"Visual type not recognized: "+n.type}t(a,g)}return s},e}),isNode="undefined"!=typeof module)con=console,dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js");var circle_packing_zoom_loop=function(){var v,p,A=2*Math.PI,L=.5,q=.5,g=dom.canvas(1,1),O=rand.instance();console.log("expi2!");var b={};function a(e){b.amount<b.max||(b.amount=b.max);var t=b,n=t.target,a=(t.scale,t.scaler),r=Math.sqrt(Math.pow(b.target.x,2)+Math.pow(b.target.y,2))*b.max,o=b.amount/b.max,i=(b.target.x,b.amount);g.ctx.save(),g.ctx.clearRect(0,0,v,v);for(var s=0,c=p.circles.length;s<c;s++){var l=p.circles[s],d=l.x,f=l.y,u=l.r;d=.5+(d-.5)*a,f=.5+(f-.5)*a,u*=Math.pow(a,1),g.ctx.fillStyle=s==b.targetIndex?"#f00":"#000",g.ctx.beginPath(),g.ctx.drawCircle(d*v,f*v,u*v),g.ctx.closePath(),g.ctx.fill()}g.ctx.fillStyle="yellow",g.ctx.fillRect(L*v-1,0,2,v),g.ctx.fillRect(0,q*v-1,v,2);i=.5+(n.x-.5)*a;var h=.5+(n.y-.5)*a;g.ctx.strokeStyle="green",g.ctx.beginPath(),g.ctx.moveTo(L*v,q*v),g.ctx.lineTo(i*v,h*v),g.ctx.stroke();var m=geom.lerp({x:L*v,y:q*v},{x:i*v,y:h*v},o);g.ctx.fillRect(m.x,m.y,10,10)}return window.addEventListener("mousemove",function(e){b.amount=1+e.x/v*b.max,a()}),{stage:g.canvas,init:function(e){console.log("init..."),v=e.size,g.setSize(v,v),O.setSeed(e.seed||Math.random()),console.log(O.getSeed()),p=function(){var e=dom.canvas(v,v),z=O.getNumber(1e-4,.02),P=O.getNumber(.001,.01),_=O.getNumber(P+.02,.5),I=1;function H(e,t){++t<5e3?n(e,t):con.log("too many attempt")}function n(e,t,n){var a,r,o,i,s,c,l,d,f;if(e){if(!e.sites.length)return;a=e.depth+1;var u=Math.floor(O.random()*e.sites.length);if(N=e.sites.splice(u,1)[0],f=N.x,d=N.y,o=e.x-f,i=e.y-d,r=Math.sqrt(o*o+i*i),l=e.r-r-z,c=O.random()*l,_<c?c=_:c<P&&(c=P),c-z<P)return H(e,t);for(var h=!0,m=0,v=e.children.length;m<v&&h;m++){s=e.children[m],o=f-s.x,i=d-s.y,r=Math.sqrt(o*o+i*i);var p=c+s.r+z;r<p&&(c=r-s.r-z)<P&&(h=!1)}if(!1===h)return H(e,t)}else f=L,d=q,c=.5,a=0;var g=.01,b=Math.ceil(c/g);g=c/b;for(var y=[],x=0;x<b;x++)for(var w=x*g*A,M=Math.ceil(w/g)||6,E=0;E<M;E++){var T=(x+O.getNumber(0,1))*g,S=(E+O.getNumber(0,1))/M*A,R=f+Math.sin(S)*T,C=d+Math.cos(S)*T,N={x:R,y:C};y.push(N)}var k={depth:a,x:f,y:d,r:c,children:[],sites:y};if(e&&e.children&&e.children.push(k),a<I)for(var m=0,v=k.sites.length;m<v;m++)H(k,0);return k}var t=n(null,0);return{canvas:e.canvas,circles:t.children}}(),setTimeout(function(){var e=p;con.log("p0",e);var t=O.getInteger(0,e.circles.length),n=e.circles[t];b={amount:1,max:.5/n.r,target:n,targetIndex:t},con.log("zoom",b),a()},100)}}};if(isNode?module.exports=circle_packing_zoom_loop():define("circle_packing_zoom_loop",circle_packing_zoom_loop),isNode="undefined"!=typeof module)con=console,rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var circle_packing=function(){return function(){var i,X,Y,U=rand.instance(),Q=colours.instance(U),J=2*Math.PI,Z=dom.canvas(1,1);var e={stage:Z.canvas,init:function(e){console.time("process time"),i=e.progress||function(){console.log("circle_packing - no progress defined")};var t=e.size;Y=X=t,Z.setSize(X,Y),U.setSeed(e.seed),console.log("circle_packing setting seed.",U.getSeed()),Q.getRandomPalette(),Z.ctx.fillStyle="#000",Z.ctx.fillRect(0,0,X,Y);var P=0,_=0,I=0,H=U.getNumber(.001,.02);console.log("gap",H);var A=U.getNumber(.001,.01),L=U.getNumber(A+.02,.5),q=U.getInteger(1,10),O=U.getInteger(0,2),D=U.getNumber(.8,3),j=U.getInteger(0,1);console.log("limitMaxRadius",O),console.log("powerMaxRadius",D),console.log("limitMinRadius",j);var F=.7<U.getNumber(),B=U.getInteger(4,20),W=U.getInteger(2,10),G=.7<U.getNumber(),a=0,r=.1;function V(e,t){if(P++,t++,a++,s.ctx.fillRect(a/500,0,1,P/50),I%100==0&&i("render:progress",r-=.02*(r-1)),t<5e3){var n=_%100?0:200;n?setTimeout(function(){o(e,t)},n):o(e,t)}else console.log("too many attempt")}function o(e,t,n){var a,r,o,i,s,c,l,d,f,u;if(P--,_++,e){if(!e.sites.length)return;r=e.depth+1;var h=Math.floor(U.random()*e.sites.length);switch(k=e.sites.splice(h,1)[0],u=k.x,f=k.y,i=e.x-u,s=e.y-f,o=Math.sqrt(i*i+s*s),d=e.r-o-H,O){case 1:L=.01+Math.pow(.5-o,D);break;case 2:L=.01+Math.pow(o,D)}switch(j){case 1:A=.1*L}if(l=U.random()*d,L<l?l=L:l<A&&(l=A),n&&(n.r&&(l=n.r),n.x&&(u=n.x),n.y&&(f=n.y)),l-H<A)return V(e,t);for(var m=!0,v=0,p=e.children.length;v<p&&m;v++){c=e.children[v],i=u-c.x,s=f-c.y,o=Math.sqrt(i*i+s*s);var g=l+c.r+H;o<g&&(l=o-c.r-H)<A&&(m=!1)}if(!1===m)return V(e,t)}else l=f=u=.5,r=0;if(n&&n.colour)a=n.colour;else for(a=Q.getRandomColour();e&&e.colour==a;)a=Q.getNextColour();G&&(Z.ctx.globalCompositeOperation=(r+1)%2?"destination-out":"source-over"),Z.ctx.beginPath(),Z.ctx.fillStyle=a,Z.ctx.drawCircle(u*X,f*Y,l*X),Z.ctx.closePath(),Z.ctx.fill();var b=.01,y=Math.ceil(l/b);b=l/y;for(var x=[],w=0;w<y;w++)for(var M=w*b*J,E=Math.ceil(M/b)||6,T=0;T<E;T++){var S=(w+U.getNumber(0,1))*b,R=(T+U.getNumber(0,1))/E*J,C=u+Math.sin(R)*S,N=f+Math.cos(R)*S,k={x:C,y:N};F?parseInt(S*B)%W==0&&x.push(k):x.push(k)}var z={colour:a,depth:r,x:u,y:f,r:l,children:[],sites:x};if(I++,e&&e.children&&e.children.push(z),r<q)for(var v=0,p=z.sites.length;v<p;v++)V(z,0)}!function e(){-1==P?(console.log("progressChecker",P),i("render:complete",Z.canvas),!0):setTimeout(e,250)}();o(null,0,{colour:"transparent"})},settings:{}},s=dom.canvas(800,300);return e}};isNode?module.exports=circle_packing():define("circle_packing",circle_packing);var circle_sectors=function(){var S,R=rand.instance(void 0),C=colours.instance(R),N=2*Math.PI,k=Math.PI/2,z=dom.canvas(1,1);return{stage:z.canvas,init:function(e){S=e.size,z.setSize(S,S),R.setSeed(),C.getRandomPalette();var t=R.getInteger(4,24),n=R.getInteger(0,t-1),a=R.getInteger(2,16),r=R.getInteger(2,3),o=R.getNumber(0,.01),i=R.getNumber(.02,.2),s=.8<R.getNumber(0,1),c=R.getNumber(.1,.8),l=function(){var e=R.getInteger(0,2);console.log("colourCycle - mode:",e);var n=-1,a=.6<R.getNumber(0,1);switch(e){case 0:return function(e,t){return C.getRandomColour()};case 1:return function(e,t){return C.getNextColour(e)};case 2:return function(e,t){return e!=n?(n=e,C.getNextColour(a||R.getInteger(0,4))):C.getCurrentColour()}}}();z.ctx.lineWidth=o*S;for(var d=n;d<t;d++)if(!(s&&R.getNumber(0,1)>c)){for(var f=d/t*.5,u=(d+1)/t*.5,h=N*f,m=a;i<h/m;)m*=r;for(var v=0;v<m;v++){var p=function(){z.ctx.beginPath(),z.ctx.moveTo(y*S,x*S),z.ctx.lineTo(w*S,M*S),z.ctx.arc(.5*S,.5*S,u*S,k-g,k-b,!0),z.ctx.lineTo(E*S,T*S),z.ctx.arc(.5*S,.5*S,f*S,k-b,k-g,!1),z.ctx.closePath()};if(!(s&&R.getNumber(0,1)>c)){var g=v/m*N,b=(v+1)/m*N,y=.5+Math.sin(g)*f,x=.5+Math.cos(g)*f,w=.5+Math.sin(g)*u,M=.5+Math.cos(g)*u,E=(Math.sin(b),Math.cos(b),.5+Math.sin(b)*f),T=.5+Math.cos(b)*f;z.ctx.globalCompositeOperation="source-over",z.ctx.fillStyle=l(d,v),p(),z.ctx.fill(),z.ctx.globalCompositeOperation="destination-out",p(),z.ctx.stroke()}}}}}};(isNode="undefined"!=typeof module)?module.exports=circle_sectors():define("circle_sectors",circle_sectors),define("codevember",["exps_details"],function(t){var c,l,d,f,u,h,m,v,p=10,g=400,b=440,y=50,x=[],n={x:0,y:0,z:0},w=window.innerWidth,M=window.innerHeight;function E(r){function e(e,t,n,a){e.position.set(Math.sin((r+1e4)*t*1e-5),Math.sin((r+1e4)*n*1e-5),Math.sin((r+1e4)*a*1e-5))}x.forEach(function(e){e.shift.position=20*Math.sin(r*e.shift.speed),e.position.z=e.shift.position}),e(u,15,17,12),e(h,14,19,13),e(m,20,18,16),n.x=50*Math.sin(12e-5*r),n.y=50*Math.sin(17e-5*r),n.z=400+300*Math.sin(3e-5*r),l.position.set(n.x,n.y,n.z),l.lookAt(d.position),f.render(d,l),requestAnimationFrame(E)}return{init:function(){!function(){(d=new THREE.Scene).fog=new THREE.FogExp2(0,.002),l=new THREE.PerspectiveCamera(120,w/M,1,2e4),d.add(l),(u=new THREE.DirectionalLight(16769279,.19)).position.set(0,1,.5),d.add(u),(h=new THREE.DirectionalLight(15787425,.15)).position.set(-1,.5,.5),d.add(h),(m=new THREE.DirectionalLight(8453631,.18)).position.set(0,-1,.25),d.add(m),(f=new THREE.WebGLRenderer({antialias:!0})).setSize(w,M),c=new THREE.Group,d.add(c),v=new THREE.AmbientLight(16777215,.2),d.add(v);for(var e=0;e<p*p;e++){var t=(i=new THREE.MeshPhongMaterial({color:18555,specular:10086143,shininess:30}),s=new THREE.BoxGeometry(g,g,y),new THREE.Mesh(s,i));c.add(t);var n=e%p-p/2+.5,a=Math.floor(e/p)-p/2+.5,r=n*b,o=-a*b;t.position.set(r,o,0),t.shift={speed:1e-4*(.1+Math.random()),position:0},x.push(t)}var i,s;document.body.appendChild(f.domElement),E(0)}(),function(){var e=t.getFeature("codevember");document.body.appendChild(dom.element("style",{innerText:["a { color: white; }","a:hover { color: #87d9ff; text-shadow: 0px 0px 16px #fff; }","div { box-sizing: border-box;}",".holder { color: white; display: block; position: absolute; overflow: auto;","top: 20%; left: 10%; height: 50%; border: 1px dashed rgba(255,255,255,0.4);"," transform: rotate3d(0.3, 0.5, 0.9, 8deg); width: 80%; z-index: 50; }",".item { display: block; clear: both; line-height: 25px; }",".day { color: #bcd1d6; display: inline-block; float: left; padding-right: 10px; text-align: right; width: 20%; }",".title { color: #999; display: inline-block; float: left; width: 80%; }",".clickable .title { color: #fff; }"].join(" ")}));var r=dom.element("div",{className:"holder",innerHTML:"<h1>CODEVEMBER</H1>"});e.forEach(function(e){var t=e.link?dom.element("a",{className:"item clickable",href:"/?"+e.link}):dom.element("div",{className:"item"}),n=dom.element("div",{className:"day",innerHTML:"Day "+e.day}),a=dom.element("div",{className:"title",innerHTML:e.title});r.appendChild(t),t.appendChild(n),t.appendChild(a)}),document.body.appendChild(r)}()},resize:function(e,t){f.setSize(e,t),l.aspect=e/t,l.updateProjectionMatrix()}}});var isNode="undefined"!=typeof module,palettesComplete=(colours=function e(t,n){var r;r=t&&t.random?t.random:Math.random;var s=palettesComplete;"v0"===n?s=palettesComplete.slice(0,10):"v1"===n&&(s=palettesComplete.slice(0,121));var c=-1,l=null,a=0;function o(e){return e&&console.warn("Ensure you call getRandomPalette!"),c=~~(r()*s.length),l=s[c]}function i(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function d(e,t,n){return"#"+i(e)+i(t)+i(n)}function f(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}}function u(e){if("#"!==e.substr(0,1)||4!==e.length)throw new Error("colours.convertHex3To6 - invalid colour type:"+e+" - expected three digit hex value!");var t=e.substr(1,1).toLowerCase(),n=e.substr(2,1).toLowerCase(),a=e.substr(3,1).toLowerCase();return"#"+t+t+n+n+a+a}function h(e,t,n){var a=Math.round(e+(r()-.5)*t);return a=255<a?255:a<=0?0:a}function m(e,t){var n=f(e),a=n.r,r=n.g,o=n.b;return d(a=h(a,t),r=h(r,t),o=h(o,t))}function v(){null==l&&o(!0);var e=dom.element("div");e.className="palette",e.id="palette-"+c;for(var t=0;t<l.length;t++){var n=l[t],a=dom.element("div",{className:"colour",innerHTML:n,style:{background:n}});e.appendChild(a)}return e}return{getPalette:function(){return l},getRandomPalette:o,getRandomColour:function e(t){if(null==l&&o(!0),t){var n=~~(r()*l.length);if(n===a)return e(!0);a=n}else a=~~(r()*l.length);return l[a]},getCurrentColour:function(){return null==l&&o(!0),l[a]},getNextColour:function(e){return null==l&&o(!0),null!=e?a+=e:a++,a+=l.length,a%=l.length,l[a]},getPalleteIndex:function(){return c},instance:e,setPalette:function(e){l=e},setRandomPalette:function(e){l=s[c=e]},setColourIndex:function(e){a=e},setPaletteRange:function(e){return e>l.length?console.warn("setPaletteRange - current palette has less than",e,"colours!"):l=t.shuffle(l.slice()).splice(0,e)},showPalette:v,showColours:function(){e=[".palette {","  clear: both;","  height: 50px;"," margin-bottom: 20px","}",".colour {","  width: 100px;","  height: 50px;","  float: left;","  text-align: center;","  font-size: 10px;","  line-height: 50px;","}"].join(""),t=dom.element("style"),t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.head.appendChild(t);var e,t;for(var n=document.createElement("div"),a=0;a<s.length;a++){l=s[c=a];var r=v(),o=l.map(function(e,t){return{colour:e,brightness:(n=4===e.length?u(e):e,a=f(n),r=a.r,o=a.g,i=a.b,Math.sqrt(.299*r*r+.587*o*o+.114*i*i)),index:t};var n,a,r,o,i}).sort(function(e,t){return e.brightness-t.brightness})[0],i=dom.element("button",{innerHTML:o.colour+" ("+~~o.brightness+")",style:{color:"white",background:o.colour,padding:"10px 20px"}});r.appendChild(i),n.appendChild(r)}return document.body.appendChild(n),n},convertHex3To6:u,mutateColour:function(e,t){if("#"===e.substr(0,1)){var n=e.length;if(7===n)return m(e,t);if(4===n)return m(u(e),t)}throw new Error("colours.mutateColour - invalid colour type:"+e)},mixColours:function(e){for(var t={r:0,g:0,b:0},n=0,a=e.length;n<a;n++){var r=f(e[n]);t.r+=r.r,t.g+=r.g,t.b+=r.b}return t.r/=a,t.g/=a,t.b/=a,t.r=parseInt(t.r),t.g=parseInt(t.g),t.b=parseInt(t.b),d(t.r,t.g,t.b)}}},[["#333","#ccc"],["#a0c9d9","#f2f0d0","#735438","#a64941","#0d0d0d"],["#d93d93","#629c27","#dee300","#32393d","#ffffff"],["#36190a","#b2460b","#ff6818","#009aa3","#00ecd2"],["#1b69ff","#002875","#0143c2","#ffb002","#ff781e"],["#ffbe10","#ffae3c","#ff7e49","#e85137","#333c3c"],["#0e1d22","#587077","#555555","#ecebdf"],["#f2385a","#f5a503","#e9f1df","#4ad9d9","#36b1bf"],["#e8463e","#611410","#ffcfcd","#038733","#63f598"],["#4f8499","#c95f5f","#003145","#012914","#fcd457"],["#406874","#84d9d9","#b8d9d3","#35402a","#592c1c"],["#8f8164","#d9d7ac","#4f6373","#293845","#14212b"],["#1c2623","#37a672","#e2ca63","#f2884b","#db3323"],["#ffd7ae","#163a5c","#1d2328","#fe6200","#adb7bd"],["#ffb919","#8c12b2","#c200ff","#14cc83","#09b26f"],["#8c1822","#bf1725","#594f46","#1c8476","#006b5e"],["#cf9cb3","#626161","#debc92","#b68256","#eddfbb"],["#a6442e","#a65644","#bf7665","#d9a79c","#f2f2f2"],["#200101","#421c0c","#c9a860","#4fa35e","#076043"],["#435939","#737268","#d9d4ba","#d9d5c5","#0d0000"],["#467302","#97bf04","#d97904","#a62f03","#590902"],["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#ff9900","#424242","#e9e9e9","#bcbcbc","#3299bb"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#515151","#ffffff","#00b4ff","#eeeeee"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#300030","#480048","#601848","#c04848","#f07241"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#5b527f","#9a8194","#c6a9a3","#ebd8b7","#99bbad"],["#c2412d","#d1aa34","#a7a844","#a46583","#5a1e4a"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#75616b","#bfcff7","#dce4f7","#f8f3bf","#d34017"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#7e5686","#a5aad9","#e8f9a2","#f8a13f","#ba3c3d"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#84b295","#eccf8d","#bb8138","#ac2005","#2c1507"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#b5ac01","#ecba09","#e86e1c","#d41e45","#1b1521"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#379f7a","#78ae62","#bbb749","#e0fbac","#1f1c0d"],["#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#793a57","#4d3339","#8c873e","#d1c5a5","#a38a5f"],["#442333","#ebd17a","#d85a45","#c02848","#42767a"],["#340734","#6f6561","#879677","#a3c68c","#4f3649"],["#dad6a6","#daab92","#ec496a","#e7867a","#c7fcd7"],["#e2d297","#0ec4e8","#471701","#0295bd","#f07f13"],["#fffcbf","#447e96","#fefffc","#f8d783","#cbb24b"],["#716382","#aabb9f","#708b95","#e7eca8","#703d6f"],["#01765d","#91ff16","#00c16c","#014443","#002f34"],["#292445","#250828","#495169","#d8cbb1","#cdbc9d"],["#ffffff","#fffbec","#967c51","#f0efd9","#cfd0d0"],["#5b4d3d","#d8e472","#428d8f","#eaecbf","#c3d329"],["#1e1414","#a3b907","#31c5c8","#d22043","#24b695"],["#536b8c","#4f8a8a","#61385f","#61a17c","#5b4e78"],["#26251b","#a1e7b8","#ea0a43","#f1a83e","#f2633d"],["#fdeaa5","#670960","#9481b7","#fec1ab","#fb5894"],["#725c75","#fcfcec","#c1a19f","#321f2f","#e3cebc"],["#a7311c","#cc9929","#fedd67","#938a40","#352405"],["#fe003d","#01c077","#89c001","#ff8a01","#fabf29"],["#d6b99c","#f3c8a3","#99cabe","#ffaa8d","#162229"],["#e7aa7e","#a79f7f","#e0b99a","#3b1823","#d38574"],["#584332","#a78c6a","#f1e6c9","#9ba657","#f4f5f5"],["#d1024f","#a6016b","#fd3803","#feab04","#fb7f03"],["#c1dcab","#e7a379","#d8c878","#e87374","#6f6667"],["#d2c7b3","#ff6c63","#edcab0","#d5f2dc","#23090f"],["#ec5673","#150f31","#9eae8b","#ccbc93","#fcc598"],["#abcf91","#f0eae5","#383837","#8dba86","#bbdb73"],["#e9ee75","#4b3a47","#ffcd57","#e7efaf","#d6e9d4"],["#ff7d10","#ffb239","#48007e","#ff005c","#090310"],["#f1bd76","#c3ceaf","#f18172","#f3f5df","#4b3d31"],["#ddd1b6","#6e997a","#41272c","#6ba29e","#85aba9"],["#d84e32","#1f8c94","#4b3e4d","#c4ac30","#dbd8a3"],["#fdfad7","#9ec0ae","#08a7a3","#00ccbf","#edecc9"],["#bf1f63","#562f50","#017a7e","#ffa687","#d62958"],["#f30133","#5f0620","#74b9a7","#f3cb68","#f28263"],["#da0e5a","#ff6d28","#341228","#991666","#f34738"],["#001849","#5f4877","#473079","#311861","#916090"],["#d5b4b2","#f97892","#e5e1cd","#231b43","#c7d8c0"],["#ee96a3","#f2b99f","#d34770","#dbccbe","#de5b7f"],["#7b1f49","#9e2152","#561a3c","#111725","#331931"],["#b1e7d2","#76b0a9","#270a33","#3e7b80","#451b3d"],["#9a1619","#690d35","#c21c11","#fb4a29","#280805"],["#f6a498","#fa8076","#000101","#f6c6b8","#b5242a"],["#d0cfd7","#fda887","#fb2750","#fe834b","#f5e6f8"],["#130a13","#3d1c32","#f5931d","#b24722","#612848"],["#f4b9ad","#ef0a5b","#95a032","#c9ce3b","#f5f1dd"],["#d3d6af","#8d7b63","#b6cea5","#70453e","#9dc19d"],["#b3deb4","#cee4b2","#9bd9b4","#d9ce84","#69d1b4"],["#7d1b0c","#e8c483","#b39e69","#a86b4c","#330b0a"],["#658a64","#a6b886","#45695a","#223336","#e0e2ad"],["#439497","#6c5c4e","#faefd3","#e0ceb4","#b0a090"],["#f9a0a0","#f9d7d7","#fdfbd1","#93644b","#fabdbc"],["#823871","#fdddb2","#f98c88","#d75981","#a9bcbe"],["#a69a91","#fff0c1","#e9814d","#493f3e","#f9ce7e"],["#c9d27a","#fdf69c","#92c393","#f1502c","#c32412"],["#cef682","#94dd8f","#ff7756","#6b6c6c","#f8c182"],["#512a3f","#7a0715","#0c0b0c","#faf6ec","#89a0a9"],["#f9d522","#e0f5c5","#aed6bd","#ede574","#79b8b3"],["#cb221f","#b9d8a0","#fdac26","#5a0f0d","#fefdc0"],["#f25d5e","#ffa466","#43232f","#395a4e","#853c42"],["#9e9d93","#ca9f92","#f69c92","#e4b8ac","#d5d3c9"],["#eed38d","#c3c092","#65205d","#666078","#64ad92"],["#f0f8d9","#234c20","#78ab58","#cade89","#377f2d"],["#f6a541","#fbc965","#f55c4b","#ffe4ad","#a0dbb1"],["#c7ea8e","#268f73","#031021","#80d989","#e6f99c"],["#adced1","#d2b9a1","#010000","#ff882f","#ccddde"],["#ff685c","#f5f5c2","#8d315c","#8cc8b5","#ffc491"],["#502c39","#665a4c","#718064","#79a786","#1e1116"],["#342616","#6aacbe","#f1f1af","#9cbdbd","#ff380e"],["#f7f8ed","#01426d","#095584","#afdd2a","#066698"],["#ffefad","#e2b366","#e4db85","#e48b68","#685024"],["#abddad","#dedfae","#ccdead","#bbddad","#efdeac"],["#752465","#fdcfbf","#e33e75","#ffb79f","#5e0c3b"],["#017e81","#fb6901","#00b9bc","#004952","#f63801"],["#cfe779","#8dd29d","#fcb554","#ff5355","#5cabc3"],["#fee2b2","#97b59c","#a9636e","#b8113e","#cecca9"],["#909d9f","#7a8c8a","#7fa7a7","#a78d8c","#ff0e51"],["#7dbdb9","#181619","#e3ddcf","#aaccbc","#e23022"],["#a8be68","#c0df5e","#98a76e","#b4cd6a","#6da679"],["#c7946c","#965d62","#2b222c","#f2d874","#5d4352"],["#8d8770","#f3c0ae","#b7cbc0","#f9a898","#f4dbbe"],["#f4ecb6","#231a2c","#fe0a55","#fec098","#f47476"],["#f06b51","#384340","#e1d673","#fbf4b1","#45aab8"],["#ffb770","#fff4d7","#da6053","#000410","#84bec4"],["#83837e","#94b154","#e0e1df","#bffb36","#bcea07"],["#e96e9d","#c8306c","#90244e","#532638","#4caa8d"],["#e6ead4","#1f0a1d","#334e53","#9acb77","#44936b"],["#ac8c33","#8b5a7b","#dde0d0","#c6be99","#92755f"],["#ec898f","#eee9c6","#e5d0cb","#eca3a5","#ec7c82"],["#321c3a","#a61942","#9a8f7e","#67444e","#c3ccb0"],["#63997a","#aada89","#f0fec8","#3c091a","#71243c"],["#37bba6","#72175f","#fefed9","#8c921a","#0b0d01"],["#fefed8","#f9ac8e","#15302f","#ffd6a2","#fff0b7"],["#5a5152","#efd298","#bf4869","#b49c83","#b7c89d"],["#668c4e","#cdda1a","#326667","#fefe00","#98b332"],["#002035","#010100","#1d5661","#faffcd","#78ae92"],["#7bf49a","#595b59","#b8fe9a","#0de4a8","#14c2a1"],["#cfedeb","#ffefd4","#fefee5","#8b7b5d","#9ed6d3"],["#bbe1ac","#86ae71","#361443","#160132","#563d53"],["#e8e79c","#d7a979","#606179","#79a791","#bfd78f"],["#ff3e00","#076460","#ffbd10","#002d2b","#098380"],["#ac8499","#41202a","#fd125a","#83c1b1","#d64882"],["#fcc5ca","#fefee2","#d0b698","#9f6c4e","#fb8db1"],["#f5dcbc","#ccdfd1","#a18194","#fefad5","#e2b7b2"],["#f1f2c0","#ff7575","#f59a70","#e0e1a9","#c6c67f"],["#4f354d","#909f70","#6b6c6c","#5e4160","#b0ce73"],["#9d0b41","#191518","#cd3e17","#f1981d","#49063c"],["#ff2555","#ff0d70","#d67001","#b98100","#f25600"],["#88a56f","#a00929","#56213c","#f5e6d3","#d65d2b"],["#3d3c3b","#4779a0","#b1daf8","#dde3cb","#7d8071"],["#bd5431","#383b43","#e0b965","#74c8a8","#dee2b7"],["#2c2320","#64b296","#9eaa35","#fff9b2","#a1e5d1"],["#be4d55","#e6d5c1","#fff4e4","#c6b19a","#785d55"],["#1a8899","#d71b58","#e8d94c","#efeac5","#370744"],["#e45c5e","#ffa545","#aa5b53","#6f5845","#f28052"],["#ffab68","#ffdfab","#923e32","#ff6f5f","#9fbac1"],["#7bb0a7","#645275","#a8dbac","#e3f6b1","#522a53"],["#fe6a5f","#d2fcfd","#fdbe98","#fefac2","#affaff"],["#4db3de","#fdf0a0","#8ee1a6","#f37b7c","#dd538d"],["#3a0e2c","#ecac9e","#e1eab4","#acdfb2","#ff4b73"],["#1f6664","#151717","#93b25a","#c94c64","#e7bf4a"],["#df1a71","#f9f6c1","#2b0d1b","#c8ce12","#349e97"],["#f0396d","#8e9825","#adc860","#fe5f82","#f3ffea"],["#f9ecf1","#f4e2e7","#3c363c","#f68f9b","#fcd6d9"],["#b41138","#ffba13","#ff8727","#2ca0a4","#f13914"],["#f7ebdb","#fa8f6f","#4c3c35","#c1d9cd","#eb623c"],["#f68046","#a0b047","#11634d","#f1ca4d","#f14e4d"],["#3d6c47","#ef371b","#b5b479","#f8e5a5","#010000"],["#fef2b4","#ef9480","#f50d4a","#101941","#7f043b"],["#566965","#f3a177","#cd9375","#958a72","#ff7474"],["#ff4846","#e8da5e","#4b4552","#477e77","#93b660"],["#72dcd1","#fef28b","#d0eaa3","#efffdb","#ace4b5"],["#f48823","#010000","#d4c8ac","#f2ece0","#c8ba98"],["#f77b3d","#a3cba6","#50242f","#fde085","#f9b966"],["#ccf491","#f7c51e","#ff013c","#fd9209","#dfe05a"],["#f1e7c4","#616769","#2b869f","#98dab6","#3dc8a7"],["#7eb7b0","#342b27","#c5e55c","#e75a1b","#dc1315"],["#48708a","#89acc2","#c9ff42","#cfdfea","#ecf6f8"],["#eff1d8","#666666","#77cca4","#b4e037","#b5debf"],["#ffab08","#0f8e94","#73ad75","#ead459","#444c52"],["#262c4c","#feb24f","#b73464","#ff6b5b","#82b9a9"],["#ebebdd","#c3ddd5","#e5ded6","#d4ded6","#e5e2ce"],["#a9ac7a","#8bc099","#c4975b","#db825e","#ef6c60"],["#ff704a","#e9ff87","#540044","#c50152","#adffe8"],["#4c1e4d","#ebc387","#1a071e","#04676f","#499c79"],["#ffb968","#3c8b88","#452e3d","#e9f17e","#fe3c59"],["#e15958","#c0f0d1","#e8d7b0","#ffffdc","#384152"],["#d8d3a8","#5b364b","#495f66","#cb3746","#d15c57"],["#420a37","#e5700a","#a50b53","#12766c","#f0b200"],["#95b59d","#5b5947","#c8d0b0","#cb5d4d","#ffffc5"],["#35322f","#cbd0b4","#ab6b6d","#85837f","#f6345a"],["#e35734","#4c538c","#161a1d","#f7a11a","#d60357"],["#a03f16","#88a295","#cb8939","#d0c99a","#312837"],["#e7d3b1","#ecba6f","#ef7867","#2197a3","#f81e6b"],["#89b498","#e39a7c","#e8d4a9","#6e6560","#bcbfa4"],["#565a64","#8e4d65","#c64066","#206663","#ff3466"],["#cd7094","#845d6d","#fedcd8","#f6f1e1","#feb2c1"],["#2e1437","#e8edcf","#cbd0c4","#514360","#958e9a"],["#e5e6c3","#d7d2ae","#e37366","#8a8681","#d8d9c4"],["#e7e3d6","#d2c7b3","#c84549","#fff4da","#6f3e3a"],["#d0e389","#f6e2e3","#badf51","#e14790","#e0b6ee"],["#a7a39d","#8d7a67","#e1dcda","#d8c9b7","#f8f1e9"],["#292522","#d6a592","#eed9b3","#4e6160","#a38f80"],["#529ea3","#72b0a4","#d5e3b6","#c4dab4","#abcdb0"],["#323232","#fcffe4","#9d0b38","#e21c59","#84a300"],["#17f8ff","#015bc6","#022576","#00b3fc","#011448"],["#e1d123","#f08140","#bd364d","#f8f899","#443b37"],["#676365","#b0e0e9","#849bb6","#95d7eb","#f3e4fa"],["#a9e8cb","#24242d","#ca1943","#fbfee5","#97163c"],["#fb9a9a","#f8f4d6","#625062","#fedabe","#e97f86"],["#c2b458","#2d2c27","#f8dfae","#fa748f","#998497"],["#f88864","#ad4147","#fec280","#fee399","#411e2e"],["#a22c28","#394030","#7b8156","#1c090b","#bca775"],["#95d1b7","#f2da42","#fdfbd6","#67bd9a","#ef4058"],["#fff19e","#ffb96a","#b5f3bc","#ff6644","#ffdc89"],["#fe42a0","#ff90aa","#ffccd1","#f60069","#4d494a"],["#e37b5e","#5ab491","#162a3c","#e22e3f","#f0ddaa"],["#047c45","#f7be01","#9bb51b","#01483f","#2b1718"],["#7fcfca","#44b5c4","#c6ede7","#a0ded5","#1593a6"],["#cd2649","#33374d","#003f4f","#992b4b","#66314c"],["#030d50","#e8eeeb","#fc0c05","#ffc62c","#cdebee"],["#e7b29a","#e6cba6","#8b9f9c","#6c7677","#ece4b4"],["#9c736f","#b7ca9d","#c36464","#edb05b","#efe998"],["#54797e","#6a9998","#89b9a7","#c6cba5","#615245"],["#e32691","#302bad","#f7dc16","#f81667","#ac2bac"],["#573a7d","#fda699","#e3859c","#ca719f","#fee4aa"],["#fabf9b","#faf4c7","#bda2a2","#8899a1","#f9d88a"],["#ff0052","#4c490b","#ece64e","#e2de99","#757548"],["#c6be9a","#db5543","#1b0f0d","#9fb490","#70ab86"],["#ffceb7","#37270b","#c7c797","#fdefcf","#97bfa8"],["#3a0132","#eae9aa","#eac688","#0e0a28","#7c2947"],["#faf7d1","#744e77","#8f9a92","#c6d9ab","#300a1d"],["#c0ab8b","#000806","#00262c","#124646","#0b7d7e"],["#ff6501","#7bb590","#fef3af","#000100","#d21900"],["#d5cfa9","#5f2e47","#c75332","#c88934","#7ab6ab"],["#080002","#335f5b","#91a297","#eadfd1","#67472c"],["#e4e5c5","#cd0b30","#d2e5c5","#8d2137","#b9d38c"],["#ddffab","#fedaab","#daacff","#ffabac","#abe5fe"],["#cedac2","#f4555a","#fa9275","#875247","#f6e5c7"],["#ffeb5d","#ff4745","#ffc55e","#ff7360","#37173c"],["#ec4400","#cb9a24","#5d525b","#7a6ed5","#12ce4a"],["#560349","#b80340","#e16639","#ac8709","#e6dd95"],["#fee7b2","#ff2022","#52bc9d","#234341","#a3e3b1"],["#2fb7ab","#92a32a","#046e8c","#edbe14","#2f9393"],["#c8e3c6","#f7f6c5","#9dae9a","#ffc771","#765859"],["#584d42","#97865b","#e3c77b","#e46a6c","#e4a56c"],["#b6c37e","#efda96","#7f5666","#9b917c","#8a696b"],["#c9d297","#c44b2c","#463331","#11b9ac","#d79744"],["#c0d1c1","#2f4448","#fff7d4","#f6df98","#ffb783"],["#f8f6f8","#c9d0d4","#9a1719","#9cd3e0","#3a3836"],["#555074","#68b79d","#548a96","#e44a1d","#ffb627"],["#fdf6c6","#abf1e3","#fd64a1","#746457","#31d5de"],["#b29981","#feff9a","#dacd8c","#663267","#8d6674"],["#b12650","#251b21","#6f1d62","#ec9504","#dd4226"],["#f7eed1","#484743","#c6cec6","#9e9d94","#d98a89"],["#a43854","#ebbe14","#2d2a26","#728d78","#6b6a5f"],["#eb525e","#dfdfa0","#e7a83e","#9b726d","#b1cba2"],["#4b4858","#6ea67b","#77b886","#87c28c","#849988"],["#b12249","#efd543","#84a39e","#f49331","#ffeac0"],["#959b8e","#c0c9c9","#605567","#dcd8b7","#a4b5ab"],["#c9c8b5","#3d423c","#f4f6bd","#dde0c4","#b2b29e"],["#f6a2a3","#fed8d7","#fffddc","#dcf8f2","#815940"],["#f7ebd5","#abbf9b","#d3d0a4","#220b00","#a29d7e"],["#296e79","#7b917c","#4a1239","#c9b280","#3a3f58"],["#506265","#bcc598","#7a8f89","#93a789","#f6de9e"],["#dbdb97","#ef6871","#4c1d36","#eeae54","#967e77"],["#e0c0c6","#f3e7d6","#c6b9c5","#f7d8cc","#f7c8c9"],["#f0edca","#d44c1b","#e4a730","#058888","#4f3e2f"],["#c5ae4c","#3e2b25","#a1a485","#ebc287","#dd413e"],["#51c9c6","#cee791","#e0f6c3","#a6cd2b","#bbdb5e"],["#dac091","#f41441","#dbe8b5","#e0856d","#d5f8db"],["#ffc6a6","#363634","#2b2c2c","#f1e4c6","#e7334c"],["#bbb3a2","#adc0b5","#897f65","#a69a83","#bdd5c8"],["#f1f1d7","#005f60","#017879","#174747","#a8c12f"],["#fce7bd","#a2c4ab","#d21d48","#f3de51","#622f53"],["#c8b949","#bd3001","#6f0a00","#231615","#c96823"],["#378885","#8a044d","#2d0332","#0ba18b","#5ada95"],["#ffddd8","#d8d8d8","#f5dbd9","#e3d9d8","#edd9d9"],["#9f906d","#abb69a","#876ffe","#010101","#9683a3"],["#fa6b64","#7b4d48","#f6e3ba","#9ec5b7","#4a4032"],["#a2c2bd","#f4f3e6","#fefeff","#5a554f","#e1e4d9"],["#f0c695","#111652","#db6378","#ecebcf","#1f7278"],["#b62c00","#a9a17b","#fcf6d1","#8d0004","#444545"],["#f6bd04","#77bdae","#ff703e","#fa2e5a","#edf7bc"],["#a2da5c","#f6efbd","#442434","#1f0410","#abe4aa"],["#f36d4f","#3a88ca","#1b315e","#e9f1f9","#9bc3e4"],["#567dba","#2c4b7e","#dde1e7","#606e81","#1f1f1f"],["#e65541","#f8edc1","#65a9a6","#7a886d"],["#541e13","#010405","#626166","#928273","#cc9d61"],["#d4c097","#e3d6c1","#603612","#f7f6e1","#f8f7e3"],["#e7e7e7","#f5f5f7","#323434","#990201","#b90504"],["#4a3d3c","#ff6162","#f3e8e6","#d8dec2","#f4f9e7"],["#2e1b33","#e3e490","#99bb8a","#ee8779","#f26970"],["#f9b984","#8f407b","#feffe5","#efe197","#ff6963"],["#000000","#ab4a00","#fffeff","#012a2f","#f9f0ae"],["#f23360","#321d2e","#eed26a","#e88361","#ceedcd"],["#bbcaa8","#f3ffcf","#ec9c4e","#687061","#f1d57f"],["#a81a5c","#f0c605","#e7204f","#641467","#f66f2b"],["#8b211c","#efcd4f","#c02923","#d0862f","#a7ac3b"],["#010002","#fe6b2a","#340116","#a0112c","#d53a2e"],["#d16343","#b3ba92","#d8be5e","#f0e7b4","#84555f"],["#6d6268","#b9a273","#422f40","#e9a253","#fff0a8"],["#ffc91b","#b901ff","#b7fe01","#fe0091","#228cff"],["#fdefcc","#eb8776","#d34957","#e9b15d","#4a3730"],["#b9f9fe","#a69784","#7f7363","#e8fcff","#655d49"],["#ece8df","#fffeff","#45739e","#c6d5e1","#bdb8ae"],["#200f19","#efc375","#f99088","#78c2ab","#fcf5d1"],["#785d64","#e4cf9d","#78917c","#aeb08e","#79254b"],["#6c9689","#7d1c14","#e6e0c1","#c0090c","#1e2629"],["#ce5c50","#362731","#554965","#f4a46a","#eadfcd"],["#d5828e","#322636","#d8d8da","#d7acb2","#c5ffec"],["#c1c994","#d4a978","#251912","#e3c88e","#a8bd96"],["#fcca48","#ffa926","#f9862f","#fd570d","#fc6a0b"],["#e0dc8c","#f5aa3e","#6bc3ba","#574436","#ee4b58"],["#fe00ab","#01abfe","#aa01ff","#a9ff01","#ffab00"],["#aab0b4","#030d23","#3f484a","#20293e"],["#fffeff","#e1eef1","#010101","#670049","#7db4b6"],["#185d62","#ede0c3","#8dbcb5","#073940","#3e828b"],["#564334","#758917","#cfb491","#4a2720","#9e9a42"],["#f0a890","#b9d9b5","#af5673","#288c86","#d28f8f"],["#750d48","#4d002b","#b9d8c7","#907082","#fff5df"],["#d0b68c","#88555b","#482d49","#5a5b75","#524360"],["#530c2f","#ba3521","#1d987f","#861d25","#f0dcbd"],["#f1c873","#5b3126","#f5876c","#73af94","#f2e7bd"],["#e6d698","#ef7c18","#fec11a","#039daf","#e22451"],["#25e3bb","#e0ffc4","#afef54","#3e8878","#514541"],["#34454f","#232638","#9d9d72","#5f8172","#e7a06f"],["#c06470","#87596d","#ed6364","#574759","#1b1a1b"],["#d7244e","#ff5375","#fcebaa","#ff8f35","#f7d66a"],["#bbfdc2","#5c4a3d","#7fd3bc","#3b352f","#e5f2b9"],["#474e70","#010000","#767674","#a0ac87","#ffffff"],["#ff1068","#8f8f90","#ecebed","#24020e","#9d1f4c"],["#66245c","#6aa5a5","#e6eaa4","#a9c3a2","#616282"],["#4a4c4c","#7b6f53","#e3ca93","#302c20","#b3a075"],["#928754","#95a782","#d4ce9d","#d8523e","#76362c"],["#8bb2d0","#bed2df","#feffff","#e5ebf1","#4181aa"],["#795c3f","#fb4a00","#1f1e1e","#fbf9fa","#cdbcad"],["#410402","#fd0457","#09acba","#efedcb","#fe8a06"],["#fec998","#76c9a3","#423a3b","#f8f0a3","#b9c99a"],["#67ad91","#631f5f","#eed48e","#c3c093","#695f78"],["#fd857d","#ee9c91","#bdd8bf","#d3b9a2","#e3e8cc"],["#4d6c65","#5a5742","#ec834e","#ece1c6","#eacb6f"],["#2a2625","#09506e","#7ead92","#bbcda3","#008890"],["#aec8ba","#ffe2c9","#fba79d","#988c81","#fbc8b3"]]);if(isNode&&(module.exports=colours(Math)),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var corona_sine=function(){return function(){var f,n,u,h,m,v,s,a,p,g,r,b,y,x=rand.instance(),w=colours.instance(x,"v1"),c=!1,M={layers:{label:"Layers",min:1,max:30,cur:0,type:"Number"},rays:{label:"Rays",min:12,max:312,cur:0,type:"Number"},background:{type:"Boolean",label:"Background",cur:!0}};function l(e,t,n,a,r){if(!(n-t<a/4))if(c){var o=["M",t,",",-a," L",n,-a," C",n+1.6*a,",",-a," ",n+1.6*a,",",a," ",n,",",a," L",n,",",a," L",t,",",a," C",t-1.6*a,",",a," ",t-1.6*a,",",-a," ",t,",",-a].join(""),i=dom.svg("path",{d:o,fill:r,transform:"translate("+[u/2,h/2]+") rotate("+180*e/Math.PI+")"});s.appendChild(i)}else v.save(),v.translate(u/2,h/2),v.rotate(e),v.beginPath(),v.fillStyle=r,v.moveTo(t,-a),v.lineTo(n,-a),v.arc(n,0,a,-Math.PI/2,Math.PI/2,!1),v.lineTo(n,a),v.lineTo(t,a),v.arc(t,0,a,Math.PI/2,-Math.PI/2,!1),v.fill(),v.closePath(),v.restore()}function E(e,t,n,a,r){for(var o=M.layers.cur,i=e*Math.PI*2,s=function(e,t){for(var n=0,a=0;a<b;a++)n+=(Math.sin(y[a].offset+t*y[a].speed+e*y[a].phase)+1)/2;return n/b}(i,t),c=0;c<o;c++){l(i,n+s*a*g[c]+2*r,n+s*a*g[c+1]-2*r,r,p[c])}}function o(o){o||(o=0),w.getRandomPalette(),r=w.getRandomColour();var e=M.layers.cur,i=M.rays.cur;p=[],g=[0];for(var t=0;t<e;t++)p.push(w.getNextColour()),g.push(x.random());g.sort(),g[e]=1,b=~~(1+13*x.random()),y=[];for(var n=0;n<b;n++)y.push({offset:x.random()*Math.PI*2,phase:~~(6*x.random()),speed:.003*x.random()});M.background.cur?(v.fillStyle=r,v.fillRect(0,0,u,h)):v.clearRect(0,0,u,h);var a=h<u?h:u,s=a/2*.2,c=a/2*1-s,l=s*Math.tan(1/i/2*Math.PI*2),d=100;!function e(t){var n=t*d,a=n+d;i<a&&(a=i);for(var r=n;r<a;r++)E(r/i,o,s,c,l);a<i?(f("render:progress",a/i),setTimeout(function(){e(t+1)},100)):f("render:complete",m)}(0)}return"undefined"!=typeof window&&(u=window.innerWidth,h=window.innerHeight),c?(m=dom.svg("svg",{width:u,height:h}),s=dom.svg("g"),m.appendChild(s),a=v=m):(a=dom.canvas(100,100),m=a.canvas,v=a.ctx),{stage:m,render:o,init:function(e){var t=arguments;f=e.progress||function(){console.log("corona_sine - no progress defined",t)},x.setSeed(e.seed),n=e.size,u=e.sw||n,h=e.sh||n,a.setSize(u,h),(new Date).getTime(),M.layers.cur=~~(1+4*x.random()),M.rays.cur=~~(12+300*x.random()),e.settings&&(M=e.settings),f("settings:initialised",M),o(0)},settings:M,update:function(e,t){x.setSeed(t),x.random(),x.random(),M=e,o()}}}};isNode?module.exports=corona_sine():define("corona_sine",corona_sine);con=console;var arachnid=function(){var e={body:{range:0,baserot:0,length:0,offset:0},a2:{range:0,baserot:1.959,length:90,offset:1.368},b2:{range:.333,baserot:1.22,length:105,offset:.7},c2:{range:.4,baserot:.333,length:53,offset:4.99},a1:{range:.2,baserot:-2,length:90,offset:0},b1:{range:.2,baserot:5.433,length:90,offset:1.6},c1:{range:.7,baserot:.4,length:53,offset:1.6},a3:{range:.7020000000000001,baserot:2.994,length:46,offset:2.846},b3:{range:.333,baserot:0,length:58,offset:5.655},c3:{range:.48,baserot:5.803,length:55,offset:3.807}};return{body:[{name:"body",parent:null,movement:e.body,phase:0},{name:"a1",parent:"body",movement:e.a1,phase:0},{name:"b1",parent:"a1",movement:e.b1,phase:0},{name:"c1",parent:"b1",movement:e.c1,phase:0},{name:"a2",parent:"body",movement:e.a2,phase:0},{name:"b2",parent:"a2",movement:e.b2,phase:0},{name:"c2",parent:"b2",movement:e.c2,phase:0},{name:"a3",parent:"body",movement:e.a3,phase:0},{name:"b3",parent:"a3",movement:e.b3,phase:0},{name:"c3",parent:"b3",movement:e.c3,phase:0}],limbs:e}};(isNode="undefined"!=typeof module)?module.exports=arachnid():define("arachnid",arachnid);con=console;if(isNode="undefined"!=typeof module){dom=require("./dom.js");var fs=require("fs")}var creature_creator=function(){var f,u,h=400,m=400,l=150,d=m-50,v=10,p={},g=[];function b(o){var e=o.parent;e&&(o.parent=p[e],e=o.parent);var i={};isNode||(i=dom.element("div",{style:{width:o.movement.length,height:v,background:"rgba(255,0,0,0.5)",transformOrigin:"0 "+v/2+"px",position:"absolute"}}),e&&e.div&&e.div.appendChild(i));var t=function(e){var t=e.parent,n=e.movement.length,a=e.movement.baserot-e.movement.range,r=e.movement.baserot+e.movement.range,o=dom.element("div",{id:e.name,className:"limb"}),i=dom.element("div",{id:e.name+"-joint",className:"joint"});t?t.divJoint.appendChild(o):document.body.appendChild(o),o.appendChild(i);var s=["0% {transform: rotate("+a+"rad);}","50% {transform: rotate("+r+"rad);}","100% {transform: rotate("+a+"rad);}"],c=["0% {transform: translate("+n+"px,0px) rotate("+-a+"rad);}","50% {transform: translate("+n+"px,0px) rotate("+-r+"rad);}","100% {transform: translate("+n+"px,0px) rotate("+-a+"rad);}"],l=-2*(e.movement.offset+e.phase)/(2*Math.PI)-.63,d=e.name+"-animation 2s "+l+"s ease-in-out infinite;",f=e.name+"-joint-animation 2s "+l+"s ease-in-out infinite;";return{divKeyframe:o,divJoint:i,css:["#"+e.name+" {","width: "+e.movement.length+"px;","height: "+v+"px;","animation: "+d,"-webkit-animation: "+d,"};","@keyframes "+e.name+"-animation {",s.join(""),"}","@-webkit-keyframes "+e.name+"-animation {",s.join(""),"}","#"+e.name+"-joint {","animation: "+f,"-webkit-animation: "+f,"};","@keyframes "+e.name+"-joint-animation {",c.join(""),"}","@-webkit-keyframes "+e.name+"-joint-animation {",c.join(""),"}"]}}(o),n=t.css,a=t.divKeyframe,r=t.divJoint;return{name:o.name,options:o,div:i,css:n,divKeyframe:a,divJoint:r,pos:{sx:0,sy:0,ex:0,ey:0},calc:function(e){var t=o.movement.baserot+Math.sin(e+o.movement.offset+o.phase)*o.movement.range;return this.position(t),Math.max(this.pos.sy,this.pos.ey)},position:function(e){this.osc=e;var t={sx:0,sy:0,ex:0+Math.sin(e)*o.movement.length,ey:0+Math.cos(e)*o.movement.length},n=0,a=e;if(o.parent){var r=o.parent;t.sx+=r.pos.ex,t.sy+=r.pos.ey,t.ex+=r.pos.ex,t.ey+=r.pos.ey,n=r.options.movement.length,a=-r.osc+e}this.translationX=n,this.rotationRad=a,this.pos=t},render:function(e,t){if(u.beginPath(),u.lineWidth=3,u.strokeStyle="#090",u.fillStyle="#0a0",u.moveTo(e+this.pos.sx,t+this.pos.sy),u.lineTo(e+this.pos.ex,t+this.pos.ey),u.stroke(),u.closePath(),u.beginPath(),u.drawCircle(e+this.pos.sx,t+this.pos.sy,v/2),u.drawCircle(e+this.pos.ex,t+this.pos.ey,v/2),u.closePath(),u.fill(),!isNode){var n=o.parent,a=n?this.translationX:t,r=n?0:h/2;i.style.transform="translate("+a+"px,"+r+"px)rotate("+this.rotationRad+"rad)"}}}}function y(e){for(var t in g)g[t].newValue&&g[t].newValue!=g[t].value&&(g[t].value-=.1*(g[t].value-g[t].newValue),g[t].dispatchEvent(new Event("change")));var n=isNode?e/50*Math.PI:e*Math.PI/1e3;u.fillStyle="#030",u.fillRect(0,0,h,m),u.fillStyle="#432",u.fillRect(l-h/2,d,h,10);var a=0;for(var r in p)a=Math.max(a,p[r].calc(n));var o,i,s=l,c=d-a-v/2;for(r in p)p[r].render(s,c);isNode?(o=f.canvas,i=e,o.toBuffer(function(e,t){if(e)con.log(e);else{var n=__dirname+"/../export/running_man/runningman"+(10+i)+".png";fs.writeFile(n,t,function(){con.log("writeFile",n)})}}),e<49&&setTimeout(function(){y(++e)},50)):requestAnimationFrame(y)}return{stage:null,inner:null,resize:function(){},init:function(e,t,n,a){for(var r in f=e,u=t,p={},n){var o=n[r];p[o.name]=b(o)}if(con.log(p),!isNode){!function(d){var a=dom.element("div",{id:"editor",style:{color:"white","font-size":"10px",position:"absolute",top:10,left:h}}),e=dom.element("pre",{id:"output",style:{position:"absolute",top:0,left:270}});function f(){e.innerHTML="var limbs = "+JSON.stringify(d,null,"\t")+";"}function t(e,n,a){var r=.001,t=2*Math.PI/r;"length"===a&&(t=200,r=1);var o=d[n][a],i=dom.element("div",{style:{margin:2}}),s=dom.element("div",{innerHTML:n+" "+a+":",style:{display:"inline-block",textAlign:"right",width:100}}),c=dom.element("input",{value:o/r,min:0,max:t,type:"range",style:{width:100}}),l=dom.element("input",{value:o,type:"number",style:{width:50}});return e.appendChild(i),i.appendChild(s),i.appendChild(c),i.appendChild(l),c.addEventListener("change",function(e){var t=parseFloat(e.target.value)*r;d[n][a]=t,l.value=t,f()}),c}for(var n in f(),d){var r=dom.element("div",{style:{background:"#333","margin-bottom":5}});for(var o in a.appendChild(r),d[n])g.push(t(r,n,o))}function i(e,t){var n=dom.element("button",{innerHTML:e});a.appendChild(n),n.addEventListener("click",t)}i("Random",function(e){for(var t in g)g[t].value=g[t].value*(.8+.4*Math.random()),g[t].dispatchEvent(new Event("change"))}),i("Morph",function(e){for(var t in g)g[t].newValue=g[t].value*(.8+.4*Math.random())}),document.body.appendChild(a),a.appendChild(e)}(a);var i=dom.element("div",{id:"nested",style:{position:"absolute",left:0,top:m,width:m,height:h,transform:"rotate(-90deg)scale(-1,1)",background:"rgba(255,0,0,0.2)"}});document.body.appendChild(i),i.appendChild(p.body.div);var s=dom.element("div",{id:"keyframes",style:{position:"absolute",top:2*m,left:0,width:m,height:h,transform:"rotate(-90deg)scale(-1,1)",background:"rgba(0,0,255,0.2)"}});document.body.appendChild(s),s.appendChild(p.body.divKeyframe);var c=document.createElement("style"),l=["body {","overflow: auto;","}","#body {","left: "+m/2+"px;","top: "+h/2+"px;","}",".limb {","background: rgba(0,0,200,0.8);","position: absolute;","transform-origin: center left;","transform-style: preserve-3d;","}",".joint {","background: rgba(0,0,255,0.9);","height: 0;","position: absolute;","transform-origin: center center;","width: 0;","}"];for(var d in p)l=l.concat(p[d].css);c.innerText=l.join(" "),document.head.appendChild(c)}y(0)},kill:function(){}}};isNode?module.exports=creature_creator():define("creature_creator",creature_creator);con=console;var creature=function(){var n=dom.canvas(400,400),a=n.ctx;return require.config({paths:{arachnid:"creature_creator/arachnid",creature_creator:"creature_creator/creature_creator",human:"creature_creator/human"}}),require(["creature_creator","human"],function(e,t){e.init(n,a,t.body,t.limbs)}),{stage:n.canvas,inner:null,resize:function(){},init:function(){},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=creature():define("creature",creature);con=console;function human(){var e={body:{range:0,baserot:0,length:0,offset:0},torso:{range:0,baserot:3.141592653589793,length:100,offset:0},thigh:{range:1,baserot:.3,length:90,offset:0},calf:{range:-.6,baserot:-.9,length:90,offset:1.6},foot:{range:.5,baserot:1.4,length:25,offset:0},bicep:{range:.9,baserot:-.5,length:70,offset:0},forearm:{range:1.5,baserot:1.5,length:60,offset:-.3}};return{body:[{name:"body",parent:null,movement:e.body,phase:0},{name:"torso",parent:"body",movement:e.torso,phase:0},{name:"thigh1",parent:"body",movement:e.thigh,phase:0},{name:"calf1",parent:"thigh1",movement:e.calf,phase:0},{name:"foot1",parent:"calf1",movement:e.foot,phase:0},{name:"thigh2",parent:"body",movement:e.thigh,phase:Math.PI},{name:"calf2",parent:"thigh2",movement:e.calf,phase:Math.PI},{name:"foothigh2",parent:"calf2",movement:e.foot,phase:Math.PI},{name:"bicep1",parent:"torso",movement:e.bicep,phase:0},{name:"forearm1",parent:"bicep1",movement:e.forearm,phase:0},{name:"bicep2",parent:"torso",movement:e.bicep,phase:Math.PI},{name:"forearm2",parent:"bicep2",movement:e.forearm,phase:Math.PI}],limbs:e}}(isNode="undefined"!=typeof module)?module.exports=human():define("human",human),define("cube_fractal_zoom",function(){var t,n,a,v,r,i,s,d,f,p=200,u=1.2*p,o=window.innerWidth,c=window.innerHeight,h={};function g(e,t){return{xi:e%t-t/2+.5,yi:Math.floor(e/t)%t-t/2+.5,zi:Math.floor(e/t/t)-t/2+.5}}function l(e){var t=[],n=new THREE.Group;v.add(n);var a,r,o=new THREE.Group;n.add(o);for(var i=0;i<e*e*e;i++){var s=(void 0,a=new THREE.MeshPhongMaterial({color:9470064,specular:16777215,shininess:50}),r=new THREE.BoxGeometry(p,p,p),new THREE.Mesh(r,a));o.add(s);var c=g(i,e),l=c.xi,d=c.yi,f=c.zi,u=l*p,h=d*p,m=f*p;s.position.set(u,h,m),t.push(s)}return{group:n,inner:o,num:e,grid:t}}function m(){d.group.scale.set(.001,.001,.001);var e=f.num;TweenMax.to(f.group.scale,2.5,{x:e,y:e,z:e,ease:Quad.easeInOut});var t=.5*u,n=.5*u,a=.5*u;TweenMax.to(f.inner.position,2,{x:t,y:n,z:a,ease:Quad.easeInOut}),f.grid.forEach(function(e,t){var n=g(t,f.num),a=n.xi,r=n.yi,o=n.zi,i=a*u,s=r*u,c=o*u;TweenMax.to(e.position,1.5,{x:i,y:s,z:c,ease:Quad.easeInOut,delay:1})}),h={x:rand.getNumber(-Math.PI,Math.PI),y:rand.getNumber(-Math.PI,Math.PI),z:rand.getNumber(-Math.PI,Math.PI)},TweenMax.to(f.group.rotation,2.5,{x:h.x,y:h.y,z:h.z,ease:Quad.easeInOut,onComplete:b})}function b(){d.group.scale.set(1,1,1),d.group.rotation.set(h.x,h.y,h.z);var l=4*u;f.grid.forEach(function(e,t){var n=g(t,f.num),a=n.xi,r=n.yi,o=n.zi,i=a*l,s=r*l,c=o*l;0!=t&&(TweenMax.to(e.position,2.5,{x:i,y:s,z:c,ease:Quad.easeIn}),TweenMax.to(e.rotation,2.5,{x:rand.getNumber(-2,2),y:rand.getNumber(-2,2),z:rand.getNumber(-2,2),ease:Quint.easeIn})),TweenMax.to(e.scale,2.5,{x:0,y:0,z:0,ease:Quint.easeIn})}),TweenMax.to({},2.5,{onComplete:e})}function e(){var e=f;f=d,(d=e).group.scale.set(.001,.001,.001),d.inner.position.set(0,0,0),d.grid.forEach(function(e,t){var n=g(t,d.num),a=n.xi,r=n.yi,o=n.zi,i=a*p,s=r*p,c=o*p;e.position.set(i,s,c),e.rotation.set(0,0,0),e.scale.set(1,1,1)}),setTimeout(m,1e3)}function y(o){function e(e,t,n,a){var r=o+1e4;e.position.set(Math.sin(r*t*4e-5),Math.sin(r*n*4e-5),Math.sin(r*a*4e-5))}e(r,15,17,12),e(i,14,19,13),e(s,20,18,16),v.rotation.z+=.005,v.rotation.x+=.001,a.render(n,t),requestAnimationFrame(y)}return{init:function(){n=new THREE.Scene,t=new THREE.PerspectiveCamera(100,o/c,1,2e4),n.add(t),t.position.set(0,0,1500),t.lookAt(n.position),r=new THREE.DirectionalLight(16711680,1),n.add(r),i=new THREE.DirectionalLight(12623872,1),n.add(i),s=new THREE.DirectionalLight(16750848,1),n.add(s),(a=new THREE.WebGLRenderer({antialias:!0})).setSize(o,c),v=new THREE.Group,n.add(v);var e=new THREE.AmbientLight(16769248,.2);n.add(e),f=l(2),d=l(2),document.body.appendChild(a.domElement),y(0),setTimeout(m,1500)}}}),define("cube_pixelator",[],function(){var m,v,p,g,b=48,y=8,x=10,t={x:0,y:0,z:0},w=window.innerWidth,M=window.innerHeight,E=[],r=[],c=[],n=0;function o(e,i){var s=new Image;s.onload=function(){if(s.width!=s.height)throw new Error("squares only mate!");var e=b/s.width,t=dom.canvas(b,b).ctx;t.scale(e,e),t.drawImage(s,0,0);for(var n=[],a=t.getImageData(0,0,b,b).data,r=0;r<a.length;r+=4){var o=a[r];n.push({rotation:o/255})}c.push(n),progress("render:progress",c.length/4),setTimeout(i,100)},s.src="./assets/"+e+".jpg"}function i(){v=new THREE.Scene,m=new THREE.PerspectiveCamera(90,w/M,1,2e4),v.add(m);var e=new THREE.DirectionalLight(16777215,1);e.position.set(0,1,.5),v.add(e);var t=new THREE.DirectionalLight(15787425,.5);t.position.set(-1,.5,.5),v.add(t);var n,a,r,o,i,s=new THREE.DirectionalLight(3158064,.2);s.position.set(0,-1,.25),v.add(s),(p=new THREE.WebGLRenderer({antialias:!0})).setSize(w,M),g=new THREE.Group,v.add(g);for(var c=0;c<b*b;c++){var l=(a=n=y,r=16777215,void 0,o=new THREE.PlaneGeometry(n,a,1),i=new THREE.MeshLambertMaterial({color:r}),new THREE.Mesh(o,i));g.add(l);var d=c%b-b/2+.5,f=Math.floor(c/b)-b/2+.5,u=d*x,h=-f*x;l.position.set(u,h,0),l.rotateSpeed=Math.random()-.5,E.push(l)}document.body.appendChild(p.domElement),S(0),setInterval(T,6e3),progress("render:complete",p.domElement)}var T=function(){n++,n%=c.length,con.log("toggleImage",n);for(var e=c[n].slice(),t=0;t<b*b;t++)TweenMax.to(r[t],3,{rotation:e[t].rotation,easing:Back.easeInOut,delay:.001*t})};function S(e){E.forEach(function(e,t){e.rotation.x=Math.PI/4-r[t].rotation*Math.PI/3}),t.x=0+50*Math.sin(12e-5*e),t.y=0+50*Math.sin(17e-5*e),t.z=400+300*Math.sin(1e-4*e),m.position.set(t.x,t.y,t.z),m.lookAt(v.position),p.render(v,m),requestAnimationFrame(S)}return{init:function(){for(var e=0;e<b*b;e++)r.push({rotation:Math.random()});var t=function(){return o("marilyn",n)},n=function(){return o("hicks",a)},a=function(){setTimeout(i,200)};o("cash",t)}}});isNode="undefined"!=typeof module;var createCanvas=void 0;isNode&&(createCanvas=require("canvas").createCanvas);var setProps=function(e,t){for(var n in t)if("style"==n)for(var a in t[n])e[n][a]=t[n][a];else e[n]=t[n];return e},setAttributes=function(e,t){for(var n in t)e.setAttribute(n,t[n]);return e},element=function(e,t){var n=document.createElement(e);return setProps(n,t),n.setSize=function(e,t){n.style.width=e+"px",n.style.height=t+"px"},n},button=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.innerHTML&&console.warn("Specify button text as 1st param"),t.innerHTML=e,element("button",t)},svg=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return setAttributes(n,t),n.setSize=function(e,t){n.setAttribute("width",e),n.setAttribute("height",t)},n.clearRect=function(){},n.fillRect=function(){console.warn("svg.fillRect not implemented")},n},on=function(t,e,n){e.forEach(function(e){t.addEventListener(e,n)})},off=function(t,e,n){e.forEach(function(e){t.removeEventListener(e,n)})},trigger=function(t,e){e.forEach(function(e){t.dispatchEvent(e)})};dom={button:button,canvas:canvas=function(e,t){t=t||e;var a=void 0;isNode?a=createCanvas(e,t):((a=element("canvas")).width=e,a.height=t);var r=a.getContext("2d"),o=2*Math.PI;r.drawCircle=function(e,t,n){r.arc(e,t,n,0,o,!1)};return{setSize:function(e,t,n){n?a.setSize(e,t):(a.width=e,a.height=t)},canvas:a,ctx:r}},element:element,off:off,on:on,setProps:setProps,setAttributes:setAttributes,svg:svg,trigger:trigger};isNode&&(module.exports=dom);var experiment_template_babel=function(){var t=dom.canvas(1,1),e=t.canvas,n=t.ctx,a=void 0,r=void 0,o=void 0,i=function(e){o=e.size,a=e.sw||o,r=e.sh||o,t.setSize(a,r),colours.getRandomPalette(),s()},s=function(){n.fillRect(0,0,a,r);for(var e=[];e.length<4;)e.push({x:rand.getNumber(.1,.9),y:rand.getNumber(.1,.9)});var t=geom.intersectionBetweenPoints.apply(null,e);t&&e.push(t),e.forEach(function(e){n.fillStyle=colours.getNextColour(),n.beginPath(),n.drawCircle(e.x*a,e.y*r,15),n.fill()})};return progress("render:complete",e),{init:i,render:s,settings:{},stage:e,update:function(e){i({size:o,settings:e})}}};(isNode="undefined"!=typeof module)?module.exports=experiment_template_babel():define("experiment_template_babel",experiment_template_babel);var experiment_template=function(){Math.PI;var t,n,a,r=dom.canvas(1,1),o=r.ctx;var e={stage:r.canvas,init:function(e){size=e.size,t=e.sw||size,sh=e.sh||size,r.setSize(t,sh),n=t/2,a=sh/2,o.clearRect(0,0,t,sh),o.fillStyle="#0f0",o.fillRect(n-20,a-20,40,40)}};return progress("render:complete",r.canvas),e};(isNode="undefined"!=typeof module)?module.exports=experiment_template():define("experiment_template",experiment_template),define("exps_details",function(){var t={ball_and_chain:{title:"Ball and Chain",description:"<p>In the celebration of the <a href='http://www.abc.net.au/news/2017-11-15/australia-reacts-to-the-same-sex-marriage-survey-results/9151826' target='_blank'>Yes</a> Vote, started making this ball and chain in THREE + Cannon. Took a bit longer than expected, hopefully I can make a rainbow happy one for legalisation day.</p><p>Something along the lines of \"It's raining ball and chains\"</p>"},cube_fractal_zoom:{title:"Cube Fractal Zoom",description:"<p>Zooming into a cube that subdivides into muliple cubes.</p><p>Envisioned version is for each subdivision to be variable slice amounts rather than 2x2x2. Someday.</p><p>Also would like some kind of infinite shader, potentially perlin noise.</p>"},cube_pixelator:{title:"Cube pixelator",description:"<p>Should be called 'Plane pixelator' since they are planes, not cubes.</p><p>Planes are distributed through a 2 dimensional grid with each plane representing a pixel.</p><p>Each plane is exactly the same colour and this colour never changes. Instead, each plane rotates accordingly to catch the lighting within the scene and by doing so adapts its apparent shade, and thereby creates an image.</p>"},frame_inverse:{title:"Frame Inverse",description:"<p>Drawing rectangles, aye...</p><p>listen to <a href='https://youngerbrothermusic.bandcamp.com/album/the-last-days-of-gravity' target='_blank'>Younger Brother - Last Days of Gravity</a>.</p>"},fur:{title:"Fur",description:"<p>2 channels of perlin noise affect x and y lean of each hair of fur.</p>"},hex_rounded:{title:"Hex Rounded",description:"<p>Hex Rounded? Some title, but that's what it's been dubbed since inception in 2014 or so. Never worked properly, so fixed it up for Codevember 2017.</p>"},infinite_scrolling_cogs:{title:"Infinite Scrolling Cogs",description:"<p>Remake of <a href='https://codepen.io/raurir/pen/eknLg' target='_blank'>an old experiment</a> this time it's scrolling, non ineractive and more of a toon rendering style.</p><p>The thing I liked the best about the original, and this algorithm, is the cogs are very close to mathematically correct; not only do they animate in a life like fashion on screen, I am confident a 3D print of the geometry involved would result in a smoothly running friction free machine.</p><p>This algorithm continually creates canvases with no garbage collection. It will crash the browser eventually, I imagine, but you'd be bored after a minute anyway?</p>"},infinite_stairs:{title:"Infinite Stairs",description:"<p>Work in progress</p><p>Trying to make an infinite staircase, potentially spooky.</p>"},isometric_words:{title:"Isometric Words",description:"<p>Muddling up cubes by using the simplicity of Isometric projection.</p><p>Randomly offset the objects along the same axis the camera is looking down.</p>"},interpolated:{title:"Interpolated",description:"<p>FXhash exp</p>",srcHidden:!0},lego_stack:{title:"Lego Stack",description:"<p>Important scientifically realistic simulation to study how high lego can be stacked.</p>"},recursive_circle:{title:"Recursive Circle",description:"<p>Recursive rendering. Managed to not crash my browser creating this! Life achievement.</p>"},seven_four_sevens:{title:"Seven Four Sevens",description:"<p>An old flash experiment remade in javascript.</p><p>Thanks to the demise of flash I will lose heaps of graphical experiments, some irretrievably lost due to inability to open .FLAs - luckily this one had the source in a .as file.</p>"},synth_ambient:{title:"Synth Ambient",description:"<h2>This will be loud!</h2><p>A quick trip into audio synthesis in the browser.</p><p>That's the thing about synthesis, you can create out of control waveforms quite easily, hence the volume.</p><p>Using <a href='https://github.com/Tonejs/Tone.js' target='_blank'>Tone.js</a> for all the audio generation, this experiment creates a number of randomised effects, a bunch of randomised synthesizers, and with those creates a randomised drum track, randomised chords and a ranomised arpeggio.</p>"},triangles:{title:"Triangles",description:"<p>A plane of triangles fall away as they zoom towards the screen.</p><p>Probably a bit heavy for phones.</p>"}};return{list:[["additive"],["aegean_sun"],["alien"],["aristotle"],["attractor"],["ball_and_chain","THREE"],["bezier_flow"],["box","maze"],["circle_packing"],["circle_sectors"],["codevember","THREE","TweenMax"],["corona_sine"],["creature"],["cube_fractal_zoom","THREE","TweenMax"],["cube_pixelator","THREE","TweenMax"],["fool","css:fool"],["fur"],["frame_inverse"],["hexagon_tile"],["hex_rounded","THREE"],["infinite_scrolling_cogs"],["isometric_cubes"],["isometric_words","THREE","TweenMax"],["interpolated","lagrange"],["lego_stack","THREE"],["linked_line"],["mandala"],["maze"],["maze_cube","linked_line","THREE"],["meandering_polygons"],["mining_branches"],["molecular_three","THREE"],["nested_rotating_polygon","ease"],["oscillate_curtain"],["oscillator"],["overflow"],["pattern_check","css:pattern_check"],["pattern_circles"],["perlin_dots"],["perlin_grid","THREE","TweenMax"],["perlin_leaves"],["perlin_noise"],["polygon_slice"],["polyhedra_three","THREE","../lib/stemkoski/polyhedra"],["pine_three","THREE"],["race_lines_three","THREE","TweenMax"],["rainbow_particles"],["rectangular_fill"],["recursive"],["recursive_circle"],["recursive_polygon"],["reddit_proc_gen"],["seven_four_sevens"],["spiral_even"],["squaretracer"],["squash_match_shirt","fill/stripes","fill/dither"],["synth_ambient","Tone"],["tea"],["tentacle"],["tessellation"],["tetris_cube","THREE","TweenMax"],["text_grid"],["triangles","THREE","TweenMax"],["tunnel_tour_three","THREE","TweenMax"],["typography"],["voronoi_stripes","voronoi","fill/stripes","fill/dither"],["zoned_particles"]],getDetails:function(e){return t[e]||!1},getFeature:function(e){return{codevember:[{day:1,title:t.cube_pixelator.title,link:"cube_pixelator"},{day:2,title:t.synth_ambient.title,link:"synth_ambient"},{day:3,title:"Refactored Experiments"},{day:4,title:"Made Codevember"},{day:5,title:"fail :("},{day:6,title:t.isometric_words.title,link:"isometric_words"},{day:7,title:"fail ..."},{day:8,title:t.cube_fractal_zoom.title,link:"cube_fractal_zoom"},{day:9,title:t.infinite_scrolling_cogs.title,link:"infinite_scrolling_cogs"},{day:10,title:"nope :|"},{day:11,title:t.infinite_stairs.title,link:"infinite_stairs"},{day:12,title:"much fail."},{day:13,title:t.seven_four_sevens.title,link:"seven_four_sevens"},{day:14,title:t.triangles.title,link:"triangles"},{day:15,title:"very..."},{day:16,title:"...lame!"},{day:17,title:t.ball_and_chain.title,link:"ball_and_chain"},{day:18,title:t.fur.title,link:"fur"},{day:19,title:t.recursive_circle.title,link:"recursive_circle"},{day:20,title:t.lego_stack.title,link:"lego_stack"},{day:21,title:t.hex_rounded.title,link:"hex_rounded"},{day:22,title:"faily McFail O'clock"},{day:23,title:t.frame_inverse.title,link:"frame_inverse"}]}[e]||!1}}});_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var progressBar,progress=function(e,t){switch(console.log("experiments progress",e,t),e){case"render:progress":progressBar.style.width=100*t+"%",progressBar.style.height="10px";break;case"render:complete":progressBar.style.height="0px"}},exps=function(R){var C=R.list;return function(){var t=Math.floor(360*Math.random());document.documentElement.style.setProperty("--colour-accent","hsl("+t+", 100%, 60%)"),document.documentElement.style.setProperty("--colour-accent-20","hsla("+t+", 100%, 60%, 0.2)");var f,n,u,h=!1,m=!1,v=null,p=2e3;progressBar=dom.element("div",{id:"progress",style:{width:0,height:0}}),document.body.appendChild(progressBar);var a=dom.element("div",{id:"experiment-holder"});document.body.appendChild(a);var o=dom.element("div",{id:"experiment-list"});document.body.appendChild(o);var g=dom.element("div",{className:"exps-buttons"});document.body.appendChild(g);var i=dom.button("X",{className:"exps-button"});g.appendChild(i),dom.on(i,["click","touchend"],function(){window.location="/"+(m?"?src":"")});var b=dom.button("",{className:"exps-button"});g.appendChild(b);var y=dom.button("?",{className:"exps-button"});g.appendChild(y),dom.on(y,["click","touchend"],function(){return l()});var e=dom.element("div",{className:"exps-info"}),r=dom.element("div",{className:"exps-info-details"}),s=dom.element("div",{className:"exps-buttons interacted"}),c=dom.button("X",{className:"exps-button"});dom.on(c,["click","touchend"],function(){return d()}),document.body.appendChild(e),e.appendChild(s),s.appendChild(c),e.appendChild(r);var x=function(e){var r="css:",t=C[e];t.toString().includes(r)&&(t=t.filter(function(e){var t,n,a=e.includes(r);return a&&(t=e.replace(r,""),(n=dom.element("link")).rel="stylesheet",n.type="text/css",n.href="css/"+t+".css",document.head.appendChild(n)),!a})),require(t,function(e){e?S(e):console.warn("require loaded... but experiment is null",e)})},w=function(){for(var e in i.style.display="none",y.style.display="none",C){var t=dom.element("button",{className:"exp"});dom.on(t,["click"],function(e){window.location="?"+e.target.key+(m?"&src":"")});var n=C[e][0],a=n,r=R.getDetails(n);r&&r.title&&(a=r.title),t.key=n,a.includes(" ")||(a=a.replace(/_/g," ").split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")),t.innerHTML=a,o.appendChild(t)}},l=function(){e.classList.add("displayed"),r.innerHTML="\n<h4>EXPGFX</h4>\n<h1>"+f.title+"</h1>\n"+f.description+"\n"+(f.srcHidden?"":"<p><a href='https://github.com/raurir/experimental-graphics/blob/master/src/"+f.key+".js' target='_blank'>SRC on Github</a></p>")},d=function(){e.classList.remove("displayed")};if(h){var M=!1;new MutationObserver(function(e){e.forEach(function(e){h&&e.addedNodes.forEach(function(e){console.log("firstNode",M),M||(console.log("observer",e),e.parentElement!==a?(console.log("adding"),M=!0,a.appendChild(e)):console.log("not adding"))})})}).observe(document.body,{childList:!0,subtree:!0})}var E,T=function(){var e=window.innerWidth,t=window.innerHeight;E&&E.resize(e,t),n&&n.resize&&n.resize(e,t)},S=function(e){(n="function"==typeof e?e("svg"===v):e).stage?a.appendChild(n.stage):console.warn("experimentLoaded, but no stage:",n.stage),n.init({progress:progress,seed:u,size:p}),T()};return function(){if(window.location.search){var e=window.location.search.split("?")[1].split("&"),t=e[0],n=0,a=!1,r=t.split(",");m=0<e.filter(function(e){return"src"===e}).length;var o=e.filter(function(e){return e.startsWith("size=")}),i=e.filter(function(e){return e.startsWith("format=")});if(m&&console.log("`src` in url: Experimental graphics in SRC mode..."),"src"===t)return w();if(r[1]&&(t=r[0],u=r[1],rand.setSeed(u),console.log("setting seed",u)),1===o.length){var s=o[0].split("="),c=_slicedToArray(s,2)[1];isNaN(c)?console.warn("size invalid",c):(p=Math.max(100,Math.min(Number(c),1e3)),console.log("setting size",p))}if(1===i.length){var l=i[0].split("="),d=_slicedToArray(l,2)[1];"svg"===d||"bmp"===d?(v=d,console.log("setting format",v)):console.warn("format invalid",d)}for(;n<C.length&&0==a;)C[n][0]==t?a=!0:n++;h=!0,x(n),(f=R.getDetails(t))?f.key=t:g.removeChild(y),dom.on(b,["click","touchend"],function(){window.location="?"+t+","+Math.round(1e10*Math.random())+(m?"&src":"")}),document.body.classList.add("experiment-active"),g.classList.add("interacted")}else w()}(),dom.on(window,["resize"],function(){return T()}),h||require(["meandering_polygons"],function(e){E=e,a.appendChild(e.stage),e.stage.style.opacity=.2,e.init({transparentBg:!0,randomHue:t})}),{load:x,experiments:C}}};if(define("exps",["exps_details"],exps),isNode="undefined"!=typeof module)dom=require("../dom.js");var shapes=[1,2,3,4,5,6],fillDither=function(e){var t=e.c,n=e.r,a=e.size,r=e.settings,o=Object.keys(e).sort().join(",");"c,r,settings,size"!==o&&console.warn("fillDither `args` are not ok... received:",o);var i=Object.keys(r).sort().join("\n");"alternate\nbaseRotation\nbg\nfg\nshape\nvaryRotation\nwiggle"!==i&&console.warn("fillDither argument `settings` is not ok... received:",i);var s=r.alternate,c=void 0===s?.5<n.getNumber(0,1):s,l=r.baseRotation,d=r.bg,f=void 0===d?t.getRandomColour():d,u=r.fg,h=void 0===u?t.getRandomColour(!0):u,m=r.shape,v=void 0===m?shapes[n.getInteger(0,shapes.length-1)]:m,p=r.varyRotation,g=r.wiggle,b=void 0===g?10:g,y=a/2,x=Math.sqrt(y*y*2)-y,w=-x,M=a+2*x,E=dom.canvas(a,a),T=E.ctx,S=E.canvas;T.translate(y,y),T.rotate(l+n.getNumber(0,p)),T.translate(-y,-y),T.fillStyle=f,T.fillRect(w,w,M,M);var R=a/40,C=R,N=R,k=n.getNumber(.5,1);T.fillStyle=h,T.strokeStyle=h;for(var z=void 0,P=w,_=0;P<M;){var I=P/a,H=I*R;if(I<=0)_++,P+=C;else{if(1.1<=I){T.fillRect(w,P,M-w,M-P);break}for(var A=w-(c&&_%2==0?N/2:0);A<M;){var L=b*n.getNumber(-N,N)/2,q=b*n.getNumber(-C,C)/2;if(1===v)T.beginPath(),T.drawCircle(A+L,P+q,.7*H),T.closePath(),T.fill();else if(2===v)T.fillRect(A+L,P+q,H,H);else if(3===v)T.save(),T.translate(A+L,P+q),T.scale(k,1),T.rotate(Math.PI/4),T.fillRect(0,0,H,H),T.restore();else if(4===v)for(z=0;z<5*H;z++){var O=A+Math.random()*N,D=P+Math.random()*C;T.fillRect(O,D,2,2)}else if(5===v){var j=R/2;for(z=0;z<Math.pow(j,2);z++)if(!(Math.random()>I)){var F=A+z%j*2,B=P+2*Math.floor(z/j);T.fillRect(F-.3,B-.3,2.6,2.6)}}else if(6===v)for(z=0;z<H;z++){var W=n.getNumber(0,2*Math.PI),G=I*R*3,V=n.getNumber(1,1)*Math.sin(W)*G,X=n.getNumber(1,1)*Math.cos(W)*G,Y=A+N/2-V,U=P+C/2-X,Q=A+N/2+V,J=P+N/2+X,Z=n.random()<I;T.strokeStyle=Z?h:f,T.lineWidth=Z?4:2,T.beginPath(),T.moveTo(Y,U),T.lineTo(Q,J),T.stroke()}else if(80!==v)throw new Error("no shape!");A+=N}_++,P+=C}}return S};isNode&&(module.exports=fillDither);var fillStripes=function(e){var t=e.c,n=e.r,a=e.size,r=e.settings,o=Object.keys(e).sort().join(",");"c,r,settings,size"!==o&&console.warn("fillStripes `args` are not ok... received:",o);var i=Object.keys(r).sort().join("\n");"baseRotation\nlineGap\nlineScale\nlineSize\noverallScale\npointBias\npointMethod\nsites\nvaryDuotone\nvaryPerLine\nvaryPerRegion\nvaryRotation"!==i&&console.warn("fillStripes argument `settings` is not ok... received:",i),console.log("checkSettings",i);var s=r.baseRotation,c=r.lineGap,l=r.lineScale,d=r.lineSize,f=r.overallScale,u=r.varyDuotone,h=r.varyPerLine,m=r.varyPerRegion,v=r.varyRotation,p=a/2,g=dom.canvas(a,a),b=g.ctx,y=g.canvas;b.translate(p,p),b.rotate(s+n.getNumber(0,v)),b.translate(-p,-p),b.fillStyle=u?(t.setColourIndex(1),t.getCurrentColour()):t.getRandomColour();var x=Math.sqrt(p*p*2)-p;b.fillRect(-x,-x,a+2*x,a+2*x);var w,M=l,E=d,T=c;m&&(M=.5+n.getNumber(0,f),E=1+n.getNumber(0,10)*M,T=2+n.getNumber(0,3)*M),u&&(w=t.getNextColour());for(var S=-x;S<a+x;)h&&(E=1+n.getNumber(0,10)*M,T=2+n.getNumber(0,3)*M),u||(w=t.getRandomColour()),b.fillStyle=w,b.fillRect(-x,S,a+2*x,E),S+=E+T;return y};(isNode="undefined"!=typeof module)&&(module.exports=fillStripes);sw=window.innerWidth,sh=window.innerHeight;var navOpen=!0;function navClass(){return"nav"+(navOpen?" open":"")}var container=dom.element("div",{className:"container",style:{width:sw+"px",height:sh+"px"}}),nav=dom.element("div",{className:navClass()}),navMenu=dom.element("div",{className:"menu"}),navTab=dom.element("div",{className:"tab"}),navIcon=dom.element("ul",{className:"icon",innerHTML:["first","second","third"].map(function(e,t){return"<li class='"+e+"'></li>"}).join("")}),space=dom.element("div",{innerHTML:"Hello World!",className:"space"});container.appendChild(nav),nav.appendChild(navMenu),nav.appendChild(navTab),navTab.appendChild(navIcon),container.appendChild(space),document.body.appendChild(container),navTab.addEventListener("click",function(){navOpen=!navOpen,nav.className=navClass()});var options=[{label:"Hello",items:[{label:"A"},{label:"B"}]},{label:"World"},{label:"There",items:[{label:"May or"},{label:"May not"},{label:"Exist"},{label:"A"},{label:"Situation"}]},{label:"Is",items:[{label:"A Computer"},{label:"Behind you"}]}],itemHeight=20;function navY(e){return(e+options.length)/2*-itemHeight+"px"}function createOption(t){var e=dom.element("div",{className:"main"}),n=dom.element("div",{className:"option",innerHTML:t.label});if(navMenu.appendChild(e),e.appendChild(n),t.items){var a=dom.element("div",{className:"sub-options"});e.appendChild(a);for(var r=0;r<t.items.length;r++){var o=t.items[r],i=dom.element("div",{className:"sub-option",innerHTML:o.label});a.appendChild(i)}n.addEventListener("click",function(e){if(lastSub){if(lastSub==a)return;lastSub.style.height=0}setTimeout(function(){a.style.height=t.items.length*itemHeight+"px"},400),lastSub=a,navMenu.style.marginTop=navY(t.items.length)})}else n.addEventListener("click",function(e){navMenu.style.marginTop=navY(0),lastSub&&(lastSub.style.height=0,lastSub=null)})}var lastSub=null;for(i=0;i<options.length;i++)createOption(options[i]);navMenu.style.marginTop=navY(0),window.addEventListener("resize",function(){sw=window.innerWidth,sh=window.innerHeight,container.setSize(sw,sh)}),define("frame_inverse",function(){var l=window.innerWidth,d=window.innerHeight,f=rand.instance();f.setSeed(Math.random());var t=colours.instance(f),u=f.getInteger(100,300),h=f.getInteger(4,10),n=Math.floor(l*d/200),m=t.getRandomPalette(),a=dom.canvas(l,d),v=a.ctx,p=[],g=0,r=0,e=f.getNumber(0,1),b=null,y=1,x=2,w=3;.9<e?b=y:.8<e?b=x:.7<e&&(b=w);for(var o=0;o<l;){p[o]=[];for(var i=0;i<d;)p[o][i]=0,i++;o++}function M(e,t){return p[e][t]}function s(){if(g<n)if(r%20){requestAnimationFrame(s);for(var e=0;e<2e3;e++)c()}else progress("render:progress",g/n),setTimeout(s,200);else progress("render:complete",a.canvas);r++}function c(){var e=f.getInteger(0,l-1),t=f.getInteger(0,d-1),n=M(e,t),a=f.getNumber(h,u),r=f.getNumber(1,h),o=a,i=r;switch(b){case x:break;case y:o=r,i=a;break;case w:i=o=a;break;default:.5<f.getNumber(0,1)&&(o=r,i=a)}if(!(l<e+o||d<t+i)){for(var s=e;s<e+o;){for(var c=t;c<t+i;){if(M(s,c)!=n)return!1;c++}s++}if(i-=2,1<=(o-=2)&&1<=i)(function(e,t,n,a,r){v.fillStyle=r,v.fillRect(e,t,n,a);for(var o=e+n,i=t+a,s=e;s<o;){for(var c=t;c<i;)p[s][c]=r,c++;s++}g++})(e+1,t+1,o,i,m[parseInt(5*Math.random())])}}return{init:function(){var e=t.getRandomColour();m.splice(m.indexOf(e),1),v.fillStyle=e,v.fillRect(0,0,l,d),s()},stage:a.canvas}}),define("fur",["perlin"],function(e){var u=4,h=20,m=160,v=160,p=m*u,g=v*u,n=dom.canvas(p,g),b=n.ctx,y=e.noise(m,v),x=e.noise(m,v),t=rand.instance();t.setSeed(987654);for(var w=[],a=0,r=m*v;a<r;a++){var o=t.getInteger(125,145),i=t.getInteger(105,125),s=t.getInteger(75,95);w.push({x:4*t.getNumber(-1,1),y:4*t.getNumber(-1,1),colour:"rgba("+o+","+i+","+s+",0.5)"})}function M(e){requestAnimationFrame(M);var t=.002*e,n=y.cycle(t,.004),a=x.cycle(t,.004);b.fillStyle="black",b.fillRect(0,0,p,g);for(var r=0,o=m*v;r<o;r++){var i=r%m,s=Math.floor(r/m),c=n[r]-.5,l=a[r]-.5,d=(w[r].x+i+.5)*u,f=(w[r].y+s+.5)*u;b.strokeStyle=w[r].colour,b.beginPath(),b.moveTo(d,f),b.lineTo(d+15+c*h,f+5+l*h),b.stroke()}}return{resize:function(e,t){n.setSize(e,t,!0)},init:function(){M(0)},stage:n.canvas}}),define("box",function(){con.log("define box");var c,l={up:!1,down:!1,left:!1,right:!1},d=400,f=400,u=40,h=d/u,m=f/u,v=u/2,p=dom.canvas(d,f),a=dom.element("div"),r=dom.element("div",{style:{color:"white"}}),g={x:d/2,y:f/2};function o(e,t){g.x+=t,g.y+=e}function b(){l.left&&(g.x-=1),l.right&&(g.x+=1),l.up&&(g.y-=1),l.down&&(g.y+=1),g.x<0&&(g.x=0),g.x>d&&(g.x=d),g.y<0&&(g.y=0),g.y>f&&(g.y=f);var e=Math.floor((g.x-v/2)/u),t=Math.floor((g.y-v/2)/u),n=Math.floor((g.x+v/2)/u),a=Math.floor((g.y+v/2)/u),r=!0,o=20;"#"===y[t][e]&&(r=!1),"#"===y[a][n]&&(r=!1),!1===r&&(o=60,g.x=c.x,g.y=c.y),c.x=g.x,c.y=g.y;for(var i=0;i<m;i++)for(var s=0;s<h;s++)"#"===y[i][s]&&(p.ctx.fillStyle="rgba("+o+","+o+","+o+",1)",p.ctx.fillRect(s*u,i*u,u,u));p.ctx.fillStyle="rgba(0,0,0,0.4)",p.ctx.fillRect(0,0,d,f),p.ctx.fillStyle="#444",p.ctx.fillRect(g.x-v/2,g.y-v/2,v,v),requestAnimationFrame(b)}var y=null;return{init:function(){con.log("maze init",maze),maze.init(function(){y=maze.getMaze(),con.log("maze",y),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(){o(event.beta,event.gamma)},!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(){o(2*event.acceleration.x,2*event.acceleration.y)},!0):window.addEventListener("MozOrientation",function(){o(50*orientation.x,50*orientation.y)},!0);for(var e=null;null==e;){for(var t=0;t<m;t++)for(var n=0;n<h;n++)"#"!==y[t][n]&&.99995<Math.random()&&(e=!0,c={x:(g={x:n*u+u/2,y:t*u+u/2}).x,y:g.y});con.log("iteration")}!function(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}(["keydown","keyup"],function(e){var t="keydown"===e.type;switch(e.which){case 37:case 100:l.left=t;break;case 38:case 104:l.up=t;break;case 39:case 102:l.right=t;break;case 40:case 98:l.down=t}}),document.body.appendChild(a),a.appendChild(p.canvas),a.appendChild(r),con.log("render"),b()},h,m)},stage:a,resize:function(){}}});var intersectionBetweenPoints=function(e,t,n,a){var r,o,i,s,c,l,d=e.x,f=e.y,u=t.x,h=t.y,m=n.x,v=n.y,p=a.x,g=a.y;return d==m&&f==v?null:d==p&&f==g?null:u==m&&h==v?null:u==p&&h==g?null:(l=((i=p-m)*(f-v)-(s=g-v)*(d-m))/(-i*(o=h-f)+(r=u-d)*s),0<=(c=(-o*(d-m)+r*(f-v))/(-i*o+r*s))&&c<=1&&0<=l&&l<=1?{x:d+l*r,y:f+l*o}:null)},linearEquationFromPoints=function(e,t){var n=t.x-e.x,a=t.y-e.y;if(0==n||-1e-6<n&&n<1e-6)return{c:null,m:0<a?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,x:e.x};var r=a/n;return{c:e.y-r*e.x,m:r}},intersectionAnywhere=function(e,t,n,a){var r,o,i=linearEquationFromPoints(e,t),s=linearEquationFromPoints(n,a),c=null===i.c,l=null===s.c;if(c&&l)return null;if(c)r=i.x,o=s.m*r+s.c;else if(l)r=s.x,o=i.m*r+i.c;else{if(i.m-s.m==0)return null;r=(s.c-i.c)/(i.m-s.m),o=i.m*r+i.c}return{x:r,y:o}},pointInPolygon=function(e,t){var n=e.length;if(n&&3<=n&&void 0!==t.x&&void 0!==t.y){var a,r,o=t.x,i=t.y,s=!1;for(a=0,r=n-1;a<n;r=a++){var c=e[a].x,l=e[a].y,d=e[r].x,f=e[r].y;i<l!=i<f&&o<(d-c)*(i-l)/(f-l)+c&&(s=!s)}return s}return n<3?console.warn("pointInPolygon error - polygon has less than 3 points",e):console.warn("pointInPolygon error - invalid data vertices:",n,"polygon:",e,"point:",t),null},polygonArea=function(i){var s=i.length,e=i.reduce(function(e,t,n){var a=t.x,r=t.y,o=i[(n+1)%s];return e+(o.x+a)*(o.y-r)},0);return Math.abs(e)/2},polygonPerimeter=function(c){var l=c.length;return c.reduce(function(e,t,n){var a=t.x,r=t.y,o=c[(n+1)%l],i=o.x,s=o.y;return e+Math.hypot(a-i,r-s)},0)},linearInterpolate=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}},perpendincularPoint=function(e,t,n){var a={x:e.x-t.x,y:e.y-t.y},r={x:-a.y,y:a.x},o=Math.sqrt(r.x*r.x+r.y*r.y);return r.x/=o,r.y/=o,{x:n*r.x,y:n*r.y}},parallelPoints=function(e,t,n){var a=perpendincularPoint(e,t,n);return[{x:e.x+a.x,y:e.y+a.y},{x:t.x+a.x,y:t.y+a.y}]},insetPoints=function(e,t){for(var n=[],a=[],r=0,o=e.length;r<o;r++){var i=e[r],s=e[(r+1)%o];n.push(parallelPoints(i,s,t))}for(r=0,o=n.length;r<o;r++){var c=n[r],l=n[(r+1)%o],d=intersectionAnywhere(c[0],c[1],l[0],l[1]);if(!pointInPolygon(e,d))return null;a.push(d)}return a.unshift(a.pop()),a},deltaBetweenPoints=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},polygonsSimilar=function(e,t){if(e.length!=t.length)return console.warn("geom.polygonsSimilar invalid arrays, not equal in length!",e,t),!1;for(var n=0,a=e.length;n<a;n++){var r=e[n],o=e[(n+1)%a],i=t[n],s=t[(n+1)%a],c=deltaBetweenPoints(r,o),l=deltaBetweenPoints(i,s);if(c.x<0&&l.x<0);else if(0<c.x&&0<l.x);else if(0!=c.x||0!=l.x)return!1;if(c.y<0&&l.y<0);else if(0<c.y&&0<l.y);else if(0!=c.y||0!=l.y)return!1}return!0},polygonSelfIntersecting=function(e){for(var t=e.length,n=0;n<t-1;n++)for(var a=n+1,r=e[n],o=e[a],i=a;i<t;i++){var s=(i+1)%t,c=e[i],l=e[s];if(intersectionBetweenPoints(r,o,c,l))return!0}return!1};geom={insetPoints:insetPoints,intersectionAnywhere:intersectionAnywhere,intersectionBetweenPoints:intersectionBetweenPoints,lerp:linearInterpolate,linearEquationFromPoints:linearEquationFromPoints,linearInterpolate:linearInterpolate,parallelPoints:parallelPoints,perpendincularPoint:perpendincularPoint,pointInPolygon:pointInPolygon,polygonArea:polygonArea,polygonSelfIntersecting:polygonSelfIntersecting,polygonPerimeter:polygonPerimeter,polygonsSimilar:polygonsSimilar};if("undefined"!=typeof module&&(module.exports=geom),define("hex_rounded",function(){var T,S,R=500,C=500;return{init:function(){var n=!1,a={x:0,y:0},r=new THREE.Scene;r.fog=new THREE.Fog(0,100,5e3);var o={x:0,y:0,z:0};(T=new THREE.PerspectiveCamera(100,R/C,1,2e4)).position.x=0,T.position.z=-5e3;var e=new THREE.PointLight(16777215,1,1e4);r.add(e),e.position.set(0,0,-5e3);var k=new THREE.Object3D;r.add(k),(S=new THREE.WebGLRenderer).setSize(R,C),document.body.appendChild(S.domElement);var i=[],t=[],s=[],z=600,c=121,l=2*z*-Math.cos(30*Math.PI/180),d=3*z*Math.sin(30*Math.PI/180),f=5.5*-l,u=5.5*-d,h=10;function P(e){return(Math.random()-.5)*e}function m(e,t,n,a){for(var r,o,i,s,c,l,d,f,u,h,m,v,p,g,b,y=.1*z,x=.8*(z-y),w=new THREE.Shape,M=0;M<6;M++)i=(r=M)/(o=6)*Math.PI*2,s=(r+1)/o*Math.PI*2,c=(r+2)/o*Math.PI*2,l=Math.sin(i)*x,d=Math.cos(i)*x,f=Math.sin(s)*x,u=Math.cos(s)*x,h=l+.2*(f-l),m=d+.2*(u-d),v=f-.2*(f-l),p=u-.2*(u-d),g=f+.2*(Math.sin(c)*x-f),b=u+.2*(Math.cos(c)*x-u),0==r&&w.moveTo(h,m),w.lineTo(v,p),w.quadraticCurveTo(f,u,g,b);var E=100+Math.random()*z,T=.9*z<E?9453568:5263440,S={amount:E,bevelEnabled:!0,bevelSegments:1,steps:1,bevelThickness:y},R=w.extrude(S),C=new THREE.MeshPhongMaterial({color:T}),N=new THREE.Mesh(R,C);return k.add(N),N.move=function(){this.undecided+=P(.5),this.kindadecided-=.1*(this.kindadecided-this.undecided),this.dir-=.1*(this.dir-this.kindadecided),this.position.z+=this.dir},N.reset=function(){N.undecided=P(.5),N.kindadecided=P(.5),N.dir=N.kindadecided,N.position.set(e,t,n-E)},N.reset(),N}for(var v=0;v<c;v++){var p=Math.floor(v/11),g=v%11+(p%2==0?.5:0),b=g<2||8.5<g||p<2||8.5<p,y=m(f+g*l,u+p*d,0);i.push(y),b||t.push(y)}function x(){var e=new THREE.Object3D;k.add(e);var t=.7<Math.random();function n(){return 160+P(96)}var a=n()<<16|n()<<8|n(),n=(new THREE.BoxGeometry(200,200,200),new THREE.MeshPhongMaterial({color:a,shininess:1,shading:THREE.SmoothShading}),new THREE.PointLight(a,5,2e3));return e.add(n),e.position.set(P(1e3),P(1e3),t?200:-2e3+P(1e3)),e.v=20+P(10),e.vx=P(10),e.vy=P(10),e.vz=P(10),e.undecided=P(Math.PI),e.kindadecided=P(Math.PI),e.dir=e.kindadecided,e.move=function(){this.undecided+=P(.5),this.kindadecided-=.1*(this.kindadecided-this.undecided),this.dir-=.1*(this.dir-this.kindadecided),this.ax=Math.sin(this.dir)*this.v,this.ay=Math.cos(this.dir)*this.v,this.position.x+=this.ax,this.position.y+=this.ay;var e=4e3;this.position.x<-e&&(this.position.x=e),this.position.x>e&&(this.position.x=-e),this.position.y<-e&&(this.position.y=e),this.position.y>e&&(this.position.y=-e)},e}for(v=0;v<h;v++)s[v]=x();function w(){return t[~~(Math.random()*t.length)]}var M=w(),E=0;dom.on(window,["mousemove","touchmove"],function(e){if(n){var t=e.changedTouches&&e.changedTouches[0]||e;t.x=t.x||t.pageX,t.y=t.y||t.pageY,a.x=t.x-R/2,a.y=t.y-C/2}}),dom.on(window,["mousedown","touchstart"],function(e){n=!0}),dom.on(window,["mouseup","touchend"],function(e){n=!1}),function e(t){if(requestAnimationFrame(e),E<Math.floor(t/4e3)){E++,M=w(),k.position.z=2e3;for(var n=0;n<c;n++)i[n].reset(t,n)}for(n=0;n<h;n++)s[n].move(t,n);for(n=0;n<c;n++)i[n].move(t,n);T.position.x-=.02*(T.position.x-M.position.x),T.position.y-=.02*(T.position.y-M.position.y),o.x-=.2*(o.x-5*a.x),o.y-=.2*(o.y-5*a.y),T.lookAt(new THREE.Vector3(T.position.x-o.x,T.position.y-o.y,0)),k.position.z-=35,M.position.z+=40,S.render(r,T)}(0)},resize:function(e,t){R=e,C=t,S.setSize(e,t),T.aspect=e/t,T.updateProjectionMatrix()}}}),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");log=function(){};var hexagon_tile=function(){return function(){var m,v,p=rand.instance(),g=colours.instance(p,"v1");function b(){return v+=1.89127398,(Math.sin(v)+Math.cos(2.12387891*v))/2*.1}var y,x,w,M,E,T,S,R,C,N,k=100,z=!1,P=k,_=k,I=2*Math.PI/6,H=1e3,A=0,L={spread:{type:"Number",label:"Spread",min:1,max:10,cur:10},background:{type:"Boolean",label:"Background",cur:!0}},q=Object.assign({},L);function n(e){m=e.progress||function(){log("hexagon_tile - no progress defined")},p.setSeed(e.seed),v=p.getSeed(),k=e.size,P=e.sw||k,_=e.sh||k,T.setSize(P,_),q=JSON.parse(JSON.stringify(e.settings||L)),m("settings:initialised",q),g.getRandomPalette();var t=g.getRandomColour();if(y=(5+25*p.random())/1e3,x=p.random()*p.random()*p.random()*y,w=y-x+.01*x,M=.01+10*p.random(),z){for(;S.firstChild;)S.removeChild(S.firstChild);T.setAttribute("style","background-color:"+t)}else q.background.cur&&(T.ctx.fillStyle=t,T.ctx.fillRect(0,0,k,k));for(var n=[],a=[],r=0;r<6;r++){var o=r*I,i=w*Math.cos(o),s=w*Math.sin(o);n[r]=(0===r?"M":"L")+i+","+s,a[r]={x:i,y:s}}n.push("Z");var c=y*Math.sin(I),l=Math.ceil(1/y/3)+1,d=Math.ceil(1/c)+1;for(R=l*d,C=[],r=0;r<R;r++){var f,u=Math.floor(r/l);if(i=(r%l+(u%2==0?.5:0))*y*3,s=u*c,z){var h=dom.svg("g");h.setAttribute("transform","translate("+i+","+s+")"),S.appendChild(h),f=dom.svg("path",{d:n.join(" ")}),h.appendChild(f)}else f=a;C[r]={index:r,hex:f,x:i,y:s,colour:null,rendered:!1}}E=p.shuffle(C.slice()),D()}function O(){var e=q.spread.cur/q.spread.max*10,t=A*H,n=t+H;R<n&&(n=R);for(var a=t;a<n;a++){for(var r,o,i,s=E[a].index,c=C[s],l=[],d=0;d<R;d++)if(d!=a){var f=E[d];f.rendered&&(r=c.x-f.x,o=c.y-f.y,Math.sqrt(r*r+o*o)<y*M&&l.push(f.colour))}if(i=0<l.length?g.mixColours(l):g.getNextColour(),z)c.hex.setAttribute("style","fill:"+i);else if(r=c.x-.5+b(),o=c.y-.5+b(),Math.round(10*Math.sqrt(r*r+o*o))<e){for(T.ctx.fillStyle=i,T.ctx.beginPath(),d=0;d<6;d++){var u=(c.x+c.hex[d].x)*k,h=(c.y+c.hex[d].y)*k;0===d?T.ctx.moveTo(u,h):T.ctx.lineTo(u,h)}T.ctx.closePath(),T.ctx.fill()}C[s].rendered=!0,C[s].colour=i}++A==N?m("render:complete",j.stage):(m("render:progress",A/N),setTimeout(O,25))}function D(){N=Math.ceil(R/H),A=0,O()}z?(T=dom.svg("svg",{width:P,height:_}),S=dom.svg("g"),T.appendChild(S)):T=dom.canvas(P,_);var j={init:n,render:D,settings:q,stage:z?T:T.canvas,update:function(e,t){n({progress:m,size:k,settings:e,seed:t})}};return j}};if(isNode?module.exports=hexagon_tile():define("hexagon_tile",hexagon_tile),define("infinite_scrolling_cogs",function(){var o=window.innerWidth,i=window.innerHeight;function G(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}var s=G(o,i);return{init:function(){var S,R=s.getContext("2d"),C=5,N=[],k=3.14159265,z=2*k,P=-1,_=.5*o,I=0,H=0,A=0,L=.02,q=0,O={fillStyle:"#000",lineWidth:0},D=1.7;function j(e,t){return Math.random()*(t-e)+e}function F(e,t){return~~j(e,t+1)}function B(e){var t={darkest:0,lightest:255,alpha:1};for(var n in e)t[n]=e[n];var a=t.white?t.white:F(t.darkest,t.lightest);return"rgba("+a+","+a+","+a+","+t.alpha+")"}function W(e,t,n,a,r,o,i){e.moveTo(t+a,n),null==o&&(o=!1);var s={fillStyle:"#fff",lineWidth:0,strokeStyle:"#000"};for(var c in r)s[c]=r[c];e.fillStyle=s.fillStyle,e.lineWidth=s.lineWidth,e.strokeStyle=s.strokeStyle,i&&e.beginPath(),e.arc(t,n,a,0,z,o),i&&(e.closePath(),s.fillStyle&&e.fill(),s.lineWidth&&e.stroke())}function t(e,t){var f,n;if(S=N[q-1],e&&t&&S){var a=t-S.yp,r=e-S.xp;A=Math.atan(a/r),A+=r<0?k:0,r=Math.abs(r),a=Math.abs(a),r-=Math.abs(S.size),a-=Math.abs(S.size),n=Math.sqrt(r*r+a*a)}else A=j(0,z),n=j(60,100);if(!(n<50||400<n)){var u=~~(n/10);P*=-1,q&&(_+=(H+=n-10)*Math.cos(A),I+=H*Math.sin(A)),H=n-10;for(var o,i,s=n-25,c=n,l=[],d=z/(4*u),h=0,m=0,v=(c-s)/D+s,p=0;p<4*u;p++){var g=p*d,b=~~h%2,y=b*(c-s)+s;h+=.5,m+=1;var x=g-d/2;o=y*Math.cos(x),i=y*Math.sin(x);var w=void 0;w=m%2==0?{tb:b,ex:o,ey:i}:{tb:b,mp:!0,ex:o,ey:i,mx:v*Math.cos(g-d),my:v*Math.sin(g-d)},l.push(w)}var M={index:q,size:n,rotation:j(0,z),teeth:u,dir:P,xp:_,yp:I,canvas:null};q&&(S=N[q-1],M.rotation=S.teeth/M.teeth*-S.rotation+A*(S.teeth+M.teeth)/M.teeth,M.teeth%2==0&&(M.rotation+=z/(2*M.teeth))),M.render=function(){var e=2*(this.size+C);this.canvas=G(e,e),(f=this.canvas.getContext("2d")).save(),f.translate(this.size+C,this.size+C),f.shadowBlur=2,f.shadowColor="#000",f.beginPath(),n=l[0],f.moveTo(n.ex,n.ey);for(var t=1;t<l.length;t++){var n=l[t];n.mp?f.quadraticCurveTo(n.mx,n.my,n.ex,n.ey):f.lineTo(n.ex,n.ey)}n=l[0],f.quadraticCurveTo(n.mx,n.my,n.ex,n.ey);var a=.2*s;W(f,0,0,.2*s,O,!0),T(a+.1*s,.9*s),f.closePath(),f.fillStyle=B({darkest:70,lightest:200,alpha:1}),f.fill(),f.stroke(),.5<Math.random()&&W(f,0,0,.16*s,O,!0,!0),f.globalCompositeOperation="source-atop",E(a,a+.1*s),E(.9*s,s)},M.draw=function(){M.canvas||M.render(),R.save(),R.translate(this.xp,this.yp),R.rotate(this.rotation),R.drawImage(this.canvas,-this.size-C,-this.size-C),R.restore()},M.rotate=function(){this.rotation+=z/this.teeth*this.dir*L,this.draw()},N[q]=M,q++}function E(e,t){if(!(j(0,1)<.3)){var n=t-e;W(f,0,0,(t+e)/2,{fillStyle:null,strokeStyle:B({darkest:0,lightest:40,alpha:.5}),lineWidth:n},!1,!0)}}function T(e,t){var n=(t+e)/2,a=t-e;0==F(0,1)?function(e,t){var n=t/2*j(.6,.9),a=~~(j(.5,.9)*z*e/n/2);n*=j(.5,.9);for(var r=0;r<a;r++){var o=r/a*z;W(f,e*Math.cos(o),e*Math.sin(o),n,O,!0)}}(n,a):function(e,t){for(var n=0==F(0,1),a=1+~~Math.pow(u,1/F(2,n?4:3)),r=j(.5,.8)*t,o=(z/a-(Math.asin(r/e)*n?1:.5))*j(.5,.9),i=e-r/2,s=e+r/2,c=0;c<a;c++){var l=c/a*z,d=l+o;f.moveTo(Math.cos(l)*i,Math.sin(l)*i),f.arc(0,0,i,l,d,!1),n?f.arc(Math.cos(d)*e,Math.sin(d)*e,r/2,d+k,d,!0):f.lineTo(Math.cos(d)*s,Math.sin(d)*s),f.arc(0,0,s,d,l,!0),n?f.arc(Math.cos(l)*e,Math.sin(l)*e,r/2,l,l+k,!0):f.lineTo(Math.cos(l)*i,Math.sin(l)*i)}}(n,a)}}var n=0,a=0;function r(){var e=(_<o/2?j(0,3):j(-3,0))*o/12;t(_+e,a),a=I+j(0,200)}for(var e=0;e<5;e++)r();document.body.appendChild(s),function e(){requestAnimationFrame(e),--n-i-200<-I&&r(),R.fillStyle="#ddd",R.fillRect(0,0,o,i),R.save(),R.translate(0,n);for(var t=0;t<N.length;t++)N[t].rotate();R.restore()}()},stage:s}}),define("infinite_stairs",function(){var t,n,a,r,o=window.innerWidth,i=window.innerHeight,d=300,f=40,u=30,h={},m=rand.instance();function s(e){requestAnimationFrame(s),a.render(n,t)}return{init:function(){m.setSeed(Math.random()),function(e){for(var t=new THREE.TextureLoader,n=0;n<e.length;n++){var a=e[n];h[a]=t.load("/assets/"+a)}}(["wood-dark.jpg"]),n=new THREE.Scene,t=new THREE.PerspectiveCamera(100,o/i,1,2e4),n.add(t),t.position.set(0,250,-100),t.position.set(1500,1600,-1e3),t.lookAt(new THREE.Vector3(0,250,100)),new THREE.OrbitControls(t),(a=new THREE.WebGLRenderer({antialias:!0})).setSize(o,i),a.shadowMap.enabled=!0,a.shadowMap.type=THREE.PCFSoftShadowMap,r=new THREE.Group,n.add(r),function(e){var t=1.25*f,o=(Math.floor(d/t),new THREE.Group);r.add(o);var i=new THREE.MeshPhongMaterial({map:h["wood-dark.jpg"]});function s(e){for(var t=e.faceVertexUvs[0].length,n=0;n<t;n+=2){var a=m.getNumber(0,.75),r=a+m.getNumber(.1,.25),o=m.getNumber(0,.75),i=o+m.getNumber(.1,.25);e.faceVertexUvs[0][n]=[new THREE.Vector2(a,i),new THREE.Vector2(a,o),new THREE.Vector2(r,i)],e.faceVertexUvs[0][n+1]=[new THREE.Vector2(a,o),new THREE.Vector2(r,o),new THREE.Vector2(r,i)]}return e}var n=6*f*2.3*4,c=6*u*2*4,l=Math.floor(n/100);function a(e){var t=new THREE.Group;o.add(t),t.position.set(e*d/2,0,0);for(var n=0;n<l;n++){var a=s(new THREE.BoxGeometry(5,c,100)),r=new THREE.Mesh(a,i);r.position.set(0,0,105*n),r.castShadow=!0,r.receiveShadow=!0,t.add(r)}return t}0==e&&(a(-1),a(1))}(0);var e=new THREE.AmbientLight(16777215,1);n.add(e),document.body.appendChild(a.domElement),s()}}}),isNode="undefined"!=typeof module){rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var lagrange=require("./lagrange.js")}log=function(){};var interpolated=function(){var J=0<arguments.length&&void 0!==arguments[0]&&arguments[0],Z=rand.instance(),K=colours.instance(Z),$=J?dom.svg("svg",{width:1,height:1}):dom.canvas(1),ee={background:{type:"Boolean",label:"Background",cur:!0}},te=ee,ne=function(){},ae=void 0,n=function(e){var t=e.seed;e.progress&&(ne=e.progress),e.size&&(ae=e.size),te=JSON.parse(JSON.stringify(e.settings||ee)),ne("settings:initialised",te),Z.setSeed(t),K.getRandomPalette();var o=2*Math.PI,n="white",d="black",f=Math.sqrt(.5),u=Math.ceil(ae/2),h=Z.getInteger(4,8),i=Z.getInteger(30,150),s=Z.getNumber(1,20)/1e3,a=.5<Z.getNumber(0,1),r=a?Z.getNumber(0,180):0,c=r+(a?Z.getNumber(-30,30):0),l=a?{x:0,y:0}:{x:Z.getNumber(-50,50)/1e3,y:Z.getNumber(-50,50)/1e3},m=Z.getNumber(0,1),v=K.getRandomColour(),p=.3<Z.getNumber(0,1),g=!p||.5<Z.getNumber(0,1),b=g&&.5<Z.getNumber(0,1),y=void 0,x=void 0,w=void 0,M=void 0,E=void 0,T=void 0,S=void 0,R=void 0,C=void 0,N=void 0,k=void 0,z=2*Math.sqrt(ae*ae/2),P=void 0,_=void 0,I=void 0;J?(dom.setAttributes($,{width:ae,height:ae,viewBox:"0 0 "+ae+" "+ae}),S=dom.svg("g",{id:"curves"}),E=dom.svg("rect",{x:0,y:0,width:ae,height:ae,style:"fill:"+v}),R=dom.svg("mask",{id:"zeroMask"}),C=dom.svg("rect",{x:-ae,y:-ae,width:3*ae,height:3*ae,style:"fill:"+n}),N=dom.svg("mask",{id:"oneMask"}),k=dom.svg("rect",{x:-ae,y:-ae,width:3*ae,height:3*ae,style:"fill:"+d}),$.appendChild(S),te.background.cur&&$.appendChild(E),$.appendChild(R),R.appendChild(C),$.appendChild(N),N.appendChild(k)):($.setSize(ae,ae),T=$.ctx,te.background.cur&&(T.fillStyle=v,$.ctx.fillRect(0,0,ae,ae)),(P=dom.canvas(z)).ctx.translate((z-ae)/2,(z-ae)/2),_=dom.canvas(z),I=dom.canvas(z));var H=Array(4*h).fill().map(function(){return{o:Z.getNumber(-Math.PI,Math.PI),s:5*Z.getNumber(.001,.004)}}),A=function(e,t){var n=function(e,r){for(var t=void 0,n=void 0,a=void 0,o=void 0,i=0;i<4;i++)t=H[e+i+0],n=H[e+i+1],a=H[e+i+2],o=H[e+i+3];var s=function(e,t){var n=t.o,a=t.s;return e+Math.sin(n+r*a)};return{x:.1*[t,n].reduce(s,0)*.3,y:.1*[a,o].reduce(s,0)*.5}}(t,4*e+20*t),a=n.x,r=n.y;return{x:t/(h-1)+a,y:e/i+r}},L=function(a,e){var t=e.colour,n=e.strokeWidth,r=Array(h).fill().map(function(e,t){return n=t,q[a][n];var n}),i=lagrange(r),s=[],c=void 0,l=void 0;return J||(P.ctx.beginPath(),P.ctx.strokeStyle=t,P.ctx.lineWidth=n),Array(u).fill().forEach(function(e,t){var n=t/u*(1+2*f)-f,a=i.valueOf(n),r=n-c,o=a-l;Math.sqrt(r*r+o*o)<.002||(J?s.push(0===t?"M":"L",n*ae,a*ae):0==t?P.ctx.moveTo(n*ae,a*ae):P.ctx.lineTo(n*ae,a*ae),c=n,l=a)}),J||P.ctx.stroke(),J?dom.svg("path",{d:s.join(" "),fill:"transparent",stroke:t,"stroke-width":n}):s},q=Array(i).fill().map(function(e,n){return Array(h).fill().map(function(e,t){return A(n,t)})}),O=K.getRandomColour();Array(i).fill().forEach(function(e,t){var n=void 0;if(Z.getNumber(0,1)>m)n=O;else{n=v;for(var a=0;n==v&&a<5;)n=K.getRandomColour(),a++}O=n;var r=Z.getNumber(.001,s)*ae,o=L(t,{colour:n,strokeWidth:r});J&&S.appendChild(o)}),g&&(y=Z.getInteger(3,8),x=Z.getNumber(0,360),w=Z.getNumber(.15,.35),M=.5<Z.getNumber(0,1));var D=function(e){var a=e.radius,r=e.sides;return Array(r).fill().map(function(e,t){var n=t/r*o;return{x:a*Math.cos(n)*ae,y:a*Math.sin(n)*ae}})};if(J){var j=function(e){var t,n,a,r,o,i=e.masker,s=e.rotation,c=e.x,l=e.y,d=M?(a=(n={sides:y,radius:w}).radius,r=n.sides,o=D({radius:a,sides:r}).map(function(e,t){return(0===t?"M":"L")+e.x+","+e.y}).concat("Z"),dom.svg("path",{d:o.join(" ")})):(t={radius:w}.radius,dom.svg("circle",{r:t*ae}));return d.setAttribute("fill",b?"transparent":i),d.setAttribute("stroke",i),d.setAttribute("stroke-width",.1*ae),d.setAttribute("stroke-linejoin","round"),d.setAttribute("transform","translate("+(.5-c)*ae+","+(.5-l)*ae+") rotate("+s+")"),d};if(p){var F="translate("+.5*ae+","+.5*ae+") scale(1.2) rotate("+r+") translate("+-.5*ae+","+-.5*ae+")",B=dom.svg("use",{transform:F,href:"#curves",mask:"url(#zeroMask)"});$.appendChild(B);var W=j({masker:d,rotation:x-r,x:0,y:0});R.appendChild(W)}if(g){var G=j({masker:n,rotation:x-c,x:l.x,y:l.y});N.appendChild(G);var V="translate("+.5*ae+","+.5*ae+")\n\t\t\t\t\tscale(1.2) rotate("+c+")\n\t\t\t\t\ttranslate("+(-.5+l.x)*ae+","+(-.5+l.y)*ae+")",X=dom.svg("use",{transform:V,href:"#curves",mask:"url(#oneMask)"});$.appendChild(X)}}else{var Y=function(e,t,n){var a,r,o,i,s,c,l;e.ctx.save(),e.ctx.translate(.5*ae,.5*ae),e.ctx.scale(1.2,1.2),e.ctx.rotate(n/180*Math.PI),M?(s=(i={canvas:e,sides:y,radius:w}).canvas,c=i.radius,l=i.sides,s.ctx.beginPath(),s.ctx.lineJoin="round",D({radius:c,sides:l}).map(function(e,t){var n=e.x,a=e.y;0===t?s.ctx.moveTo(n,a):s.ctx.lineTo(n,a)}),s.ctx.closePath()):(r=(a={canvas:e,radius:w}).canvas,o=a.radius,r.ctx.drawCircle(0,0,o*ae)),e.ctx.fillStyle=b?"transparent":t==d?v:t,e.ctx.fill(),e.ctx.strokeStyle=t,e.ctx.lineWidth=.1*ae,e.ctx.stroke(),e.ctx.restore()};if(p){_.ctx.save(),_.ctx.translate(.5*ae,.5*ae),_.ctx.scale(1.2,1.2),_.ctx.rotate(r/180*Math.PI),_.ctx.translate(-.5*z,-.5*z),_.ctx.drawImage(P.canvas,0,0),_.ctx.restore();var U=dom.canvas(z);Y(U,d,x-r),_.ctx.globalCompositeOperation="destination-out",_.ctx.drawImage(U.canvas,0,0),T.drawImage(_.canvas,0,0)}if(g){I.ctx.save(),I.ctx.translate(.5*ae,.5*ae),I.ctx.scale(1.2,1.2),I.ctx.rotate(c/180*Math.PI),I.ctx.translate(-.5*z,-.5*z),I.ctx.translate(l.x*ae,l.y*ae),I.ctx.drawImage(P.canvas,0,0),I.ctx.restore();var Q=dom.canvas(z);Y(Q,n,x-r),I.ctx.globalCompositeOperation="destination-in",I.ctx.drawImage(Q.canvas,0,0),T.drawImage(I.canvas,0,0)}}ne("render:complete",J?$:$.canvas)};return{init:n,settings:te,stage:J?$:$.canvas,update:function(e,t){return n({settings:e,seed:t})}}};isNode?module.exports=interpolated:"undefined"!=typeof define&&define("interpolated",function(){return interpolated});sw=400,sh=400;var ctx=(bmp=dom.canvas(sw,sh)).ctx,cx=sw/2,cy=sh/2,frame=0;function newLine(){ctx.clearRect(0,0,sw,sh);var e,g,b=70,t=9,n=13,a=100,r=frame%(a*4),o=Math.floor(r/a);switch(r=(r-o*a)/a,o){case 0:e=1-r,g=1;break;case 1:e=0,g=1-r;break;case 2:e=r,g=0;break;case 3:e=1,g=r}var i=30*g/360*Math.PI*2,y=b*Math.cos(i),x=b*Math.sin(i);function s(e,t,n){var a=e,r=t,o=e+y*g,i=t-x,s=e+y+y*g,c=t,l=s,d=t+b,f=e+y,u=t+x+b,h=e,m=t+b,v=f,p=t+x;switch(ctx.beginPath(),n){case 0:ctx.fillStyle="#444",ctx.moveTo(a,r),ctx.lineTo(v,p),ctx.lineTo(f,u),ctx.lineTo(h,m);break;case 1:ctx.fillStyle="#666",ctx.moveTo(v,p),ctx.lineTo(s,c),ctx.lineTo(l,d),ctx.lineTo(f,u);break;case 2:ctx.fillStyle="#888",ctx.moveTo(a,r),ctx.lineTo(v,p),ctx.lineTo(s,c),ctx.lineTo(o,i)}ctx.closePath(),ctx.fill()}for(var c=.4+.6*e,l=c,d=0;d<t;d++)for(var f=d*y*2*c-10,u=n-1;-1<u;u--){var h=u*b*2*l-300+d*x*2*l;s(f,h,1),s(f,h,2),s(f,h,0)}frame+=.5,requestAnimationFrame(newLine)}function lagrange(e){if(e.length<2)throw new Error("need at least two points");if(!1===e.every(function(e){var t=e.x,n=e.y;return"number"==typeof t&&"number"==typeof n}))throw new Error("all points need to have a numeric x & y");var i=e.slice();function a(){for(var e,t=i.length,n=0;n<t;++n){e=1;for(var a=0;a<t;++a)a!=n&&(e*=i[n].x-i[a].x);i[n].w=1/e}}return a(),{addPoint:function(e,t){return i.push({x:e,y:t}),a(),i.length-1},changePoint:function(e,t,n){i[e]={x:t,y:n},a()},valueOf:function(e){for(var t=0,n=0,a=0,r=0;r<i.length;++r){var o=i[r];if(e==o.x)return o.y;n+=(t=o.w/(e-o.x))*o.y,a+=t}return n/a}}}document.body.appendChild(bmp.canvas),newLine(),define("isometric_words",[],function(){rand.setSeed(Math.random());var o,i,s,d=10;var e,t,f,u={x:-(e=1)*(t=1e3*e),y:1*t,z:1*t},h=window.innerWidth,m=window.innerHeight;function v(){return 1*(Math.random()-.5)}var n=!0;function p(){var e=(n=!n)?1:0;TweenMax.to(f.rotation,5,{x:e*v(),y:e*v(),z:e*v(),ease:Quint.easeInOut,onComplete:p})}function g(e){s.render(i,o),requestAnimationFrame(g)}return{init:function(){colours.getRandomPalette(),i=new THREE.Scene,o=new THREE.OrthographicCamera(h/-2,h/2,m/2,m/-2,1,2e4),i.add(o),o.position.set(u.x,u.y,u.z),o.lookAt(i.position);var e=new THREE.DirectionalLight(16765136,1);e.position.set(0,1,0),i.add(e);var t=new THREE.DirectionalLight(13696976,1);t.position.set(1,0,0),i.add(t);var n=new THREE.DirectionalLight(13684991,1);n.position.set(0,0,1),i.add(n);var a=new THREE.AmbientLight(6316128);i.add(a),(s=new THREE.WebGLRenderer({antialias:!0})).setSize(h,m),f=new THREE.Group,i.add(f),f.rotation.set(v(),v(),v());var r="\n                     \n           \n               \n                   \n                   \n                   \n                   \n               \n           \n                     \n\n".split("\n"),c=r.reduce(function(e,t){return Math.max(e,t.length)},0),l=r.length;r.forEach(function(e,s){e.split("").forEach(function(e,t){if(""===e){var n=(r=colours.getNextColour(),o=new THREE.MeshLambertMaterial({color:r}),i=new THREE.BoxGeometry(d,d,d),new THREE.Mesh(i,o));f.add(n);var a=rand.getInteger(-10,10);n.position.set((t-c/2+a)*d,(l/2-s-a)*d,-a*d)}var r,o,i})}),document.body.appendChild(s.domElement),g(),p()}}}),"undefined"!=typeof module&&(module.exports=lagrange),define("lego_stack",["lib/schteppe/cannon.0.6.2.min.js","cannon_demo"],function(e,a){!function e(){con.log("check"),"undefined"==typeof THREE?setTimeout(e,10):function(){var h=new a({trackballControls:!0}),m=function(e){var t=e.getWorld();t.gravity.set(0,0,-40),t.broadphase=new CANNON.NaiveBroadphase,t.solver.iterations=10;var n=new CANNON.Plane,a=new CANNON.Body({mass:0});return a.addShape(n),a.position.set(0,0,1),t.addBody(a),e.addVisual(a),t.quatNormalizeFast=!1,t.quatNormalizeSkip=0,t}(h);m.gravity.set(0,0,-10);var v=[],p=rand.instance();function t(){var e=2*p.getInteger(1,4),t=p.getInteger(1,2),n=new CANNON.Cylinder(.5,.5,.5,12),a=new CANNON.Box(new CANNON.Vec3(2,e,.2)),r=new CANNON.Box(new CANNON.Vec3(2,.2,t)),o=new CANNON.Box(new CANNON.Vec3(.2,e,t)),i=new CANNON.Box(new CANNON.Vec3(2,.2,t)),s=new CANNON.Box(new CANNON.Vec3(.2,e,t)),c=new CANNON.Body({mass:.1});c.addShape(a,new CANNON.Vec3(0,0,t)),c.addShape(r,new CANNON.Vec3(0,e-.2,0)),c.addShape(o,new CANNON.Vec3(1.8,0,0)),c.addShape(i,new CANNON.Vec3(0,.2-e,0)),c.addShape(s,new CANNON.Vec3(-1.8,0,0));for(var l=0;l<2;l++)for(var d=0;d<e;d++){var f=new CANNON.Vec3(2*(l-1+.5),2*(d-e/2+.5),t+.25);c.addShape(n,f)}c.position.set(0,0,10+5*v.length);var u=[14483456,17408,16759552,2237166][p.getInteger(0,3)];m.add(c),h.addVisual(c,new THREE.MeshPhongMaterial({color:u})),c.linearDamping=.1,c.angularDamping=.1,v.push(c)}function n(e){requestAnimationFrame(n),v.length<100&&v.length<Math.floor(e/1e3)&&t()}p.setSeed(Math.random()),h.create(function(){t(),n()}),h.start()}()}()});var linked_line=function(){var h=2*Math.PI,I=rand.instance();console.log("set seed"),I.setSeed(459874);var m=function(z,P){var _=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return new Promise(function(u,e){if(Math.round(z/2)===z/2||Math.round(z)!==z)return alert("linked_line - invalid size, needs to be odd integer - you supplied: "+z),console.warn("linked_line - invalid size, needs to be odd integer - you supplied:",z);var i=0,s=z,c=z,h=2*(s+.5),m=2*(c+.5),v=2*(s+.5)*4,p=2*(c+.5)*4,l=dom.canvas(h,m),t=dom.canvas(v,p),n=dom.canvas(v,p),a=dom.canvas(v,p),g=l.ctx,d=t.ctx,b=n.ctx,y=a.ctx;if(_){var r=document.createElement("div");r.appendChild(l.canvas),r.appendChild(t.canvas),r.appendChild(n.canvas),r.appendChild(a.canvas),document.body.appendChild(r)}var f,x={array:[],oneD:[]},w={},o=function(e){var t={x:e.x,y:e.y,type:"NULL"};x.oneD[E(t.x,t.y)]=t,x.array.push(t)},M=function(e){var t=null==e.x?I.random():e.x,n=null==e.y?I.random():e.y,a={x:t,y:n,type:"TUNNEL",surrounded:!1,prev:e.prev,next:e.next};return x.oneD[E(t,n)]=a,x.array.push(a),a},E=function(e,t){return t*s+e},T=function(e,t,n){switch(n){case 0:t--;break;case 1:e++;break;case 2:t++;break;case 3:e--}var a=E(e,t);return{ok:0<=e&&e<s&&0<=t&&t<c&&-1===x.oneD[a],x:e,y:t}},S=function(){var e=I.getInteger(0,x.array.length-1),t=x.array[e];t&&(function(e){for(var t=-1;t<2;t++)for(var n=-1;n<2;n++){var a=e.x+t,r=e.y+n;if(0<=a&&a<s&&0<=r&&r<c){var o=E(a,r);if(-1===x.oneD[o])return!1}}return e.surrounded=!0}(t)?x.array.splice(e,1):t&&t.next&&t.prev&&R(t))},R=function(e){w.array=x.array.slice(),w.oneD=x.oneD.slice();var t=e,n=e.next,a=e.x,r=e.y,o=I.getInteger(0,3),i=I.getInteger(0,3),s=T(a,r,o),c=T(s.x,s.y,i),l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0,r=t.length-1;a<r;a++){var o=t[a],i=t[a+1];if(0!==Math.abs(o.x-i.x)&&0!==Math.abs(o.y-i.y))return!1}return!(t[0].x===t[1].x&&t[1].x===t[2].x||t[0].y===t[1].y&&t[1].y===t[2].y)}(t,s,c,n);if(s.ok&&c.ok&&l){var d=M({x:s.x,y:s.y}),f=M({x:c.x,y:c.y});(t.next=d).prev=t,(d.next=f).prev=d,(f.next=n).prev=f}else x.array=w.array.slice(),x.oneD=w.oneD.slice()};d.scale(4,4),d.imageSmoothingEnabled=!1,b.scale(4,4),b.imageSmoothingEnabled=!1;var C=0,N=0,k=function e(t){i++,g.fillStyle="#fff",g.fillRect(0,0,h,m);for(var n=0;n<40;n++)S();g.beginPath(),g.lineWidth=.25;for(var a=f;a;){var r=2*(a.x+.75),o=2*(a.y+.75);a==f?g.moveTo(r-2,o):a.next?g.lineTo(r,o):(g.lineTo(r,o),g.lineTo(r,o+2)),a=a.next}g.stroke();for(n=0;n<x.array.length;n++){a=x.array[n];g.fillStyle="NULL"==a.type?"#f00":"#00ff00",g.fillRect(2*a.x+1,2*a.y+1,1,1)}d.drawImage(l.canvas,0,0),C===x.array.length?N++:(C=x.array.length,N=0),N<300?i%50==0?(console.log("having a breather... ",N),setTimeout(e,20)):e():function(){var e=g.getImageData(0,0,h,m).data;b.fillStyle="#fff",b.fillRect(0,0,h,m);for(var t,n=[],a=0,r=0,o=e.length;a<o;a+=4,r++){var i={x:(t=r)%h,y:Math.floor(t/h)};255==e[a]&&(b.fillStyle="#f00",b.fillRect(i.x,i.y,1,1),n.push(i))}var s,c=[],l=-1;for(a=0,o=n.length;a<o;a++)l!=(s=n[a]).y?(l=s.y,c.push({x:s.x,y:s.y,w:1,h:1})):n[a-1].x==s.x-1?c[c.length-1].w++:c.push({x:s.x,y:s.y,w:1,h:1});for(a=0,o=c.length;a<o;a++){var d=c[a];for(r=a+1;r<o;r++){var f=c[r];d&&f&&d.x==f.x&&d.w==f.w&&d.y+d.h==f.y&&(c[a].h++,c[r]=null)}}for(c=c.filter(function(e){return e}),y.fillStyle="#fff",y.fillRect(0,0,v,p),a=0,o=c.length;a<o;a++)(s=c[a])&&(y.beginPath(),y.rect(4*s.x+2,4*s.y+2,4*s.w-4,4*s.h-4),y.lineWidth=1,y.lineStyle="rgba(0,0,0,0.00)",y.closePath(),y.stroke());u({walls:n,wallrects:c})}()};!function(){for(var e=0;e<c;e++)for(var t=0;t<s;t++)x.oneD.push(-1),g.fillRect(2*t-2+1,2*e-2+1,4,4);var n,a;P&&P.forEach(o);for(var r=0;r<c;r++)e=r<c/2?(t=r,c/2-.5):(t=s/2-.5,r),0==r?(n=M({x:t,y:e}),f=n):(n=M({x:t,y:e,prev:a}),a.next=n),a=n;n,k(0)}()})};return{generate:m,init:function(e){var t=[],n=function(e,t,n,a){for(var r=[],o=0;o<a;o++){var i=o/a*h;r.push({x:39*e+39*Math.cos(i)*n,y:39*t+39*Math.sin(i)*n})}return function(e,t){return geom.pointInPolygon(r,{x:e,y:t})}},a=function(n,a,r){return n*=39,a*=39,r*=39,function(e,t){return Math.hypot(e-n,t-a)<r}},r=n(.5,.5,.4,3),o=n(.5,.5,.25,5),i=n(.5,.5,.4,6),s=a(.75,.25,.2),c=a(.25,.75,1/6),l=void 0;switch(I.getInteger(0,3)){case 0:l=function(e,t){return s(e,t)||c(e,t)};break;case 1:l=function(e,t){return r(e,t)};break;case 2:l=function(e,t){return o(e,t)};break;case 3:l=function(e,t){return i(e,t)};break;case 4:l=function(e,t){return!1}}for(var d=0;d<1521;d++){var f=d%39,u=Math.floor(d/39);l(f,u)&&t.push({x:f,y:u})}m(39,t,!0).then(function(e){e.walls,e.wallrects})}}};define("linked_line",linked_line);var mandala=function(){return function(){var g=rand.instance();g.setSeed(Math.random());var n,c,l,d,f,u,b=colours.instance(g),y={spread:{type:"Number",label:"Spread",min:1,max:10,cur:10}},x=2*Math.PI,w=dom.canvas(1,1);function t(e){n=e.progress||function(){console.log("mandala - no progress defined")},c=e.size,l=e.sw||c,d=e.sh||c,w.setSize(l,d),f=d/2;var t=b.getRandomPalette();console.log("Mandala init",t),u=2*g.getInteger(2,40),y.spread.cur=10,e.settings&&(y=e.settings),n("settings:initialised",y),a(),n("render:complete",w.canvas)}function a(){var e=y.spread.cur/y.spread.max;console.log("spread",e);var h=1/u*x,t=Math.sqrt(.5),m=t*c,n=b.getRandomColour(),a=dom.canvas(l,d);a.ctx.translate(2,2),a.ctx.lineCap="flat",a.ctx.beginPath(),a.ctx.moveTo(0,0),a.ctx.lineTo(Math.sin(0)*m,Math.cos(0)*m),a.ctx.lineTo(Math.sin(h)*m,Math.cos(h)*m),a.ctx.lineTo(0,0),a.ctx.fillStyle="red",a.ctx.strokeStyle="red",a.ctx.lineWidth=2,a.ctx.stroke();var v=dom.canvas(l,d);v.ctx.translate(2,2),v.ctx.beginPath(),v.ctx.moveTo(0,0),v.ctx.lineTo(Math.sin(0)*m,Math.cos(0)*m),v.ctx.lineTo(Math.sin(h)*m,Math.cos(h)*m),v.ctx.lineTo(0,0),v.ctx.fillStyle=n,v.ctx.strokeStyle=n,v.ctx.lineWidth=2,v.ctx.stroke(),v.ctx.fill();var r=7;function p(e,t){return e<t?-1:1}var o=g.getInteger(0,r);r-=o;var i=r-=2;console.log(o,2,i),function(){for(var e={left:[],right:[]},t=0;t<2;t++)e.left.push(g.random()),e.right.push(g.random());for(e.left.sort(p),e.right.sort(p),t=0;t<1;t++){v.ctx.fillStyle=b.getNextColour();var n=Math.sin(0)*e.left[t],a=Math.cos(0)*e.left[t],r=Math.sin(h)*e.right[t],o=Math.cos(h)*e.right[t],i=Math.sin(h)*e.right[t+1],s=Math.cos(h)*e.right[t+1],c=Math.sin(0)*e.left[t+1],l=Math.cos(0)*e.left[t+1];v.ctx.beginPath(),v.ctx.moveTo(n*m,a*m),v.ctx.lineTo(r*m,o*m),v.ctx.lineTo(i*m,s*m),v.ctx.lineTo(c*m,l*m),v.ctx.closePath(),v.ctx.fill(),v.ctx.strokeStyle="black",v.ctx.stroke();var d=[{x:n,y:a},{x:r,y:o},{x:i,y:s},{x:c,y:l}],f=geom.insetPoints(d,-.01);if(console.log("duble",d,f),f){for(v.ctx.beginPath(),v.ctx.fillStyle=b.getNextColour(),t=0;t<f.length;t++){var u=f[t];v.ctx[0==t?"moveTo":"lineTo"](u.x*m,u.y*m)}v.ctx.fill()}}}();for(var s=0;s<u;s++)w.ctx.save(),s%2==1?(w.ctx.scale(-1,1),w.ctx.translate(-f,f),w.ctx.rotate((s-1)*h)):(w.ctx.translate(f,f),w.ctx.rotate(s*h)),w.ctx.drawImage(v.canvas,-2,-2),w.ctx.restore()}return{init:t,render:a,settings:y,stage:w.canvas,update:function(e){t({size:c,settings:e})}}}};(isNode="undefined"!=typeof module)?module.exports=mandala():define("mandala",mandala),define("maze_cube",["linked_line"],function(a){var o,i,s,c,l=11,d=1512,f=d/l,u={x:0,y:0,toggle:!0},t={x:0,y:0,z:0},h=window.innerWidth,m=window.innerHeight;function v(e,t,n,a){var r=new THREE.Group,o=new THREE.MeshPhongMaterial({color:a,emissive:8400896,specular:10518656,shininess:40}),i=new THREE.BoxGeometry(e,t,n),s=new THREE.Mesh(i,o);return s.castShadow=!0,s.receiveShadow=!0,r.add(s),r}function p(e){u.toggle&&(c.rotation.x+=.005*Math.PI,c.rotation.z-=.002*Math.PI),t.z=5e3,o.position.set(t.x,t.y,t.z),o.lookAt(i.position),s.render(i,o),requestAnimationFrame(p)}return console.log("test"),{init:function(){console.log("init maze cube");var t=[],e=function(e){return a.generate(l,e)},n=function(e){console.log("adding walls:",t.length,e.wallrects.length),t.push(e.wallrects),progress("render:progress",t.length/6)};perf.start("gen"),e().then(n).then(function(){return e([{x:1,y:2},{x:1,y:3},{x:3,y:3}])}).then(n).then(e).then(n).then(e).then(n).then(e).then(n).then(e).then(n).then(function(){console.log("success"),perf.end("gen"),function(e){(i=new THREE.Scene).fog=new THREE.FogExp2(0,2e-4),o=new THREE.PerspectiveCamera(90,h/m,1,2e4),i.add(o);var t=new THREE.DirectionalLight(9474192,1.5);t.castShadow=!0,t.position.set(0,200,0),i.add(t),(s=new THREE.WebGLRenderer).setSize(h,m),s.shadowMap={type:THREE.BasicShadowMap,enabled:!0},c=new THREE.Group,i.add(c);var n=v(2*d-f,2*d-f,2*d-f,4206624);c.add(n);var a=function(e){var o=new THREE.Group;c.add(o),e.maze.forEach(function(e){var t=(e.x+e.w/2-l-.5)*f,n=(e.y+e.h/2-l-.5)*f,a=d+1,r=v(e.w*f,e.h*f,f,9474192);r.position.set(t,n,a),o.add(r)}),e.rotation.x&&(o.rotation.x=e.rotation.x*Math.PI),e.rotation.y&&(o.rotation.y=e.rotation.y*Math.PI),e.rotation.z&&(o.rotation.z=e.rotation.z*Math.PI)};function r(){u.toggle=!u.toggle}a({maze:e[0],rotation:{x:0},colour:16711680}),a({maze:e[1],rotation:{x:1,z:1.5},colour:65280}),a({maze:e[2],rotation:{x:.5,z:.5},colour:255}),a({maze:e[3],rotation:{x:1.5,z:1},colour:16776960}),a({maze:e[4],rotation:{y:.5,z:1.5},colour:16711935}),a({maze:e[5],rotation:{y:1.5,z:1},colour:65535}),document.body.appendChild(s.domElement),progress("render:complete",s.domElement),p(),window.addEventListener("click",r),window.addEventListener("touchstart",r)}(t)}).catch(function(e){console.warn("fail",e)})}}}),function(){var e,a,r,o,i,s,c,l,d,t,n,f,u,h,m,v,p,g,b,y,x,w,M,E,T,S,R,C,N,k,z;for(i=console,c=document,s=null,a=c.createElement("canvas"),0,16,Math.random(),w={randint:function(e,t){return parseInt(e+Math.random()*(t-e))},shuffle:function(e){var t,n,a;for(n=e.length;n;)t=Math.floor(Math.random()*n--),a=e[n],e[n]=e[t],e[t]=a;return e}},y=function(){var e,t,n,a,r;for(e="",n=a=0;a<16;n=++a){for(t=r=0;r<16;t=++r)e+=f[n][t];e+="\n"}return i.log(e)},f=[],T=R=0;R<16;T=++R){for(M=[],E=C=0;C<16;E=++C)M.push("?");f.push(M)}for(h=[],r=function(e,t){var n,a,r,o,i;for(n=[],f[e][t]=".",0<t&&"?"===f[e][t-1]&&(f[e][t-1]=",",n.push([e,t-1])),t<15&&"?"===f[e][t+1]&&(f[e][t+1]=",",n.push([e,t+1])),0<e&&"?"===f[e-1][t]&&(f[e-1][t]=",",n.push([e-1,t])),e<15&&"?"===f[e+1][t]&&(f[e+1][t]=",",n.push([e+1,t])),i=[],r=0,o=(n=w.shuffle(n)).length;r<o;r++)a=n[r],i.push(h.push(a));return i},m=function(e,t){return f[e][t]="#"},o=function(e,t,n){var a;if(null==n&&(n=!0),(a=0)<t&&"."===f[e][t-1]&&(a+=1),t<15&&"."===f[e][t+1]&&(a+=2),0<e&&"."===f[e-1][t]&&(a+=4),e<15&&"."===f[e+1][t]&&(a+=8),n){if(1===a){if(t<15){if(0<e&&"."===f[e-1][t+1])return!1;if(e<15&&"."===f[e+1][t+1])return!1}return!0}if(2===a){if(0<t){if(0<e&&"."===f[e-1][t-1])return!1;if(e<15&&"."===f[e+1][t-1])return!1}return!0}if(4===a){if(e<15){if(0<t&&"."===f[e+1][t-1])return!1;if(t<15&&"."===f[e+1][t+1])return!1}return!0}if(8!==a)return!1;if(0<e){if(0<t&&"."===f[e-1][t-1])return!1;if(t<15&&"."===f[e-1][t+1])return!1}return!0}return-1!==[1,2,4,8].indexOf(a)},60,n=[],n=[8,52],T=N=e=0;N<16;T=++N)for(E=k=0;k<16;E=++k)if(0===E||0===T||15===E||15===T){if(-1===n.indexOf(e))m(T,E);else for(0,r(T,E),c=0===T?1:-1,t=z=1;z<=4;t=++z)m(S=T+t*c,E-2),m(S,E-1),m(S,E+1),m(S,E+2);e++}y(),d=Math.E,p=0,v=function(e,t,n){return a.width=256,a.height=256,s=a.getContext("2d"),console.log("maze.coffee init",e),l(e)},b=function(){return 2<h.length&&p<1e10},g=function(){var e,t,n;return b()&&(n=Math.random(),(1<=(n=Math.pow(n,Math.pow(d,-10)))||n<0)&&console.log(n),t=Math.floor(n*h.length),e=h[t],o(e[0],e[1])?r(e[0],e[1]):m(e[0],e[1]),h.splice(t,1)),p++},u=function(){var n,a,e,t;for(t=[],T=e=0;e<16;T=++e)t.push(function(){var e,t;for(t=[],E=e=0;e<16;E=++e)n=f[T][E],a={"#":50,".":150,"?":200,",":200}[n],s.fillStyle="rgba("+a+","+a+","+a+",1)",t.push(s.fillRect(16*E,16*T,16,16));return t}());return t},l=function(r){var o;return(o=function(){var e,t,n,a;for(.5,c=t=0;t<=10;c=++t)g();if(b())console.log("drawing"),requestAnimationFrame(o);else{for(console.log("done"),T=n=0;n<16;T=++n)for(E=a=0;a<16;E=++a)"?"!==(e=f[T][E])&&","!==e||(f[T][E]="#");"function"==typeof r&&r()}return u()})()},x={getMaze:function(){return f},init:v,stage:a,resize:function(){return console.log("resize maze not implemented!")},kill:function(){return console.log("kill maze not implemented!")}},window.maze=x,define("maze",window.maze)}.call(this);var meandering_polygons=function(){var e=rand.instance();e.setSeed(Math.random()),colours.instance(e).getRandomPalette();var l,y=window.innerWidth,x=window.innerHeight,w="rgba(180,180,200,1)",M=24,E=[],n=dom.canvas(y,x),T=n.ctx,S=.2;function a(n){return n?function(){var e=50+20*Math.random(),t=.7+.3*Math.random();return"hsla("+n+", 100%, "+e+"%, "+t+")"}:function(){var e=~~(230+25*Math.random());return"rgba("+e+","+e+","+e+","+Math.round(100*(.7+.3*Math.random()))/100+")"}}var R=[];function C(e,t){return e*(e-1)/2+t}function N(){T.fillStyle=w,T.fillRect(0,0,y,x);for(var e=0;e<M;e++){var t=E[e];t.move(),t.draw();for(var n=0;n<e;n++){var a=C(e,n),r=E[n],o=t.x-r.x,i=t.y-r.y,s=(g=Math.sqrt(o*o+i*i))<S;(r.x<0||1<r.x||r.y<0||1<r.y)&&(s=!1),s?(t.force(r,g,o,i),r.force(t,g,o,i),R[a].lineWidth-=.01*(R[a].lineWidth-3)):(R[a].lineWidth*=.9,R[a].lineWidth<.1&&(R[a].lineWidth=0))}}for(var c=0,l=R.length;c<l;c++){var d=R[c],f=d.points,u=E[f[0]],h=E[f[1]];if(d.lineWidth){for(n=0;n<c;n++){var m=R[n];if(m.lineWidth){var v=m.points,p=E[v[0]],g=E[v[1]],b=geom.intersectionBetweenPoints(u,h,p,g);b&&z(b,d.colour)}}k(u,h,d)}}requestAnimationFrame(N)}function k(e,t,n){0<n.lineWidth&&(T.save(),T.beginPath(),T.lineWidth=n.lineWidth,T.strokeStyle=n.colour,2<n.dashes&&T.setLineDash([n.dashes]),T.lineCap="round",T.moveTo(e.x*y,e.y*x),T.lineTo(t.x*y,t.y*x),T.stroke(),T.restore())}function z(e,t){T.beginPath(),T.fillStyle=t,T.drawCircle(e.x*y,e.y*x,3),T.fill()}return{stage:n.canvas,resize:function(e,t){y=e,x=t,n.canvas.width=y,n.canvas.height=x},init:function(e){e.transparentBg&&e.randomHue?(l=a(e.randomHue),w="#2a2a2a"):l=a();for(var t=0;t<M;t++)for(var n=0;n<t;n++)R[C(t,n)]={points:[t,n],lineWidth:0,colour:l(),dashes:~~(5*Math.random())};for(t=0;t<M;)E[t]={x:Math.random(),y:Math.random(),fx:0,fy:0,vx:.001*Math.random(),vy:.001*Math.random(),dir:Math.random()*Math.PI*2,dirFloat:0,rotation:0,rotationFloat:0,type:~~(2*Math.random()),bmp:null,size:0,generate:function(){this.size=6+~~(20*Math.random());var e=dom.canvas(this.size,this.size),t=e.ctx;switch(this.type){case 0:var n=2*Math.random(),a=this.size/2-n;t.beginPath(),t.lineWidth=n,t.strokeStyle=l(),t.drawCircle(this.size/2,this.size/2,a),t.stroke(),a*=Math.random(),t.beginPath(),t.fillStyle=l(),t.drawCircle(this.size/2,this.size/2,a),t.fill();break;case 1:var r=3+~~(7*Math.random());t.beginPath(),t.lineWidth=2,t.strokeStyle=l(),t.drawCircle(this.size/2,this.size/2,a-1);for(var o=0;o<r;o++){var i=o/r*Math.PI*2,s=this.size/2+this.size/2*.8*Math.cos(i),c=this.size/2+this.size/2*.8*Math.sin(i);0==o?t.moveTo(s,c):t.lineTo(s,c)}t.closePath(),t.stroke()}this.bmp=e},draw:function(){null==this.bmp&&this.generate(),T.save(),T.translate(this.x*y,this.y*x),T.rotate(this.rotation),T.drawImage(this.bmp.canvas,-this.size/2,-this.size/2),T.restore()},attraction:-1e-5,speed:1e-4,friction:.9,move:function(){this.rotationFloat+=.5*(.5<Math.random()?-1:1),this.rotation-=.01*(this.rotation-this.rotationFloat),this.dirFloat+=.1*(.5<Math.random()?-1:1),this.dir-=.01*(this.dir-this.dirFloat),this.vx+=Math.sin(this.dir)*this.speed+this.fx,this.vy+=Math.cos(this.dir)*this.speed+this.fy,this.vx*=this.friction,this.vy*=this.friction,this.x+=this.vx,this.y+=this.vy,this.x<-.2&&(this.x=1.2),1.2<this.x&&(this.x=-.2),this.y<-.2&&(this.y=1.2),1.2<this.y&&(this.y=-.2)},force:function(e,t,n,a){this.fx=n/t*this.attraction,this.fy=a/t*this.attraction}},t++;N();var s=!1,c=null;addEventListener("mousedown",function(e){s=!0;for(var t=e.x/y,n=e.y/x,a=0;a<M;a++){var r=E[a],o=r.x-t,i=r.y-n;if(Math.sqrt(o*o+i*i)<.1){T.beginPath(),T.fillStyle="red",T.drawCircle(r.x*y,r.y*x,20),T.fill(),c=a;break}}}),addEventListener("mouseup",function(e){s=!1,c=null}),addEventListener("mousemove",function(e){if(s&&null!=c){var t=e.x/y,n=e.y/x;E[c].x=t,E[c].y=n}})},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=meandering_polygons():define("meandering_polygons",meandering_polygons);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var number=function(e,t){return fxrand()*(t-e)+e},integer=function(e,t){return~~number(e,t+1)},colourMutate=function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],r=t[2],o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return"rgb("+[n,a,r].map(function(e){return~~number(e-o,e+o)}).join(",")+")"},limitVisible=function(e){return Math.min(Math.max(e,30),250)},modAm=20,greyMod=[0,0,0].map(function(){return number(-1,1)*modAm}),highlight=[0,0,0].map(function(e,t){return limitVisible(~~number(50,240)+greyMod[t])});function colourGrey(e){var t={darkest:0,lightest:255,alpha:1};for(var n in e)t[n]=e[n];var a=t.white||integer(t.darkest,t.lightest);return"rgba("+limitVisible(a+greyMod[0])+","+limitVisible(a+greyMod[1])+","+limitVisible(a+greyMod[2])+","+t.alpha+")"}function makeCanvas(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}function generateNoise(e,t,n){var a={darkest:1,lightest:4,alpha:.3,percentage:0};for(var r in n)a[r]=n[r];for(var o=makeCanvas(e,t),i=o.getContext("2d"),s=0;s<e;s++)for(var c=0;c<t;c++)number(0,1)>a.percentage&&(i.fillStyle=colourGrey(a),i.fillRect(s,c,1,1));return o}var noise=void 0;function generateMetal(e,t){noise=noise||generateNoise(300,300,{percentage:.1});var n=makeCanvas(e,t),a=n.getContext("2d");return a.fillStyle=colourGrey({darkest:0,lightest:90,alpha:1}),a.fillRect(0,0,e,t),a.drawImage(noise,0,0),n}function drawCircle(e,t,n,a,r){e.moveTo(t+a,n);var o={fillStyle:"#fff",lineWidth:0,strokeStyle:"#000"};for(var i in r)o[i]=r[i];e.fillStyle=o.fillStyle,e.lineWidth=o.lineWidth,e.strokeStyle=o.strokeStyle,e.beginPath(),e.arc(t,n,a,0,pi2,!0),e.closePath(),o.fillStyle&&e.fill(),o.lineWidth&&e.stroke()}function drawBand(e,t,n){var a=n-t;drawCircle(e,0,0,(n+t)/2,{fillStyle:null,strokeStyle:.7<number(0,1)?colourMutate(highlight,20):colourGrey(),lineWidth:a})}function drawCutouts(e,t,n,a){var r=(a+n)/2,o=a-n;switch(integer(1,2)){case 1:generateHoles(e,t,r,o);break;case 2:generateSegment(e,t,r,o)}}function generateHoles(e,t,n,a){var r=a/2*number(.6,.9),o=~~(number(.5,.9)*pi2*n/r/2);r*=number(.5,.9);for(var i=0;i<o;i++){var s=i/o*pi2;drawCircle(e,n*Math.cos(s),n*Math.sin(s),r)}}function generateSegment(e,t,n,a){for(var r=0==integer(0,1),o=1+~~Math.pow(t,1/integer(2,r?4:3)),i=number(.5,.8)*a,s=(pi2/o-(Math.asin(i/n)*r?1:.5))*number(.5,.9),c=n-i/2,l=n+i/2,d=0;d<o;d++){var f=d/o*pi2,u=f+s;e.beginPath(),e.moveTo(Math.cos(f)*c,Math.sin(f)*c),e.arc(0,0,c,f,u,!1),r?e.arc(Math.cos(u)*n,Math.sin(u)*n,i/2,u+pi,u,!0):e.lineTo(Math.cos(u)*l,Math.sin(u)*l),e.arc(0,0,l,u,f,!0),r?e.arc(Math.cos(f)*n,Math.sin(f)*n,i/2,f,f+pi,!0):e.lineTo(Math.cos(f)*c,Math.sin(f)*c),e.closePath(),e.fill()}}function drawSpokes(e,t,n,a){var r=Math.min(Math.max(2,Math.floor(t*number(.2,1))),50),o=n*Math.atan(pi/r)*number(.6,1),i=20<r?o:a*Math.atan(pi/r)*number(.1,.3);e.beginPath();for(var s=0;s<r;s++){var c=s/r*pi2,l=pi/2-c,d=o*Math.cos(l),f=o*Math.sin(l),u=i*Math.cos(l),h=i*Math.sin(l);e[0==s?"moveTo":"lineTo"](Math.cos(c)*n+d,Math.sin(c)*n-f),e.lineTo(Math.cos(c)*a+u,Math.sin(c)*a-h),e.lineTo(Math.cos(c)*a-u,Math.sin(c)*a+h),e.lineTo(Math.cos(c)*n-d,Math.sin(c)*n+f)}e.closePath(),e.fill()}function drawBike(i,e,t){for(var n=1.1*e,s=.9*t,a=integer(5,10),r=integer(1,3),o=2*integer(0,1)-1,c=0,l=Array(r).fill().map(function(){return{offsetAngle:c+=o*number(0,.3),offsetRadius:number(n+.3*(s-n),s)}}),d=t/10,f=function(){var o=u/a*pi2;i.beginPath(),i.moveTo(Math.cos(o)*n,Math.sin(o)*n),l.forEach(function(e,t){var n=e.offsetAngle,a=e.offsetRadius,r=t<2?s:a;i.lineTo(Math.cos(o+n)*r,Math.sin(o+n)*r)}),i.lineJoin="round",i.closePath(),i.strokeStyle="#000",i.lineWidth=d,i.fill(),i.stroke()},u=0;u<a;u++)f()}function drawSeeds(e,t,n){for(var a=integer(5,10),r=pi2/a,o=n-t,i=number(1.3*t,1.5*t),s=Math.floor(o/10),c=1;c<s;c++){var l=i+1*Math.pow(c*(o/s),2),d=Math.sin(r/2)*l*1.3/2*.8;if(.95*n<l+d)break;for(var f=0;f<a;f++){var u=(f+c%2*.5)*r;drawCircle(e,Math.cos(u)*l,Math.sin(u)*l,d)}}}var isLight=function(e){return e<.1},SPOKES="SPOKES",MANDALA="MANDALA",CIRCLES="CIRCLES",BIKE="BIKE",allStyles=[BIKE],getVariants=function(e){return e<.6?allStyles:e<.9?allStyles.filter(function(){return.5<number(0,1)}):allStyles.splice(integer(0,allStyles.length-1),1)};window.$fxhashFeatures={isLight:isLight(fxrand()),isSpinning:.5<fxrand(),isZooming:.5<fxrand(),variants:getVariants(fxrand()),speed:.01+.03*fxrand()};var pi=Math.PI,pi2=2*pi;function mechadv(){var u=makeCanvas(1,1),J=u.getContext("2d");return{init:function(e){var l=e.size,h=l,m=l;u.width=h,u.height=m;var t=window.$fxhashFeatures,F=t.isLight,n=t.isSpinning,a=t.isZooming,B=t.speed,W=t.variants;console.log("$fxhashFeatures",window.$fxhashFeatures),F&&(document.body.style.background="#fff");var G=1,r=1,V=[],X=.5*h,Y=.5*m,U=0,Q=0;function v(e,t,n){var m,v,p,a,r,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=V[e];if(t&&n&&s){var c=n-s.yp,l=t-s.xp;r=Math.atan(c/l),r+=l<0?pi:0,l=Math.abs(l)-Math.abs(s.size),c=Math.abs(c)-Math.abs(s.size),p=o||Math.sqrt(l*l+c*c)}else r=number(0,pi2),p=o||number(60,300);var g=~~(p/10);if(!(g<5)){var d=s&&s.cx||X,f=s&&s.cy||Y;if(s){a=-1*s.cogDirection;var u=s.wtf;d+=(u+=p-10)*Math.cos(r),X=d,f+=u*Math.sin(r),Y=f}else a=1;U=p-10;for(var b=p-22,h=p+0,y=[],x=pi2/(4*g),w=0,M=0,E=(h-b)/1.6+b,T=0;T<4*g;T++){var S=T*x,R=~~w%2,C=R*(h-b)+b;w+=.5,M+=1;var N=S-x/2,k=C*Math.cos(N),z=C*Math.sin(N),P=void 0;P=M%2==0?{tb:R,ex:k,ey:z}:{tb:R,mp:!0,ex:k,ey:z,mx:E*Math.cos(S-x),my:E*Math.sin(S-x)},y.push(P)}var _=d,I=f,H=number(0,pi2);s&&(H=s.teeth/g*-s.rotation+r*(s.teeth+g)/g,g%2==0&&(H+=pi2/(2*g)));var A={cogDirection:a,spin:1,wtf:U,cx:d,cy:f,size:p,rotation:H,teeth:g,xp:_,yp:I};if(i)for(var L=0;L<V.length;L++){var q=V[L];if(q!=s){var O=_-q.xp,D=I-q.yp;if(Math.sqrt(O*O+D*D)<p+q.size)return}}var j=function(){m||function(){var e=2*(p+5),t=.2*b,n=W[integer(0,W.length-1)];m=makeCanvas(e,e),(v=m.getContext("2d")).save(),v.translate(p+5,p+5),v.fillStyle=colourGrey({darkest:20,lightest:70}),v.beginPath();var a=y[0];v.moveTo(a.ex,a.ey);for(var r=1;r<y.length;r++)(a=y[r]).mp?v.quadraticCurveTo(a.mx,a.my,a.ex,a.ey):v.lineTo(a.ex,a.ey);if(a=y[0],v.quadraticCurveTo(a.mx,a.my,a.ex,a.ey),v.closePath(),v.fill(),drawCircle(v,0,0,b,{fillStyle:colourGrey({lightest:20})}),.5<number(0,1)){var o=generateMetal(300,300),i=v.createPattern(o,"repeat");v.fillStyle=i,v.fill()}if(.5<number(0,1)){var s=integer(12,p/5);40<s&&(s=40);for(var c=0;c<s;c++)drawCircle(v,0,0,number(t,b),{fillStyle:null,lineWidth:1,strokeStyle:colourGrey({darkest:1,lightest:200,alpha:number(.01,.1)})})}switch(n){case BIKE:v.globalCompositeOperation="destination-out",drawBike(v,t,b);break;case MANDALA:v.globalCompositeOperation="destination-out",drawSeeds(v,t,b);break;case SPOKES:var l=b*number(.8,.9),d=number(t,b/2);v.globalCompositeOperation="destination-out",drawCircle(v,0,0,l-5,{fillStyle:"green"}),v.globalCompositeOperation="source-over",v.fillStyle=colourGrey({lightest:70}),drawSpokes(v,g,d,l),drawCircle(v,0,0,d+5,{fillStyle:colourGrey()});break;case CIRCLES:v.globalCompositeOperation="destination-out",drawCutouts(v,g,t+.1*b,.9*b)}v.globalCompositeOperation="source-over",drawBand(v,t,t+b*number(.02,.2));var f=.8<number(0,1),u=void 0;if(f&&(u=b*number(.8,.98),drawBand(v,u,b)),f&&.8<number(0,1)){var h=u+(b-u)/2;v.font="15px Courier",v.fillStyle=colourGrey({darkest:0,lightest:100}),fxhash.split("").forEach(function(e,t){var n=t*Math.asin(12/h);v.save(),v.rotate(-n),v.translate(0,h+4),v.fillText(e,0,0),v.restore()})}v.globalCompositeOperation="source-over",drawCircle(v,0,0,t,{fillStyle:F?"#fff":"#000"})}(),J.save(),J.translate(_,I),J.rotate(H),J.drawImage(m,-p-5,-p-5),J.restore()};return A.rotate=function(){H+=pi2/g*a*B*G,j()},V[Q]=A,Q++,A}}var o=0,i=-.005*number(-1,1),s=-pi/2,c=function(e){var t=e.d,n=e.size,a=e.min,r=e.total,o=e.larger,i=l-a;v(null,X=a+t,Y=a+t,n*o);for(var s=1,c=0;c<r-1;c++)i<(X+=t*s)?(Y+=t,X-=t,s*=-1):X<a+1*n&&(Y+=t,X+=t,s*=-1),v(c,X,Y,1==o?n:n*(((c+1)%2==1)+1)*o)},d=function(r){return function(){var e=0;v(null,X,Y,number(50,h/2));for(var t=0;e<4e3;){var n=number(0,h),a=number(0,m);v(t,n,a,void 0,!0)&&(r&&(v(2<V.length?t-1:0,h-n,m-a,void 0,!0),t++),t++),e++}}},f=[function(){return c({d:150,size:190,min:100,total:121,larger:1})},function(){return c({d:150,size:40,min:300,total:64,larger:4})},d(!0),d(!1),function(){for(var e=number(100,300),t=2*integer(0,1)-1,n=number(0,pi2),a=number(.03,.04),r=e*number(1,2),o=number(1,2),i=0;i<15;i++){var s=n+t*Math.pow(i*a,1.2)*pi2,c=100+Math.pow(i*r,o),l=.5*h+Math.sin(s)*c,d=.5*m+Math.cos(s)*c,f=.5*h+Math.sin(s+pi)*c,u=.5*m+Math.cos(s+pi)*c;J.fillStyle="green",J.fillRect(l-5,d-5,10,10),J.fillRect(f-5,u-5,10,10),1==i?(v(0,l,d,e,!0),v(0,f,u,e,!0)):1<i?(v(2*i-3,l,d,e,!0),v(2*i-2,f,u,e,!0)):v(null,l,d,e)}},function(){var o=Array(8).fill().map(function(){return number(100,500)});v(null,.5*h,.5*m,500),[{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:1,y:0}].forEach(function(e,t){for(var n=e.x,a=e.y,r=0;r<8;r++)v(0==r?r:r+8*t,.5*h+n*(r+1)*750,.5*m+a*(r+1)*750,o[r])})}];f[integer(0,f.length-1)](),function e(){requestAnimationFrame(e),J.fillStyle=F?"#fff":"#000",J.fillRect(0,0,h,m),J.save();var t=Math.sin(s)+(a?1.7:2);J.translate(.5*h,.5*m),J.scale(t,t),J.translate(0,0),J.rotate(o*i),J.translate(-h/2,-m/2),V.forEach(function(e){return e.rotate()}),J.restore(),o+=Number(n),s+=a?.002:0,G-=.04*(G-r)}(),document.body.addEventListener("click",function(e){var t=2*Math.floor(2*Math.random())-1,n=e.clientY/window.innerHeight;r=B+Math.random()*n*10*t})},stage:u}}if(isNode="undefined"!=typeof module)colours=require("./colours.js"),dom=require("./dom.js"),rand=require("./rand.js");var mining_branches=function(){return function(){var t,o,n,T,S,a,R=rand.instance(),C=colours.instance(R),i=200;var s=dom.element("div");return{stage:s,init:function(e){for(n=e.size,T=e.sw||n,S=e.sh||n,R.setSeed(e.seed);s.childNodes.length;)s.removeChild(s.childNodes[0]);C.getRandomPalette(),t=C.getRandomColour(),o=C.getNextColour(),function(h){S=T=n*h,(a=dom.canvas(T,S)).canvas.setSize(T/h,S/h);var c,e,l,m=a.ctx,d=.5,f=.5,u=[],v=[[]],p=0,g=.01,b=.01,y=0,x=0,w={increaseMutation:.5<R.random(),drawNodes:.5<R.random(),straight:.5<R.random(),megaNodes:.5<R.random(),megaSubNodes:.5<R.random(),constantMegaNodeSize:.5<R.random(),constantMegaSubNodeSize:.5<R.random()};function M(e,t){t.index=e,l=t,u[e]=t,v[p].push(t)}function E(e){var t={x:d+Math.sin(y)*g+.05*(R.random()-.5),y:f+Math.cos(y)*g+.05*(R.random()-.5),rotation:y,distance:g},n=!0,a=1e7;for(c=u.length-1;-1<c&&n;){var r=u[c],o=t.x-r.x,i=t.y-r.y,s=Math.sqrt(o*o+i*i);s<.04?n=!1:(a=Math.min(s,a))==s&&(t.closest=u[c]),c--}t.x==l.x&&t.y==l.y&&(n=!1),n?(x=0,w.increaseMutation?t.mutationRate=1.04*t.closest.mutationRate:t.mutationRate=.9*t.closest.mutationRate,t.colour=C.mutateColour(t.closest.colour,t.mutationRate),M(e,t)):(x<40?y+=20*R.random()+Math.atan(1/g):(v[++p]=[],g+=R.random()*b+.0025),x++,E(e))}function r(e,t,n){var a=e.closest,r=a?a.colour:e.colour,o=1-e.distance;if(w.drawNodes){var i=o*h*5;m.beginPath(),m.fillStyle=r,m.drawCircle(e.x*T,e.y*S,i),m.fill()}if(a){if(m.beginPath(),m.lineWidth=Math.pow(1.1,6*o)*h,m.strokeStyle=r,m.lineCap="round",m.moveTo(t*T,n*S),w.straight)m.lineTo(a.x*T,a.y*S);else if(a.closest){var s=a.x+(a.closest.x-a.x)/2,c=a.y+(a.closest.y-a.y)/2,l=a.x+(a.x-s),d=a.y+(a.y-c);m.quadraticCurveTo(l*T,d*S,a.x*T,a.y*S)}else{var f=a.x+(t-a.x)/2,u=a.y+(n-a.y)/2;m.quadraticCurveTo(f*T,u*S,a.x*T,a.y*S)}m.stroke()}}for(M(0,{x:d,y:f,distance:0,rotation:0,colour:t,mutationRate:10}),e=1;e<i;)E(e),e++;!function(){m.fillStyle=o,m.fillRect(0,0,T,S);for(var e=u.length-1;-1<e;)r(t=u[e],t.x,t.y),e--;if(w.megaNodes)for(e=u.length-1;-1<e;){var t;n=t=u[e],t.x,t.y,a=(1-n.distance)*h*5,w.megaNodes&&(m.beginPath(),m.fillStyle=o,m.drawCircle(n.x*T,n.y*S,.7*a*(w.constantMegaNodeSize?1:R.random())),m.fill(),w.megaSubNodes&&.5<R.random()&&(m.beginPath(),m.fillStyle=n.colour,m.drawCircle(n.x*T,n.y*S,.9*a*(w.constantMegaSubNodeSize?1:R.random())),m.fill())),e--}var n,a}(),s.appendChild(a.canvas)}(1)}}}};isNode?module.exports=mining_branches():define("mining_branches",mining_branches);var render,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},centre=(con=console,dom=require("./dom.js"),fs=require("fs"),(size=300)/2),gridY=12,gridX=4*gridY,thirty=Math.PI/6,sinThirty=Math.sin(thirty),cosThirty=Math.cos(thirty),unit=(ctx=(c=dom.canvas(size,size)).ctx,90),saveFile=function(e,t,n){var a="/../export/"+(1==String(t).length?"0":"")+t+".png";e.toBuffer(function(e,t){e?con.log("saveFile err",e):fs.writeFile(__dirname+a,t,function(){con.log("saveFile success",void 0===t?"undefined":_typeof(t),__dirname+a),n()})})},draw=function(t,n){var e=function(e){ctx.save(),ctx.translate(t,n),ctx.rotate(e),ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(sinThirty*unit,cosThirty*unit),ctx.lineTo(0,cosThirty*unit*2),ctx.lineTo(-sinThirty*unit,cosThirty*unit),ctx.closePath(),ctx.fill(),ctx.restore()};e(1*thirty),e(5*thirty),e(9*thirty)},frames=32,loops=3;(render=function e(t){var n=Math.sin(t/frames*Math.PI*2-Math.PI/2)+1.98;unit=51;var a=Math.floor(t/frames)*Math.PI*2/3/4;ctx.fillStyle="#000",ctx.fillRect(0,0,size,size),ctx.fillStyle="#d11",ctx.save(),ctx.translate(centre,centre),ctx.rotate(a),ctx.translate(-centre,-centre);for(var r=0;r++<gridX;)for(var o=0;o++<gridY;){draw(centre+(r-gridX/2)*cosThirty*unit*n,centre+(r%2*3+6*(o-gridY/2))*sinThirty*unit*n)}ctx.restore(),saveFile(c.canvas,t,function(){++t<frames*loops&&e(t)})})(0);var molecular_three=function(){var h,m,v,p={x:0,y:0},t={x:0,y:0,z:0},g=window.innerWidth,b=window.innerHeight;function y(e,t){return Math.random()*(t-e)+e}var e=rand.instance();e.setSeed(Math.random());var x,w,M=colours.instance(e),E=0,T=50,S=y(4,15),R=S*y(1,3),C=y(0,10),N=[],k=!1,z=0;function P(e){var t=new THREE.MeshLambertMaterial({color:e.colour}),n=new THREE.SphereGeometry(e.radius,10,10);return new THREE.Mesh(n,t)}function _(e){var t=new THREE.Group,n=new THREE.MeshLambertMaterial({color:e.colour}),a=new THREE.CylinderGeometry(e.radius,e.radius,e.height,15),r=new THREE.Mesh(a,n);return r.position.y=e.height/2,t.add(r),{colour:e.colour,group:t,object:r}}function I(e){var t=e.object.geometry.vertices.length,n=e.object.geometry.vertices[t-2];return new THREE.Vector3(n.x+e.object.position.x,n.y+e.object.position.y,n.z+e.object.position.z)}function H(e){k&&(w.rotation.y+=.01),t.z=1e3,h.position.set(t.x,t.y,t.z),h.lookAt(m.position),v.render(m,h),requestAnimationFrame(H)}return{init:function(){M.getRandomPalette(),(m=new THREE.Scene).fog=new THREE.FogExp2(0,.0015),h=new THREE.PerspectiveCamera(80,g/b,1,1e4),m.add(h);var e=new THREE.DirectionalLight(16777215,1.5);e.position.set(0,200,100),m.add(e);var t=new THREE.DirectionalLight(16777215,4);function c(e){var t=new THREE.Vector3;t.setFromMatrixPosition(e.matrixWorld);for(var n=(new Date).getTime(),a=!0,r=0,o=N.length;r<o&&a;r++)t==N[r]&&con.log("same one",t,N[r]),t.distanceTo(N[r])<T-5&&(a=!1);var i=(new Date).getTime()-n;return 3<i&&con.warn("proc time = ",i),{vector:t,ok:a}}function o(e,t){var n=M.mutateColour(e.colour,50),a=_({radius:S,height:T,colour:n});a.group.position.set(t.x,t.y,t.z),a.group.rotation.z=2*y(-.5,.5)*Math.PI*z/300*C,a.group.rotation.y=y(0,2)*Math.PI;var r=I(a),o=P({radius:3,colour:16711680});o.position.set(r.x,r.y,r.z),a.group.add(o),e.group.add(a.group),e.group.updateMatrixWorld();var i=c(o);if(a.group.remove(o),i.ok){N.push(i.vector);var s=P({radius:R,colour:n});return s.position.set(i.vector.x,i.vector.y,i.vector.z),w.add(s),a}return a.group.remove(o),e.group.remove(a.group),null}function i(e){if(T=50*(2-++z/300)/2,z<300){progress("render:progress",z/300);for(var t=I(e),n=parseInt(y(1,3)),a=0;a<n;a++){var r=o(e,t);r&&(x=(new Date).getTime(),function(e,t){setTimeout(function(){k?con.log("wanted to created another, but time out..."):i(t)},10*z)}(0,r))}}else k=!0,progress("render:complete",v.domElement)}t.position.set(-100,0,100),m.add(t),(v=new THREE.WebGLRenderer({antialias:!0})).setSize(g,b),w=new THREE.Group,m.add(w),E=setInterval(function(){3e3<(new Date).getTime()-x&&(con.log("more than 3 seconds... bailing!"),k=!0,progress("render:complete",v.domElement),clearInterval(E))},500);for(var n=parseInt(y(10,50)),a=M.getRandomColour(),r=0;r<n;r++){var s=_({radius:S,height:T,colour:a});s.group.rotation.set(y(0,2)*Math.PI,y(0,2)*Math.PI,y(0,2)*Math.PI),w.add(s.group);var l=I(s),d=P({radius:R,colour:a});d.position.set(l.x,l.y,l.z),s.group.add(d),s.group.updateMatrixWorld();var f=c(d);f.ok?(N.push(f.vector),i(s)):(s.group.remove(d),w.remove(s.group))}function u(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(v.domElement),u(["resize"],function(e){g=window.innerWidth,b=window.innerHeight,h.aspect=g/b,h.updateProjectionMatrix(),v.setSize(g,b)}),u(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),p.x=e.clientX/g*2-1,p.y=-e.clientY/b*2+1}),H()},resize:function(){}}};define("molecular_three",molecular_three);var posJump;_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},isNode="undefined"!=typeof module;posJump=isNode?(con=console,dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js"),Ease=require("../lib/robertpenner/ease.js"),progress=function(){return fs=require("fs")},saveFile=function(e,t,n){var a="/../export/"+(1==String(t).length?"0":"")+t+".png";e.toBuffer(function(e,t){e?con.log("saveFile err",e):fs.writeFile(__dirname+a,t,function(){con.log("saveFile success",void 0===t?"undefined":_typeof(t),__dirname+a),n()})})},.02):.005;var nested_rotating_polygon=function(){var u,h,m,v=2*Math.PI,t=dom.canvas(1,1),p=t.ctx,g=0,b=0,y="#000",x="#fff",e=0;function n(){e++,p.fillStyle=m%2?y:x,p.fillRect(0,0,u,u),function e(t){var n=t.depth+1;var a=[];if(t.points){var r=Ease.easeInOutQuart(g,0,1,1)+b;for(f=0;f<h;f++){var o=t.points[f],i=t.points[(f+1)%h],s=geom.lerp({x:o.x,y:o.y},{x:i.x,y:i.y},r/2),c=s.x,l=s.y;a.push(s)}}else for(f=0;f<h;f++){var d=f/h*v+v/4,c=u/2+u/2*.98*Math.cos(d),l=u/2+u/2*.98*Math.sin(d);a.push({x:c,y:l})}p.fillStyle=n%2?y:x;p.strokeStyle=p.fillStyle;p.lineWidth=2;p.beginPath();p.strokeStyle="0";for(var f=0;f<h;f++){var c=a[f].x,l=a[f].y;0==f?p.moveTo(c,l):p.lineTo(c,l)}p.closePath();n===m&&p.stroke();p.fill();n<m&&e({depth:n,points:a})}({depth:0}),1<=(g+=posJump)&&(g=0,b++,b%=2),isNode?saveFile(t.canvas,e,function(){e<1/posJump*2?n():con.log("stopping - frame:",e,"pos:",g)}):requestAnimationFrame(n)}return{stage:t.canvas,init:function(e){u=e.size,t.setSize(u,u),h=3,m=6,progress("render:complete",t.canvas),n()}}};isNode?(module.exports=exp=nested_rotating_polygon(),con.log(exp),exp.init({size:700})):define("nested_rotating_polygon",nested_rotating_polygon);sw=600,sh=600;function genRan(e,t){return Math.random()*(t-e)+e}var o,oscs=[],oscillators=15;for(o=0;o<oscillators;o++)oscs[o]=[],oscs[o][0]=genRan(0,.1),oscs[o][1]=genRan(0,.1),oscs[o][2]=genRan(0,.1),oscs[o][3]=genRan(0,.1);function getOsc(e,t,n){var a=0;for(o=0;o<oscillators;o++)a+=Math.sin(e*oscs[o][t])*n;return a/=oscillators}var bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);h=0;var xRange=30,yRange=30,xGap=sw/xRange*1,yGap=sh/yRange*1,xHalf=xRange/2,yHalf=yRange/2;frame=0;function newLine(){bmp.ctx.clearRect(0,0,sw,sh);for(var e=0;e<yRange;e++)for(var t=0;t<xRange;t++){0;var n=t+e,a=frame+n,r=15,o=(t+.5)*xGap+getOsc(a,2,r),i=(e+.5)*yGap+getOsc(a,3,r);bmp.ctx.fillStyle="#000",bmp.ctx.fillText(Math.round(n),o-2,i-2)}(frame+=1)<5e9&&requestAnimationFrame(newLine)}newLine(),define("oscillator",function(){var d=window.innerWidth,f=window.innerHeight,t=rand.instance();t.setSeed(Math.random());colours.getRandomPalette();var u,h,m=colours.getRandomColour(),v=colours.getNextColour(),e=dom.canvas(d,f),p=e.ctx,g=1,b=10,y=Math.ceil(200),x=d/y,w=f/y,o=[],i=10;function M(e,t,n){for(var a=0,r=0;r<i;r++)0,a+=Math.sin(e*o[r][t])*n;return a}var E=t.getInteger(0,1e6);return{init:function(){!function(){for(var e=0;e<i;e++)o[e]=[],o[e][0]=t.getNumber(0,.1),o[e][1]=t.getNumber(0,.1),o[e][2]=t.getNumber(0,.1),o[e][3]=t.getNumber(0,.1)}(),function(e){p.fillStyle=m,p.fillRect(0,0,d,f),p.fillStyle=v,u=.02*e;for(var t=h=0;t<y;){for(var n=0;n<y;n++){var a=E+n,r=M(a,0,b),o=M(a,1,b),i=M(a+u,2,b),s=M(a-u,3,b),c=i+r+x*n,l=s+o+h;p.beginPath(),p.drawCircle(c,l,g),p.fill()}u+=.4,h+=w,t++}}(0)},stage:e.canvas}});isNode="undefined"!=typeof module;(r=rand.instance()).setSeed(Math.random());var c=colours.instance(r),overflow=function(){var t,i,s,f=2*Math.PI,n=dom.canvas(1,1),l=n.ctx,u=[];function a(){for(var e={colour:c.getRandomColour(),points:[]},t=r.getInteger(3,17),n=r.getNumber(.1,.4),a=r.getNumber(0,1),o=r.getNumber(0,1),i=0;i<t;i++){var s=i/t*f,l=a+Math.sin(s)*n,d=o+Math.cos(s)*n;e.points.push({x:l,y:d})}u.push(e)}var e={stage:n.canvas,init:function(e){t=e.size,i=e.sw||t,s=e.sh||t,n.setSize(i,s),c.getRandomPalette(),a(),a(),u.forEach(function(e){l.strokeStyle=e.colour,l.beginPath(),e.points.forEach(function(e,t){var n=e.x,a=e.y,r=n*i,o=a*s;t?l.lineTo(r,o):l.moveTo(r,o)}),l.closePath(),l.stroke()})}};return progress("render:complete",n.canvas),e};isNode?module.exports=overflow():define("overflow",overflow);sw=window.innerWidth,sh=window.innerHeight,ctx=(bmp=dom.canvas(sw,sh)).ctx;var patternMonochrome,patternColoured,widths,pallete,palette,palettePreview,preview,title,dot=2,rotation=0;(r=rand.instance()).setSeed(Math.random());c=colours.instance(r),container=dom.element("div",{className:"container",style:{width:sw+"px",height:sh+"px"}});function newSize(){size=10*Math.ceil(10*Math.random())}function newStripes(){var e=2+~~(5*Math.random());for(widths=[0];widths.length<e;)widths.push(2*Math.ceil(1+Math.random()*(size-1)/2));widths.push(size);var n=[];widths.map(function(e,t){widths.indexOf(e)==t&&n.push(e)}),widths=n.sort(function(e,t){return e<t?-1:1})}function newPalette(){c.getRandomPalette(),palettePreview&&(container.removeChild(palettePreview),palettePreview.removeEventListener("click",changePalette)),(palettePreview=c.showPalette()).addEventListener("click",changePalette),container.appendChild(palettePreview)}function newColours(){palette=[];for(var e=0;palette.length<widths.length-1;){var t=c.getRandomColour();(-1==palette.indexOf(t)||100<e)&&palette.push(t),e++}}function reset(){newSize(),newStripes(),newPalette(),newColours(),render()}function changeStripes(){newStripes(),newColours(),render()}function changeSize(e){dot=e,render()}function changeRotation(){rotation+=Math.PI/4,render()}function changePalette(){newPalette(),newColours(),render()}function render(){patternColoured=dom.canvas(size*dot,size*dot),patternMonochrome&&patternDetails.removeChild(patternMonochrome.canvas),patternMonochrome=dom.canvas(size*dot,size*dot);for(var e=[["#666","#aaa"],["#333","#888"]],t=0;t<widths.length-1;t++)for(var n=widths[t],a=widths[t+1]-n,r=palette[t],o=e[0][t%2],i=0;i<widths.length-1;i++)for(var s=widths[i],c=widths[i+1]-s,l=palette[i],d=e[1][i%2],f=0;f<a;f++)for(var u=0;u<c;u++)patternColoured.ctx.fillStyle=(f+u)%2==0?r:l,patternColoured.ctx.fillRect((n+f)*dot,(s+u)*dot,dot,dot),patternMonochrome.ctx.fillStyle=(f+u)%2==0?o:d,patternMonochrome.ctx.fillRect((n+f)*dot,(s+u)*dot,dot,dot);patternDetails.appendChild(patternMonochrome.canvas),ctx.save(),ctx.rect(0,0,sw,sh),ctx.rotate(rotation),ctx.fillStyle=ctx.createPattern(patternColoured.canvas,"repeat"),ctx.fill(),ctx.restore()}document.body.appendChild(container),container.appendChild(bmp.canvas);var buttonsTop=dom.element("div",{className:"buttons top"});container.appendChild(buttonsTop);var buttonsBottom=dom.element("div",{className:"buttons bottom"});container.appendChild(buttonsBottom);var patternDetails=dom.element("div",{className:"pattern"});container.appendChild(patternDetails),patternDetails.addEventListener("click",changeStripes);var buttonExport=dom.button("get css",{className:"button export"});function save(e,t){var n=e.toDataURL("image/jpeg"),a="check_"+t+"_"+(1e9*Math.random()<<0).toString(16)+"-.jpg";dom.element("a",{href:n,download:a}).click()}buttonExport.addEventListener("click",function(e){var t=patternColoured.canvas.toDataURL("image/jpeg");if(void 0===preview){preview=dom.element("div",{className:"preview"});var n=dom.element("div",{className:"title",innerHTML:"And the CSS..."});preview.appendChild(n);var a=dom.button("close",{className:"close"});a.addEventListener("click",function(e){container.removeChild(preview)}),preview.appendChild(a),preview.css=dom.element("div",{className:"css"}),preview.appendChild(preview.css)}container.appendChild(preview);var r="rotate("+rotation+"rad)",o=["background-image: url("+t+");","background-repeat: repeat;","-webkit-transform: "+r+";","-moz-transform: "+r+";","-ms-transform: "+r+";","-o-transform: "+r+";","transform: "+r+";"];preview.css.innerHTML=o.join("<br>")}),buttonsTop.appendChild(buttonExport);var buttonSaveOne=dom.button("pattern image",{className:"button"});buttonSaveOne.addEventListener("click",function(e){save(patternColoured.canvas,"pattern")}),buttonsTop.appendChild(buttonSaveOne);var buttonSaveTiled=dom.button("tiled image",{className:"button"});buttonSaveTiled.addEventListener("click",function(e){save(bmp.canvas,"tiled")}),buttonsTop.appendChild(buttonSaveTiled);var sizes=[1,2,3,4];for(var s in sizes){var size=sizes[s],buttonSize=dom.button(size+"x",{className:"button",size:size});buttonSize.addEventListener("click",function(){changeSize(this.size)}),buttonsBottom.appendChild(buttonSize)}var buttonRotation=dom.button("rotation",{className:"button"});buttonRotation.addEventListener("click",function(){changeRotation()}),buttonsBottom.appendChild(buttonRotation),bmp.canvas.addEventListener("click",reset),window.addEventListener("resize",function(){bmp.canvas.width=sw=window.innerWidth,bmp.canvas.height=sh=window.innerHeight,container.setSize(sw,sh),render()}),reset();var pattern_circles=function(){var e=rand.instance();e.setSeed(Math.random());var u,h,m,v,p,g=colours.instance(e),b=dom.canvas(1,1),y=b.ctx;return{stage:b.canvas,init:function(e){a=e.size;var t=(u=a)/2,n=(h=a)/2;b.setSize(u,h),y.clearRect(0,0,u,h),y.fillRect(t-2,n-2,4,4),p=Math.random()*Math.PI/2;for(var a=10+~~(50*Math.random()),r=2+~~(5*Math.random()),o=[];o.length<r;)o.push(Math.ceil(Math.random()*a));o.push(a);var i=[];o.map(function(e,t){o.indexOf(e)==t&&i.push(e)}),o=i.sort(function(e,t){return e<t?-1:1}),g.getRandomPalette();for(var s=[];s.length<o.length;)s.push(g.getRandomColour());v=g.getRandomColour(),con.log("colourBG",v);var c=a+a*Math.random();m=dom.canvas(c,c),document.body.appendChild(m.canvas);for(var l=o.length-1;-1<l;l--){var d=o[l],f=s[l];m.ctx.beginPath(),m.ctx.fillStyle=f,m.ctx.drawCircle(a/2,a/2,d/2),m.ctx.fill(),m.ctx.closePath(),con.log(l)}con.log("render"),y.save(),y.fillStyle=v,y.rect(0,0,u,h),y.fill(),y.rotate(p),y.fillStyle=y.createPattern(m.canvas,"repeat"),y.fill(),y.restore(),progress("render:complete",b.canvas)}}};(isNode="undefined"!=typeof module)?module.exports=pattern_circles():define("pattern_circles",pattern_circles);var perlin_dots=function(e){var t=dom.canvas(600,600),s=t.ctx,n=[],a=e.noise(30,30),f=(e.noise(30,30),e.noise(30,30),a.cycle(1,.03)),r=function e(t){requestAnimationFrame(e),function(e){for(var t=0;t<900;t++){var n=t%30,a=Math.floor(t/30),r=~~(255*f[t]),o=~~(255*f[t]),i=~~(255*f[t]);s.fillStyle="rgb("+r+","+o+","+i+")",s.fillRect(20*n,20*a,20,20)}}(),o()};var o=function(){n=n.map(function(c){var l={x:0,y:0},d=c.position();return n.forEach(function(e){if(c!==e){var t=e.position(),n=t.x-d.x,a=t.y-d.y,r=Math.hypot(n,a);if(!(r<1||200<r)){var o=Math.floor(d.x/20),i=30*Math.floor(d.y/20)+o;if(f[i]){var s=.008*(f[i]-.5);l.x+=n/r*s,l.y+=a/r*s}}}}),c.move(l),c.draw(),c})},i=function(){var t=600*Math.random(),n=600*Math.random();return{position:function(){return{x:t,y:n}},draw:function(){s.fillStyle="#000",s.fillRect(t,n,2,2)},move:function(e){t+=e.x,n+=e.y}}};return{init:function(){for(var e=0;e<400;e++)n.push(i());r()},stage:t.canvas}};define("perlin_dots",["perlin"],perlin_dots);var vertexShader="varying vec2 vUv;\nvoid main()\n{\n  vUv = uv;\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader="\nuniform float r;\nuniform float g;\nuniform float b;\nuniform float distance;\nuniform float pulse;\nuniform float rows;\nuniform float cols;\nvarying vec2 vUv;\nfloat checkerRows = 1.5;\nfloat checkerCols = 2.0;\nvoid main( void ) {\n  vec2 position = abs(-1.0 + 2.0 * vUv);\n\n  float edging = abs((pow(position.y, 5.0) + pow(position.x, 5.0)) / 1.0);\n\n  float perc = 0.25 + distance * edging * 0.75;\n  vec2 checkPosition = vUv;\n  \n  float checkerX = mod(checkPosition.x, 1.0 / rows) * rows; // loop of 0 to 1 per row: /|/|/|//\n  checkerX = abs(checkerX - 0.5) * 2.0; // make up and down: /// \n  checkerX = pow(checkerX, 3.0); // power to sharpen edges: __/__/\n\n  float checkerY = mod(checkPosition.y, 1.0 / cols) * cols;\n  checkerY = abs(checkerY - 0.5) * 2.0;\n  checkerY = pow(checkerY, 3.0);\n\n  float checkerMod = 0.0;\n  if (rows > 1.0 && floor(checkPosition.x * rows) == checkerMod) {\n    perc = 2.0;\n  }\n  if (cols > 1.0 && floor(checkPosition.y * cols) == checkerMod) {\n    perc = 2.0;\n  }\n\n  // float checker = (checkerX * checkerY) * 2.0;\n  float checker = (checkerX + checkerY) * 0.5;\n  float r1 = r * checker + 0.1;\n  float g1 = g * checker + 0.05;\n  float b1 = b * checker + 0.2;\n  float red = r1 * perc + pulse;\n  float green = g1 * perc + pulse;\n  float blue = b1 * perc + pulse + 0.05;\n\n  // float red = r;\n  // float green = g;\n  // float blue = b;\n\n  gl_FragColor = vec4(red, green, blue, 1.0);\n}",perlin_grid=function(f){var u,h,m,c,l,d=document.createElement("div"),v={x:0,y:0},p={x:0,y:0,z:10},g=window.innerWidth,b=window.innerHeight,y={width:300,height:100,depth:300},x=7,w=[],M=[],E=Math.random();function T(e,t){return Math.random()*(t-e)+e}function S(e,t,n,a){var r=.3,o=.6,i={r:.7+n.r,g:r+n.g,b:o+n.b},s={r:{type:"f",value:i.r},g:{type:"f",value:i.g},b:{type:"f",value:i.b},distance:{type:"f",value:a},pulse:{type:"f",value:0},rows:{type:"f",value:e},cols:{type:"f",value:t}};return new THREE.ShaderMaterial({uniforms:s,vertexShader:vertexShader,fragmentShader:fragmentShader})}function R(e){var t=e.dimensions.width,n=e.dimensions.height,a=e.dimensions.depth,r=e.colour,o=e.checker,i=e.distance,s=S(o[0][0],o[0][1],r,i),c=S(o[1][0],o[1][1],r,i),l=S(o[2][0],o[2][1],r,i),d=S(o[3][0],o[3][1],r,i),f=S(o[4][0],o[4][1],r,i),u=S(o[5][0],o[5][1],r,i),h=new THREE.BoxGeometry(t,n,a);return new THREE.Mesh(h,new THREE.MeshFaceMaterial([s,c,l,d,f,u]))}var C=function(e,t,n){var a={r:T(0,.5),g:T(0,.5),b:T(0,.5)},r={width:50,height:y.height,depth:50},o=y.width/2-50,i=new THREE.Group,s=R({dimensions:r,checker:[[1,2],[1,2],[1,1],[1,1],[1,2],[1,2]],colour:a,distance:n});s.position.set(-o,0,-o),i.add(s);var c=R({dimensions:r,checker:[[1,2],[1,2],[1,1],[1,1],[1,2],[1,2]],colour:a,distance:n});c.position.set(o,0,-o),i.add(c);var l=R({dimensions:r,checker:[[1,2],[1,2],[1,1],[1,1],[1,2],[1,2]],colour:a,distance:n});l.position.set(-o,0,o),i.add(l);var d=R({dimensions:r,checker:[[1,2],[1,2],[1,1],[1,1],[1,2],[1,2]],colour:a,distance:n});d.position.set(o,0,o),i.add(d);var f={width:y.width-50,height:50,depth:50},u=R({dimensions:f,checker:[[1,1],[1,1],[5,1],[5,1],[5,1],[5,1]],colour:a,distance:n});u.position.set(0,(y.height+50)/2,-o),i.add(u);var h=R({dimensions:f,checker:[[1,1],[1,1],[5,1],[5,1],[5,1],[5,1]],colour:a,distance:n});return h.position.set(0,(y.height+50)/2,o),i.add(h),i};function e(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}function N(e){if(requestAnimationFrame(N),.99<Math.random()){var t=.5<Math.random()?c:l;TweenMax.to(t.rotation,.75,{y:Math.PI/2*Math.round(T(-2,2)),eade:Quad.easeInOut})}!function(e){var l=1+2*(1+Math.sin(.004*e));function t(e,t,n,a,r){var o=1+50*(t*=t*t*t),i=(n-x/2+.5)*y.width*l,s=o*y.height/2*r,c=(a-x/2+.5)*y.depth*l;e.position.set(i,s,c)}for(var n=0;n<x;n++)for(var a=0;a<x;a++){var r=a+n*x,o=(f.perlin3(a/x,n/x,E)+1)/2,i=(f.perlin3(a/x,n+x*x/x,E)+1)/2,s=w[r],c=M[r];t(s,o,a,n,1),t(c,i,a,n,-1)}E+=.01,p.x-=.02*(p.x-1*v.x),p.y-=.05*(p.y-1e3*v.y);var d=4*p.x;u.position.set(400*Math.sin(d),p.y,400*Math.cos(d)),u.lookAt(h.position),m.render(h,u)}(e)}return e(["resize"],function(e){g=window.innerWidth,b=window.innerHeight,u.aspect=g/b,u.updateProjectionMatrix(),m.setSize(g,b)}),e(["mousedown","touchstart"],function(e){e.preventDefault(),!0}),e(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),v.x=e.clientX/g*2-1,v.y=-e.clientY/b*2+1}),e(["mouseup","touchend"],function(e){e.preventDefault(),!1}),{init:function(){var e;h=new THREE.Scene,(u=new THREE.PerspectiveCamera(90,g/b,1,1e4)).position.set(0,100,500),h.add(u),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),h.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),h.add(e),(m=new THREE.WebGLRenderer({antialias:!0})).setSize(g,b),c=new THREE.Group,h.add(c),l=new THREE.Group,h.add(l);for(var t=0;t<x;t++)for(var n=0;n<x;n++){var a=(t-x/2+.5)*y.width,r=(n-x/2+.5)*y.depth,o=1-Math.sqrt(a*a+r*r)/1200,i=C(0,0,o);i.position.set(a,0,r),c.add(i),w.push(i);var s=C(0,0,o);s.position.set(a,0,r),s.rotation.set(Math.PI,Math.PI/2,0),l.add(s),M.push(s)}d.appendChild(m.domElement),N(0)},stage:d}};define("perlin_grid",["noise"],perlin_grid);var perlin_leaves=function(e){t=console,n={},a=function(){return(new Date).getTime()};var t,n,a,d=10,f=40,u=40,r=(Math.random,document.createElement("canvas"));r.width=f*d,r.height=u*d;var h=r.getContext("2d"),o=document.createElement("div");document.body.appendChild(o);var m=e.noise(f,u),v=1e3*Math.random();function p(e){for(var t=m.cycle(v+.01*e,.01),n=0,a=f*u;n<a;n++){var r=n%f,o=Math.floor(n/f),i=r-f/2,s=o-u/2,c=f/2-Math.sqrt(i*i+s*s),l=~~(255*t[n]*c);h.fillStyle="rgb("+l+","+l+","+l+")",h.fillRect(r*d,o*d,d,d)}requestAnimationFrame(p)}return{init:function(){p(0)},stage:r}};define("perlin_leaves",["perlin"],perlin_leaves);var perlin_noise=function(e){var c=20,l=30,d=30,t=dom.canvas(l*c,d*c),f=t.ctx,u=e.noise(l,d),h=(e.noise(l,d),e.noise(l,d));var n,a,m=(n=0,a=1,function(e){return e<n?n:a<e?a:e});function v(e){f.clearRect(0,0,l*c,d*c);for(var t=.005*e,n=u.cycle(.11*t,.016),a=h.cycle(.7*t,.009),r=0,o=l*d;r<o;r++){var i=r%l,s=Math.floor(r/l);f.fillStyle="rgba(20,50,120,1)",f.beginPath(),f.drawCircle(i*c,s*c,m(n[r])*c/2),f.closePath(),f.fill(),f.fillStyle="rgba(200,245,255,1)",f.beginPath(),f.drawCircle(i*c,s*c,m(a[r])*c/2),f.closePath(),f.fill()}requestAnimationFrame(v)}return{init:function(){v(0)},stage:t.canvas}};define("perlin_noise",["perlin"],perlin_noise);var perlin=function(){return{noise:function(b,y){var x,w,M,t=Math.random;function E(t,n,e,a){var r=.5-e*e-a*a;try{var o=r<0?0:Math.pow(r,4)*(x[n%8][0]*e+x[n%8][1]*a)}catch(e){con.log(e,n,t)}return o}return function(){x=[],w=[],M=[];for(var e=0;e<8;e++)x.push([]),M.push([t(),t()]);for(e=0;e<262;e++)w.push(~~(256*t()))}(),{cycle:function(e,t){for(var n=0;n<8;n++)x[n][0]=Math.sin(M[n][0]*e),x[n][1]=Math.cos(M[n][1]*e);for(var a,r,o,i,s,c,l,d,f,u,h,m=[],v=(n=0,b*y);n<v;n++){var p=n%b*t,g=Math.floor(n/b)*t;m.push((o=void 0,c=(a=p)-((i=~~(a+(o=.3*(a+(r=g)))))-(o=.2*(i+(s=~~(r+o))))),d=(l=r-(s-o))<c,f=i+w[s],u=i+d+w[s+!d],h=i+1+w[s+1],38*(E(f,w[f],c,l)+E(u,w[u],c-d+.2,l-!d+.2)+E(h,w[h],c-.6,l-.6))+.5))}return m}}}}};define("perlin",perlin);var pine_three=function(){var f,u,h,t={x:0,y:0,z:0},m=window.innerWidth,v=window.innerHeight;e=0,n=10,Math.random();var e,n,p,a=!1;function g(e){a&&(p.rotation.y+=.01),t.z=1e3,f.position.set(t.x,t.y,t.z),f.lookAt(u.position),h.render(u,f),requestAnimationFrame(g)}return{init:function(){colours.getRandomPalette(),u=new THREE.Scene,f=new THREE.PerspectiveCamera(80,m/v,1,1e4),u.add(f);var e=new THREE.DirectionalLight(16777215,1.5);e.position.set(0,200,100),u.add(e);var t=new THREE.DirectionalLight(16777215,4);t.position.set(-100,0,100),u.add(t),(h=new THREE.WebGLRenderer({antialias:!0})).setSize(m,v),p=new THREE.Group,u.add(p);var n,a,r,o,i,s,c,l,d=colours.getRandomColour();new THREE.Vector3(0,0,0),n={colour:d,group:p},c=colours.mutateColour(n.colour,50),a={radius:10,height:50,colour:c},r=new THREE.Group,o=new THREE.MeshLambertMaterial({color:a.colour}),i=new THREE.CylinderGeometry(a.radius,a.radius,a.height,15),(s=new THREE.Mesh(i,o)).position.y=a.height/2,r.add(s),l={colour:a.colour,group:r,object:s},n.group.add(l.group),n.group.updateMatrixWorld(),document.body.appendChild(h.domElement),g()},resize:function(){}}};if(define("pine_three",pine_three),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js"),geom=require("./geom.js");var getRotationRange=function(e){return 3*(90-180*(e-2)/e||45)/180*Math.PI},polygon_slice=(log=function(){},function(){return function(){var m=rand.instance(),r=colours.instance(m),o=2*Math.PI,n=dom.canvas(1,1),i=n.ctx,s=void 0,c=void 0,l=void 0,v=void 0,d=void 0,f=void 0,u=void 0,h=void 0,p=void 0,g=void 0,b=void 0,y={rotation:{type:"Number",label:"Rotation",min:0,max:9,cur:0},maxDepth:{type:"Number",label:"Max Depth",min:2,max:8,cur:2},background:{type:"Boolean",label:"Background",cur:!1}},x=function(e,t){var n=t.lineWidth,a=t.strokeStyle,r=t.fillStyle;e&&(i.beginPath(),e.forEach(function(e,t){i[0==t?"moveTo":"lineTo"](e.x*b,e.y*h)}),i.closePath(),n&&a&&(i.strokeStyle=a,i.lineWidth=n*p,i.stroke()),r&&(i.fillStyle=r,i.fill()))},w=function n(e,a){var t=function(e){for(var t=m.getInteger(0,e.length-1),n=(t+m.getInteger(1,e.length-1))%e.length,a=Math.min(t,n),r=Math.max(t,n),o=e[a],i=e[(a+1)%e.length],s=e[r],c=e[(r+1)%e.length],l=geom.lerp(o,i,v?.5:m.getNumber(.1,.9)),d=geom.lerp(s,c,v?.5:m.getNumber(.1,.9)),f=[],u=[],h=0;h<e.length;)h<=a?f.push(e[h]):a<h&&h<=r?(f.push(l,d),h=r):f.push(e[h]),h++;for(h=a+1,u.push(d,l);h<r+1;)u.push(e[h]),h++;return[f,u]}(e);a++,t.forEach(function(e){if(a<y.maxDepth.cur&&(0===f||geom.polygonArea(e)>f))n(e,a);else{var t=geom.insetPoints(e,l);if(!t)return;if(!geom.polygonsSimilar(e,t))return;if(geom.polygonSelfIntersecting(t))return;x(t,function(){var e={},t=void 0,n=0,a=0;switch(m.getInteger(0,8)){case 0:e.lineWidth=.001,e.strokeStyle=r.getRandomColour();break;case 1:case 2:0===m.getInteger(0,1)?n=2*u:a=2*u,(t=i.createLinearGradient(.5-u,.5-u,n*b,a*h)).addColorStop(0,r.getRandomColour()),t.addColorStop(1,r.getRandomColour()),e.fillStyle=t;break;default:e.fillStyle=r.getRandomColour()}return e}())}})},a=function(e){c=e.progress||function(){console.log("polygon_slice - no progress defined")},m.setSeed(e.seed),p=e.size,b=e.sw||p,h=e.sh||p,r.getRandomPalette(),n.setSize(b,h),l=-m.getNumber(.002,.01),u=m.getNumber(.3,.5),v=.2<m.getNumber(0,1),f=0===m.getInteger(0,1)?0:m.getNumber(.05,.8*u),d=m.getInteger(2,8),y.rotation.cur=m.getInteger(0,9),y.maxDepth.cur=d,y.background.cur=3<m.getInteger(0,4),e.settings&&(y=JSON.parse(JSON.stringify(e.settings))),c("settings:initialised",y);var a=m.getInteger(3,7);g=y.rotation.cur/y.rotation.max*getRotationRange(a);var t=new Array(a).fill().map(function(e,t){var n=t/a*-o;return{x:Math.sin(n)*u,y:Math.cos(n)*u}});s=r.getRandomColour(),y.background.cur?(i.fillStyle=s,i.fillRect(0,0,b,h)):i.clearRect(0,0,b,h),i.save(),i.translate(.5*b,.5*h),i.rotate(g),x(t,{strokeStyle:r.getNextColour(),lineWidth:.001}),w(geom.insetPoints(t,l),0),c("render:complete",n.canvas),i.restore()};return{stage:n.canvas,init:a,settings:y,update:function(e,t){a({progress:c,seed:t,size:p,settings:e})}}}});isNode?module.exports=polygon_slice():define("polygon_slice",polygon_slice);var polyhedra_three=function(){var o,i,s,c=document.createElement("div"),t={x:0,y:0},l=window.innerWidth,d=window.innerHeight;l=d=400;var f,e=0,n={};function u(e){e.preventDefault(),t.x=e.clientX/l*2-1,t.y=-e.clientY/d*2+1}function h(){e+=4*t.x,f.rotation.y=.1*e,o.lookAt(i.position),s.render(i,o)}function m(){requestAnimationFrame(m),h()}return n.lineScale=1,n.lineSize=1+10*Math.random()*n.lineScale,n.lineGap=2+3*Math.random()*n.lineScale,n.baseRotation=0,n.varyRotation=Math.random()*Math.PI*2,{stage:c,init:function(){var e,t=(new Date).getTime();i=new THREE.Scene,(o=new THREE.PerspectiveCamera(70,l/d,1,1e4)).position.set(0,100,500),i.add(o),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),i.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),i.add(e),(s=new THREE.WebGLRenderer).setSize(l,d);var n=POLYHEDRA.Icosidodecahedron;f=function(e){var t,n,a=[],r=[],o=0;e.face.map(function(e){for(t=0,n=e.length-2;t<n;t++)a.push(e[0],e[t+1],e[t+2]);o+=n,r.push(o)});var i=[];e.vertex.map(function(e){e.map(function(e){i.push(e)})});var s=[];for(t=0,n=e.face.length;t<n;t++){var c=Math.round(255*Math.random())<<16|Math.round(255*Math.random())<<8|Math.round(255*Math.random()),l=new THREE.MeshLambertMaterial({color:c});s.push(l)}var d=new THREE.PolyhedronGeometry(i,a,200,0);con.log("geometry",d);var f=0;for(t=0,n=d.faces.length;t<n;t++)-1<r.indexOf(t)&&f++,d.faces[t].materialIndex=f;return l=new THREE.MeshFaceMaterial(s),new THREE.Mesh(d,l)}(n),i.add(f),c.appendChild(s.domElement),document.addEventListener("mousemove",u,!1);var a=(new Date).getTime();h();var r=(new Date).getTime();con.log("times",a-t,r-a),m()}}};define("polyhedra_three",polyhedra_three);sw=600,sh=600,bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);frame=0;var t=(1+Math.sqrt(5))/2,CodedIcosahedron={name:"CodedIcosahedron",vertex:[[-1,t,0],[1,t,0],[-1,-t,0],[1,-t,0],[0,-1,t],[0,1,t],[0,-1,-t],[0,1,-t],[t,0,-1],[t,0,1],[-t,0,-1],[-t,0,1]],face:[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]]},planesArray=[];function createPlanes(e,t,n){null==n&&(n=make3DPoint(0,0,0));for(var a=e.face.length,r=0;r<a;r++){for(var o=e.face[r],i=[],s=0,c=o.length;s<c;s++){var l=o[s],d=e.vertex[l];point=make3DPoint(n.x+d[0]*t,n.y+d[1]*t,n.z+d[2]*t),i[s]=point}planesArray.push(i)}}function animation(){bmp.ctx.clearRect(0,0,sw,sh),renderPlanes(bmp.ctx,planesArray,{fillColor:function(e){var t=255*(e.slope.y/Math.PI+1);return"rgba("+[Math.round(.23*t),Math.round(.62*t),Math.round(.9*t),1].join(",")+")"}}),frame++,cubeAxisRotations.x-=.01,cubeAxisRotations.y+=.01}createPlanes(CodedIcosahedron,100),con.log(planesArray),animation(),window.addEventListener("keydown",function(){animation()});var race_lines_three=function(){var u,p,h,m=!1,g="emptySlot",b="planeTop",y="planeBottom",v={x:0,y:0},x={x:0,y:0,z:10},i=window.innerWidth,s=window.innerHeight,w=20,M=16,E=20,T={width:100,height:30,depth:150},S=250,R=M*(T.depth+E),C=w*(T.depth+E),N=4,k=34,z=N,P={planeBottom:[],planeTop:[]},_=[];function I(e,t){return Math.random()*(t-e)+e}function H(e,t,n){var a=P[t][n][e];if(a!==g&&(a.position.x=a.offset.x,a.position.z=a.offset.z+a.posZ,0<a.position.z&&(a.posZ-=R),!a.isWarping&&.999<Math.random())){var r=Math.floor(5*Math.random()),o=e,i=n,s=t,c=0,l=0,d=0;switch(r){case 0:o++,l=1;break;case 1:o--,l=-1;break;case 2:i++,d=1;break;case 3:i--,d=-1;break;case 4:s=t===b?y:b,c=t===b?-1:1}P[s][i]&&P[s][i][o]===g&&(P[t][n][e]=g,a.isWarping=!0,P[s][i][o]=a,4===r?TweenMax.to(a.position,.5,{y:c*S}):TweenMax.to(a.offset,.5,{x:a.offset.x+l*(T.width+E),z:a.offset.z+d*(T.depth+E)}),TweenMax.to(a.offset,.6,{onComplete:function(){a.isWarping=!1}}))}}function A(e){var t;z-=.05*(z-(m?k:N));for(var n=0,a=_.length;n<a;n++){(t=_[n]).posZ+=z;var r=1-((R-t.posZ)/R-1);t.material.uniforms.distanceZ.value=r;var o=1-Math.abs(t.position.x)/(C/3);t.material.uniforms.distanceX.value=o;var i=m?t.colours.fast:t.colours.slow;t.material.uniforms.r.value-=.1*(t.material.uniforms.r.value-i.r),t.material.uniforms.g.value-=.1*(t.material.uniforms.g.value-i.g),t.material.uniforms.b.value-=.1*(t.material.uniforms.b.value-i.b);var s=(z-N)/(k-N);t.material.uniforms.speed.value=s,Math.random()>.99995-.005*s&&(t.material.uniforms.pulse.value=1),t.material.uniforms.pulse.value-=.1*t.material.uniforms.pulse.value/(s+1)}for(var c=0,l=M;c<l;c++)for(var d=0,f=w;d<f;d++)H(d,y,c),H(d,b,c);x.x-=.02*(x.x-400*v.x),x.y-=.05*(x.y-150*v.y),x.z=-100,u.position.set(x.x,x.y,x.z),u.rotation.y=x.x/-1e3,u.rotation.x=x.y/1e3,u.rotation.z=(x.x-400*v.x)/2e3,h.render(p,u),requestAnimationFrame(A)}var L=["varying vec2 vUv;","void main()","{","  vUv = uv;","  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","  gl_Position = projectionMatrix * mvPosition;","}"].join(""),q=["uniform float r;","uniform float g;","uniform float b;","uniform float distanceZ;","uniform float distanceX;","uniform float pulse;","uniform float speed;","varying vec2 vUv;","void main( void ) {","  vec2 position = abs(-1.0 + 2.0 * vUv);","  float edging = abs((pow(position.y, 5.0) + pow(position.x, 5.0)) / 2.0);","  float perc = (0.2 * pow(speed + 1.0, 2.0) + edging * 0.8) * distanceZ * distanceX;","  float red = r * perc + pulse;","  float green = g * perc + pulse;","  float blue = b * perc + pulse;","  gl_FragColor = vec4(red, green, blue, 1.0);","}"].join("");return{init:function(){p=new THREE.Scene,u=new THREE.PerspectiveCamera(100,i/s,1,1e4),p.add(u),(h=new THREE.WebGLRenderer({antialias:!0})).setSize(i,s);for(var e=0,t=M;e<t;e++){P.planeBottom[e]=[],P.planeTop[e]=[];for(var n=0,a=w;n<a;n++)P.planeBottom[e][n]=g,P.planeTop[e][n]=g}function r(){var e,t,n,a,r,o,i=Math.floor(Math.random()*w),s=i,c=.5<Math.random()?1:-1,l=-1===c?y:b,d=Math.floor(Math.random()*M),f=d,u=(i-w/2)*(T.width+E),h=c*S,m=d*(T.depth+E);if(P[l][f][s]===g){var v=(e=T,t={slow:{r:I(0,.2),g:I(.5,.9),b:I(.3,.7)},fast:{r:I(.9,1),g:I(.1,.7),b:I(.2,.5)}},n={r:{type:"f",value:t.slow.r},g:{type:"f",value:t.slow.g},b:{type:"f",value:t.slow.b},distanceX:{type:"f",value:1},distanceZ:{type:"f",value:1},pulse:{type:"f",value:0},speed:{type:"f",value:z}},a=new THREE.ShaderMaterial({uniforms:n,vertexShader:L,fragmentShader:q}),r=new THREE.BoxGeometry(e.width,e.height,e.depth),(o=new THREE.Mesh(r,a)).colours=t,o);v.position.y=h,v.isWarping=!1,v.offset={x:u,z:0},v.posZ=m,P[l][f][s]=v,_.push(v),p.add(v)}}for(n=0,a=M*w;n<a;n++)r();function o(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(h.domElement),o(["resize"],function(e){i=window.innerWidth,s=window.innerHeight,u.aspect=i/s,u.updateProjectionMatrix(),h.setSize(i,s)}),o(["mousedown","touchstart"],function(e){e.preventDefault(),m=!0}),o(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),v.x=e.clientX/i*2-1,v.y=-e.clientY/s*2+1}),o(["mouseup","touchend"],function(e){e.preventDefault(),m=!1}),A()},resize:function(){}}};define("race_lines_three",race_lines_three);con=console,sw=window.innerWidth,sh=window.innerHeight;(bmp=document.createElement("canvas")).width=sw,bmp.height=sh,document.body.appendChild(bmp);ctx=bmp.getContext("2d");var circleRads=2*Math.PI,numCurrent=numInitial=15,numMax=30,particles=[],deaths=[];function moveParticle(e){e.dying&&e.age++,e.dirFloat+=(Math.random()-.5)*Math.PI*.5,e.dir-=.01*(e.dir-e.dirFloat),e.vx=Math.cos(e.dir)*e.speed,e.vy=Math.sin(e.dir)*e.speed,e.x+=e.vx,e.y+=e.vy;var t=100;e.x>sw+t&&(e.x-=sw+2*t),e.x<-t&&(e.x+=sw+2*t),e.y>sh+t&&(e.y-=sh+2*t),e.y<-t&&(e.y+=sh+2*t),e.angle=Math.atan(e.vy/e.vx);var n=-e.angle;e.vx<=0&&(n+=Math.PI);for(var a=0;a<e.lines;a++){ctx.fillStyle=e.palette[a];var r=3;e.dying&&(r/=1+.01*e.age);var o=(a-e.lines/2+.5)*r*2,i=e.x+Math.sin(n)*o,s=e.y+Math.cos(n)*o;ctx.beginPath(),ctx.arc(i,s,r,0,circleRads,!1),ctx.closePath(),ctx.fill()}e.dying&&500<e.age?killParticle(e):0==e.children&&numCurrent<numMax&&.99<Math.random()&&spawnParticle(e)}function killParticle(e){var t=particles.indexOf(e);particles.splice(t,1),numCurrent--,deaths.push({anim:0,lines:e.lines,x:e.x,y:e.y})}function animateDeath(e){e.anim++;if(50<e.anim){var t=deaths.indexOf(e);deaths.splice(t,1)}else for(var n=.4*e.anim,a=(50-e.anim)/50,r=0;r<e.lines;r++){var o=r/e.lines*Math.PI*2,i=e.x+Math.sin(o)*n,s=e.y+Math.cos(o)*n,c=a+.01;ctx.fillStyle="rgba(255,255,255,"+a+")",ctx.beginPath(),ctx.arc(i,s,c,0,circleRads,!1),ctx.closePath(),ctx.fill()}}function generateParticle(e){if(e)return{age:0,children:0,dir:e.dir,dirFloat:e.dirFloat,dying:!1,lines:e.lines,palette:e.palette,speed:e.speed,vx:e.vx,vy:e.vy,x:e.x,y:e.y};for(var t=3+parseInt(6*Math.random()),n=[],a=0;a<t;a++)n.push("hsl("+a/t*360+",50%,50%)");return{age:0,children:0,dir:Math.random()*Math.PI*2,dirFloat:0,dying:!1,lines:t,palette:n,speed:1.5*Math.random()+.5,vx:0,vy:0,x:Math.random()*sw,y:Math.random()*sh}}function spawnParticle(e){e.dying=!0,e.children++,particles[numCurrent]=generateParticle(e),numCurrent++}function generate(){for(var e=0;e<numInitial;e++)particles[e]=generateParticle()}function render(e){ctx.fillStyle="rgba(0,0,0,0.04)",ctx.fillRect(0,0,sw,sh);for(var t=0;t<deaths.length;t++)animateDeath(deaths[t]);for(t=0;t<numCurrent;t++)moveParticle(particles[t]);requestAnimationFrame(render)}window.addEventListener("resize",function(){bmp.width=sw=window.innerWidth,bmp.height=sh=window.innerHeight}),generate(),render(0);rand=function a(e,t){var n,r,o=0,i=0,s={},c=4294967296,l=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=1013904223*e.charCodeAt(n),t%=c;return t};return{setSeed:function(e){e=e||0===e?isNaN(e)?l(e):Number(e):Math.round(Math.random()*c),r=n=e},getSeed:function(){return n},random:t||function(){if(void 0!==r)return(r=(1664525*r+1013904223)%c)/c;if(console.warn("no seed set - are you calling rand itself or an instance of rand?"),1e3<++o)throw new Error("rand bailing because no seed");return null},getLastRandom:function(){return r/c},getNumber:function(e,t){return e+this.random()*(t-e)},getInteger:function(e,t){return Math.floor(this.getNumber(e,t+1))},shuffle:function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(this.random()*(t+1)),a=e[t];e[t]=e[n],e[n]=a}return e},alphaToInteger:l,instance:function(e,t){i++;var n=a(!0,t);return"number"!=typeof e&&"string"!=typeof e||n.setSeed(e),s[i]=n},getInstanceById:function(e){var t=s[e];return e&&t?t:"Can't find that rand instance, available ids are: "+Object.keys(s)}}};"undefined"!=typeof module&&(module.exports=rand(!1));con=console;if(isNode="undefined"!=typeof module)rand=require("./rndI.js"),dom=require("./dom.js"),colours=require("./colours.js");var rectangular_fill=function(){var v=rand.instance();v.setSeed(Math.random());var p,g,b=colours.instance(v),y=30,x=20,w=[],M=[],E=[],n=0,a=dom.canvas(1,1);var r=0,o=0;function i(){var e=17;if(5e3<++r)e=1;else if(1e4<r)return s(),con.warn("bailing!",r);if(r%100==0){var t=(n-M.length)/n;o!==t&&progress("render:progress",t),o=t}!function(e){var t=Math.ceil(v.random()*e),n=Math.ceil(v.random()*e),a=b.getRandomColour(),r=Math.floor(M.length*v.random()),o=M[r],i=o%y,s=Math.floor(o/y),c=!0,l=s+t;x<l&&(t=(l=x)-s);var d=i+n;y<d&&(n=(d=y)-i);for(var f=s;f<l&&c;f++)for(var u=i;u<d&&c;u++)w[f][u]&&(c=!1);if(c){for(f=s;f<l&&c;f++)for(u=i;u<d&&c;u++){w[f][u]=a;var h=f*y+u,m=M.indexOf(h);M.splice(m,1)}E.push({colour:a,x:s*p+g,y:i*p+g,w:t*p-2*g,h:n*p-2*g})}}(e),M.length?(r+1)%1e3==0?setTimeout(i,100):i():s()}function s(){a.ctx.setTransform(1,.2*v.random()-.1,.2*v.random()-.1,1,0,0);for(var e=0,t=E.length;e<t;e++){var n=E[e];a.ctx.fillStyle=n.colour,a.ctx.fillRect(n.x,n.y,n.w,n.h)}progress("render:complete",a.canvas)}return{name:"Rectangular Fill",stage:a.canvas,resize:function(e,t){a.setSize(e,t,!0)},init:function(){con.log("Rectangular fill init"),console.log(v.getSeed()),b.getRandomPalette(),p=Math.round(20*(.2+.8*v.random())),g=p*(.1+v.random())*.4,a.setSize(p*x,p*y);for(var e=0;e<x;e++){w[e]=[];for(var t=0;t<y;t++)w[e][t]=0,M.push(e*y+t)}n=x*y,i()},kill:function(){}}};isNode?module.exports=rectangular_fill():define("rectangular_fill",rectangular_fill),define("recursive_circle",function(){var g=2*Math.PI,b=600,t=b,y=4,e=dom.canvas(b,t),x=e.ctx;function n(e){var m=3e-4*e,v=2/3,p=6;x.globalCompositeOperation="source-over",x.clearRect(0,0,b,t),function e(t,n,a,r){var o=Math.sin(m)*g/p*t;0;for(var i=r/2,s=i*v/2,c=(i-s)/2,l=s+c,d=0;d<p;d++){var f=o+d/p*g,u=n+Math.sin(f)*l,h=a+Math.cos(f)*l;t<y?e(t+1,u,h,i*v):(x.fillStyle="#fff",x.globalCompositeOperation="source-over",x.beginPath(),x.drawCircle(u*b,h*b,c*b),x.fill(),x.fillStyle="#000",x.globalCompositeOperation="destination-out",x.beginPath(),x.drawCircle(u*b,h*b,c*v/2*b),x.fill())}}(1,.5,.5,1),requestAnimationFrame(n)}return{resize:function(e,t){},init:function(){n(0)},stage:e.canvas}});_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(isNode="undefined"!=typeof module)colours=require("./colours.js"),dom=require("./dom.js"),geom=require("./geom.js"),rand=require("./rand.js");var splitPolygon=function(e,t,n){var a=e.slice(),r=a.slice(0,t+1),o=a.splice(n,e.length-n),i=e.slice().splice(t,n-t+1);return[r.concat(o),i]},recursive_polygon=(getRotationRange=function(e){return 3*(90-180*(e-2)/e||45)/180*Math.PI},function(){return function(){var n,y,x,i,s,c,l,d,w,f,u,r,M,E,T,S,R=rand.instance(),h=colours.instance(R),m=500,a=m,o=m,C={rotation:{type:"Number",label:"Rotation",min:0,max:9,cur:0},background:{type:"Boolean",label:"Background",cur:!0}},N=dom.canvas(a,o),v=N.ctx,p=function(e){var t=e.depth+1;if(!(w<t||1e4<++y)){var n=e.points.slice(),a=n.length,r=void 0,o=void 0;if(3<a){var i=R.getInteger(0,a),s=n.splice(0,i);n=n.concat(s),r=0,o=R.getInteger(2,a-2)}else if(S){var c=geom.lerp(n[0],n[1],T?R.getNumber(.4,.6):.5),l=geom.lerp(n[1],n[2],T?R.getNumber(.4,.6):.5),d=geom.lerp(n[2],n[0],T?R.getNumber(.4,.6):.5),f=[c,l,d];C.background.cur?z(f,{fillStyle:x}):(N.ctx.globalCompositeOperation="destination-out",z(f,{fillStyle:"black"}),N.ctx.globalCompositeOperation="source-over"),k(e,[n[0],c,d],t),k(e,[n[1],l,c],t),k(e,[n[2],d,l],t)}else{var u=E?P(n):R.getInteger(0,2),h=M||R.getNumber(.1,.9),m=void 0;switch(u){case 0:m=geom.lerp(n[0],n[1],h),n.splice(1,0,m),r=1,o=3;break;case 1:m=geom.lerp(n[1],n[2],h),n.splice(2,0,m),r=0,o=2;break;case 2:m=geom.lerp(n[2],n[0],h),n.push(m),r=1,o=3}}if(!S){var v=splitPolygon(n,r,o),p=_slicedToArray(v,2),g=p[0],b=p[1];k(e,g,t),k(e,b,t)}}},k=function(e,t,n){var a=u&&R.random()<u?h.mutateColour(e.colour,f):h.getRandomColour(),r=s?c:R.random()>l;if(z(t,{fillStyle:a,strokeStyle:a,lineWidth:0}),r){var o=geom.insetPoints(t,i);if(o)geom.polygonsSimilar(t,o)&&(C.background.cur?z(o,{fillStyle:x}):(v.globalCompositeOperation="destination-out",z(o,{fillStyle:"black"}),v.globalCompositeOperation="source-over"))}(d||.2<R.random())&&p({points:t,colour:a,depth:n})},z=function(e,t){var n,a,r,o;v.beginPath(),e.forEach(function(e,t){var n=e.x,a=e.y;v[0==t?"moveTo":"lineTo"](n*m,a*m)}),v.closePath(),a=(n=t).lineWidth,r=n.strokeStyle,o=n.fillStyle,a&&r&&(v.strokeStyle=r,v.lineWidth=a,v.stroke()),o&&(v.fillStyle=o,v.fill())},P=function(e){for(var t,n,a,r,o=0,i=null,s=0,c=e.length;s<c;s++){var l=e[s],d=e[(s+1)%c],f=(n=d,void 0,a=(t=l).x-n.x,r=t.y-n.y,Math.hypot(a,r));o<f&&(o=f,i=s)}return i},g=function(e){y=0,n=e.progress||function(){console.log("recursive_polygon - no progress defined")},m=e.size,a=e.sw||m,o=e.sh||m,R.setSeed(e.seed),h.getRandomPalette(),N.setSize(a,o),C.rotation.cur=R.getInteger(0,9),C.background.cur=3<R.getInteger(0,4),e.settings&&(C=e.settings),n("settings:initialised",C),3===(r=3+Math.round(R.random()*R.random()*R.random()*28))&&(S=.8<R.random()),r<5&&(T=.8<R.random()),i=R.getNumber(.001,.02),u=R.getInteger(0,1)&&R.getNumber(0,1),f=R.getNumber(5,30),w=R.getInteger(1,8),d=.5<R.getNumber(0,1),E=.5<R.random(),M=.5<R.random()&&.5,(s=.5<R.random())?c=.5<R.random():l=.5*R.random();var t=C.rotation.cur/C.rotation.max*getRotationRange(r);x=h.getRandomColour(),C.background.cur?(v.fillStyle=x,v.fillRect(0,0,a,o)):v.clearRect(0,0,a,o),v.save(),v.translate(.5*a,.5*o),v.rotate(t),function(){for(var e=h.getRandomColour(),t=0,n=[];n.length<r;)n.push(t/r*Math.PI*2),t++;var a=n.map(function(e){var t=T?R.getNumber(.4,.45):.45;return{x:Math.sin(e)*t,y:Math.cos(e)*t}});p({points:a,colour:e,depth:0})}(),n("render:complete",N.canvas),v.restore()};return{init:g,settings:C,stage:N.canvas,update:function(e,t){g({progress:n,seed:t,size:m,settings:e})}}}});isNode?module.exports=recursive_polygon():define("recursive_polygon",recursive_polygon),function(){var e,t,x,f,w,u,M;console,f=document,x=e=null,Math.PI,M={},(t=function(n,e,t,a,r){var o,i,s,c,l,d;return null==r&&(r=1),s=f.createElement("div"),(l=f.createElement("label")).innerHTML=n+":",(c=f.createElement("input")).type="text",c.value=a,(d=f.createElement("input")).type="range",d.min=e/r,d.max=t/r,d.name=n,d.value=a/r,s.appendChild(l),s.appendChild(d),s.appendChild(c),f.body.appendChild(s),o=function(e){var t;return t=e.target.value*r,M[n]=Number(t),c.value=t,u()},i=function(e){var t;return t=e.target.value,M[n]=Number(t),d.value=t/r,u()},c.addEventListener("change",i),d.addEventListener("change",o),d.addEventListener("input",o),M[n]=a})("items",1,10,2),t("maxRecursion",1,10,5),t("angleSpiral",0,2,1,.01),t("angleSpread",0,2,Math.PI/2,.01),t("symmetry",-1,1,0,.01),t("scale",0,10,1,.01),u=function(){return e.width=e.width,w(300,50,0,0)},w=function(e,t,n,a){var r,o,i,s,c,l,d,f,u,h,m,v,p,g,b,y;for(a++,d=M.items,u=M.maxRecursion,o=M.angleSpiral,i=M.angleSpread,r=1-a/u,y=[],f=b=0;0<=d?b<d:d<b;f=0<=d?++b:--b)s=1-(f-(l=(d-1)/2))/l*M.symmetry,g=30*(p=M.scale/a*s),c=100*p,v=i*(f-l)+n*o,x.save(),x.translate(e,t),x.rotate(v),0,x.fillStyle="rgba(0,0,0,"+r+")",x.fillRect(1*-g/2,0,1*g,1*c),x.restore(),h=e+c*-Math.sin(v),m=t+c*Math.cos(v),a<u?y.push(w(h,m,v,a,f)):y.push(void 0);return y},function(){(e=f.createElement("canvas")).width=e.height=600,f.body.appendChild(e),x=e.getContext("2d"),u()}()}.call(this);var innerHTML="\n<style>\ndiv#stage {\n\tpadding: 20px;\n}\ndiv#stage a {\n\tcolor: white;\n}\n</style>\n<div id='stage'>\n\t<a href='/?polygon_slice'>This experiment has been renamad to PolygonSlice... Click here to go there.</a>\n</div>";define("reddit_proc_gen",function(){var t=document.createElement("div");return{stage:t,init:function(e){t.innerHTML=innerHTML,progress("render:complete",t)}}}),define("seven_four_sevens",function(){var S=900,R=600,C=dom.canvas(S,R),N=[],l=[],e=dom.element("div",{innerText:"Click to make a new waypoint, shift click to add multiple",style:{color:"white"}}),t=dom.button("Add planes",{className:"button"});document.body.appendChild(e),document.body.appendChild(t),dom.on(C.canvas,["click"],function(e){e.shiftKey||(k.holdingpattern=[]),k.holdingpattern.push({_x:e.x,_y:e.y})}),dom.on(t,["click"],function(e){l.push(d())});var k={holdingpattern:[{_x:rand.getNumber(0,S),_y:rand.getNumber(0,R)},{_x:rand.getNumber(0,S),_y:rand.getNumber(0,R)},{_x:rand.getNumber(0,S),_y:rand.getNumber(0,R)}],createSmoke:function(){}};function d(){var a,r,o,i,s,c,l,d=Math.PI,f=2*Math.PI,u={},h=0,m=0,v={gotoAndStop:function(e){v._currentframe=e},_currentframe:1,_rotation:0},p=Math.random()*S,g=Math.random()*R,b=Math.random()*f,y=.4*Math.random()+2,x=(y-1)/2;con.log(y,x);var w,M=(w=.03*Math.random()+.01)/20,E=Math.floor(Math.random()*k.holdingpattern.length),T=k.holdingpattern[E];return function(){T||(E=Math.floor(Math.random()*k.holdingpattern.length),T=k.holdingpattern[E]),a=p-T._x,r=g-T._y,(s=Math.sqrt(Math.pow(a,2)+Math.pow(r,2)))<75&&(++E>=k.holdingpattern.length&&(E=0),T=k.holdingpattern[E]),u._xscale=u._yscale=s/5,o=Math.atan(r/a),c=b-(i=a<0?.5*d-o:1.5*d-o),Math.abs(c)>d&&(c<0?(c=c%d+d,b+=f):(c=c%d-d,b-=f)),l=v._currentframe,.1<c?(h<w?h+=M:h=w,v.gotoAndStop(58-(Math.round(h/w*29)+28))):c<-.1?(-w<h?h-=M:h=-w,v.gotoAndStop(58-(Math.round(h/w*29)+28))):(h=c/50,l<28?v.gotoAndStop(l+1):28<l&&v.gotoAndStop(l-1)),b-=h,u._rotation=180*-i/d,v._rotation=-b,p+=Math.sin(b)*y,g+=Math.cos(b)*y,C.ctx.save(),C.ctx.translate(p,g),C.ctx.rotate(v._rotation);var e=!1,t=Math.floor(v._currentframe/3.1);9<t&&(e=!0,t=19-t);var n=N[t].masked.canvas;C.ctx.scale((e?-1:1)*x,x),C.ctx.translate(-n.width/2,-n.height/2),C.ctx.drawImage(n,0,0),C.ctx.restore(),3<++m&&(m=0,k.createSmoke(this))}}return{init:function(){var s=10,c=0;function e(){if(++c==2*s){for(var e=0;e<s;e++){var t,n=N[e].mask;(t=dom.canvas(n.width,n.height)).ctx.drawImage(n,0,0);for(var a=t.ctx.getImageData(0,0,n.width,n.height),r=0;r<a.data.length;){var o=a.data[r++]+a.data[r++]+a.data[r++];a.data[r++]=255-o/3}t.ctx.putImageData(a,0,0);var i=dom.canvas(n.width,n.height);i.ctx.drawImage(N[e].plane,0,0),i.ctx.globalCompositeOperation="destination-out",i.ctx.drawImage(t.canvas,0,0),i.ctx.globalCompositeOperation="source-over",N[e].masked=i}l=[d()],function e(){requestAnimationFrame(e),C.ctx.fillStyle="#1a4859",C.ctx.fillRect(0,0,S,R);for(var t=0;t<k.holdingpattern.length;t++){var n=k.holdingpattern[t];C.ctx.beginPath(),C.ctx.drawCircle(n._x,n._y,20),C.ctx.closePath(),C.ctx.fillStyle="#259bc6",C.ctx.fill(),C.ctx.beginPath(),C.ctx.fillStyle="white",C.ctx.font="18px Helvetica",C.ctx.fillText(t+1,n._x-5,n._y+5),C.ctx.fill()}for(t=0;t<l.length;t++){var a=l[t];a()}}()}}for(var t=0;t<s;t++){var n=new Image;n.onload=e,n.src="/assets/seven_four_sevens/Image "+(t+1)+" at frame 0.jpg";var a=new Image;a.onload=e,a.src="/assets/seven_four_sevens/Image "+(t+1)+" alpha channel at frame 0.png",N[t]={plane:n,mask:a,masked:null}}},stage:C.canvas}});sw=600,sh=600,bmp=dom.canvas(sw,sh);document.body.appendChild(bmp.canvas);h=0,cx=sw/2,cy=sh/2,frame=0;function newLine(){bmp.ctx.clearRect(0,0,sw,sh);var e,t,n,a=10+4*Math.sin(4e-4*frame),r=20+4*Math.sin(.001*frame);bmp.ctx.beginPath(),bmp.ctx.strokeStyle="red",bmp.ctx.lineWidth=.7*r;for(var o=0;o<25*a;o++){var i=(void 0,t=(e=(o-1)/a)*Math.PI*2,n=e*r,{x:cx+Math.sin(t)*n,y:cy+Math.cos(t)*n});0==o?bmp.ctx.moveTo(i.x,i.y):bmp.ctx.lineTo(i.x,i.y)}bmp.ctx.stroke(),(frame+=1)<50&&requestAnimationFrame(newLine)}if(newLine(),function(){var f,t,a,e,u;console,t=document,f=null,u=0,e=function(){var e;return(e=t.createElement("canvas")).width=e.height=640,t.body.appendChild(e),f=e.getContext("2d"),setInterval(function(){var e,t,n;for(u+=1,u%=2e3,f.clearRect(0,0,640,640),n=[],e=t=0;t<20;e=t+=1)n.push(a(e));return n},1e3/60)},a=function(e){var t,n,a,r,o,i,s,c,l,d;for(n=2*e,d=[],a=c=0;c<4;a=c+=1){for(f.save(),f.translate(320,320),f.rotate(a*Math.PI/2),t=l=0;l<=n;t=l+=1)i=16*(-e-.5),s=16*(-t+e-.5)+function(e,t,n,a){var r;return t+n*(-2*((r=(e/=a)*e)*e)+3*r)}((r=(o=20*(e+1))+300)<u?1:o<u?(u-o)/(r-o):0,0,16,1),0,f.fillStyle="rgba(0,0,0,1)",6,f.fillRect(i-3,s-3,6,6);d.push(f.restore())}return d},e()}.call(this),isNode="undefined"!=typeof module){var Canvas=require("canvas");colours=require("./colours.js"),dom=require("./dom.js"),fillDither=require("./fill/dither.js"),fs=require("fs"),rand=require("./rand.js"),Image=Canvas.Image}var squash_match_shirt=function(){return function(){var d=rand.instance(),f=colours.instance(d),t=dom.canvas(1,1),e=t.canvas,u=t.ctx,h=void 0,n=void 0,a=void 0,m=10,v=1/m*Math.PI*2;function r(){for(var e=0;e<m;e++)t=e/m,n={alternate:!void 0,baseRotation:(.25+1/m/2)*Math.PI*2,bg:"transparent",fg:"#F4502B",shape:1,varyRotation:!1,wiggle:0},r=fillDither({c:f,r:d,size:1*(a=h/2),settings:n}),o=u.createPattern(r,"no-repeat"),u.save(),u.translate(h/2,h/2),u.rotate(t*Math.PI*2),u.fillStyle=o,u.beginPath(),u.moveTo(0,0),u.lineTo(a,0),u.lineTo(Math.cos(v)*a,Math.sin(v)*a),u.closePath(),u.fill(),u.stroke(),u.restore();var t,n,a,r,o,i,s,c,l;u.globalCompositeOperation="destination-out",u.beginPath(),u.drawCircle(h/2,h/2,h/2*.6),u.closePath(),u.fill(),u.globalCompositeOperation="source-over",i="./SquashMatchIconCircleHiRes.png",s=4e-4*h,(c=new Image).onload=function(){var e=c.width,t=c.height;u.translate(h/2,h/2),u.scale(s,s),u.translate(-e/2,-t/2),u.drawImage(c,0,0)},c.onerror=function(e){console.log("renderBMPFromFile error",e)},c.src=i,l=.1*h,u.save(),u.translate(h/2,h/2),u.font=l+"px MyriadPro-Bold",u.fillStyle="black",u.fillText("SquashMatch",0,0),u.restore()}return{init:function(e){h=e.size,a=n=h,d.setSeed(e.seed),f.setPalette(["#fff","transparent"]),t.setSize(n,a),r()},settings:{},stage:e,update:function(){}}}};if(isNode){var ex=squash_match_shirt(),inst=(module.exports=ex)();inst.init({size:1500}),console.log("render complete"),setTimeout(function(){var n=__dirname+"/../export/squash_match_shirt_"+(new Date).getTime()+".png";inst.stage.toBuffer(function(e,t){e?console.log("savecanvas err",e):fs.writeFile(n,t,function(){console.log("saveFile success",n)})})},500)}else define("squash_match_shirt",squash_match_shirt);con=console;if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js");var state_of_origin_52_6=function(){return function(){var t,h,m="NSW",v="180px helvetica",p="#f00",g=200,c=dom.canvas(1,1),b={},y={NSW:0,QLD:0},x={NSW:!1,QLD:!1};function n(d,e,t,n,a){var r=0,o=150*a,l=dom.canvas(g,g),f=dom.canvas(g,g);function i(){var e,t=0*g,n=.1*g;return{x:t+rand.random()*(g-2*t),y:n+rand.random()*(g-2*n),size:(e=r,.75+4*rand.random()*(.001+o-e)/o)}}function u(e,t,n,a){var r,o=a?h/2:1,i=2*t.size/g*o,s=(t.x-t.size)*o,c=(t.y-t.size)*o;if(a){s+=g*o/2,d===m&&(c+=g*o*.8);var l=rand.getInteger(200,254);r="rgb("+l+","+l+","+l+")"}else r=p;e.save(),e.translate(s,c),e.scale(i,i),e.font=v,e.fillStyle=r,e.fillText(d,0,0),e.restore()}function s(){var e=i();(function(e){l.ctx.globalCompositeOperation="source-over",l.ctx.drawImage(f.canvas,0,0),l.ctx.globalCompositeOperation="source-in",u(l.ctx,e,0,!1);var t=2*Math.ceil(e.size+20),n=Math.ceil(e.size+20),a=Math.floor(e.x-t),r=Math.floor(e.y-2*n);t*=2,n*=2;for(var o=l.ctx.getImageData(a,r,t,n).data,i=!0,s=0;s<t&&i;s++)for(var c=0;c<n&&i;c++)i=0===o[4*(c*t+s)];return l.ctx.globalCompositeOperation="source-over",l.ctx.fillStyle=i?"rgba(0, 0, 255, 0.25)":"rgba(255, 0, 0, 0.25)",l.ctx.fillRect(a,r,t,n),i})(e)&&(r++,u(c.ctx,e,0,!0),u(f.ctx,e,0,!1))}f.ctx.clearRect(0,0,g,g),f.ctx.fillStyle=p,f.ctx.fillRect(0,0,g,g),f.ctx.globalCompositeOperation="destination-out",f.ctx.save(),f.ctx.translate(g*t,g*n),f.ctx.font=v,f.ctx.fillText(e,0,0),f.ctx.restore(),f.ctx.globalCompositeOperation="source-over",b[d]=function(){if(r<o){for(var e=0;e<100&&r<o;e++)s(),s();y[d]=r/o}else x[d]=!0}}function a(){b.NSW(),b.QLD(),x.NSW&&x.QLD?t("render:complete",c.canvas):(t("render:progress",(y.NSW+y.QLD)/2),setTimeout(a,1))}return{stage:c.canvas,init:function(e){t=e.progress||function(){con.log("state_of_origin_52_6 - no progress defined")},h=e.size/g,con.log("state of origin init",e,h),c.setSize(g*h,g*h),n("QLD",52,-.02,.9,3),n(m,6,.23,.9,2),a()}}}};isNode?module.exports=state_of_origin_52_6():define("state_of_origin_52_6",state_of_origin_52_6);var synth_ambient=function(z){return{init:function(){var e=dom.element("h1",{innerHTML:"Beware your speakers!"});document.body.appendChild(e);var t=dom.button("Load another permutation",{style:{border:"1px solid black",borderRadius:"5px",display:"inline-block",padding:"5px"}});document.body.appendChild(t),dom.on(t,["click"],function(){window.location="?synth_ambient,"+Math.round(1e10*Math.random())}),z.Transport.bpm.value=rand.getInteger(80,115);var n=[["b2","g2","c3","b3","g3","c4"],["c#3","g#3","c#4","g#4","c#5"],["g3","b3","f#4","g4","b4","f#5","g5","b5"],["A3","C4","E4","A4","C5","E5","A5","C6","E6"],["e3","a#4","e4","a#5","e5"]];function a(e,t){return Math.pow(2,rand.getInteger(e,t))+"n"}n=n[rand.getInteger(0,n.length-1)],new z.PingPongDelay({delayTime:"6n",feedback:.9,wet:.2}).toMaster();var r=new z.FeedbackDelay({delayTime:a(2,4),feedback:.9,wet:.4}).toMaster(),o=new z.Filter({frequency:rand.getNumber(6e3,2e4)}).toMaster(),i=(new z.Freeverb).toMaster();i.dampening.value=rand.getNumber(10,5e3);var s=new z.Phaser({frequency:rand.getNumber(10,3e3),octaves:rand.getInteger(1,7),baseFrequency:rand.getNumber(1e3,2e3)}).toMaster(),c=new z.BitCrusher(rand.getInteger(2,6)).toMaster(),l=new z.Chorus(rand.getNumber(2,6),rand.getNumber(1,3),rand.getNumber(.2,1)).toMaster();function d(e){return.7<rand.random()?e.connect(i):.7<rand.random()?e.connect(r):.6<rand.random()?e.connect(o):.5<rand.random()?e.connect(s):.5<rand.random()?e.connect(l):.5<rand.random()?e.connect(c):e}var f=a(1,2),u=d(new z.MembraneSynth({envelope:{sustain:0,attack:.02,decay:.8},octaves:10})),h=(new z.Loop(function(e){u.triggerAttackRelease("C2","1n",e)},f).start(0),d(new z.NoiseSynth({volume:-5,envelope:{attack:.001,decay:.7,sustain:0},filterEnvelope:{attack:.001,decay:.6,sustain:0}}))),m=(new z.Loop(function(e){h.triggerAttack(e)},"2n").start("4n"),d(new z.NoiseSynth({volume:-9,envelope:{attack:.001,decay:.1,sustain:0},filterEnvelope:{attack:.001,decay:.01,sustain:0}}))),v=d(new z.NoiseSynth({volume:-10,filter:{Q:1},envelope:{attack:.01,decay:.3},filterEnvelope:{attack:.01,decay:.03,baseFrequency:14e3,octaves:-2.5,exponent:4}})),p=a(2,4),g=0,b=(new z.Loop(function(e){m.triggerAttack(e),(g+2)%4==0&&v.triggerAttack(e),g++},p).start(0),d(new z.DuoSynth));b.voice0.oscillator.type="sine",b.voice1.oscillator.type="square";var y=d(new z.PolySynth(6,z.Synth,{oscillator:{partials:[0,2,3,4]},envelope:{attack:.3,decay:.05,sustain:0,release:.02}})),x=d(new z.MonoSynth({volume:-10,envelope:{attack:.1,decay:.3,release:2},filterEnvelope:{attack:.001,decay:.01,sustain:.5,baseFrequency:200,octaves:2.6}})),w=a(2,4),M=n.slice(0,rand.getInteger(1,2));new z.Sequence(function(e,t){x.triggerAttackRelease(t,w,e)},M).start(0).probability=.9;var E=d(new z.Noise({volume:-20,type:["white","brown","pink"][rand.getInteger(0,2)]})),T=rand.getNumber(0,.4);.02<T&&(E.start(),z.Master.volume.rampTo(0,T));var S=n.slice(0,rand.getInteger(2,6)),R=0,C=Math.pow(2,rand.getInteger(4,8));z.Transport.scheduleRepeat(function(e){var t=S[R%S.length];R<S.length&&b.triggerAttackRelease(t,"16n",e),R++,R%=C},"16n");var N=a(1,4),k=n.slice(0,rand.getInteger(2,6));z.Transport.scheduleRepeat(function(e){y.triggerAttackRelease(k,"8n")},N),z.Transport.start()},resize:function(){}}};define("synth_ambient",["Tone"],synth_ambient),(isNode="undefined"!=typeof module)&&(Canvas=require("canvas"));con=console;var w=500,sum=1e3,v0=0,v1=0;function createCanvas(e,t){var n;isNode?n=new Canvas(e,t):((n=document.createElement("canvas")).width=e,n.height=t);var a=n.getContext("2d");return{canvas:n,ctx:a}}var pixels=(bmp=createCanvas(w,w)).ctx.getImageData(0,0,w,w);document.body.appendChild(bmp.canvas);for(i=0;i<w*w;i++){v1+=2911926141+((v0+=2738958700+(v1<<4)^v1+(sum+=2654435769)^3355524772+(v1>>5))<<4)^v0+sum^2123724318+(v0>>5);var index=4*i,r=Math.abs(v0)%255,g=0,b=Math.abs(v1)%255;pixels.data[index+0]=r,pixels.data[index+1]=g,pixels.data[index+3]=b,pixels.data[index+4]=255}bmp.ctx.putImageData(pixels,0,0),"undefined"!=typeof module&&(module.exports={generate:generate}),define("tentacle",function(){var r,o,l,d,f=2*Math.PI,i=dom.canvas(1,1),u=i.ctx,h=7,s=[],m=30;function c(n,a){var r=0,o=0,i=20*a,s=0,c=2+.3*(m-a);return{pos:r,rot:s,x:o,y:i,move:function(e,t){return r+=.01,s=n/h*f+.24*Math.sin(r)*(a+1),o=e+10*Math.sin(s),i=t+10*Math.cos(s),u.fillStyle="rgba(200, 160, 130, 0.3)",u.beginPath(),u.drawCircle(l+o,d+i,c),u.fill(),{x:o,y:i}}}}function v(e){e<1e4&&requestAnimationFrame(v),u.fillStyle="black",u.rect(0,0,r,o),u.fill();for(var t=0;t<h;t++)for(var n={x:0,y:0},a=0;a<m;a++){n=s[t][a].move(n.x,n.y)}}return{stage:i.canvas,init:function(e){l=(r=400)/2,d=(o=400)/2,i.setSize(r,o);for(var t=0;t<h;t++){for(var n=[],a=0;a<m;a++)n.push(c(t,a));s.push(n)}v(0)}}});_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},isNode="undefined"!=typeof module;var SHAPE_L={0:{blocks:[[1,1],[0,1]],points:[{x:0,y:0},{x:2,y:0},{x:2,y:2},{x:1,y:2},{x:1,y:1},{x:0,y:1}]},1:{blocks:[[0,1],[1,1]],points:[{x:1,y:0},{x:2,y:0},{x:2,y:2},{x:0,y:2},{x:0,y:1},{x:1,y:1}]},2:{blocks:[[1,0],[1,1]],points:[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:2,y:1},{x:2,y:2},{x:0,y:2}]},3:{blocks:[[1,1],[1,0]],points:[{x:0,y:0},{x:2,y:0},{x:2,y:1},{x:1,y:1},{x:1,y:2},{x:0,y:2}]}},tessellation=function(){return function(){var s=rand.instance(),c=colours.instance(s),o=dom.canvas(1,1),l=o.ctx,i=void 0,d=void 0,f=void 0,u=void 0,r=0,h=void 0,m=void 0,v=void 0,p=[],g=1,b={},y=function(e,t,n){return t<0?0:h-1<t?0:n<0?0:h-1<n?0:e[n*h+t]},x=function(e,t){for(var n=v.slice(),a=0;a<2;a++)for(var r=0;r<2;r++){var o=t.x+r,i=t.y+a;if(!(o<0))if(!(h-1<o))if(!(i<0))if(!(h-1<i))if(0!==e[a][r]){var s=i*h+o;if(0<n[s])return!1;n[s]=g}}var f;return!(f=n).some(function(e,t){var n=t%h,a=Math.floor(t/h);if(0===e){var r=y(f,n,a-1),o=y(f,n+1,a-1),i=y(f,n+1,a),s=y(f,n+1,a+1),c=y(f,n,a+1),l=y(f,n-1,a+1),d=y(f,n-1,a);if(d&&i&&r&&c)return!0;if(r&&o&&s&&c)return!0;if(i&&s&&l&&d)return!0}return!1})&&(v=n,!0)},w=function(e,t){var n=SHAPE_L[e];if(!x(n.blocks,t))return!1;var a=function(e,t){var n=t.lineWidth,a=t.strokeStyle,r=t.fillStyle,o=dom.canvas(2*m*f,2*m*f);o.ctx.beginPath(),e.forEach(function(e,t){var n=e.x,a=e.y;o.ctx[0==t?"moveTo":"lineTo"](n*m*f,a*m*d)}),o.ctx.closePath();var i=o.ctx.createLinearGradient(0,0,s.getNumber(m,2*m),s.getNumber(m,2*m));return i.addColorStop(0,r),i.addColorStop(1,c.mutateColour(r,20)),o.ctx.fillStyle=i,o.ctx.fill(),o.ctx.strokeStyle=a,o.ctx.lineWidth=n,o.ctx.stroke(),o}(n.points,{fillStyle:c.getNextColour(),lineWidth:.1,strokeStyle:"#000"}),r=t.x/h*f,o=t.y/h*d;l.save(),l.translate(r-f/2,o-d/2),l.drawImage(a.canvas,0,0),l.restore();var i=function(e,t){for(var n=[],a=0;a<e.length;a++)for(var r=e[a],o=0;o<r.length;o++)if(1===r[o]){var i=t.x+o,s=t.y+a;n.push({x:i,y:s})}return n}(n.blocks,t);return p.push({id:g,blocks:i}),g++,!0},M=!1,E=function e(){var t=++r/1e5,n=v.filter(function(e){return 0<e}).length/v.length==1;if(M||n)console.log("complete");else if(!(1<=t)){var a=function(e){var t=50*e,n=Math.ceil(Math.hypot(h/2,h/2)),a=t*h*.04;n<a&&(M=!0);var r=t/(1+-0*a)*20;return{x:Math.floor(h/2+Math.sin(r)*a),y:Math.floor(h/2+Math.cos(r)*a)}}(t);!function(e,t){for(var n=!0,a=-1;a<2&&n;a++)for(var r=-1;r<2&&n;r++)for(var o=0;o<4&&n;o++)n=!w((e+o)%4,{x:t.x+a,y:t.y+r})}(s.getInteger(0,3),a),r%100==0?setTimeout(function(){return e()},10):e()}},n=function(e){i=e.progress||function(){console.log("tessellation - no progress defined")},s.setSeed(e.seed),u=e.size,f=e.sw||u,d=e.sh||u,o.setSize(f,d),c.getRandomPalette();for(var t=[],n=8;n<u/8;n++){var a=u/n;Math.round(a)===a&&t.push(a)}h=t[s.getInteger(0,t.length-1)],m=1/h,v=new Array(h*h).fill(0),i("settings:initialised",b),l.fillStyle="#000",l.fillRect(0,0,f,d),l.translate(f/2,d/2),l.rotate(s.getNumber(0,2*Math.PI));var r=s.getNumber(1.3,1.6);l.scale(r,r),E()};return{stage:o.canvas,init:n,settings:b,update:function(e,t){console.log("update",e),n({progress:i,seed:t,size:u,settings:e})}}}};isNode?module.exports=tessellation():define("tessellation",tessellation);var tetris_cube=function(){rand.setSeed(Math.random());var f,u,w,M,E=document.createElement("div"),t={x:0,y:0},T=window.innerWidth,S=window.innerHeight,e=0,n=0,R=40,C=[],N=[],k=[];function z(e){e.preventDefault(),t.x=e.clientX/T*2-1,t.y=-e.clientY/S*2+1}function P(){n+=4*t.y,M.rotation.x=.1*n,M.rotation.y=.1*e,f.lookAt(u.position),w.render(u,f)}function _(){requestAnimationFrame(_),P()}return{stage:E,init:function(){var e,t,n;function a(e){return(e-2+.5)*R}function h(e){return{x:e%4,y:Math.floor(e/4)%4,z:Math.floor(e/16)}}u=new THREE.Scene,(f=new THREE.PerspectiveCamera(70,T/S,1,1e4)).position.set(0,100,500),u.add(f),(e=new THREE.DirectionalLight(16777215,2)).position.set(1,1,1).normalize(),u.add(e),(e=new THREE.DirectionalLight(16711935,2)).position.set(-1,0,0).normalize(),u.add(e),(w=new THREE.WebGLRenderer).setSize(T,S),M=new THREE.Group,u.add(M);for(var r=0;r<64;r++){var o=(t=new THREE.MeshLambertMaterial({color:0}),n=new THREE.BoxGeometry(R,R,R),new THREE.Mesh(n,t)),i=h(r),s=i.x,c=i.y,l=i.z;k.push(r),o.position.set(a(s),a(c),a(l)),o.groupId=0,C.push(o),M.add(o)}var m=1,v=[],p="MODE_GROUP_EXPAND",g="MODE_LONER_UNITE",b=p;function y(e){var t,n,a,r,o=h(e),i=o.x,s=o.y,c=o.z,l=0,d=[];function f(e){d.push(e)}0===i?f({x:i+1,y:s,z:c}):3===i?f({x:i-1,y:s,z:c}):(f({x:i-1,y:s,z:c}),f({x:i+1,y:s,z:c})),0===s?f({x:i,y:s+1,z:c}):3===s?f({x:i,y:s-1,z:c}):(f({x:i,y:s-1,z:c}),f({x:i,y:s+1,z:c})),0===c?f({x:i,y:s,z:c+1}):3===c?f({x:i,y:s,z:c-1}):(f({x:i,y:s,z:c-1}),f({x:i,y:s,z:c+1})),rand.shuffle(d);for(var u=0;u<d.length;u++)t=d[u],n=void 0,a=(n=t).x+4*n.y+4*n.z*4,b===p&&0===C[a].groupId?(x(a,C[e].groupId),l++):b===g&&0<C[a].groupId&&(x(e,C[a].groupId),l++);0===l&&v.push(e),b===p&&(r=Math.floor(k.length*Math.random()),k.length?(x(r=k[r],++m),y(r)):(con.log("all done...",N),setTimeout(function(){N.forEach(function(e,t){var n={x:(t%4-2)*R*4,y:Math.floor(t/4-1)*R*4,z:0};e.forEach(function(e){TweenMax.to(e.position,.5,{x:e.position.x+n.x,y:e.position.y+n.y,z:e.position.z+n.z,delay:.1*t})})})},1700)))}function x(e,t){var n=b===g?6:4;if(N[t]||(N[t]=[]),N[t].length!==n){var a=C[e];N[t].push(a),a.groupId=t;var r=k.indexOf(e);k.splice(r,1)}}for(x(0,m),y(0),con.log(v),rand.shuffle(v),con.log(v),b=g,r=0;r<v.length;r++)y(v[r]);for(r=0;r<C.length;r++){var d=25700|20*(o=C[r]).groupId%255<<16;o.material.color.setHex(d)}E.appendChild(w.domElement),document.addEventListener("mousemove",z,!1),P(),_()}}};define("tetris_cube",tetris_cube);con=console;if(isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var text_grid=function(){rand.setSeed(Math.random());var s,t,n,c,l,o,i,d,a={boxes:{label:"Boxes",min:2,max:64,cur:7,type:"Number"},phrase:{label:"Phrase",cur:"D Q36RUCN    FGVNFVGQax6q2 b",type:"String"},background:{type:"Boolean",label:"Background",cur:!0}},f=dom.canvas(100,100),u=f.ctx,r=.6;function h(e,t,n){u.save(),u.translate(t*c,n*l);try{!function(e){var t=d[e],n=0,a=.8*l,r=.2*s;u.font=r+"px Helvetica";var o=u.createLinearGradient(0,-l,0,0);o.addColorStop(0,colours.getRandomColour()),o.addColorStop(1,colours.getRandomColour()),u.fillStyle=o;var i=u.measureText(t).width;n=(c-i)/2,u.translate(n,a),u.fillText(t,0,0)}(e)}catch(e){con.log("err drawText",e)}u.restore()}function m(e){s=e.size,n=t=s,e.settings&&(a=e.settings),progress("settings:initialised",a),d=a.phrase.cur,i=a.boxes.cur,o=Math.floor(d.length/i),c=Math.ceil(1/i*s),l=Math.ceil(c/r),f.setSize(t,n),u.clearRect(0,0,t,n),colours.getRandomPalette(),colours.setPaletteRange(3),v()}function v(){a.background.cur,function e(t){var n=o*i;var a=t%i;var r=Math.floor(t/i);h(t,a,r);t<n-1?(progress("render:progress",t/n),setTimeout(function(){e(t+1)},1)):progress("render:complete",f.canvas)}(0)}return{stage:f.canvas,init:m,render:v,settings:a,update:function(e){m({size:s,settings:e})}}};isNode?module.exports=text_grid():define("text_grid",text_grid),define("triangles",function(){var s,c,l,d,f,u,h,m,a,v=window.innerWidth,p=window.innerHeight,g=[],o=2*Math.PI,b=48,e=1/6*Math.PI,i=130/Math.cos(e),t=i*Math.sin(e),n=(i+t)/2;function y(){a=a||function(){for(var e=new THREE.Shape,t=.99*i,n=0;n<4;n++){var a=n/3*o,r={x:Math.sin(a)*t,y:Math.cos(a)*t};0==n?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e}();var e=.98<Math.random()?1376239:.99<Math.random()?16716933:4274759,t=new THREE.ShapeGeometry(a),n=new THREE.MeshPhongMaterial({color:e,side:THREE.DoubleSide,specular:16777215,shininess:rand.getNumber(40,60)});return{mesh:new THREE.Mesh(t,n),falling:!1}}function x(e){v=window.innerWidth,p=window.innerHeight,s.aspect=v/p,s.updateProjectionMatrix(),l.setSize(v,p)}function w(e){return e*n+(e%2?0:n-t)}function r(e){var n;e.falling=!0,TweenMax.to(e.mesh.position,2.4,{y:-5e3,ease:Quint.easeIn}),TweenMax.to(e.mesh.scale,.5,{x:.1,y:.1,z:.1,delay:2,ease:Quint.easeIn}),TweenMax.to(e.mesh.rotation,2.5,{x:rand.getNumber(-2,2),y:rand.getNumber(-2,2),z:rand.getNumber(-2,2),ease:Quint.easeIn,onComplete:(n=e,function(){var e=n.origin.pos,t=n.origin.rot;n.rowIndex-=b,e.z=n.mesh.position.z-w(b)+45,n.mesh.scale.set(1,1,1),n.mesh.position.set(e.x,e.y,e.z),n.mesh.rotation.set(t.x,t.y,t.z),n.falling=!1})})}function M(o){requestAnimationFrame(M),d.rotation.z=.05*Math.sin(5e-4*o);var n=-1e3-750*Math.sin(3e-4*o);function e(e,t,n,a){var r=3e-5*(o+1e4);e.position.set(5*Math.sin(t*r),1,Math.sin(a*r)-1)}g.forEach(function(e,t){e.mesh.position.z+=15,e.mesh.position.z>n&&0==e.falling&&.9<Math.random()&&r(e)}),e(f,15,0,12),e(u,14,0,13),e(h,20,0,16),l.render(c,s)}return rand.setSeed(Math.random()),{init:function(){(c=new THREE.Scene).fog=new THREE.FogExp2(0,5e-4),(s=new THREE.PerspectiveCamera(100,v/p,1,2e4)).position.set(0,1e3,1300),s.lookAt(c.position),c.add(s),f=new THREE.DirectionalLight(16761024,.8),c.add(f),u=new THREE.DirectionalLight(16761087,.8),c.add(u),h=new THREE.DirectionalLight(12632319,.8),c.add(h),m=new THREE.AmbientLight(16777215,.8),c.add(m),(l=new THREE.WebGLRenderer({antialias:!0})).setSize(v,p),d=new THREE.Group,c.add(d);for(var e=0;e<b*b;e++){var t=y();d.add(t.mesh);var n=e%b-b/2+.5,a=Math.floor(e/b),r=a%2,o={x:2*n*130+(r^Math.floor(a/2)%2?-130:0),y:0,z:-5e3+w(a)},i={x:Math.PI/2,y:0,z:r*Math.PI};t.rowIndex=a,t.mesh.position.set(o.x,o.y,o.z),t.mesh.rotation.set(i.x,i.y,i.z),t.origin={pos:o,rot:i},g.push(t)}document.body.appendChild(l.domElement),dom.on(window,["resize"],x),M(0)}}});var tunnel_tour_three=function(){var r,m,o,i={x:0,y:0},t={x:0,y:0,z:0},s=window.innerWidth,c=window.innerHeight;var n=0,a=200,l=10;function d(e){var t=new THREE.Group;t.position.set(e.x,e.y,e.z);for(var n,a,r,o,i,s={width:20,height:20,depth:100},c=0,l=parseInt((n=3,a=15,Math.random()*(a-n)+n));c<l;c++){var d=c/l*Math.PI*2,f=200*Math.sin(d),u=200*Math.cos(d),h=(r=s,void 0,o=new THREE.MeshLambertMaterial({color:10526880}),i=new THREE.BoxGeometry(r.width,r.height,r.depth),new THREE.Mesh(i,o));h.position.set(f,u,0),h.rotation.set(0,0,-d),t.add(h)}m.add(t)}function f(e){d({x:0,y:0,z:e*-a})}function u(e){t.x=100*i.x,t.y=100*i.y,t.z-=20,t.z%a==0&&(n=-Math.floor(t.z/a),f(l+n)),r.position.set(t.x,t.y,t.z),o.render(m,r),requestAnimationFrame(u)}return{init:function(){m=new THREE.Scene,r=new THREE.PerspectiveCamera(100,s/c,1,1e4),m.add(r);var e=new THREE.DirectionalLight(16777215,.5);e.position.set(0,200,100),m.add(e),(o=new THREE.WebGLRenderer({antialias:!0})).setSize(s,c);for(var t=0,n=l;t<n;t++)f(t);function a(e,t){for(var n=0;n<e.length;n++)window.addEventListener(e[n],t)}document.body.appendChild(o.domElement),a(["resize"],function(e){s=window.innerWidth,c=window.innerHeight,r.aspect=s/c,r.updateProjectionMatrix(),o.setSize(s,c)}),a(["mousemove","touchmove"],function(e){e.preventDefault(),e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),i.x=e.clientX/s*2-1,i.y=-e.clientY/c*2+1}),u()},resize:function(){}}};if(define("tunnel_tour_three",tunnel_tour_three),isNode="undefined"!=typeof module)rand=require("./rand.js"),dom=require("./dom.js"),colours=require("./colours.js");var typography=function(){return function(){var o,d,t,n,f,u=rand.instance(),h=colours.instance(u,"v1"),a={boxes:{label:"Boxes",min:2,max:64,cur:4,type:"Number"},background:{type:"Boolean",label:"Background",cur:!1}},i=dom.canvas(100,100),m=i.ctx,s=4,c=4;function v(e,t){return Math.round(u.getNumber(e,t))}var l="0";function p(e,t){if(m.save(),m.translate(e*f,t*f),.6<u.random()){var n=v(1,3),a=v(1,3);m.fillStyle=h.getRandomColour(),m.fillRect(0,0,f*n,f*a)}try{.8<u.random()&&(r=.1*f,m.fillStyle=h.getRandomColour(),m.fillRect(r,r,f-2*r,f-2*r))}catch(e){console.log("err drawInnerBlock",e)}var r,o,i,s,c;try{.9<u.random()&&function(){for(var e=Math.pow(2,Math.ceil(3*u.random())),t=f/e,n=0;n<e*e;n++){var a=n%e,r=Math.floor(n/e);m.fillStyle=h.getRandomColour(),m.fillRect(a*t,r*t,t,t)}}()}catch(e){console.log("err drawSubdivion",e)}try{.9<u.random()&&function(){var e=Math.round(4*u.random())/4*Math.PI,t=Math.round((2+Math.floor(8*u.random()))*d/1e3),n=dom.canvas(t,2*t);m.save(),m.beginPath(),m.rect(0,0,f,f),m.rotate(e),n.ctx.fillStyle=h.getNextColour();for(var a=0;a<f/t*4;a++)n.ctx.fillRect(0,a*t*2,f*t,t);m.fillStyle=m.createPattern(n.canvas,"repeat"),m.fill(),m.restore()}()}catch(e){console.log("err drawPattern",e)}try{.8<u.random()&&function(){m.save();var e=Math.floor(4*u.random())/4;m.rotate(e*Math.PI*2);var t=Math.pow(2,v(1,4)),n=v(1,4),a=v(5,10)*d/400,r=a*u.getNumber(.2,.8);m.fillStyle=h.getRandomColour();for(var o=1*d/300,i=0;i<t;i++){var s=i/t*f;m.fillRect(s,0,o,a);for(var c=0;c<n;c++){var l=s+c/n*f/t;m.fillRect(l,0,o,r)}}m.restore()}()}catch(e){console.log("err drawRuler",e)}try{.4<u.random()&&(o=Math.floor(4*u.random())/4,i=u.random()*f,s=u.random()*f,c=Math.round(Math.pow(2,2+6*u.random())*d/400),m.rotate(o*Math.PI*2),m.translate(i,s),m.font=c+"px Helvetica",m.fillStyle=h.getRandomColour(),m.fillText(function(){var e=["Typography",l],t=e[Math.floor(u.random()*e.length)],n=Math.round(u.random()*t.length),a=n+Math.round(u.random()*(t.length-n));switch(t=t.substr(n,a),Math.floor(3*u.random())){case 0:t=t.toLowerCase();break;case 1:t=t.toUpperCase()}return t}(),0,0))}catch(e){console.log("err drawText",e)}m.restore()}function r(e){console.log("typography",e),o=e.progress||function(){console.log("typography - no progress defined")},u.setSeed(e.seed),d=e.size,n=t=d,a.background.cur=!1,a.boxes.cur=4,e.settings&&(a=e.settings),o("settings:initialised",a),c=a.boxes.cur,s=a.boxes.cur,f=Math.ceil(1/c*d),i.setSize(t,n),m.clearRect(0,0,t,n),h.getRandomPalette(),h.setPaletteRange(3),g()}function g(){a.background.cur&&(m.fillStyle=h.getCurrentColour(),m.fillRect(0,0,t,n)),function e(t){var n=s*c;var a=t%c;var r=Math.floor(t/c);p(a,r);t<n?(o("render:progress",t/n),setTimeout(function(){e(t+1)},5)):o("render:complete",i.canvas)}(0)}return{stage:i.canvas,init:r,render:g,settings:a,update:function(e,t){r({progress:o,size:d,settings:e,seed:t})}}}};isNode?module.exports=typography():define("typography",typography);con=console;var unknown=function(){var n=dom.canvas(800,800),g=n.ctx;return{stage:n.canvas,resize:function(e,t){n.canvas.setSize(e,t)},init:function(){var e=-10;colours.getRandomPalette();for(var t=rand.getNumber(0,2),n=rand.getNumber(1,2),a=rand.getNumber(1.01,1.5),r=rand.getNumber(-2,2),o=rand.getNumber(8e3,1e4),i=rand.getNumber(.4,.6),s=rand.getNumber(-2,2),c=rand.getNumber(1.2,2),l=rand.getNumber(1.2,1.6),d=rand.getNumber(2,3),f=0;f<10;f++){var u=Math.pow((t+10-f)*n,a),h=Math.pow((r+10-f)*o,i);e+=Math.pow((s+10-f)*c,l)*d,g.fillStyle=colours.getNextColour();for(var m=f+1,v=0;v<m;v++){var p=400+(v-(m-1)/2)/m*h;g.beginPath(),g.drawCircle(p,e,u),g.closePath(),g.fill()}}},kill:function(){}}};(isNode="undefined"!=typeof module)?module.exports=unknown():define("unknown",unknown),colours=require("./colours.js"),voronoi=require("./voronoi.js"),stripes=require("./voronoi_stripes.js"),stripes.generate(process.argv[2]);_slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};if(isNode="undefined"!=typeof module)colours=require("./colours.js"),dom=require("./dom.js"),rand=require("./rand.js");var voronoi_stripes=function(){return function(){var f=rand.instance(),l=colours.instance(f),u=1,t=dom.canvas(1,1),e=t.canvas,d=t.ctx,h={},n=void 0,m=void 0,v=void 0;function a(e,t){var n=Math.floor(Math.sqrt(t)),a=e%n+.5,r=Math.floor(e/n)+.5,o=m/n/u,i=v/n/u,s=m/2/u,c=v/2/u,l=e/t*s,d=e/t*Math.PI*e*(.5+f.getNumber(0,20));return[[f.getNumber(0,m),f.getNumber(0,v)],[s+Math.sin(d)*m/3,c+Math.cos(d)*v/3],[s+Math.sin(d)*l,c+Math.cos(d)*l],[(a-h.pointBias/2+f.getNumber(0,h.pointBias))*o,(r-h.pointBias/2+f.getNumber(0,h.pointBias))*i]][h.pointMethod]}function r(e,t){var r=t.x,o=t.y,i=t.width,n=t.height;if(isNaN(r)||isNaN(o)||isNaN(i)&&isNaN(n))return console.log("null renderRegion",t),null;var a=fillDither({c:l,r:f,size:(n<i?i:n)+10,settings:h}),s=dom.canvas(i+10,n+10),c=s.ctx.getImageData(0,0,i+10,n+10);e.forEach(function(e){var t=_slicedToArray(e,2),n=t[0],a=4*((t[1]-o)*(i+10)+(n-r));c.data[a]=255,c.data[a+1]=255,c.data[a+3]=255}),s.ctx.putImageData(c,0,0),s.ctx.globalCompositeOperation="source-in",s.ctx.drawImage(a,0,0),d.drawImage(s.canvas,r,o)}return{init:function(e){n=e.size,v=m=n,f.setSeed(e.seed),l.getRandomPalette(),t.setSize(m,v),h.baseRotation=2*Math.PI,h.lineGap=f.getNumber(1,101),h.lineSize=f.getNumber(1,101),h.overallScale=f.getNumber(50,200),h.lineScale=h.overallScale,h.pointBias=f.getNumber(0,2),h.pointMethod=0,h.varyDuotone=!1,h.varyPerLine=!1,h.varyPerRegion=!1,h.varyRotation=Math.PI*(.5<f.random()?2:.2),h.varyDuotone&&l.setRandomPalette(0),h.sites=16+f.getNumber(0,20),voronoi.init({dot:u,sites:h.sites,sizeX:m,sizeY:v,debug:!1}),voronoi.genPoints(a),voronoi.genMap(),voronoi.drawRegions(r)},settings:h,stage:e,update:function(){}}}};isNode?module.exports=voronoi_stripes():define("voronoi_stripes",voronoi_stripes);isNode="undefined"!=typeof module;var voronoi=function(){var d=[],l=[],f=[],u=void 0,h=void 0,m=void 0,v=void 0,t=void 0,n=void 0,p=!1;function g(e,t){var n,a,r,o,i=0,s=0;for(n=0;n<h&&d[n];n++){var c=d[n][0],l=d[n][1];void 0,a=(r=e-c)*r+(o=t-l)*o,(!n||a<s)&&(s=a,i=n)}return i}return{drawRegionBounds:function(e){for(var t=0;t<h;t++){e.fillStyle="rgba(0,0,255,0.2)";var n=f[t];e.fillRect(n.x,n.y,n.width,n.height)}},drawRegions:function(e){var t=p&&(new Date).getTime();null==e&&console.warn("need to pass in a renderRegion function.");for(var n=0;n<h;n++)e(l[n],f[n]);var a=p&&(new Date).getTime();p&&console.log("Regions drawn in",a-t,"ms - av time per region:",(a-t)/h)},drawSites:function(e){for(var t=0;t<h;t++){e.fillStyle="blue";var n=d[t][0]*u,a=d[t][1]*u;e.fillRect(n-1,a-1,2,2)}},genMap:function(){var e=void 0,t=void 0,n=[],a=void 0,r=m*v,o=p&&(new Date).getTime();for(e=0;e<v;e++)for(t=0;t<m;t++)n[a=e*m+t]=g(t,e),p&&a%1e5==0&&console.log("findSites",Math.round(a/r*100)+"%");var i=p&&(new Date).getTime();for(p&&console.log("Found sites in",i-o,"ms"),e=0;e<v;e++)for(t=0;t<m;t++){var s=n[a=e*m+t];l[s].push([t,e]),null==f[s][0]?f[s][0]=e:e<f[s][0]&&(f[s][0]=e),null==f[s][1]?f[s][1]=t:t>f[s][1]&&(f[s][1]=t),null==f[s][2]?f[s][2]=e:e>f[s][2]&&(f[s][2]=e),null==f[s][3]?f[s][3]=t:t<f[s][3]&&(f[s][3]=t),p&&a%1e5==0&&console.log("generatingRegion",Math.round(a/r*100)+"%")}var c=p&&(new Date).getTime();p&&console.log("Generated regions in",c-i,"ms"),function(){for(var e=0;e<h;e++)f[e]={x:f[e][3]*u,y:f[e][0]*u,width:(f[e][1]-f[e][3])*u,height:(f[e][2]-f[e][0])*u}}()},genPoints:function(e){if(null==e)return console.warn("need to pass in a pointIterator function, which returns an array");for(var t=0;t<h;t++)d[t]=e(t,h),l[t]=[],f[t]=[]},init:function(e){return u=e.dot||1,h=e.sites||10,m=e.sizeX||200,v=e.sizeY||200,t=m*u,n=v*u,p=e.debug||!1,{width:t,height:n}}}}();isNode&&(module.exports=voronoi);con=console,sw=window.innerWidth,sh=window.innerHeight;var hitpixels,numInitial,canvas=dom.canvas(sw,sh),hit=dom.canvas(sw,sh),zones=(ctx=canvas.ctx,circleRads=2*Math.PI,numCurrent=numInitial=30,numMax=3*numInitial,particles=[],[]);function moveParticle(e){e.dying&&e.age++,e.dirFloat+=(Math.random()-.5)*Math.PI*.5,e.dir-=.01*(e.dir-e.dirFloat),e.vx=Math.cos(e.dir)*e.speed,e.vy=Math.sin(e.dir)*e.speed,e.x+=e.vx,e.y+=e.vy;e.x>sw+100&&(e.x-=sw+200,e.px=e.x),e.x<-100&&(e.x+=sw+200,e.px=e.x),e.y>sh+100&&(e.y-=sh+200,e.py=e.y),e.y<-100&&(e.y+=sh+200,e.py=e.y);var t=2;e.dying&&(t/=1+.01*e.age);var n=e.x,a=e.y,r=4*(Math.floor(e.x)+Math.floor(e.y)*sw),o=hitpixels.data[r];o||(ctx.lineWidth=t,ctx.strokeStyle=e.palette,ctx.beginPath(),ctx.moveTo(e.px,e.py),ctx.lineTo(n,a),ctx.stroke()),o&&(e.dir=Math.random()*Math.PI*2),e.px=e.x,e.py=e.y,e.dying&&500<e.age?killParticle(e):0==e.children&&numCurrent<numMax&&.99<Math.random()&&spawnParticle(e)}function killParticle(e){var t=particles.indexOf(e);particles.splice(t,1),numCurrent--}function generateParticle(e){if(e)return{age:0,children:0,dir:e.dir,dirFloat:e.dirFloat,dying:!1,palette:colours.mutateColour(e.palette,10),speed:e.speed,vx:e.vx,vy:e.vy,x:e.x,y:e.y,px:e.x,py:e.y};var t=Math.random()*sw,n=Math.random()*sh;return{age:0,children:0,dir:Math.random()*Math.PI*2,dirFloat:0,dying:!1,palette:colours.getNextColour(),speed:2.5*Math.random()+2.5,vx:0,vy:0,x:t,y:n,px:t,py:n}}function spawnParticle(e){e.dying=!0,e.children++,particles[numCurrent]=generateParticle(e),numCurrent++}function generate(){zones.push({x:50,y:50,w:100,h:100}),zones.push({x:100,y:250,w:20,h:100}),zones.push({x:300,y:50,w:100,h:300});for(var e=0;e<zones.length;e++){var t=zones[e];hit.ctx.fillStyle="rgba(50,0,0,1)",hit.ctx.fillRect(t.x,t.y,t.w,t.h)}hitpixels=hit.ctx.getImageData(0,0,sw,sh);for(var n=0;n<numInitial;n++)particles[n]=generateParticle()}function render(e){ctx.fillStyle="rgba(0,0,0,0.04)",ctx.fillRect(0,0,sw,sh),ctx.drawImage(hit.canvas,0,0);for(var t=0;t<numCurrent;t++)moveParticle(particles[t]);requestAnimationFrame(render)}rand.setSeed(Math.random()),colours.getRandomPalette(),window.addEventListener("resize",function(){return con.warn("resize disabled!")}),generate(),document.body.appendChild(canvas.canvas),render(0);