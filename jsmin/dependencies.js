"use strict";define("depends",["dom","colours","rand","geom","exps"],function(dom,colours,rand,geom,exps){console.log("ok",arguments);exps()});"use strict";var con=console;var isNode=typeof module!=="undefined";if(isNode){var rand=require("./rand.js")}var colours=function(){var random;if(rand){random=rand.random}else{random=Math.random;con.warn("!!!! colours is using native random")}var paletteIndex=-1,currentPalette=null;var colourIndex=0;var previewCSSAdded=false;function getRandomPalette(warning){if(warning)con.warn("Ensure you call getRandomPalette!");paletteIndex=~~(random()*palettes.length);currentPalette=palettes[paletteIndex];return currentPalette}function setRandomPalette(_paletteIndex){paletteIndex=_paletteIndex;currentPalette=palettes[paletteIndex]}function setPaletteRange(range){if(range>currentPalette.length)return con.warn("setPaletteRange - current palette has less than",range,"colours!");var palette=rand.shuffle(currentPalette.slice());currentPalette=palette.splice(0,range);return currentPalette}function getRandomColour(){if(currentPalette==null)getRandomPalette(true);colourIndex=~~(random()*currentPalette.length);return currentPalette[colourIndex]}function getCurrentColour(){if(currentPalette==null)getRandomPalette(true);return currentPalette[colourIndex]}function getNextColour(offset){if(currentPalette==null)getRandomPalette(true);if(offset!=undefined){colourIndex+=offset}else{colourIndex++}colourIndex+=currentPalette.length;colourIndex%=currentPalette.length;return currentPalette[colourIndex]}function channelToHex(c){var hex=c.toString(16);return hex.length==1?"0"+hex:hex}function rgbToHex(r,g,b){return"#"+channelToHex(r)+channelToHex(g)+channelToHex(b)}function hexToRgb(hex){var r=parseInt(hex.substr(1,2),16),g=parseInt(hex.substr(3,2),16),b=parseInt(hex.substr(5,2),16);return{r:r,g:g,b:b}}function mutateChannel(channel,amount,direction){var mutation=Math.round(channel+(random()-.5)*amount);mutation=mutation>255?255:mutation<=0?0:mutation;return mutation}function mutateHex(hex,amount){var rgb=hexToRgb(hex),r=rgb.r,g=rgb.g,b=rgb.b;r=mutateChannel(r,amount);g=mutateChannel(g,amount);b=mutateChannel(b,amount);return rgbToHex(r,g,b)}function mutateColour(colour,amount){var mutation=mutateHex(colour,amount);return mutation}function mixColours(colours){var mixed={r:0,g:0,b:0};for(var c=0,cl=colours.length;c<cl;c++){var hex=colours[c];var rgb=hexToRgb(hex);mixed.r+=rgb.r;mixed.g+=rgb.g;mixed.b+=rgb.b}mixed.r/=cl;mixed.g/=cl;mixed.b/=cl;mixed.r=parseInt(mixed.r);mixed.g=parseInt(mixed.g);mixed.b=parseInt(mixed.b);return rgbToHex(mixed.r,mixed.g,mixed.b)}function setColourIndex(index){colourIndex=index}function showPalette(){if(currentPalette==null)getRandomPalette(true);var p=dom.element("div");p.className="palette";p.id="palette-"+paletteIndex;for(var j=0;j<currentPalette.length;j++){var colour=currentPalette[j];var c=dom.element("div",{className:"colour",innerHTML:colour,style:{background:colour}});p.appendChild(c)}return p}function showColours(){addPreviewCSS();var h=document.createElement("div");for(var i=0;i<palettes.length;i++){paletteIndex=i;currentPalette=palettes[i];h.appendChild(showPalette())}document.body.appendChild(h);return h}function addPreviewCSS(){var css=[".palette {","\tclear: both;","\theight: 50px;"," margin-bottom: 20px","}",".colour {","\twidth: 100px;","\theight: 50px;","\tfloat: left;","\ttext-align: center;","\tfont-size: 10px;","\tline-height: 50px;","}"].join("");var style=dom.element("style");style.type="text/css";if(style.styleSheet){style.styleSheet.cssText=css}else{style.appendChild(document.createTextNode(css))}document.head.appendChild(style);previewCSSAdded=true}var palettes=[["#333","#ccc"],["#A0C9D9","#F2F0D0","#735438","#A64941","#0D0D0D"],["#D93D93","#629C27","#DEE300","#32393D","#FFFFFF"],["#36190A","#B2460B","#FF6818","#009AA3","#00ECD2"],["#1B69FF","#002875","#0143C2","#FFB002","#FF781E"],["#FFBE10","#FFAE3C","#FF7E49","#E85137","#333C3C"],["#0E1D22","#587077","#555555","#ECEBDF"],["#F2385A","#F5A503","#E9F1DF","#4AD9D9","#36B1BF"],["#E8463E","#611410","#FFCFCD","#038733","#63F598"],["#4F8499","#C95F5F","#003145","#012914","#FCD457"],["#406874","#84D9D9","#B8D9D3","#35402A","#592C1C"],["#8F8164","#D9D7AC","#4F6373","#293845","#14212B"],["#1C2623","#37A672","#E2CA63","#F2884B","#DB3323"],["#FFD7AE","#163A5C","#1D2328","#FE6200","#ADB7BD"],["#FFB919","#8C12B2","#C200FF","#14CC83","#09B26F"],["#8C1822","#BF1725","#594F46","#1C8476","#006B5E"],["#CF9CB3","#626161","#DEBC92","#B68256","#EDDFBB"],["#A6442E","#A65644","#BF7665","#D9A79C","#F2F2F2"],["#200101","#421C0C","#C9A860","#4FA35E","#076043"],["#435939","#737268","#D9D4BA","#D9D5C5","#0D0000"],["#467302","#97BF04","#D97904","#A62F03","#590902"],["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900"],["#FE4365","#FC9D9A","#F9CDAD","#C8C8A9","#83AF9B"],["#ECD078","#D95B43","#C02942","#542437","#53777A"],["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"],["#774F38","#E08E79","#F1D4AF","#ECE5CE","#C5E0DC"],["#E8DDCB","#CDB380","#036564","#033649","#031634"],["#490A3D","#BD1550","#E97F02","#F8CA00","#8A9B0F"],["#594F4F","#547980","#45ADA8","#9DE0AD","#E5FCC2"],["#00A0B0","#6A4A3C","#CC333F","#EB6841","#EDC951"],["#E94E77","#D68189","#C6A49A","#C6E5D9","#F4EAD5"],["#D9CEB2","#948C75","#D5DED9","#7A6A53","#99B2B7"],["#FFFFFF","#CBE86B","#F2E9E1","#1C140D","#CBE86B"],["#EFFFCD","#DCE9BE","#555152","#2E2633","#99173C"],["#3FB8AF","#7FC7AF","#DAD8A7","#FF9E9D","#FF3D7F"],["#343838","#005F6B","#008C9E","#00B4CC","#00DFFC"],["#413E4A","#73626E","#B38184","#F0B49E","#F7E4BE"],["#99B898","#FECEA8","#FF847C","#E84A5F","#2A363B"],["#FF4E50","#FC913A","#F9D423","#EDE574","#E1F5C4"],["#554236","#F77825","#D3CE3D","#F1EFA5","#60B99A"],["#351330","#424254","#64908A","#E8CAA4","#CC2A41"],["#00A8C6","#40C0CB","#F9F2E7","#AEE239","#8FBE00"],["#FF4242","#F4FAD2","#D4EE5E","#E1EDB9","#F0F2EB"],["#655643","#80BCA3","#F6F7BD","#E6AC27","#BF4D28"],["#8C2318","#5E8C6A","#88A65E","#BFB35A","#F2C45A"],["#FAD089","#FF9C5B","#F5634A","#ED303C","#3B8183"],["#BCBDAC","#CFBE27","#F27435","#F02475","#3B2D38"],["#D1E751","#FFFFFF","#000000","#4DBCE9","#26ADE4"],["#FF9900","#424242","#E9E9E9","#BCBCBC","#3299BB"],["#5D4157","#838689","#A8CABA","#CAD7B2","#EBE3AA"],["#5E412F","#FCEBB6","#78C0A8","#F07818","#F0A830"],["#EEE6AB","#C5BC8E","#696758","#45484B","#36393B"],["#1B676B","#519548","#88C425","#BEF202","#EAFDE6"],["#F8B195","#F67280","#C06C84","#6C5B7B","#355C7D"],["#452632","#91204D","#E4844A","#E8BF56","#E2F7CE"],["#F04155","#FF823A","#F2F26F","#FFF7BD","#95CFB7"],["#F0D8A8","#3D1C00","#86B8B1","#F2D694","#FA2A00"],["#2A044A","#0B2E59","#0D6759","#7AB317","#A0C55F"],["#67917A","#170409","#B8AF03","#CCBF82","#E33258"],["#B9D7D9","#668284","#2A2829","#493736","#7B3B3B"],["#BBBB88","#CCC68D","#EEDD99","#EEC290","#EEAA88"],["#A3A948","#EDB92E","#F85931","#CE1836","#009989"],["#E8D5B7","#0E2430","#FC3A51","#F5B349","#E8D5B9"],["#B3CC57","#ECF081","#FFBE40","#EF746F","#AB3E5B"],["#AB526B","#BCA297","#C5CEAE","#F0E2A4","#F4EBC3"],["#607848","#789048","#C0D860","#F0F0D8","#604848"],["#515151","#FFFFFF","#00B4FF","#EEEEEE"],["#3E4147","#FFFEDF","#DFBA69","#5A2E2E","#2A2C31"],["#300030","#480048","#601848","#C04848","#F07241"],["#1C2130","#028F76","#B3E099","#FFEAAD","#D14334"],["#A8E6CE","#DCEDC2","#FFD3B5","#FFAAA6","#FF8C94"],["#EDEBE6","#D6E1C7","#94C7B6","#403B33","#D3643B"],["#AAB3AB","#C4CBB7","#EBEFC9","#EEE0B7","#E8CAAF"],["#FDF1CC","#C6D6B8","#987F69","#E3AD40","#FCD036"],["#CC0C39","#E6781E","#C8CF02","#F8FCC1","#1693A7"],["#3A111C","#574951","#83988E","#BCDEA5","#E6F9BC"],["#FC354C","#29221F","#13747D","#0ABFBC","#FCF7C5"],["#B9D3B0","#81BDA4","#B28774","#F88F79","#F6AA93"],["#5E3929","#CD8C52","#B7D1A3","#DEE8BE","#FCF7D3"],["#230F2B","#F21D41","#EBEBBC","#BCE3C5","#82B3AE"],["#5C323E","#A82743","#E15E32","#C0D23E","#E5F04C"],["#4E395D","#827085","#8EBE94","#CCFC8E","#DC5B3E"],["#DAD6CA","#1BB0CE","#4F8699","#6A5E72","#563444"],["#5B527F","#9A8194","#C6A9A3","#EBD8B7","#99BBAD"],["#C2412D","#D1AA34","#A7A844","#A46583","#5A1E4A"],["#D1313D","#E5625C","#F9BF76","#8EB2C5","#615375"],["#9D7E79","#CCAC95","#9A947C","#748B83","#5B756C"],["#1C0113","#6B0103","#A30006","#C21A01","#F03C02"],["#8DCCAD","#988864","#FEA6A2","#F9D6AC","#FFE9AF"],["#CFFFDD","#B4DEC1","#5C5863","#A85163","#FF1F4C"],["#75616B","#BFCFF7","#DCE4F7","#F8F3BF","#D34017"],["#B6D8C0","#C8D9BF","#DADABD","#ECDBBC","#FEDCBA"],["#382F32","#FFEAF2","#FCD9E5","#FBC5D8","#F1396D"],["#E3DFBA","#C8D6BF","#93CCC6","#6CBDB5","#1A1F1E"],["#A7C5BD","#E5DDCB","#EB7B59","#CF4647","#524656"],["#413D3D","#040004","#C8FF00","#FA023C","#4B000F"],["#9DC9AC","#FFFEC7","#F56218","#FF9D2E","#919167"],["#A8A7A7","#CC527A","#E8175D","#474747","#363636"],["#EDF6EE","#D1C089","#B3204D","#412E28","#151101"],["#C1B398","#605951","#FBEEC2","#61A6AB","#ACCEC0"],["#FFEDBF","#F7803C","#F54828","#2E0D23","#F8E4C1"],["#7E5686","#A5AAD9","#E8F9A2","#F8A13F","#BA3C3D"],["#5E9FA3","#DCD1B4","#FAB87F","#F87E7B","#B05574"],["#951F2B","#F5F4D7","#E0DFB1","#A5A36C","#535233"],["#FFFBB7","#A6F6AF","#66B6AB","#5B7C8D","#4F2958"],["#000000","#9F111B","#B11623","#292C37","#CCCCCC"],["#EFF3CD","#B2D5BA","#61ADA0","#248F8D","#605063"],["#9CDDC8","#BFD8AD","#DDD9AB","#F7AF63","#633D2E"],["#FCFEF5","#E9FFE1","#CDCFB7","#D6E6C3","#FAFBE3"],["#84B295","#ECCF8D","#BB8138","#AC2005","#2C1507"],["#0CA5B0","#4E3F30","#FEFEEB","#F8F4E4","#A5B3AA"],["#4D3B3B","#DE6262","#FFB88C","#FFD0B3","#F5E0D3"],["#B5AC01","#ECBA09","#E86E1C","#D41E45","#1B1521"],["#4E4D4A","#353432","#94BA65","#2790B0","#2B4E72"],["#379F7A","#78AE62","#BBB749","#E0FBAC","#1F1C0D"],["#FFE181","#EEE9E5","#FAD3B2","#FFBA7F","#FF9C97"],["#A70267","#F10C49","#FB6B41","#F6D86B","#339194"],["#30261C","#403831","#36544F","#1F5F61","#0B8185"],["#2D2D29","#215A6D","#3CA2A2","#92C7A3","#DFECE6"],["#F38A8A","#55443D","#A0CAB5","#CDE9CA","#F1EDD0"],["#793A57","#4D3339","#8C873E","#D1C5A5","#A38A5F"]];return{getRandomPalette:getRandomPalette,getRandomColour:getRandomColour,getCurrentColour:getCurrentColour,getNextColour:getNextColour,getPalleteIndex:function getPalleteIndex(){return paletteIndex},setPalette:function setPalette(p){currentPalette=p},setRandomPalette:setRandomPalette,setColourIndex:setColourIndex,setPaletteRange:setPaletteRange,showPalette:showPalette,showColours:showColours,mutateColour:mutateColour,mixColours:mixColours}}();if(typeof module!=="undefined")module.exports=colours;"use strict";var con=console;var isNode=typeof module!=="undefined";if(isNode){var Canvas=require("canvas")}var dom=function(){function setProps(el,props){for(var p in props){if(p=="style"){for(var s in props[p]){el[p][s]=props[p][s]}}else{el[p]=props[p]}}return el}function setAttributes(el,attrs){for(var p in attrs){el.setAttribute(p,attrs[p])}return el}function element(element,props){var el=document.createElement(element);setProps(el,props);el.setSize=function(w,h){el.style.width=w+"px";el.style.height=h+"px"};return el}function canvas(w,h){var c;if(isNode){c=new Canvas(w,h)}else{c=element("canvas");c.width=w;c.height=h}var ctx=c.getContext("2d");var circleRads=Math.PI*2;ctx.drawCircle=function(x,y,r){ctx.arc(x,y,r,0,circleRads,false)};var setSize=function setSize(w,h,preserveCanvas){if(preserveCanvas){c.setSize(w,h)}else{c.width=w;c.height=h}};return{setSize:setSize,canvas:c,ctx:ctx}}function button(txt,props){props=props||{};if(props.innerHTML)con.warn("Specify butotn text as 1st param");props.innerHTML=txt;var b=element("button",props);return b}function svg(tag,props){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);setAttributes(el,props);el.setSize=function(w,h){el.setAttribute("width",w);el.setAttribute("height",h)};el.clearRect=function(){};el.fillRect=function(){con.warn("svg.fillRect not implemented")};return el}function on(target,events,callback){for(var i=0,il=events.length;i<il;i++){target.addEventListener(events[i],callback)}}function off(target,events,callback){for(var i=0,il=events.length;i<il;i++){target.removeEventListener(events[i],callback)}}function trigger(target,events){for(var i=0,il=events.length;i<il;i++){target.dispatchEvent(events[i])}}return{element:element,canvas:canvas,button:button,svg:svg,on:on,off:off,trigger:trigger}}();if(isNode)module.exports=dom;"use strict";var con=con||console;var geom=function(){function intersectionBetweenPoints(p0,p1,p2,p3){var p0_x=p0.x,p0_y=p0.y,p1_x=p1.x,p1_y=p1.y,p2_x=p2.x,p2_y=p2.y,p3_x=p3.x,p3_y=p3.y;if(p0_x==p2_x&&p0_y==p2_y)return null;if(p0_x==p3_x&&p0_y==p3_y)return null;if(p1_x==p2_x&&p1_y==p2_y)return null;if(p1_x==p3_x&&p1_y==p3_y)return null;var s1_x,s1_y,s2_x,s2_y;s1_x=p1_x-p0_x;s1_y=p1_y-p0_y;s2_x=p3_x-p2_x;s2_y=p3_y-p2_y;var s,t;s=(-s1_y*(p0_x-p2_x)+s1_x*(p0_y-p2_y))/(-s2_x*s1_y+s1_x*s2_y);t=(s2_x*(p0_y-p2_y)-s2_y*(p0_x-p2_x))/(-s2_x*s1_y+s1_x*s2_y);if(s>=0&&s<=1&&t>=0&&t<=1){return{x:p0_x+t*s1_x,y:p0_y+t*s1_y}}return null}function linearEquationFromPoints(p0,p1){var dx=p1.x-p0.x;var dy=p1.y-p0.y;if(dx==0||dx>-1e-6&&dx<1e-6){con.warn("divide by zero error in geom.linearEquationFromPoints");return{c:null,m:dy>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,x:p0.x}}var m=dy/dx;var c=p0.y-m*p0.x;return{c:c,m:m}}function intersectionAnywhere(p0,p1,p2,p3){var intersectionX,intersectionY;var line0=linearEquationFromPoints(p0,p1);var line1=linearEquationFromPoints(p2,p3);var isLine1Vertical=line0.c===null;var isLine2Vertical=line1.c===null;if(isLine1Vertical&&isLine2Vertical){return null}else if(isLine1Vertical){intersectionX=line0.x;intersectionY=line1.m*intersectionX+line1.c}else if(isLine2Vertical){intersectionX=line1.x;intersectionY=line0.m*intersectionX+line0.c}else{if(line0.m-line1.m==0){return null}else{intersectionX=(line1.c-line0.c)/(line0.m-line1.m);intersectionY=line0.m*intersectionX+line0.c}}if(intersectionY==0){con.log("intersectionY IS 0!",isLine1Vertical,isLine2Vertical,line0,line1);con.log("intersectionY p0 p1",p0,p1);con.log("intersectionY p2 p3",p2,p3)}return{x:intersectionX,y:intersectionY}}function pointInPolygon(polygon,point){var nvert=polygon.length;if(nvert&&nvert>=3&&point.x!==undefined&&point.y!==undefined){var testx=point.x;var testy=point.y;var i,j,c=false;for(i=0,j=nvert-1;i<nvert;j=i++){var vxi=polygon[i].x;var vyi=polygon[i].y;var vxj=polygon[j].x;var vyj=polygon[j].y;if(vyi>testy!=vyj>testy&&testx<(vxj-vxi)*(testy-vyi)/(vyj-vyi)+vxi){c=!c}}return c}else{if(nvert<3){con.warn("pointInPolygon error - polygon has less than 3 points",polygon)}else{con.warn("pointInPolygon error - invalid data vertices:",nvert,"polygon:",polygon,"point:",point)}return null}}function linearInterpolate(a,b,ratio){return{x:a.x+(b.x-a.x)*ratio,y:a.y+(b.y-a.y)*ratio}}function perpendincularPoint(a,b,distance){var p={x:a.x-b.x,y:a.y-b.y};var n={x:-p.y,y:p.x};var normalisedLength=Math.sqrt(n.x*n.x+n.y*n.y);n.x/=normalisedLength;n.y/=normalisedLength;return{x:distance*n.x,y:distance*n.y}}function parallelPoints(p0,p1,offset){var per=perpendincularPoint(p0,p1,offset);var parrallel0={x:p0.x+per.x,y:p0.y+per.y};var parrallel1={x:p1.x+per.x,y:p1.y+per.y};return[parrallel0,parrallel1]}function insetPoints(points,offset){var parallels=[],insets=[];for(var i=0,il=points.length;i<il;i++){var pp0=points[i];var pp1=points[(i+1)%il];parallels.push(parallelPoints(pp0,pp1,offset))}con.log("parallels.length",parallels.length);for(i=0,il=parallels.length;i<il;i++){var parallel0=parallels[i];var parallel1=parallels[(i+1)%il];var intersection=intersectionAnywhere(parallel0[0],parallel0[1],parallel1[0],parallel1[1]);con.log("intersection",intersection);var inside=pointInPolygon(points,intersection);if(inside){insets.push(intersection)}else{con.warn("geom.insetPoints fail, not inside");return null}}return insets}return{insetPoints:insetPoints,intersectionAnywhere:intersectionAnywhere,intersectionBetweenPoints:intersectionBetweenPoints,lerp:linearInterpolate,linearEquationFromPoints:linearEquationFromPoints,parallelPoints:parallelPoints,perpendincularPoint:perpendincularPoint,pointInPolygon:pointInPolygon}}();if(typeof module!=="undefined")module.exports=geom;"use strict";var con=console;var rand=function(){var m=4294967296,a=1664525,c=1013904223,seed,z;var alphaToInteger=function alphaToInteger(s){var num=0;for(var i=0,il=s.length;i<il;i++){num+=s.charCodeAt(i)*c;num%=m}return num};return{setSeed:function setSeed(val){var valDefined=val||val===0;if(valDefined){if(/[^\d]/.test(val)){val=alphaToInteger(val)}else{val=Number(val)}}else{val=Math.round(Math.random()*m)}z=seed=val},getSeed:function getSeed(){return seed},random:function random(){if(z===undefined){console.warn("no seed set");return null}z=(a*z+c)%m;return z/m},getLastRandom:function getLastRandom(){return z/m},getNumber:function getNumber(min,max){return min+this.random()*(max-min)},getInteger:function getInteger(min,max){return Math.floor(this.getNumber(min,max+1))},alphaToInteger:alphaToInteger,shuffle:function shuffle(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(rand.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp}return array}}}();if(typeof module!=="undefined")module.exports=rand;"use strict";var progressBar;function progress(eventName,eventParam){con.log("experiments progress",eventName,eventParam);switch(eventName){case"render:progress":progressBar.style.width=eventParam*100+"%";progressBar.style.height="10px";break;case"render:complete":progressBar.style.height="0px";break}}function exps(experimentsDetails){var experiments=experimentsDetails.list;return function(){var info;var infoShowing=false;var interactedShowing=false;progressBar=dom.element("div",{id:"progress",style:{width:0,height:0}});document.body.appendChild(progressBar);var holder=dom.element("div",{id:"experiment-holder"});document.body.appendChild(holder);var buttonsNav=dom.element("div",{className:"exps-buttons"});document.body.appendChild(buttonsNav);var buttonClose=dom.button("X",{className:"exps-button"});buttonsNav.appendChild(buttonClose);dom.on(buttonClose,["click","touchend"],function(e){window.location="/"});var buttonInfo=dom.button("?",{className:"exps-button"});buttonsNav.appendChild(buttonInfo);dom.on(buttonInfo,["click","touchend"],showInfo);var panelInfo=dom.element("div",{className:"exps-info"});var panelInfoDetails=dom.element("div",{className:"exps-info-details"});var panelNav=dom.element("div",{className:"exps-buttons interacted"});var panelButtonClose=dom.button("X",{className:"exps-button"});dom.on(panelButtonClose,["click","touchend"],hideInfo);document.body.appendChild(panelInfo);panelInfo.appendChild(panelNav);panelNav.appendChild(panelButtonClose);panelInfo.appendChild(panelInfoDetails);function createStyleSheet(s){var link=dom.element("link");link.rel="stylesheet";link.type="text/css";link.href=s+".css";document.head.appendChild(link)}function loadExperiment(index){var src=experiments[index];require(src,function(experiment){if(experiment){con.log("require loaded...",experiment);experimentLoaded(experiment)}else{con.warn("require loaded... but experiment is null",experiment,arguments)}})}function showButtons(){buttonClose.style.display="none";buttonInfo.style.display="none";for(var e in experiments){var button=dom.element("button",{className:"exp"});dom.on(button,["click"],function(event){window.location="?"+event.target.key});var key=experiments[e][0];var title=key;var expDetails=experimentsDetails.getDetails(key);if(expDetails&&expDetails.title){title=expDetails.title}button.key=key;button.innerHTML=title;document.body.appendChild(button)}}function showInfo(){infoShowing=true;panelInfo.classList.add("displayed");panelInfoDetails.innerHTML="<h4>Experimental Graphics</h4>"+"<h1>"+info.title+"</h1>"+info.description+"<p><a href='https://github.com/raurir/experimental-graphics/blob/master/js/"+info.key+".js' target='_blank'>SRC on Github</a></p>"}function hideInfo(){panelInfo.classList.remove("displayed");infoShowing=false}if(window.location.search){var key=window.location.search.split("?")[1],index=0,found=false;var seed=key.split(",");if(seed[1]){key=seed[0];seed=seed[1];rand.setSeed(seed)}else{rand.setSeed()}while(index<experiments.length&&found==false){if(experiments[index][0]==key){found=true}else{index++}}loadExperiment(index);info=experimentsDetails.getDetails(key);if(info){info.key=key}else{buttonsNav.removeChild(buttonInfo)}dom.on(document.body,["click","touchstart"],function(e){if(interactedShowing)return;interactedShowing=true;buttonsNav.classList.add("interacted")})}else{showButtons()}var currentExperiment;function resize(){var sw=window.innerWidth,sh=window.innerHeight;if(currentExperiment.resize)currentExperiment.resize(sw,sh)}function initWindowListener(){dom.on(window,["resize"],resize)}function experimentLoaded(exp){currentExperiment=exp;if(currentExperiment.stage){holder.appendChild(currentExperiment.stage)}else{con.warn("experimentLoaded, but no stage:",currentExperiment.stage)}initWindowListener();currentExperiment.init({size:800});resize()}return{load:loadExperiment,experiments:experiments}}}define("exps",["exps_details"],exps);"use strict";define("exps_details",function(){var list=[["additive"],["aegean_sun"],["alien"],["anemone_three","THREE"],["any_image_url"],["attractor"],["ball_and_chain","THREE"],["bezier_flow"],["box","maze"],["circle_packing"],["circle_packing_zoom_loop"],["circle_sectors"],["codevember","THREE","TweenMax"],["corona_sine"],["creature"],["cube_fractal_zoom","THREE","TweenMax"],["cube_pixelator","THREE","TweenMax"],["experiment_template_babel"],["fool","css/fool"],["fur"],["frame_inverse"],["hexagon_tile"],["hex_rounded","THREE"],["infinite_scrolling_cogs"],["infinite_stairs","THREE"],["isometric_cubes"],["isometric_words","THREE","TweenMax"],["lego_stack","THREE"],["linked_line"],["mandala"],["maze"],["maze_cube","linked_line","THREE"],["meandering_polygons"],["mining_branches"],["molecular_three","THREE"],["nested_rotating_polygon","ease"],["oscillate_curtain"],["oscillator"],["overflow"],["pattern_check","css/pattern_check"],["pattern_circles"],["perlin_grid","THREE","TweenMax"],["perlin_leaves"],["perlin_noise"],["polyhedra","3d"],["polyhedra_three","THREE","../lib/stemkoski/polyhedra"],["pine_three","THREE"],["race_lines_three","THREE","TweenMax"],["rainbow_particles"],["rectangular_fill"],["recursive"],["recursive_circle"],["recursive_polygon"],["seven_four_sevens"],["spiral_even"],["squaretracer"],["synth_ambient","Tone"],["tea"],["tentacle"],["tetris_cube","THREE","TweenMax"],["text_grid"],["triangles","THREE","TweenMax"],["tunnel_tour_three","THREE","TweenMax"],["typography"],["voronoi_stripes","voronoi"],["zoned_particles"]];var details={ball_and_chain:{title:"Ball and Chain",description:"<p>In the celebration of the <a href='http://www.abc.net.au/news/2017-11-15/australia-reacts-to-the-same-sex-marriage-survey-results/9151826' target='_blank'>Yes</a> Vote, started making this ball and chain in THREE + Cannon. Took a bit longer than expected, hopefully I can make a rainbow happy one for legalisation day.</p><p>Something along the lines of \"It's raining ball and chains\"</p>"},cube_fractal_zoom:{title:"Cube Fractal Zoom",description:"<p>Zooming into a cube that subdivides into muliple cubes.</p><p>Envisioned version is for each subdivision to be variable slice amounts rather than 2x2x2. Someday.</p><p>Also would like some kind of infinite shader, potentially perlin noise.</p>"},cube_pixelator:{title:"Cube pixelator",description:"<p>Should be called 'Plane pixelator' since they are planes, not cubes.</p><p>Planes are distributed through a 2 dimensional grid with each plane representing a pixel.</p><p>Each plane is exactly the same colour and this colour never changes. Instead, each plane rotates accordingly to catch the lighting within the scene and by doing so adapts its apparent shade, and thereby creates an image.</p>"},frame_inverse:{title:"Frame Inverse",description:"<p>Drawing rectangles, aye...</p><p>listen to <a href='https://youngerbrothermusic.bandcamp.com/album/the-last-days-of-gravity' target='_blank'>Younger Brother - Last Days of Gravity</a>.</p>"},fur:{title:"Fur",description:"<p>2 channels of perlin noise affect x and y lean of each hair of fur.</p>"},hex_rounded:{title:"Hex Rounded",description:"<p>Hex Rounded? Some title, but that's what it's been dubbed since inception in 2014 or so. Never worked properly, so fixed it up for Codevember 2017.</p>"},infinite_scrolling_cogs:{title:"Infinite Scrolling Cogs",description:"<p>Remake of <a href='https://codepen.io/raurir/pen/eknLg' target='_blank'>an old experiment</a> this time it's scrolling, non ineractive and more of a toon rendering style.</p><p>The thing I liked the best about the original, and this algorithm, is the cogs are very close to mathematically correct; not only do they animate in a life like fashion on screen, I am confident a 3D print of the geometry involved would result in a smoothly running friction free machine.</p><p>This algorithm continually creates canvases with no garbage collection. It will crash the browser eventually, I imagine, but you'd be bored after a minute anyway?</p>"},infinite_stairs:{title:"Infinite Stairs",description:"<p>Work in progress</p><p>Trying to make an infinite staircase, potentially spooky.</p>"},isometric_words:{title:"Isometric Words",description:"<p>Muddling up cubes by using the simplicity of Isometric projection.</p><p>Randomly offset the objects along the same axis the camera is looking down.</p>"},lego_stack:{title:"Lego Stack",description:"<p>Important scientifically realistic simulation to study how high lego can be stacked.</p>"},recursive_circle:{title:"Recursive Circle",description:"<p>Recursive rendering. Managed to not crash my browser creating this! Life achievement.</p>"},seven_four_sevens:{title:"Seven Four Sevens",description:"<p>An old flash experiment remade in javascript.</p><p>Thanks to the demise of flash I will lose heaps of graphical experiments, some irretrievably lost due to inability to open .FLAs - luckily this one had the source in a .as file.</p>"},synth_ambient:{title:"Synth Ambient",description:"<h2>This will be loud!</h2><p>A quick trip into audio synthesis in the browser.</p><p>That's the thing about synthesis, you can create out of control waveforms quite easily, hence the volume.</p><p>Using <a href='https://github.com/Tonejs/Tone.js' target='_blank'>Tone.js</a> for all the audio generation, this experiment creates a number of randomised effects, a bunch of randomised synthesizers, and with those creates a randomised drum track, randomised chords and a ranomised arpeggio.</p>"},triangles:{title:"Triangles",description:"<p>A plane of triangles fall away as they zoom towards the screen.</p><p>Probably a bit heavy for phones.</p>"}};return{list:list,getDetails:function getDetails(exp){return details[exp]||false},getFeature:function getFeature(key){var features={codevember:[{day:1,title:details.cube_pixelator.title,link:"cube_pixelator"},{day:2,title:details.synth_ambient.title,link:"synth_ambient"},{day:3,title:"Refactored Experiments"},{day:4,title:"Made Codevember"},{day:5,title:"fail :("},{day:6,title:details.isometric_words.title,link:"isometric_words"},{day:7,title:"fail ..."},{day:8,title:details.cube_fractal_zoom.title,link:"cube_fractal_zoom"},{day:9,title:details.infinite_scrolling_cogs.title,link:"infinite_scrolling_cogs"},{day:10,title:"nope :|"},{day:11,title:details.infinite_stairs.title,link:"infinite_stairs"},{day:12,title:"much fail."},{day:13,title:details.seven_four_sevens.title,link:"seven_four_sevens"},{day:14,title:details.triangles.title,link:"triangles"},{day:15,title:"very..."},{day:16,title:"...lame!"},{day:17,title:details.ball_and_chain.title,link:"ball_and_chain"},{day:18,title:details.fur.title,link:"fur"},{day:19,title:details.recursive_circle.title,link:"recursive_circle"},{day:20,title:details.lego_stack.title,link:"lego_stack"},{day:21,title:details.hex_rounded.title,link:"hex_rounded"},{day:22,title:"faily McFail O'clock"},{day:23,title:details.frame_inverse.title,link:"frame_inverse"}]};return features[key]||false}}});