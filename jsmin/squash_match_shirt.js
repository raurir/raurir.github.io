"use strict";var isNode="undefined"!=typeof module;if(isNode)var Canvas=require("canvas"),colours=require("./colours.js"),dom=require("./dom.js"),fillDither=require("./fill/dither.js"),fs=require("fs"),rand=require("./rand.js"),Image=Canvas.Image;var squash_match_shirt=function(){return function(){var r=rand.instance(),c=colours.instance(r),stage=dom.canvas(1,1),canvas=stage.canvas,ctx=stage.ctx,size=void 0,sizeX=void 0,sizeY=void 0,sectors=10,angle=1/sectors*Math.PI*2;function generate(){for(var i=0;i<sectors;i++)rot=i/sectors,settings={alternate:!void 0,baseRotation:(.25+1/sectors/2)*Math.PI*2,bg:"transparent",fg:"#F4502B",shape:1,varyRotation:!1,wiggle:0},pattern=fillDither({c:c,r:r,size:1*(d=size/2),settings:settings}),patternFill=ctx.createPattern(pattern,"no-repeat"),ctx.save(),ctx.translate(size/2,size/2),ctx.rotate(rot*Math.PI*2),ctx.fillStyle=patternFill,ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(d,0),ctx.lineTo(Math.cos(angle)*d,Math.sin(angle)*d),ctx.closePath(),ctx.fill(),ctx.stroke(),ctx.restore();var rot,settings,d,pattern,patternFill,url,scale,img,fontSize;ctx.globalCompositeOperation="destination-out",ctx.beginPath(),ctx.drawCircle(size/2,size/2,size/2*.6),ctx.closePath(),ctx.fill(),ctx.globalCompositeOperation="source-over",url="./SquashMatchIconCircleHiRes.png",scale=4e-4*size,(img=new Image).onload=function(){var width=img.width,height=img.height;ctx.translate(size/2,size/2),ctx.scale(scale,scale),ctx.translate(-width/2,-height/2),ctx.drawImage(img,0,0)},img.onerror=function(err){},img.src=url,fontSize=.1*size,ctx.save(),ctx.translate(size/2,size/2),ctx.font=fontSize+"px MyriadPro-Bold",ctx.fillStyle="black",ctx.fillText("SquashMatch",0,0),ctx.restore()}return{init:function(options){size=options.size,sizeY=sizeX=size,r.setSeed(options.seed),c.setPalette(["#fff","transparent"]),stage.setSize(sizeX,sizeY),generate()},settings:{},stage:canvas,update:function(){}}}};if(isNode){var ex=squash_match_shirt(),inst=(module.exports=ex)();inst.init({size:1500}),setTimeout(function(){var filename=__dirname+"/../export/squash_match_shirt_"+(new Date).getTime()+".png";inst.stage.toBuffer(function(err,buf){err||fs.writeFile(filename,buf,function(){})})},500)}else define("squash_match_shirt",squash_match_shirt);